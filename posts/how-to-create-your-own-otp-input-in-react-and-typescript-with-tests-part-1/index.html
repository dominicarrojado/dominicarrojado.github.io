<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#2c2c34"/><link rel="icon" href="https://dominicarrojado.com/favicon.ico"/><link rel="manifest" href="https://dominicarrojado.com/manifest.json"/><meta name="twitter:card" content="summary_large_image"/><meta property="og:image" content="https://dominicarrojado.com/images/pages/guides-tips-and-tricks-to-web-development.png"/><meta property="og:image:alt" content="Dominic Arrojado | Guides, Tips and Tricks to Web Development"/><meta property="og:image:type" content="image/png"/><meta property="og:image:width" content="2400"/><meta property="og:image:height" content="1254"/><meta property="og:site_name" content="Dominic Arrojado"/><link rel="preload" href="/fonts/Roboto-Light.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Light.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-LightItalic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-LightItalic.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Regular.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Italic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Italic.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Medium.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Medium.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-MediumItalic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-MediumItalic.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Bold.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Bold.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-BoldItalic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-BoldItalic.woff" as="font" type="font/woff" crossorigin="anonymous"/><title>How to create your own OTP input in React and TypeScript with tests (Part 1) | Dominic Arrojado</title><meta name="robots" content="index,follow"/><meta name="description" content="Learn how to build a modern OTP input component in a reactive and reusable way"/><meta property="og:title" content="How to create your own OTP input in React and TypeScript with tests (Part 1) | Dominic Arrojado"/><meta property="og:description" content="Learn how to build a modern OTP input component in a reactive and reusable way"/><meta property="og:url" content="https://dominicarrojado.com/posts/how-to-create-your-own-otp-input-in-react-and-typescript-with-tests-part-1/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2022-06-16T14:00:00Z"/><meta property="article:modified_time" content="2022-06-16T14:00:00Z"/><meta property="article:author" content="https://dominicarrojado.com/about/"/><link rel="canonical" href="https://dominicarrojado.com/posts/how-to-create-your-own-otp-input-in-react-and-typescript-with-tests-part-1/"/><meta name="next-head-count" content="39"/><link rel="preload" href="/_next/static/css/15a71a53b857db9b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/15a71a53b857db9b.css" data-n-g=""/><link rel="preload" href="/_next/static/css/82d01f71dc75279c.css" as="style"/><link rel="stylesheet" href="/_next/static/css/82d01f71dc75279c.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-6d9d10b8fc4eebc8.js" defer=""></script><script src="/_next/static/chunks/framework-433e73989db4e225.js" defer=""></script><script src="/_next/static/chunks/main-c51b0b3c89045435.js" defer=""></script><script src="/_next/static/chunks/pages/_app-f4e8f9b307da76e5.js" defer=""></script><script src="/_next/static/chunks/216-1077b041778ead2e.js" defer=""></script><script src="/_next/static/chunks/466-2aafae0e90314603.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-101bdca647312681.js" defer=""></script><script src="/_next/static/-hCx0pib_S3vqaOCyzFlZ/_buildManifest.js" defer=""></script><script src="/_next/static/-hCx0pib_S3vqaOCyzFlZ/_ssgManifest.js" defer=""></script><script src="/_next/static/-hCx0pib_S3vqaOCyzFlZ/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><noscript>
            <iframe
              src="https://www.googletagmanager.com/ns.html?id=GTM-TSMLTPT"
              height="0"
              width="0"
              style="display: none; visibility: hidden"
            ></iframe>
          </noscript><div tabindex="-1" class="h-full outline-none"><header><a href="#main" tabindex="0" class="absolute -top-96 -left-96 w-px h-px text-center text-white overflow-hidden -z-50 focus:top-4 focus:inset-x-0 focus:m-auto focus:w-44 focus:h-auto focus:z-50 focus:sm:w-52 focus:xl:w-56">Skip to main content</a><a class="group fixed top-3.5 left-3.5 z-50 flex shadow-3xl border border-white bg-gray-750 bg-opacity-90 p-1.5 transform transition ease-in-out duration-500 hover:shadow-md hover:bg-opacity-100 motion-reduce:transition-none sm:top-4 sm:left-4 md:top-6 md:left-8 md:border-2 xl:left-9 xl:p-2 delay-700 opacity-0 -translate-y-full" aria-label="Dominic Arrojado logo" href="/"><svg viewBox="0 0 25750 29700" role="img" class="w-7 h-7 text-white transition-colors duration-300 sm:w-8 sm:h-8 md:w-10 md:h-10 xl:w-11 xl:h-11"><path fill="currentColor" d="M4850 19266H1025V2039l4600-129c2511 0 4500 735 5970 2206 1470 1470 2206 3423 2206 5854 0 6199-2985 9296-8951 9296zM4086 4719v11751c494 48 1025 72 1599 72 1543 0 2752-558 3624-1679s1310-2688 1310-4705c0-3684-1712-5524-5135-5524-329 0-795 28-1398 85zm17656 21711l-1437-3969h-6721l974-2655h4730l-2242-6854 1518-4167 7010 17645zM17826 435h3307L10351 29313H7044l4243-11322c1982-1513 2973-4055 2973-7627 0-171-4-340-11-506l3577-9423z"></path></svg></a><div class="fixed flex items-end top-3 right-1 z-50 sm:right-2 md:top-6 md:right-4 xl:top-7" data-testid="header-buttons"><button type="button" aria-expanded="false" aria-controls="dialog-menu" aria-haspopup="dialog" class="group flex items-center flex-col min-w-12 pt-3 pb-2 px-2 outline-none md:min-w-15.5 md:px-3 xl:min-w-18.5"><div class="w-6 h-0.5 bg-gray-400 rounded dark:bg-gray-300 transform transition group-hover:bg-gray-500 group-focus-visible:bg-gray-500 motion-reduce:transition-none dark:group-hover:bg-white dark:group-focus-visible:bg-white md:w-7 md:h-1 xl:w-8 duration-1000 opacity-0 translate-x-1/2" style="transition-delay:500ms" data-testid="menu-stack"></div><div class="w-6 h-0.5 bg-gray-400 rounded dark:bg-gray-300 transform transition group-hover:bg-gray-500 group-focus-visible:bg-gray-500 motion-reduce:transition-none dark:group-hover:bg-white dark:group-focus-visible:bg-white md:w-7 md:h-1 xl:w-8 mt-1.5 duration-1000 opacity-0 -translate-x-1/2" style="transition-delay:650ms" data-testid="menu-stack"></div><div class="w-6 h-0.5 bg-gray-400 rounded dark:bg-gray-300 transform transition group-hover:bg-gray-500 group-focus-visible:bg-gray-500 motion-reduce:transition-none dark:group-hover:bg-white dark:group-focus-visible:bg-white md:w-7 md:h-1 xl:w-8 mt-1.5 duration-1000 opacity-0 translate-x-1/2" style="transition-delay:800ms" data-testid="menu-stack"></div><div class="mt-1.5 text-gray-400 text-3xs font-normal uppercase select-none dark:text-gray-300 transform transition-transform-opacity-color group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-gray-100 md:mt-2 md:text-2xs xl:text-xs duration-700 delay-1000 opacity-0 -translate-y-3">Menu</div></button></div><div class="hidden lg:block lg:fixed lg:bottom-3 lg:right-7 lg:z-40" data-testid="header-social"><ul class="max-w-full mt-10 flex flex-wrap justify-center lg:mt-0"><li class="flex lg:transform lg:transition lg:ease-in-out lg:duration-500 motion-reduce:lg:transition-none lg:opacity-0 lg:translate-y-full" style="transition-delay:2050ms"><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" aria-describedby="tooltip-donate" href="https://www.paypal.com/paypalme/DominicArrojado" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Show your support and donate!"><svg viewBox="0 0 512 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M256 416c114.9 0 208-93.1 208-208S370.9 0 256 0 48 93.1 48 208s93.1 208 208 208zM233.8 97.4V80.6c0-9.2 7.4-16.6 16.6-16.6h11.1c9.2 0 16.6 7.4 16.6 16.6v17c15.5.8 30.5 6.1 43 15.4 5.6 4.1 6.2 12.3 1.2 17.1L306 145.6c-3.8 3.7-9.5 3.8-14 1-5.4-3.4-11.4-5.1-17.8-5.1h-38.9c-9 0-16.3 8.2-16.3 18.3 0 8.2 5 15.5 12.1 17.6l62.3 18.7c25.7 7.7 43.7 32.4 43.7 60.1 0 34-26.4 61.5-59.1 62.4v16.8c0 9.2-7.4 16.6-16.6 16.6h-11.1c-9.2 0-16.6-7.4-16.6-16.6v-17c-15.5-.8-30.5-6.1-43-15.4-5.6-4.1-6.2-12.3-1.2-17.1l16.3-15.5c3.8-3.7 9.5-3.8 14-1 5.4 3.4 11.4 5.1 17.8 5.1h38.9c9 0 16.3-8.2 16.3-18.3 0-8.2-5-15.5-12.1-17.6l-62.3-18.7c-25.7-7.7-43.7-32.4-43.7-60.1.1-34 26.4-61.5 59.1-62.4zM480 352h-32.5c-19.6 26-44.6 47.7-73 64h63.8c5.3 0 9.6 3.6 9.6 8v16c0 4.4-4.3 8-9.6 8H73.6c-5.3 0-9.6-3.6-9.6-8v-16c0-4.4 4.3-8 9.6-8h63.8c-28.4-16.3-53.3-38-73-64H32c-17.7 0-32 14.3-32 32v96c0 17.7 14.3 32 32 32h448c17.7 0 32-14.3 32-32v-96c0-17.7-14.3-32-32-32z"></path></svg></a></li><li class="flex lg:transform lg:transition lg:ease-in-out lg:duration-500 motion-reduce:lg:transition-none lg:opacity-0 lg:translate-y-full" style="transition-delay:2200ms"><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" aria-describedby="tooltip-youtube" href="https://www.youtube.com/channel/UCWwV__qrzg5BYCSwO91Xhxg/videos?view=0&amp;sort=dd" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Watch my tech videos!"><svg viewBox="0 0 576 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"></path></svg></a></li><li class="flex lg:transform lg:transition lg:ease-in-out lg:duration-500 motion-reduce:lg:transition-none lg:opacity-0 lg:translate-y-full" style="transition-delay:2350ms"><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" aria-describedby="tooltip-linkedin" href="https://www.linkedin.com/in/dominic-arrojado-75ba03a9/" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Let&#x27;s connect on LinkedIn!"><svg viewBox="0 0 448 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a></li><li class="flex lg:transform lg:transition lg:ease-in-out lg:duration-500 motion-reduce:lg:transition-none lg:opacity-0 lg:translate-y-full" style="transition-delay:2500ms"><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" aria-describedby="tooltip-github" href="https://github.com/dominicarrojado/" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Follow me on GitHub!"><svg viewBox="0 0 496 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></li><li class="flex lg:transform lg:transition lg:ease-in-out lg:duration-500 motion-reduce:lg:transition-none lg:opacity-0 lg:translate-y-full" style="transition-delay:2650ms"><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" aria-describedby="tooltip-email" href="mailto:dominicarrojado@gmail.com" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Email me!"><svg viewBox="0 0 512 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"></path></svg></a></li></ul></div></header><div id="main"></div><section class="relative flex flex-col justify-center bg-gray-550 py-28 px-6 text-center overflow-hidden dark:bg-gray-750 transform transition-transform ease-in-out duration-500 motion-reduce:transition-none sm:px-20 lg:px-32 min-h-96 -translate-y-full" data-testid="container"><div class="absolute top-0 left-0 w-full h-full bg-repeat bg-center invert-[.1] dark:invert-0 motion-safe:animate-slide transition-opacity duration-1250 delay-500 motion-reduce:transition-none opacity-0" style="background-image:url(&#x27;/images/bg/pattern.png&#x27;)" data-testid="background"></div><div class="overflow-hidden py-2" style="opacity:1"><h1 class="text-3xl font-bold text-white leading-tight transform transition duration-1000 delay-500 motion-reduce:transition-none sm:text-4xl md:text-5xl lg:text-6xl xl:text-7xl opacity-0 translate-y-full">How to create your own OTP input in React and TypeScript with tests (Part 1)</h1></div><div class="overflow-hidden" style="opacity:1"><p class="font-light text-white transform transition duration-1000 delay-1000 motion-reduce:transition-none xl:text-2xl opacity-0 translate-y-full">Learn how to build a modern OTP input component in a reactive and reusable way</p></div></section><section class="pt-16 pb-20 px-6 sm:pt-20 sm:pb-24 sm:px-8 md:pt-24 md:pb-28 lg:px-10 xl:pt-28 xl:pb-32 transform transition-transform-opacity duration-1000 motion-reduce:transition-none delay-1500 opacity-0 translate-y-10" data-testid="section"><div class="w-11/12 max-w-screen-3xl -mt-8 mx-auto pb-8 sm:-mt-10 sm:pb-10 md:-mt-12 md:pb-12 lg:w-5/6"><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="4984498713" data-ad-format="auto" data-full-width-responsive="true" data-testid="ad-unit"></ins></div><div class="flex justify-between items-center w-11/12 max-w-screen-3xl mx-auto lg:w-5/6"><div class="mr-4 text-sm text-gray-400 sm:text-base xl:text-lg">Last Updated: <time dateTime="2022-06-16">June 16, 2022</time></div><div class="rounded py-0.5 px-1.5 bg-gray-200 text-2xs capitalize dark:bg-gray-600 md:py-1 md:px-2 md:text-xs xl:text-sm">technology</div></div><div class="w-11/12 max-w-screen-3xl mt-4 mx-auto lg:w-5/6"><a class="group inline-flex items-center font-normal select-none dark:hover:text-white transition-colors duration-300 hover:text-black group-hover:text-black motion-reduce:transition-none" target="_blank" rel="noopener noreferrer nofollow" href="https://youtu.be/Qpo4gUfv2Fs"><svg viewBox="0 0 576 512" role="img" class="w-6 h-6 mr-2 text-gray-400 transition-colors duration-300 group-hover:text-red motion-reduce:transition-none dark:group-hover:text-white sm:w-7 sm:h-7 sm:mr-3 xl:w-8 xl:h-8"><path fill="currentColor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"></path></svg> <!-- -->Watch it on YouTube<svg viewBox="0 0 320 512" role="img" class="inline-block w-2 h-2 ml-2 text-black opacity-30 dark:text-white transform transition duration-300 group-hover:translate-x-1.5 group-hover:opacity-100 motion-reduce:transition-none sm:w-2.5 sm:h-2.5 sm:ml-2.5 md:w-3 md:h-3 md:ml-3 xl:w-3.5 xl:h-3.5"><path fill="currentColor" d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"></path></svg></a></div><article class="w-11/12 max-w-screen-3xl mx-auto prose dark:prose-dark sm:prose-lg lg:w-5/6 xl:prose-xl mt-8 sm:mt-10 xl:mt-14" data-clarity-region="article" data-testid="content"><h2>Introduction</h2>
<p>There&#x27;s tons of OTP (one-time password) or OTC (one-time code) input I have seen out there, but most of them were difficult to use or doesn&#x27;t give me a great user experience. For example, when I get prompt with an OTP input on mobile that only accepts digits, once I focus on it, the mobile keyboard should only display numbers but for some web applications they display the alphabet keyboard. Another example is that if I receive an <a target="_blank" rel="noopener noreferrer nofollow" href="https://en.wikipedia.org/wiki/SMS">SMS message</a> containing the one-time code I need to fill in, my phone should be able to automatically fill in or suggest the passcodes for the input but again some web apps don&#x27;t follow the proper implementation. You want more examples? If the OTP input is implemented in separate input boxes where only one digit per input box is allowed, when I type in the digit, it should automatically focus to the next input and yet again some web apps aren&#x27;t able to do that! Yes, you can tell I&#x27;m a little bit frustrated that I had to do this post. My solution here may not be perfect but I hope it still helps web developers out there to know what are the considerations and best practices when implementing the OTP input. Although, this post could be much shorter if we just implement the OTP input in one input box, but where&#x27;s the challenge in that if we don&#x27;t implement them in separate input boxes, right? So without further ado, let&#x27;s get on with it ~</p>
<h2>Prerequisites</h2>
<p>This is the <a target="_blank" href="/react-typescript-otp-input/">link to the OTP input</a> which we&#x27;ll accomplish by the end of this post, you can see and play around with it or use it as your reference throughout this tutorial.</p>
<p>Upon writing this post, I assume that you have some web development background and basic knowledge regarding <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.npmjs.com/">npm</a>, <a target="_blank" rel="noopener noreferrer nofollow" href="https://classic.yarnpkg.com/lang/en/">yarn</a>, <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/HTML">HTML</a>, <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/CSS">CSS</a>, <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript">JavaScript</a> and <a target="_blank" rel="noopener noreferrer nofollow" href="https://reactjs.org/">React</a>.</p>
<p>Make sure to install <a target="_blank" rel="noopener noreferrer nofollow" href="https://classic.yarnpkg.com/lang/en/">Yarn</a> in your system if you haven&#x27;t. We use <a target="_blank" rel="noopener noreferrer nofollow" href="https://classic.yarnpkg.com/lang/en/">Yarn</a> as our package manager, it&#x27;s just like <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.npmjs.com/">npm</a> but <em>faster</em>.</p>
<p>I&#x27;ve written a <a href="/posts/local-development-setup-for-react-and-typescript-projects/">separate post</a> about the <a target="_blank" rel="noopener noreferrer nofollow" href="https://en.wikipedia.org/wiki/Integrated_development_environment">IDE</a> and extensions I use to help me save time and energy when writing my code in React. I highly suggest for you to check it out if you haven&#x27;t!</p>
<h2>Initialize your project</h2>
<p>Fastest way to start a new project with React is using <a target="_blank" rel="noopener noreferrer nofollow" href="https://create-react-app.dev/">Create React App</a>. It is an officially supported way to create single-page React applications. It offers a modern build setup with no configuration so you can focus on code, not build tools.</p>
<p>To create our project with React and TypeScript, run this command in your terminal:</p>
<pre><code class="hljs language-bash">yarn create react-app react-typescript-otp-input --template typescript
</code></pre>
<p>Once project is initiated, we can run our project by executing the command below:</p>
<pre><code class="hljs language-bash"><span class="hljs-built_in">cd</span> react-typescript-otp-input
yarn start
</code></pre>
<p>This command will open your default browser and go to <code>http://localhost:3000/</code>. If it doesn&#x27;t, you can do it yourself too.</p>
<p>This setup comes with live-editing or hot reloading which means when we save file changes, it will automatically update the app and reload on the browser. That&#x27;s great for local development!</p>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<h2>Clean up the project</h2>
<p>We&#x27;re ready to code! Let&#x27;s clean up our project which was created by Create React App. We won&#x27;t be needing some of them. Delete or clear the contents of the following below:</p>
<ul>
<li>src/App.css (clear contents)</li>
<li>src/App.test.tsx (delete)</li>
<li>src/logo.svg (delete)</li>
</ul>
<p>Then let&#x27;s update the code of <code>src/App.tsx</code>:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./App.css&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">App</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>React TypeScript OTP Input<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>We will use the <code>App</code> component as the container of our OTP input. Then, add the following code to <code>src/App.css</code>:</p>
<pre><code class="hljs language-css"><span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">800px</span>;
  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span> <span class="hljs-number">15px</span>;
}
</code></pre>
<p>And update the <code>src/index.css</code> too:</p>
<pre><code class="hljs language-css">* {
  <span class="hljs-attribute">box-sizing</span>: border-box;
}

<span class="hljs-selector-tag">body</span> {
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">font-family</span>: -apple-system, BlinkMacSystemFont, <span class="hljs-string">&#x27;Segoe UI&#x27;</span>, <span class="hljs-string">&#x27;Roboto&#x27;</span>,
    <span class="hljs-string">&#x27;Oxygen&#x27;</span>, <span class="hljs-string">&#x27;Ubuntu&#x27;</span>, <span class="hljs-string">&#x27;Cantarell&#x27;</span>, <span class="hljs-string">&#x27;Fira Sans&#x27;</span>, <span class="hljs-string">&#x27;Droid Sans&#x27;</span>,
    <span class="hljs-string">&#x27;Helvetica Neue&#x27;</span>, sans-serif;
  -webkit-<span class="hljs-attribute">font-smoothing</span>: antialiased;
  -moz-osx-<span class="hljs-attribute">font-smoothing</span>: grayscale;
}
</code></pre>
<p>That&#x27;s about it. This will be the container of our OTP input component.</p>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<h2>OtpInput component</h2>
<p>Now let&#x27;s create our component <code>src/components/OtpInput.tsx</code> and add the following code:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./OtpInput.css&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> Props = {
  <span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span>;
  valueLength: <span class="hljs-built_in">number</span>;
  onChange: <span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">OtpInput</span>(<span class="hljs-params">{ value, valueLength, onChange }: Props</span>) </span>{
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;otp-group&quot;</span>&gt;</span>
      {[1, 2, 3, 4, 5, 6].map((digit, idx) =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
          <span class="hljs-attr">key</span>=<span class="hljs-string">{idx}</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span>
          <span class="hljs-attr">inputMode</span>=<span class="hljs-string">&quot;numeric&quot;</span>
          <span class="hljs-attr">autoComplete</span>=<span class="hljs-string">&quot;one-time-code&quot;</span>
          <span class="hljs-attr">pattern</span>=<span class="hljs-string">&quot;\d{1}&quot;</span>
          <span class="hljs-attr">maxLength</span>=<span class="hljs-string">{valueLength}</span>
          <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;otp-input&quot;</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{digit}</span>
        /&gt;</span>
      ))}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>So in the code, we allow properties (<code>props</code>) for our <code>OtpInput</code> component to make it reusable. Since we&#x27;re writing our React code in TypeScript, we initialized the type <code>Props</code> which an object containing <code>value</code> prop that is a <code>string</code> for the one-time code, <code>valueLength</code> prop that is a <code>number</code> for the length of the code (it determines the number of one-digit input boxes to create or display) and an event listener prop <code>onChange</code> to listen to the changes in one-time code so any parent component such as the <code>App</code> component can update the state with the new value.</p>
<p>We hardcoded the array <code>[1, 2, 3, 4, 5, 6]</code> so we can loop through it and display 6 input boxes to make our OTP input. Don&#x27;t worry about it for now, this is temporary and we&#x27;ll be replacing it later with our logic to make it dynamic depending on the <code>valueLength</code> prop.</p>
<p>Since OTPs are usually five or six digit numbers, using <code>type=&quot;number&quot;</code> for an input field might seem intuitive because it changes the mobile keyboard to numbers only. This is not recommended because the browser expects an input field to be a countable number rather than a sequence of multiple numbers, which can cause unexpected behavior. Using <code>type=&quot;number&quot;</code> causes up and down buttons to be displayed beside the input field; pressing these buttons increments or decrements the number and may remove preceding zeros.</p>
<p>So we use <code>type=&quot;text&quot;</code> instead. This won&#x27;t turn the mobile keyboard into numbers only, but that is fine because the next tip for using <code>inputMode=&quot;numeric&quot;</code> does that job. <code>inputMode=&quot;numeric&quot;</code> changes the mobile keyboard to numbers only.</p>
<p>Some websites use <code>type=&quot;tel&quot;</code> for OTP input fields since it also turns the mobile keyboard to numbers only (including <code>*</code> and <code>#</code>) when focused. This hack was used in the past when <code>inputMode=&quot;numeric&quot;</code> wasn&#x27;t widely supported. Since <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/mdn/browser-compat-data/pull/6782">Firefox started supporting</a> <code>inputMode=&quot;numeric&quot;</code>, there&#x27;s no need to use the semantically incorrect <code>type=&quot;tel&quot;</code> hack.</p>
<p>With <code>autocomplete=&quot;one-time-code&quot;</code> whenever a user receives an SMS message while a form is open, the operating system will parse the OTP in the SMS heuristically and the keyboard will suggest the OTP for the user to enter. It works only on Safari 12 and later on iOS, iPadOS, and macOS, but we strongly recommend using it, because it is an easy way to improve the SMS OTP experience on those platforms.</p>
<p><code>autocomplete=&quot;one-time-code&quot;</code> improves the user experience, but there&#x27;s more you can do by <a target="_blank" rel="noopener noreferrer nofollow" href="https://web.dev/sms-otp-form/#format">ensuring that the SMS message complies with the origin-bound message format</a>.</p>
<p>While the <code>pattern=&quot;\d{1}&quot;</code> specifies the format that the entered OTP must match which in this case constrains the OTP to a one digit string.</p>
<p>And lastly, <code>maxLength={valueLength}</code> to only restrict maximum digits per input box. You might wonder, why not just use one <code>1</code> as the value for <code>maxLength</code>. That&#x27;s because we will allow <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/API/Element/paste_event">pasting</a> of code and at the same time allow the autocomplete logic to work. You&#x27;ll get to see this making more sense later - keep those doubts to yourself for now.</p>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<h2>OtpInput styles</h2>
<p>Now let&#x27;s style our <code>OtpInput</code> component by adding the following code in <code>src/components/OtpInput.css</code>:</p>
<pre><code class="hljs language-css"><span class="hljs-selector-class">.otp-group</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">360px</span>;
  <span class="hljs-attribute">column-gap</span>: <span class="hljs-number">10px</span>;
}

<span class="hljs-selector-class">.otp-input</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">60px</span>;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;
  <span class="hljs-attribute">text-align</span>: center;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">32px</span>;
  <span class="hljs-attribute">font-weight</span>: bold;
  <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1</span>;
}
</code></pre>
<p>To import our <code>OtpInput</code> component into our <code>App</code> component in <code>src/App.tsx</code>, simply update the code with this:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;
<span class="hljs-keyword">import</span> OtpInput <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/OtpInput&#x27;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./App.css&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">App</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> [otp, setOtp] = useState(<span class="hljs-string">&#x27;&#x27;</span>);
  <span class="hljs-keyword">const</span> onChange = <span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">string</span></span>) =&gt;</span> setOtp(value);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>React TypeScript OTP Input<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">OtpInput</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{otp}</span> <span class="hljs-attr">valueLength</span>=<span class="hljs-string">{6}</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{onChange}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>After saving the changes, we should see our web application in the browser like this:</p>
<div class="lazyload-wrapper "><div class="lazyload-placeholder"></div></div>
<p>Great, that is looking like an OTP input now but it is lacking the logics that makes it an OTP input so let&#x27;s proceed to implementing those.</p>
<h2>Construct array from value prop</h2>
<p>For the first logic we need to implement, is transforming the <code>value</code> string we get from the <code>props</code> into an array like we did earlier so it that we can loop it and display them as individual input boxes. This time instead of hardcoding the array, it will be a dynamic array instead.</p>
<p>So for example we are given a <code>value</code> prop of <code>&#x27;654321&#x27;</code>, we convert it into an array <code>[6, 5, 4, 3, 2, 1]</code>. This is achievable by just doing a JavaSript string method <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/split"><code>.split(&#x27;&#x27;)</code></a>. But what if we are only given a string with less than the expected length (e.g. <code>6</code>), let&#x27;s say <code>&#x27;214&#x27;</code> which only has a length of <code>3</code> characters, our array should still be a length of <code>6</code> or the number we got from <code>valueLength</code> prop.</p>
<p>How do we do this?</p>
<p>We can utilize <code>useMemo</code> and use <code>value</code> and <code>valueLength</code> prop as dependencies, then do a loop using <code>valueLength</code> as the max index. Using the current index <code>i</code> in the loop, we check whether the character from the <code>value</code> string exists and it&#x27;s a number. We can&#x27;t simply use <code>typeof</code> and check if it&#x27;s <code>number</code> because that will also be true for <code>NaN</code>, so we use a <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions">regular expression <code>RegExp</code></a> - that would be <code>/^\d+$/</code>. This regular expression contains metacharacters such as <code>\d</code> which finds a digit, then <code>^</code> means to begin with, and <code>$</code> which means to end with. You can visit <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.w3schools.com/jsref/jsref_obj_regexp.asp">this page</a> to know more about the JavaScript RegExp syntax, modifiers, brackets and other metacharacters. By combining them, this regular expression can test or check if a character is a digit (or a <code>number</code>). We can use this to check and push characters that are digits to the constructed array, and if it is <em>not</em> a digit then we simply push an empty string <code>&#x27;&#x27;</code> instead. This way we can construct an array that meets the length of the <code>valueLength</code>. If what I said here doesn&#x27;t make any sense, the code hopefully might help.</p>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>First create a constant variable in <code>src/constants.ts</code> to keep our regular expression that checks or tests whether a <code>string</code> is a digit because we&#x27;ll be using it more than once.</p>
<pre><code class="hljs language-ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> RE_DIGIT = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-regexp">/^\d+$/</span>);
</code></pre>
<p>Then let&#x27;s update our <code>OtpInput</code> component in <code>src/components/OtpInput.tsx</code>:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> { useMemo } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;
<span class="hljs-keyword">import</span> { RE_DIGIT } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../constants&#x27;</span>;
...

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">OtpInput</span>(<span class="hljs-params">{ value, valueLength, onChange }: Props</span>) </span>{
  <span class="hljs-keyword">const</span> valueItems = useMemo(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> valueArray = value.split(<span class="hljs-string">&#x27;&#x27;</span>);
    <span class="hljs-keyword">const</span> items: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">string</span>&gt; = [];

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; valueLength; i++) {
      <span class="hljs-keyword">const</span> char = valueArray[i];

      <span class="hljs-keyword">if</span> (RE_DIGIT.test(char)) {
        items.push(char);
      } <span class="hljs-keyword">else</span> {
        items.push(<span class="hljs-string">&#x27;&#x27;</span>);
      }
    }

    <span class="hljs-keyword">return</span> items;
  }, [value, valueLength]);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;otp-group&quot;</span>&gt;</span>
      {valueItems.map((digit, idx) =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
          <span class="hljs-attr">...</span>
        /&gt;</span>
      ))}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>If you want to test if this logic really works, try replacing the default value in <code>src/App.tsx</code>:</p>
<pre><code class="hljs language-tsx">...

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">App</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> [otp, setOtp] = useState(<span class="hljs-string">&#x27;654321&#x27;</span>);
  ...
}
</code></pre>
<p>You should see in the application in the browser like this:</p>
<div class="lazyload-wrapper "><div class="lazyload-placeholder"></div></div>
<p>Great, that means our logic works. You can try changing the default value to something less than <code>6</code>, e.g. <code>214</code> and it will just fill in the first three input boxes but still display the other input boxes unfilled.</p>
<p>Alright. After you&#x27;re done testing it, revert the default value back to an empty string <code>&#x27;&#x27;</code> and let&#x27;s proceed to the next logic.</p>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<h2>Allow typing digits in input boxes</h2>
<p>If you try to type anything on the inputs, it will not change, because the values are hardcoded to the array we constructed, and the said array only changes if the <code>value</code> prop changes from the parent <code>App</code> component. Currently, we&#x27;re not doing anything to change the <code>value</code> prop from the parent component. So let&#x27;s handle that.</p>
<p>We can attach an <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/change_event">change event</a> listener to each input boxes. The challenging part right here is that, each input boxes is assigned to a position in the constructed array. So any change in a particular input boxes shouldn&#x27;t affect the value from other inputs. We can make use of the index <code>idx</code> we got from looping the array to handle this along with the help of a JavaScript string method <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/substring"><code>.substring()</code></a> to construct the new <code>value</code> prop string. To change the <code>value</code> prop from the parent component, we can pass the new value to the <code>onChange()</code> prop function. We can also utilise here the regular expression we created earlier to only allow digits in the change event. If user tries to input a letter or a special character, that shouldn&#x27;t be displayed in the input boxes or simply does not update the <code>value</code> prop string. To write this in code, we&#x27;ll have something like this in <code>src/components/OtpInput.tsx</code>:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> React, { useMemo } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;
...

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">OtpInput</span>(<span class="hljs-params">{ value, valueLength, onChange }: Props</span>) </span>{
  ...

  <span class="hljs-keyword">const</span> inputOnChange = <span class="hljs-function">(<span class="hljs-params">
    e: React.ChangeEvent&lt;HTMLInputElement&gt;,
    idx: <span class="hljs-built_in">number</span>
  </span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> target = e.target;
    <span class="hljs-keyword">const</span> targetValue = target.value;

    <span class="hljs-keyword">if</span> (!RE_DIGIT.test(targetValue)) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">const</span> newValue =
      value.substring(<span class="hljs-number">0</span>, idx) + targetValue + value.substring(idx + <span class="hljs-number">1</span>);

    onChange(newValue);
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;otp-group&quot;</span>&gt;</span>
      {valueItems.map((digit, idx) =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
          <span class="hljs-attr">...</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> inputOnChange(e, idx)}
        /&gt;
      ))}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>If you&#x27;re new to TypeScript, we need to define the type for the arguments in <code>inputOnChange</code> function here. The type for the <code>onChange</code> attribute in React is <code>React.ChangeEvent</code> from the imported <code>react</code> library which accepts the type of the element as an argument and that would be <code>HTMLInputElement</code> that is already available globally without importing it from anywhere.</p>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>Save the changes and let&#x27;s see what happens when we try to input digits in the first input box. You&#x27;ll notice the first digit we input is displayed correctly, but as you type more digits in the same input box, the other input boxes gets populated but the focus is still in the same input box. This looks wrong and let&#x27;s fix that by focusing on the next input box or the <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/API/Element/nextElementSibling"><code>nextElementSibling</code></a>. Update the file <code>src/components/OtpInput.tsx</code> with the following code:</p>
<pre><code class="hljs language-tsx">...

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">OtpInput</span>(<span class="hljs-params">{ value, valueLength, onChange }: Props</span>) </span>{
  ...

  <span class="hljs-keyword">const</span> inputOnChange = <span class="hljs-function">(<span class="hljs-params">
    e: React.ChangeEvent&lt;HTMLInputElement&gt;,
    idx: <span class="hljs-built_in">number</span>
  </span>) =&gt;</span> {
    ...

    <span class="hljs-keyword">const</span> nextElementSibling =
      target.nextElementSibling <span class="hljs-keyword">as</span> HTMLInputElement | <span class="hljs-literal">null</span>;

    <span class="hljs-keyword">if</span> (nextElementSibling) {
      nextElementSibling.focus();
    }
  };

  ...
}
</code></pre>
<p>If you&#x27;re new to TypeScript, you&#x27;ll notice I used <code>as HTMLInputElement | null</code> here. This is called a <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#type-assertions">type assertion</a>. If we remove the type assertion, the type of <code>target.nextElementSibling</code> would just be <code>Element | null</code>, and if we leave it like that, it will have a TypeScript error stating that <code>.focus()</code> is not a function in <code>Element</code> but it does exists if the type is <code>HTMLInputElement</code>. That&#x27;s why a type assertion is done here when we have information about the type of a value that TypeScript possibly can&#x27;t know about.</p>
<p>Alright, once you save the changes. Let&#x27;s try typing digits into the input boxes again:</p>
<div class="lazyload-wrapper "><div class="lazyload-placeholder"></div></div>
<p>Wow, that looks smooth and it gives you a nice user experience!</p>
<p>What&#x27;s next?</p>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<h2>Allow deleting digits from input boxes</h2>
<p>Currently, if you try to delete the digit from one of the input boxes using <a target="_blank" rel="noopener noreferrer nofollow" href="https://en.wikipedia.org/wiki/Backspace">backspace</a> in your keyboard, it does <em>not</em> do anything. Let&#x27;s handle that.</p>
<p>If we relook at our logic in <code>inputOnChange</code> function, we only allow digits. When we delete a digit, the change event will be triggered and the <code>targetValue</code> would be an empty string <code>&#x27;&#x27;</code> which is <em>not</em> a digit, but we can allow that to implement deletion. Once we allow an empty string <code>&#x27;&#x27;</code> from <code>targetValue</code>, we need to replace that with a space <code>&#x27; &#x27;</code> so that the values from other input boxes won&#x27;t break since each input boxes is assigned to the position based from the <code>value</code>, for example <code>value</code> prop is <code>123456</code> which displays the input boxes like this <code>[1][2][3][4][5][6]</code>. If we were to delete a digit in the middle (e.g. <code>3</code>) when there are digits (<code>4</code>, <code>5</code> and <code>6</code>) on the right; the input boxes should be displayed like this <code>[1][2][ ][4][5][6]</code>. Let&#x27;s translate this into the code and update <code>src/components/OtpInput.tsx</code>:</p>
<pre><code class="hljs language-tsx">...

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">OtpInput</span>(<span class="hljs-params">{ value, valueLength, onChange }: Props</span>) </span>{
  ...

  <span class="hljs-keyword">const</span> inputOnChange = <span class="hljs-function">(<span class="hljs-params">
    e: React.ChangeEvent&lt;HTMLInputElement&gt;,
    idx: <span class="hljs-built_in">number</span>
  </span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> target = e.target;
    <span class="hljs-keyword">let</span> targetValue = target.value;
    <span class="hljs-keyword">const</span> isTargetValueDigit = RE_DIGIT.test(targetValue);

    <span class="hljs-keyword">if</span> (!isTargetValueDigit &amp;&amp; targetValue !== <span class="hljs-string">&#x27;&#x27;</span>) {
      <span class="hljs-keyword">return</span>;
    }

    targetValue = isTargetValueDigit ? targetValue : <span class="hljs-string">&#x27; &#x27;</span>;

    <span class="hljs-keyword">const</span> newValue =
      value.substring(<span class="hljs-number">0</span>, idx) + targetValue + value.substring(idx + <span class="hljs-number">1</span>);

    onChange(newValue);

    <span class="hljs-keyword">if</span> (!isTargetValueDigit) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">const</span> nextElementSibling =
      target.nextElementSibling <span class="hljs-keyword">as</span> HTMLInputElement | <span class="hljs-literal">null</span>;

    <span class="hljs-keyword">if</span> (nextElementSibling) {
      nextElementSibling.focus();
    }
  };

  ...
}
</code></pre>
<p>Now save the changes and try typing digits and then delete them. It will delete the digit in the input box you&#x27;re currently focused in. To improve the experience when you try to delete when there&#x27;s already no digit in the input box, it should focus on the previous input box <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/API/Element/previousElementSibling"><code>previousElementSibling</code></a> and delete the digit in it. Do note that the change event will not be triggered if we try to press backspace where the input box is already empty. We will have to rely on the <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/API/Document/keydown_event">keydown event</a> instead. Here&#x27;s the code to handle that in <code>src/components/OtpInput.tsx</code>:</p>
<pre><code class="hljs language-tsx">...

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">OtpInput</span>(<span class="hljs-params">{ value, valueLength, onChange }: Props</span>) </span>{
  ...
  <span class="hljs-keyword">const</span> inputOnKeyDown = <span class="hljs-function">(<span class="hljs-params">e: React.KeyboardEvent&lt;HTMLInputElement&gt;</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> target = e.target <span class="hljs-keyword">as</span> HTMLInputElement;

    <span class="hljs-keyword">if</span> (e.key !== <span class="hljs-string">&#x27;Backspace&#x27;</span> || target.value !== <span class="hljs-string">&#x27;&#x27;</span>) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">const</span> previousElementSibling =
      target.previousElementSibling <span class="hljs-keyword">as</span> HTMLInputElement | <span class="hljs-literal">null</span>;

    <span class="hljs-keyword">if</span> (previousElementSibling) {
      previousElementSibling.focus();
    }
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;otp-group&quot;</span>&gt;</span>
      {valueItems.map((digit, idx) =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
          <span class="hljs-attr">...</span>
          <span class="hljs-attr">onKeyDown</span>=<span class="hljs-string">{inputOnKeyDown}</span>
        /&gt;</span>
      ))}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>Once you save the changes, you can now delete each digit from the input boxes and it will also focus back to the previous input box if the current input box is already empty. Here&#x27;s how it is in action:</p>
<div class="lazyload-wrapper "><div class="lazyload-placeholder"></div></div>
<p>Are we done? Nope. There&#x27;s still a couple more things we need to do to make this OTP input better. Let&#x27;s continue ~</p>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<h2>Select digit on focus event</h2>
<p>When we have typed the digits completely, and let&#x27;s say we have input one incorrect digit in the middle, when we click on that input box, the input cursor caret may land on the right side of the digit and when that happens and you typed another digit, it messes up the digits from other input boxes. To fix that, simply do a selection of the digit using <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/setSelectionRange"><code>.setSelectionRange()</code></a> in the input box on <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/API/Element/focus_event">focus event</a>. We should also do the same logic during keydown event because when we focus on an input box and replaced it with the same digit, it will not trigger the change event and the input cursor goes to the right and again that messes up the digits from other inputs once you type again.</p>
<p>To handle this, let&#x27;s update <code>src/components/OtpInput.tsx</code> with the following code:</p>
<pre><code class="hljs language-tsx">...

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">OtpInput</span>(<span class="hljs-params">{ value, valueLength, onChange }: Props</span>) </span>{
  ...

  <span class="hljs-keyword">const</span> inputOnKeyDown = <span class="hljs-function">(<span class="hljs-params">e: React.KeyboardEvent&lt;HTMLInputElement&gt;</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> target = e.target <span class="hljs-keyword">as</span> HTMLInputElement;
    <span class="hljs-keyword">const</span> targetValue = target.value;

    <span class="hljs-comment">// keep the selection range position</span>
    <span class="hljs-comment">// if the same digit was typed</span>
    target.setSelectionRange(<span class="hljs-number">0</span>, targetValue.length);

    ...
  };
  <span class="hljs-keyword">const</span> inputOnFocus = <span class="hljs-function">(<span class="hljs-params">e: React.FocusEvent&lt;HTMLInputElement&gt;</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> { target } = e;

    target.setSelectionRange(<span class="hljs-number">0</span>, target.value.length);
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;otp-group&quot;</span>&gt;</span>
      {valueItems.map((digit, idx) =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
          <span class="hljs-attr">...</span>
          <span class="hljs-attr">onFocus</span>=<span class="hljs-string">{inputOnFocus}</span>
        /&gt;</span>
      ))}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>Once the changes are saved, try it out! Type in the digits until the last input box, then focus on the input box in the middle, change it into another digit, it will get updated and focus on the next input box. If you input the same digit, the focus will remain in the input box - keeping everything as is. Great!</p>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<h2>Handle paste event</h2>
<p>Now let&#x27;s also handle the elephant in the room which is the <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/API/Element/paste_event">paste event</a>. Although, we will not be adding another event listener to our input boxes. We will simply update our <code>inputOnChange</code> logic because that is also triggered when doing a paste event.</p>
<p>Let&#x27;s go further into the logic of the paste event. This might be depending on your requirement but I&#x27;ll do what I think makes more sense. We should only allow paste when the copied text is a digit and also the same length as our <code>valueLength</code>. As an extra precaution, we are trimming the <code>targetValue</code> using <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/trim"><code>.trim()</code></a> in case users copied the code with an extra space from either or both ends of the string. Anything else such as having less or more length than the <code>valueLength</code> will be ignored or we simply won&#x27;t do anything.</p>
<p>To translate that into code, simply update <code>src/components/OtpInput.tsx</code>:</p>
<pre><code class="hljs language-tsx">...

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">OtpInput</span>(<span class="hljs-params">{ value, valueLength, onChange }: Props</span>) </span>{
  ...

  <span class="hljs-keyword">const</span> inputOnChange = <span class="hljs-function">(<span class="hljs-params">
    e: React.ChangeEvent&lt;HTMLInputElement&gt;,
    idx: <span class="hljs-built_in">number</span>
  </span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> target = e.target;
    <span class="hljs-keyword">let</span> targetValue = target.value.trim();
    <span class="hljs-keyword">const</span> isTargetValueDigit = RE_DIGIT.test(targetValue);

    <span class="hljs-keyword">if</span> (!isTargetValueDigit &amp;&amp; targetValue !== <span class="hljs-string">&#x27;&#x27;</span>) {
      <span class="hljs-keyword">return</span>;
    }

    targetValue = isTargetValueDigit ? targetValue : <span class="hljs-string">&#x27; &#x27;</span>;

    <span class="hljs-keyword">const</span> targetValueLength = targetValue.length;

    <span class="hljs-keyword">if</span> (targetValueLength === <span class="hljs-number">1</span>) {
      <span class="hljs-keyword">const</span> newValue =
        value.substring(<span class="hljs-number">0</span>, idx) + targetValue + value.substring(idx + <span class="hljs-number">1</span>);

      onChange(newValue);

      <span class="hljs-keyword">if</span> (!isTargetValueDigit) {
        <span class="hljs-keyword">return</span>;
      }

      <span class="hljs-keyword">const</span> nextElementSibling =
        target.nextElementSibling <span class="hljs-keyword">as</span> HTMLInputElement | <span class="hljs-literal">null</span>;

      <span class="hljs-keyword">if</span> (nextElementSibling) {
        nextElementSibling.focus();
      }
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (targetValueLength === valueLength) {
      onChange(targetValue);

      target.blur();
    }
  };
  ...
}
</code></pre>
<p>We also did a <code>target.blur()</code> here to focus out of the input boxes since after you paste the code, most likely you won&#x27;t be interacting with the input boxes anymore and your next step would be to submit the code.</p>
<p>Now try copying a 6 digit code (or depending on the value you passed in <code>valueLength</code> prop from the parent <code>App</code> component) and paste it in any of the input boxes, it doesn&#x27;t matter if the input boxes have already been filled - it will still work and replace the previous digits. That&#x27;s great!</p>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<h2>Improve accessibility</h2>
<p>To further improve the accessibility of our OTP input component, we also want to implement the feature to go through the input boxes when pressing the <a target="_blank" rel="noopener noreferrer nofollow" href="https://en.wikipedia.org/wiki/Arrow_keys">keyboard arrow keys</a>. So if you are in the first input box, when you press either the right or down arrow keys, it should focus on the next input box and when you press either the left or up down arrow keys, it should focus on the previous input box. We already have the code to move the focus to the next or previous input box, so we can refactor the existing code to make them reusable and reduce duplication. We also already have the keydown event listener where we can add this new logic. Do note that these keys have default behaviour in an input text, so we need to prevent that by calling <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/API/Event/preventDefault"><code>Event.preventDefault()</code></a>.</p>
<p>To write this in code, simply update <code>src/components/OtpInput.tsx</code> with the following:</p>
<pre><code class="hljs language-tsx">...

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">OtpInput</span>(<span class="hljs-params">{ value, valueLength, onChange }: Props</span>) </span>{
  ...

  <span class="hljs-keyword">const</span> focusToNextInput = <span class="hljs-function">(<span class="hljs-params">target: HTMLElement</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> nextElementSibling =
      target.nextElementSibling <span class="hljs-keyword">as</span> HTMLInputElement | <span class="hljs-literal">null</span>;

    <span class="hljs-keyword">if</span> (nextElementSibling) {
      nextElementSibling.focus();
    }
  };
  <span class="hljs-keyword">const</span> focusToPrevInput = <span class="hljs-function">(<span class="hljs-params">target: HTMLElement</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> previousElementSibling =
      target.previousElementSibling <span class="hljs-keyword">as</span> HTMLInputElement | <span class="hljs-literal">null</span>;

    <span class="hljs-keyword">if</span> (previousElementSibling) {
      previousElementSibling.focus();
    }
  };
  <span class="hljs-keyword">const</span> inputOnChange = <span class="hljs-function">(<span class="hljs-params">
    e: React.ChangeEvent&lt;HTMLInputElement&gt;,
    idx: <span class="hljs-built_in">number</span>
  </span>) =&gt;</span> {
    ...

    <span class="hljs-keyword">if</span> (targetValue.length === <span class="hljs-number">1</span>) {
      ...

      <span class="hljs-keyword">if</span> (!isTargetValueDigit) {
        <span class="hljs-keyword">return</span>;
      }

      focusToNextInput(target);
    } <span class="hljs-keyword">else</span> {
      ...
    }
  };
  <span class="hljs-keyword">const</span> inputOnKeyDown = <span class="hljs-function">(<span class="hljs-params">e: React.KeyboardEvent&lt;HTMLInputElement&gt;</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> { key } = e;
    <span class="hljs-keyword">const</span> target = e.target <span class="hljs-keyword">as</span> HTMLInputElement;

    <span class="hljs-keyword">if</span> (key === <span class="hljs-string">&#x27;ArrowRight&#x27;</span> || key === <span class="hljs-string">&#x27;ArrowDown&#x27;</span>) {
      e.preventDefault();
      <span class="hljs-keyword">return</span> focusToNextInput(target);
    }

    <span class="hljs-keyword">if</span> (key === <span class="hljs-string">&#x27;ArrowLeft&#x27;</span> || key === <span class="hljs-string">&#x27;ArrowUp&#x27;</span>) {
      e.preventDefault();
      <span class="hljs-keyword">return</span> focusToPrevInput(target);
    }

    <span class="hljs-keyword">const</span> targetValue = target.value;

    ...

    <span class="hljs-keyword">if</span> (e.key !== <span class="hljs-string">&#x27;Backspace&#x27;</span> || targetValue !== <span class="hljs-string">&#x27;&#x27;</span>) {
      <span class="hljs-keyword">return</span>;
    }

    focusToPrevInput(target);
  };
  ...
}
</code></pre>
<p>Save those changes and test it out! Here&#x27;s a demo of all the features we have implemented:</p>
<div class="lazyload-wrapper "><div class="lazyload-placeholder"></div></div>
<p>And that&#x27;s were done with the implementation part! Please proceed to the <a href="/posts/how-to-create-your-own-otp-input-in-react-and-typescript-with-tests-part-2/">next part</a> to learn how to write tests for the OTP input component we have just built.</p></article><div class="w-11/12 max-w-screen-3xl mx-auto lg:w-5/6"><p class="mt-16 text-gray-400">Found an issue with this post?<!-- --> <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/dominicarrojado/dominicarrojado.github.io/issues">Report it here</a>.</p><div class="mt-24 flex justify-between items-center"><a class="group relative pr-2" href="/posts/building-a-link-shortener-api-with-nestjs-and-mongodb-with-tests-part-2/"><div class=""><div class="font-normal transition-colors duration-300 group-hover:text-black motion-reduce:transition-none dark:group-hover:text-white">Building a URL shortener API with NestJS and MongoDB with tests (Part 2)</div><small class="text-gray-400 transition-colors duration-300 group-hover:text-black motion-reduce:transition-none dark:group-hover:text-white">Previous Post</small></div><svg viewBox="0 0 320 512" role="img" class="absolute top-0 bottom-0 m-auto shrink-0 w-2 h-2 text-black opacity-30 dark:text-white transform transition-transform-opacity duration-300 group-hover:opacity-100 motion-reduce:transition-none sm:w-2.5 sm:h-2.5 md:w-3 md:h-3 xl:w-3.5 xl:h-3.5 -left-5 sm:-left-7 xl:-left-8 group-hover:-translate-x-1.5"><path fill="currentColor" d="M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"></path></svg></a><div></div><a class="group relative pl-2" href="/posts/how-to-create-your-own-otp-input-in-react-and-typescript-with-tests-part-2/"><div class="text-right"><div class="font-normal transition-colors duration-300 group-hover:text-black motion-reduce:transition-none dark:group-hover:text-white">How to create your own OTP input in React and TypeScript with tests (Part 2)</div><small class="text-gray-400 transition-colors duration-300 group-hover:text-black motion-reduce:transition-none dark:group-hover:text-white">Next Post</small></div><svg viewBox="0 0 320 512" role="img" class="absolute top-0 bottom-0 m-auto shrink-0 w-2 h-2 text-black opacity-30 dark:text-white transform transition-transform-opacity duration-300 group-hover:opacity-100 motion-reduce:transition-none sm:w-2.5 sm:h-2.5 md:w-3 md:h-3 xl:w-3.5 xl:h-3.5 -right-5 sm:-right-7 xl:-right-8 group-hover:translate-x-1.5"><path fill="currentColor" d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"></path></svg></a></div><div class="mt-16 text-center"><a class="group inline-flex items-center font-normal select-none dark:hover:text-white transition-colors duration-300 hover:text-black group-hover:text-black motion-reduce:transition-none" href="/posts/">See Latest Posts<svg viewBox="0 0 320 512" role="img" class="inline-block w-2 h-2 ml-2 text-black opacity-30 dark:text-white transform transition duration-300 group-hover:translate-x-1.5 group-hover:opacity-100 motion-reduce:transition-none sm:w-2.5 sm:h-2.5 sm:ml-2.5 md:w-3 md:h-3 md:ml-3 xl:w-3.5 xl:h-3.5"><path fill="currentColor" d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"></path></svg></a></div></div><div class="w-11/12 max-w-screen-3xl -mb-8 mx-auto pt-8 sm:-mb-10 sm:pt-10 md:-mb-12 md:pt-12 lg:w-5/6"><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="6892691691" data-ad-format="auto" data-full-width-responsive="true" data-testid="ad-unit"></ins></div></section><footer class="py-20 px-6 bg-gray-100 dark:bg-gray-850 overflow-hidden lg:overflow-auto transition-opacity duration-1000 delay-1750 motion-reduce:transition-none opacity-0" data-testid="footer"><ul class="relative text-center overflow-hidden transition-height duration-1000 motion-reduce:transition-none sm:text-lg xl:text-xl" style="height:0"><li class="absolute top-0 left-0 w-full transition-opacity duration-1000 motion-reduce:transition-none"><blockquote><!-- -->If there is no struggle, there is no progress.<!-- --></blockquote><p class="mt-1 sm:mt-2"> <!-- -->Frederick Douglass</p></li><li class="absolute top-0 left-0 w-full transition-opacity duration-1000 motion-reduce:transition-none opacity-0 pointer-events-none"><blockquote><!-- -->It&#x27;s okay to figure out murder mysteries, but you shouldn&#x27;t need to figure out code. You should be able to read it.<!-- --></blockquote><p class="mt-1 sm:mt-2"> <!-- -->Steve McConnell</p></li><li class="absolute top-0 left-0 w-full transition-opacity duration-1000 motion-reduce:transition-none opacity-0 pointer-events-none"><blockquote><!-- -->If you can&#x27;t explain it simply, you don&#x27;t understand it well enough.<!-- --></blockquote><p class="mt-1 sm:mt-2"> <!-- -->Albert Einstein</p></li><li class="absolute top-0 left-0 w-full transition-opacity duration-1000 motion-reduce:transition-none opacity-0 pointer-events-none"><blockquote><!-- -->The secret of getting ahead is getting started.<!-- --></blockquote><p class="mt-1 sm:mt-2"> <!-- -->Mark Twain</p></li></ul><ul class="max-w-full mt-10 flex flex-wrap justify-center lg:hidden"><li class="flex lg:transform lg:transition lg:ease-in-out lg:duration-500 motion-reduce:lg:transition-none lg:opacity-0 lg:translate-y-full" style="transition-delay:2050ms"><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" aria-describedby="tooltip-donate" href="https://www.paypal.com/paypalme/DominicArrojado" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Show your support and donate!"><svg viewBox="0 0 512 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M256 416c114.9 0 208-93.1 208-208S370.9 0 256 0 48 93.1 48 208s93.1 208 208 208zM233.8 97.4V80.6c0-9.2 7.4-16.6 16.6-16.6h11.1c9.2 0 16.6 7.4 16.6 16.6v17c15.5.8 30.5 6.1 43 15.4 5.6 4.1 6.2 12.3 1.2 17.1L306 145.6c-3.8 3.7-9.5 3.8-14 1-5.4-3.4-11.4-5.1-17.8-5.1h-38.9c-9 0-16.3 8.2-16.3 18.3 0 8.2 5 15.5 12.1 17.6l62.3 18.7c25.7 7.7 43.7 32.4 43.7 60.1 0 34-26.4 61.5-59.1 62.4v16.8c0 9.2-7.4 16.6-16.6 16.6h-11.1c-9.2 0-16.6-7.4-16.6-16.6v-17c-15.5-.8-30.5-6.1-43-15.4-5.6-4.1-6.2-12.3-1.2-17.1l16.3-15.5c3.8-3.7 9.5-3.8 14-1 5.4 3.4 11.4 5.1 17.8 5.1h38.9c9 0 16.3-8.2 16.3-18.3 0-8.2-5-15.5-12.1-17.6l-62.3-18.7c-25.7-7.7-43.7-32.4-43.7-60.1.1-34 26.4-61.5 59.1-62.4zM480 352h-32.5c-19.6 26-44.6 47.7-73 64h63.8c5.3 0 9.6 3.6 9.6 8v16c0 4.4-4.3 8-9.6 8H73.6c-5.3 0-9.6-3.6-9.6-8v-16c0-4.4 4.3-8 9.6-8h63.8c-28.4-16.3-53.3-38-73-64H32c-17.7 0-32 14.3-32 32v96c0 17.7 14.3 32 32 32h448c17.7 0 32-14.3 32-32v-96c0-17.7-14.3-32-32-32z"></path></svg></a></li><li class="flex lg:transform lg:transition lg:ease-in-out lg:duration-500 motion-reduce:lg:transition-none lg:opacity-0 lg:translate-y-full" style="transition-delay:2200ms"><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" aria-describedby="tooltip-youtube" href="https://www.youtube.com/channel/UCWwV__qrzg5BYCSwO91Xhxg/videos?view=0&amp;sort=dd" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Watch my tech videos!"><svg viewBox="0 0 576 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"></path></svg></a></li><li class="flex lg:transform lg:transition lg:ease-in-out lg:duration-500 motion-reduce:lg:transition-none lg:opacity-0 lg:translate-y-full" style="transition-delay:2350ms"><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" aria-describedby="tooltip-linkedin" href="https://www.linkedin.com/in/dominic-arrojado-75ba03a9/" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Let&#x27;s connect on LinkedIn!"><svg viewBox="0 0 448 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a></li><li class="flex lg:transform lg:transition lg:ease-in-out lg:duration-500 motion-reduce:lg:transition-none lg:opacity-0 lg:translate-y-full" style="transition-delay:2500ms"><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" aria-describedby="tooltip-github" href="https://github.com/dominicarrojado/" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Follow me on GitHub!"><svg viewBox="0 0 496 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></li><li class="flex lg:transform lg:transition lg:ease-in-out lg:duration-500 motion-reduce:lg:transition-none lg:opacity-0 lg:translate-y-full" style="transition-delay:2650ms"><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" aria-describedby="tooltip-email" href="mailto:dominicarrojado@gmail.com" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Email me!"><svg viewBox="0 0 512 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"></path></svg></a></li></ul><p class="mt-4 text-gray-400 text-sm text-center sm:text-base lg:mt-10 xl:text-lg"><span class="font-normal"><!-- -->2022<!-- --> Dominic Arrojado</span> <span class="block mt-1 sm:hidden"></span><span class="hidden sm:inline"></span> <a href="/privacy-policy/">Privacy Policy</a> <!-- --><!-- --> <a href="/disclaimer/">Disclaimer</a></p></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"how-to-create-your-own-otp-input-in-react-and-typescript-with-tests-part-1","content":"\n## Introduction\n\nThere's tons of OTP (one-time password) or OTC (one-time code) input I have seen out there, but most of them were difficult to use or doesn't give me a great user experience. For example, when I get prompt with an OTP input on mobile that only accepts digits, once I focus on it, the mobile keyboard should only display numbers but for some web applications they display the alphabet keyboard. Another example is that if I receive an [SMS message](https://en.wikipedia.org/wiki/SMS) containing the one-time code I need to fill in, my phone should be able to automatically fill in or suggest the passcodes for the input but again some web apps don't follow the proper implementation. You want more examples? If the OTP input is implemented in separate input boxes where only one digit per input box is allowed, when I type in the digit, it should automatically focus to the next input and yet again some web apps aren't able to do that! Yes, you can tell I'm a little bit frustrated that I had to do this post. My solution here may not be perfect but I hope it still helps web developers out there to know what are the considerations and best practices when implementing the OTP input. Although, this post could be much shorter if we just implement the OTP input in one input box, but where's the challenge in that if we don't implement them in separate input boxes, right? So without further ado, let's get on with it ~\n\n## Prerequisites\n\nThis is the [link to the OTP input](/react-typescript-otp-input/) which we'll accomplish by the end of this post, you can see and play around with it or use it as your reference throughout this tutorial.\n\nUpon writing this post, I assume that you have some web development background and basic knowledge regarding [npm](https://www.npmjs.com/), [yarn](https://classic.yarnpkg.com/lang/en/), [HTML](https://developer.mozilla.org/en-US/docs/Web/HTML), [CSS](https://developer.mozilla.org/en-US/docs/Web/CSS), [JavaScript](https://developer.mozilla.org/en-US/docs/Web/JavaScript) and [React](https://reactjs.org/).\n\nMake sure to install [Yarn](https://classic.yarnpkg.com/lang/en/) in your system if you haven't. We use [Yarn](https://classic.yarnpkg.com/lang/en/) as our package manager, it's just like [npm](https://www.npmjs.com/) but _faster_.\n\nI've written a [separate post](/posts/local-development-setup-for-react-and-typescript-projects/) about the [IDE](https://en.wikipedia.org/wiki/Integrated_development_environment) and extensions I use to help me save time and energy when writing my code in React. I highly suggest for you to check it out if you haven't!\n\n## Initialize your project\n\nFastest way to start a new project with React is using [Create React App](https://create-react-app.dev/). It is an officially supported way to create single-page React applications. It offers a modern build setup with no configuration so you can focus on code, not build tools.\n\nTo create our project with React and TypeScript, run this command in your terminal:\n\n```bash\nyarn create react-app react-typescript-otp-input --template typescript\n```\n\nOnce project is initiated, we can run our project by executing the command below:\n\n```bash\ncd react-typescript-otp-input\nyarn start\n```\n\nThis command will open your default browser and go to `http://localhost:3000/`. If it doesn't, you can do it yourself too.\n\nThis setup comes with live-editing or hot reloading which means when we save file changes, it will automatically update the app and reload on the browser. That's great for local development!\n\n---\n\n## Clean up the project\n\nWe're ready to code! Let's clean up our project which was created by Create React App. We won't be needing some of them. Delete or clear the contents of the following below:\n\n- src/App.css (clear contents)\n- src/App.test.tsx (delete)\n- src/logo.svg (delete)\n\nThen let's update the code of `src/App.tsx`:\n\n```tsx\nimport './App.css';\n\nexport default function App() {\n  return (\n    \u003cdiv className=\"container\"\u003e\n      \u003ch1\u003eReact TypeScript OTP Input\u003c/h1\u003e\n    \u003c/div\u003e\n  );\n}\n```\n\nWe will use the `App` component as the container of our OTP input. Then, add the following code to `src/App.css`:\n\n```css\n.container {\n  width: 800px;\n  max-width: 100%;\n  margin: 0 auto;\n  padding: 20px 15px;\n}\n```\n\nAnd update the `src/index.css` too:\n\n```css\n* {\n  box-sizing: border-box;\n}\n\nbody {\n  margin: 0;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto',\n    'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans',\n    'Helvetica Neue', sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n```\n\nThat's about it. This will be the container of our OTP input component.\n\n---\n\n## OtpInput component\n\nNow let's create our component `src/components/OtpInput.tsx` and add the following code:\n\n```tsx\nimport './OtpInput.css';\n\nexport type Props = {\n  value: string;\n  valueLength: number;\n  onChange: (value: string) =\u003e void;\n};\n\nexport default function OtpInput({ value, valueLength, onChange }: Props) {\n  return (\n    \u003cdiv className=\"otp-group\"\u003e\n      {[1, 2, 3, 4, 5, 6].map((digit, idx) =\u003e (\n        \u003cinput\n          key={idx}\n          type=\"text\"\n          inputMode=\"numeric\"\n          autoComplete=\"one-time-code\"\n          pattern=\"\\d{1}\"\n          maxLength={valueLength}\n          className=\"otp-input\"\n          value={digit}\n        /\u003e\n      ))}\n    \u003c/div\u003e\n  );\n}\n```\n\nSo in the code, we allow properties (`props`) for our `OtpInput` component to make it reusable. Since we're writing our React code in TypeScript, we initialized the type `Props` which an object containing `value` prop that is a `string` for the one-time code, `valueLength` prop that is a `number` for the length of the code (it determines the number of one-digit input boxes to create or display) and an event listener prop `onChange` to listen to the changes in one-time code so any parent component such as the `App` component can update the state with the new value.\n\nWe hardcoded the array `[1, 2, 3, 4, 5, 6]` so we can loop through it and display 6 input boxes to make our OTP input. Don't worry about it for now, this is temporary and we'll be replacing it later with our logic to make it dynamic depending on the `valueLength` prop.\n\nSince OTPs are usually five or six digit numbers, using `type=\"number\"` for an input field might seem intuitive because it changes the mobile keyboard to numbers only. This is not recommended because the browser expects an input field to be a countable number rather than a sequence of multiple numbers, which can cause unexpected behavior. Using `type=\"number\"` causes up and down buttons to be displayed beside the input field; pressing these buttons increments or decrements the number and may remove preceding zeros.\n\nSo we use `type=\"text\"` instead. This won't turn the mobile keyboard into numbers only, but that is fine because the next tip for using `inputMode=\"numeric\"` does that job. `inputMode=\"numeric\"` changes the mobile keyboard to numbers only.\n\nSome websites use `type=\"tel\"` for OTP input fields since it also turns the mobile keyboard to numbers only (including `*` and `#`) when focused. This hack was used in the past when `inputMode=\"numeric\"` wasn't widely supported. Since [Firefox started supporting](https://github.com/mdn/browser-compat-data/pull/6782) `inputMode=\"numeric\"`, there's no need to use the semantically incorrect `type=\"tel\"` hack.\n\nWith `autocomplete=\"one-time-code\"` whenever a user receives an SMS message while a form is open, the operating system will parse the OTP in the SMS heuristically and the keyboard will suggest the OTP for the user to enter. It works only on Safari 12 and later on iOS, iPadOS, and macOS, but we strongly recommend using it, because it is an easy way to improve the SMS OTP experience on those platforms.\n\n`autocomplete=\"one-time-code\"` improves the user experience, but there's more you can do by [ensuring that the SMS message complies with the origin-bound message format](https://web.dev/sms-otp-form/#format).\n\nWhile the `pattern=\"\\d{1}\"` specifies the format that the entered OTP must match which in this case constrains the OTP to a one digit string.\n\nAnd lastly, `maxLength={valueLength}` to only restrict maximum digits per input box. You might wonder, why not just use one `1` as the value for `maxLength`. That's because we will allow [pasting](https://developer.mozilla.org/en-US/docs/Web/API/Element/paste_event) of code and at the same time allow the autocomplete logic to work. You'll get to see this making more sense later - keep those doubts to yourself for now.\n\n---\n\n## OtpInput styles\n\nNow let's style our `OtpInput` component by adding the following code in `src/components/OtpInput.css`:\n\n```css\n.otp-group {\n  display: flex;\n  width: 100%;\n  max-width: 360px;\n  column-gap: 10px;\n}\n\n.otp-input {\n  width: 100%;\n  height: 60px;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n  text-align: center;\n  font-size: 32px;\n  font-weight: bold;\n  line-height: 1;\n}\n```\n\nTo import our `OtpInput` component into our `App` component in `src/App.tsx`, simply update the code with this:\n\n```tsx\nimport { useState } from 'react';\nimport OtpInput from './components/OtpInput';\nimport './App.css';\n\nexport default function App() {\n  const [otp, setOtp] = useState('');\n  const onChange = (value: string) =\u003e setOtp(value);\n\n  return (\n    \u003cdiv className=\"container\"\u003e\n      \u003ch1\u003eReact TypeScript OTP Input\u003c/h1\u003e\n      \u003cOtpInput value={otp} valueLength={6} onChange={onChange} /\u003e\n    \u003c/div\u003e\n  );\n}\n```\n\nAfter saving the changes, we should see our web application in the browser like this:\n\n![Screenshot of React OTP Input](/images/posts/how-to-create-your-own-otp-input-in-react-and-typescript-with-tests/otp-input-1.png)\n\nGreat, that is looking like an OTP input now but it is lacking the logics that makes it an OTP input so let's proceed to implementing those.\n\n## Construct array from value prop\n\nFor the first logic we need to implement, is transforming the `value` string we get from the `props` into an array like we did earlier so it that we can loop it and display them as individual input boxes. This time instead of hardcoding the array, it will be a dynamic array instead.\n\nSo for example we are given a `value` prop of `'654321'`, we convert it into an array `[6, 5, 4, 3, 2, 1]`. This is achievable by just doing a JavaSript string method [`.split('')`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/split). But what if we are only given a string with less than the expected length (e.g. `6`), let's say `'214'` which only has a length of `3` characters, our array should still be a length of `6` or the number we got from `valueLength` prop.\n\nHow do we do this?\n\nWe can utilize `useMemo` and use `value` and `valueLength` prop as dependencies, then do a loop using `valueLength` as the max index. Using the current index `i` in the loop, we check whether the character from the `value` string exists and it's a number. We can't simply use `typeof` and check if it's `number` because that will also be true for `NaN`, so we use a [regular expression `RegExp`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions) - that would be `/^\\d+$/`. This regular expression contains metacharacters such as `\\d` which finds a digit, then `^` means to begin with, and `$` which means to end with. You can visit [this page](https://www.w3schools.com/jsref/jsref_obj_regexp.asp) to know more about the JavaScript RegExp syntax, modifiers, brackets and other metacharacters. By combining them, this regular expression can test or check if a character is a digit (or a `number`). We can use this to check and push characters that are digits to the constructed array, and if it is _not_ a digit then we simply push an empty string `''` instead. This way we can construct an array that meets the length of the `valueLength`. If what I said here doesn't make any sense, the code hopefully might help.\n\n---\n\nFirst create a constant variable in `src/constants.ts` to keep our regular expression that checks or tests whether a `string` is a digit because we'll be using it more than once.\n\n```ts\nexport const RE_DIGIT = new RegExp(/^\\d+$/);\n```\n\nThen let's update our `OtpInput` component in `src/components/OtpInput.tsx`:\n\n```tsx\nimport { useMemo } from 'react';\nimport { RE_DIGIT } from '../constants';\n...\n\nexport default function OtpInput({ value, valueLength, onChange }: Props) {\n  const valueItems = useMemo(() =\u003e {\n    const valueArray = value.split('');\n    const items: Array\u003cstring\u003e = [];\n\n    for (let i = 0; i \u003c valueLength; i++) {\n      const char = valueArray[i];\n\n      if (RE_DIGIT.test(char)) {\n        items.push(char);\n      } else {\n        items.push('');\n      }\n    }\n\n    return items;\n  }, [value, valueLength]);\n\n  return (\n    \u003cdiv className=\"otp-group\"\u003e\n      {valueItems.map((digit, idx) =\u003e (\n        \u003cinput\n          ...\n        /\u003e\n      ))}\n    \u003c/div\u003e\n  );\n}\n```\n\nIf you want to test if this logic really works, try replacing the default value in `src/App.tsx`:\n\n```tsx\n...\n\nexport default function App() {\n  const [otp, setOtp] = useState('654321');\n  ...\n}\n```\n\nYou should see in the application in the browser like this:\n\n![Screenshot of React OTP Input](/images/posts/how-to-create-your-own-otp-input-in-react-and-typescript-with-tests/otp-input-2.png)\n\nGreat, that means our logic works. You can try changing the default value to something less than `6`, e.g. `214` and it will just fill in the first three input boxes but still display the other input boxes unfilled.\n\nAlright. After you're done testing it, revert the default value back to an empty string `''` and let's proceed to the next logic.\n\n---\n\n## Allow typing digits in input boxes\n\nIf you try to type anything on the inputs, it will not change, because the values are hardcoded to the array we constructed, and the said array only changes if the `value` prop changes from the parent `App` component. Currently, we're not doing anything to change the `value` prop from the parent component. So let's handle that.\n\nWe can attach an [change event](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/change_event) listener to each input boxes. The challenging part right here is that, each input boxes is assigned to a position in the constructed array. So any change in a particular input boxes shouldn't affect the value from other inputs. We can make use of the index `idx` we got from looping the array to handle this along with the help of a JavaScript string method [`.substring()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/substring) to construct the new `value` prop string. To change the `value` prop from the parent component, we can pass the new value to the `onChange()` prop function. We can also utilise here the regular expression we created earlier to only allow digits in the change event. If user tries to input a letter or a special character, that shouldn't be displayed in the input boxes or simply does not update the `value` prop string. To write this in code, we'll have something like this in `src/components/OtpInput.tsx`:\n\n```tsx\nimport React, { useMemo } from 'react';\n...\n\nexport default function OtpInput({ value, valueLength, onChange }: Props) {\n  ...\n\n  const inputOnChange = (\n    e: React.ChangeEvent\u003cHTMLInputElement\u003e,\n    idx: number\n  ) =\u003e {\n    const target = e.target;\n    const targetValue = target.value;\n\n    if (!RE_DIGIT.test(targetValue)) {\n      return;\n    }\n\n    const newValue =\n      value.substring(0, idx) + targetValue + value.substring(idx + 1);\n\n    onChange(newValue);\n  };\n\n  return (\n    \u003cdiv className=\"otp-group\"\u003e\n      {valueItems.map((digit, idx) =\u003e (\n        \u003cinput\n          ...\n          onChange={(e) =\u003e inputOnChange(e, idx)}\n        /\u003e\n      ))}\n    \u003c/div\u003e\n  );\n}\n```\n\nIf you're new to TypeScript, we need to define the type for the arguments in `inputOnChange` function here. The type for the `onChange` attribute in React is `React.ChangeEvent` from the imported `react` library which accepts the type of the element as an argument and that would be `HTMLInputElement` that is already available globally without importing it from anywhere.\n\n---\n\nSave the changes and let's see what happens when we try to input digits in the first input box. You'll notice the first digit we input is displayed correctly, but as you type more digits in the same input box, the other input boxes gets populated but the focus is still in the same input box. This looks wrong and let's fix that by focusing on the next input box or the [`nextElementSibling`](https://developer.mozilla.org/en-US/docs/Web/API/Element/nextElementSibling). Update the file `src/components/OtpInput.tsx` with the following code:\n\n```tsx\n...\n\nexport default function OtpInput({ value, valueLength, onChange }: Props) {\n  ...\n\n  const inputOnChange = (\n    e: React.ChangeEvent\u003cHTMLInputElement\u003e,\n    idx: number\n  ) =\u003e {\n    ...\n\n    const nextElementSibling =\n      target.nextElementSibling as HTMLInputElement | null;\n\n    if (nextElementSibling) {\n      nextElementSibling.focus();\n    }\n  };\n\n  ...\n}\n```\n\nIf you're new to TypeScript, you'll notice I used `as HTMLInputElement | null` here. This is called a [type assertion](https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#type-assertions). If we remove the type assertion, the type of `target.nextElementSibling` would just be `Element | null`, and if we leave it like that, it will have a TypeScript error stating that `.focus()` is not a function in `Element` but it does exists if the type is `HTMLInputElement`. That's why a type assertion is done here when we have information about the type of a value that TypeScript possibly can't know about.\n\nAlright, once you save the changes. Let's try typing digits into the input boxes again:\n\n![GIF of typing in React OTP Input](/images/posts/how-to-create-your-own-otp-input-in-react-and-typescript-with-tests/otp-input-typing.gif)\n\nWow, that looks smooth and it gives you a nice user experience!\n\nWhat's next?\n\n---\n\n## Allow deleting digits from input boxes\n\nCurrently, if you try to delete the digit from one of the input boxes using [backspace](https://en.wikipedia.org/wiki/Backspace) in your keyboard, it does _not_ do anything. Let's handle that.\n\nIf we relook at our logic in `inputOnChange` function, we only allow digits. When we delete a digit, the change event will be triggered and the `targetValue` would be an empty string `''` which is _not_ a digit, but we can allow that to implement deletion. Once we allow an empty string `''` from `targetValue`, we need to replace that with a space `' '` so that the values from other input boxes won't break since each input boxes is assigned to the position based from the `value`, for example `value` prop is `123456` which displays the input boxes like this `[1][2][3][4][5][6]`. If we were to delete a digit in the middle (e.g. `3`) when there are digits (`4`, `5` and `6`) on the right; the input boxes should be displayed like this `[1][2][ ][4][5][6]`. Let's translate this into the code and update `src/components/OtpInput.tsx`:\n\n```tsx\n...\n\nexport default function OtpInput({ value, valueLength, onChange }: Props) {\n  ...\n\n  const inputOnChange = (\n    e: React.ChangeEvent\u003cHTMLInputElement\u003e,\n    idx: number\n  ) =\u003e {\n    const target = e.target;\n    let targetValue = target.value;\n    const isTargetValueDigit = RE_DIGIT.test(targetValue);\n\n    if (!isTargetValueDigit \u0026\u0026 targetValue !== '') {\n      return;\n    }\n\n    targetValue = isTargetValueDigit ? targetValue : ' ';\n\n    const newValue =\n      value.substring(0, idx) + targetValue + value.substring(idx + 1);\n\n    onChange(newValue);\n\n    if (!isTargetValueDigit) {\n      return;\n    }\n\n    const nextElementSibling =\n      target.nextElementSibling as HTMLInputElement | null;\n\n    if (nextElementSibling) {\n      nextElementSibling.focus();\n    }\n  };\n\n  ...\n}\n```\n\nNow save the changes and try typing digits and then delete them. It will delete the digit in the input box you're currently focused in. To improve the experience when you try to delete when there's already no digit in the input box, it should focus on the previous input box [`previousElementSibling`](https://developer.mozilla.org/en-US/docs/Web/API/Element/previousElementSibling) and delete the digit in it. Do note that the change event will not be triggered if we try to press backspace where the input box is already empty. We will have to rely on the [keydown event](https://developer.mozilla.org/en-US/docs/Web/API/Document/keydown_event) instead. Here's the code to handle that in `src/components/OtpInput.tsx`:\n\n```tsx\n...\n\nexport default function OtpInput({ value, valueLength, onChange }: Props) {\n  ...\n  const inputOnKeyDown = (e: React.KeyboardEvent\u003cHTMLInputElement\u003e) =\u003e {\n    const target = e.target as HTMLInputElement;\n\n    if (e.key !== 'Backspace' || target.value !== '') {\n      return;\n    }\n\n    const previousElementSibling =\n      target.previousElementSibling as HTMLInputElement | null;\n\n    if (previousElementSibling) {\n      previousElementSibling.focus();\n    }\n  };\n\n  return (\n    \u003cdiv className=\"otp-group\"\u003e\n      {valueItems.map((digit, idx) =\u003e (\n        \u003cinput\n          ...\n          onKeyDown={inputOnKeyDown}\n        /\u003e\n      ))}\n    \u003c/div\u003e\n  );\n}\n```\n\nOnce you save the changes, you can now delete each digit from the input boxes and it will also focus back to the previous input box if the current input box is already empty. Here's how it is in action:\n\n![GIF of deleting in React OTP Input](/images/posts/how-to-create-your-own-otp-input-in-react-and-typescript-with-tests/otp-input-deleting.gif)\n\nAre we done? Nope. There's still a couple more things we need to do to make this OTP input better. Let's continue ~\n\n---\n\n## Select digit on focus event\n\nWhen we have typed the digits completely, and let's say we have input one incorrect digit in the middle, when we click on that input box, the input cursor caret may land on the right side of the digit and when that happens and you typed another digit, it messes up the digits from other input boxes. To fix that, simply do a selection of the digit using [`.setSelectionRange()`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/setSelectionRange) in the input box on [focus event](https://developer.mozilla.org/en-US/docs/Web/API/Element/focus_event). We should also do the same logic during keydown event because when we focus on an input box and replaced it with the same digit, it will not trigger the change event and the input cursor goes to the right and again that messes up the digits from other inputs once you type again.\n\nTo handle this, let's update `src/components/OtpInput.tsx` with the following code:\n\n```tsx\n...\n\nexport default function OtpInput({ value, valueLength, onChange }: Props) {\n  ...\n\n  const inputOnKeyDown = (e: React.KeyboardEvent\u003cHTMLInputElement\u003e) =\u003e {\n    const target = e.target as HTMLInputElement;\n    const targetValue = target.value;\n\n    // keep the selection range position\n    // if the same digit was typed\n    target.setSelectionRange(0, targetValue.length);\n\n    ...\n  };\n  const inputOnFocus = (e: React.FocusEvent\u003cHTMLInputElement\u003e) =\u003e {\n    const { target } = e;\n\n    target.setSelectionRange(0, target.value.length);\n  };\n\n  return (\n    \u003cdiv className=\"otp-group\"\u003e\n      {valueItems.map((digit, idx) =\u003e (\n        \u003cinput\n          ...\n          onFocus={inputOnFocus}\n        /\u003e\n      ))}\n    \u003c/div\u003e\n  );\n}\n```\n\nOnce the changes are saved, try it out! Type in the digits until the last input box, then focus on the input box in the middle, change it into another digit, it will get updated and focus on the next input box. If you input the same digit, the focus will remain in the input box - keeping everything as is. Great!\n\n---\n\n## Handle paste event\n\nNow let's also handle the elephant in the room which is the [paste event](https://developer.mozilla.org/en-US/docs/Web/API/Element/paste_event). Although, we will not be adding another event listener to our input boxes. We will simply update our `inputOnChange` logic because that is also triggered when doing a paste event.\n\nLet's go further into the logic of the paste event. This might be depending on your requirement but I'll do what I think makes more sense. We should only allow paste when the copied text is a digit and also the same length as our `valueLength`. As an extra precaution, we are trimming the `targetValue` using [`.trim()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/trim) in case users copied the code with an extra space from either or both ends of the string. Anything else such as having less or more length than the `valueLength` will be ignored or we simply won't do anything.\n\nTo translate that into code, simply update `src/components/OtpInput.tsx`:\n\n```tsx\n...\n\nexport default function OtpInput({ value, valueLength, onChange }: Props) {\n  ...\n\n  const inputOnChange = (\n    e: React.ChangeEvent\u003cHTMLInputElement\u003e,\n    idx: number\n  ) =\u003e {\n    const target = e.target;\n    let targetValue = target.value.trim();\n    const isTargetValueDigit = RE_DIGIT.test(targetValue);\n\n    if (!isTargetValueDigit \u0026\u0026 targetValue !== '') {\n      return;\n    }\n\n    targetValue = isTargetValueDigit ? targetValue : ' ';\n\n    const targetValueLength = targetValue.length;\n\n    if (targetValueLength === 1) {\n      const newValue =\n        value.substring(0, idx) + targetValue + value.substring(idx + 1);\n\n      onChange(newValue);\n\n      if (!isTargetValueDigit) {\n        return;\n      }\n\n      const nextElementSibling =\n        target.nextElementSibling as HTMLInputElement | null;\n\n      if (nextElementSibling) {\n        nextElementSibling.focus();\n      }\n    } else if (targetValueLength === valueLength) {\n      onChange(targetValue);\n\n      target.blur();\n    }\n  };\n  ...\n}\n```\n\nWe also did a `target.blur()` here to focus out of the input boxes since after you paste the code, most likely you won't be interacting with the input boxes anymore and your next step would be to submit the code.\n\nNow try copying a 6 digit code (or depending on the value you passed in `valueLength` prop from the parent `App` component) and paste it in any of the input boxes, it doesn't matter if the input boxes have already been filled - it will still work and replace the previous digits. That's great!\n\n---\n\n## Improve accessibility\n\nTo further improve the accessibility of our OTP input component, we also want to implement the feature to go through the input boxes when pressing the [keyboard arrow keys](https://en.wikipedia.org/wiki/Arrow_keys). So if you are in the first input box, when you press either the right or down arrow keys, it should focus on the next input box and when you press either the left or up down arrow keys, it should focus on the previous input box. We already have the code to move the focus to the next or previous input box, so we can refactor the existing code to make them reusable and reduce duplication. We also already have the keydown event listener where we can add this new logic. Do note that these keys have default behaviour in an input text, so we need to prevent that by calling [`Event.preventDefault()`](https://developer.mozilla.org/en-US/docs/Web/API/Event/preventDefault).\n\nTo write this in code, simply update `src/components/OtpInput.tsx` with the following:\n\n```tsx\n...\n\nexport default function OtpInput({ value, valueLength, onChange }: Props) {\n  ...\n\n  const focusToNextInput = (target: HTMLElement) =\u003e {\n    const nextElementSibling =\n      target.nextElementSibling as HTMLInputElement | null;\n\n    if (nextElementSibling) {\n      nextElementSibling.focus();\n    }\n  };\n  const focusToPrevInput = (target: HTMLElement) =\u003e {\n    const previousElementSibling =\n      target.previousElementSibling as HTMLInputElement | null;\n\n    if (previousElementSibling) {\n      previousElementSibling.focus();\n    }\n  };\n  const inputOnChange = (\n    e: React.ChangeEvent\u003cHTMLInputElement\u003e,\n    idx: number\n  ) =\u003e {\n    ...\n\n    if (targetValue.length === 1) {\n      ...\n\n      if (!isTargetValueDigit) {\n        return;\n      }\n\n      focusToNextInput(target);\n    } else {\n      ...\n    }\n  };\n  const inputOnKeyDown = (e: React.KeyboardEvent\u003cHTMLInputElement\u003e) =\u003e {\n    const { key } = e;\n    const target = e.target as HTMLInputElement;\n\n    if (key === 'ArrowRight' || key === 'ArrowDown') {\n      e.preventDefault();\n      return focusToNextInput(target);\n    }\n\n    if (key === 'ArrowLeft' || key === 'ArrowUp') {\n      e.preventDefault();\n      return focusToPrevInput(target);\n    }\n\n    const targetValue = target.value;\n\n    ...\n\n    if (e.key !== 'Backspace' || targetValue !== '') {\n      return;\n    }\n\n    focusToPrevInput(target);\n  };\n  ...\n}\n```\n\nSave those changes and test it out! Here's a demo of all the features we have implemented:\n\n![GIF of React OTP Input demo](/images/posts/how-to-create-your-own-otp-input-in-react-and-typescript-with-tests/otp-input-demo.gif)\n\nAnd that's were done with the implementation part! Please proceed to the [next part](/posts/how-to-create-your-own-otp-input-in-react-and-typescript-with-tests-part-2) to learn how to write tests for the OTP input component we have just built.\n","previousPost":{"id":"building-a-link-shortener-api-with-nestjs-and-mongodb-with-tests-part-2","title":"Building a URL shortener API with NestJS and MongoDB with tests (Part 2)","date":"2022-06-07","excerpt":"Learn how to build server-side applications in an efficient, reliable and scalable way","category":"technology","videoUrl":""},"nextPost":{"id":"how-to-create-your-own-otp-input-in-react-and-typescript-with-tests-part-2","title":"How to create your own OTP input in React and TypeScript with tests (Part 2)","date":"2022-06-16","excerpt":"Learn how to build a modern OTP input component in a reactive and reusable way","category":"technology","videoUrl":"https://youtu.be/s6MFjcCen2A"},"title":"How to create your own OTP input in React and TypeScript with tests (Part 1)","date":"2022-06-16","excerpt":"Learn how to build a modern OTP input component in a reactive and reusable way","category":"technology","videoUrl":"https://youtu.be/Qpo4gUfv2Fs"}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"how-to-create-your-own-otp-input-in-react-and-typescript-with-tests-part-1"},"buildId":"-hCx0pib_S3vqaOCyzFlZ","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>