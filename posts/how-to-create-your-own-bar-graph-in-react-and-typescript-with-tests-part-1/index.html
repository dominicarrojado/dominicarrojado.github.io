<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#2c2c34"/><link rel="icon" href="https://dominicarrojado.com/favicon.ico"/><link rel="manifest" href="https://dominicarrojado.com/manifest.json"/><meta name="twitter:card" content="summary_large_image"/><meta property="og:image" content="https://dominicarrojado.com/images/pages/guides-tips-and-tricks-to-web-development.png"/><meta property="og:image:alt" content="Dominic Arrojado | Guides, Tips and Tricks to Web Development"/><meta property="og:image:type" content="image/png"/><meta property="og:image:width" content="2400"/><meta property="og:image:height" content="1254"/><meta property="og:site_name" content="Dominic Arrojado"/><link rel="preload" href="/fonts/Roboto-Light.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Light.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-LightItalic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-LightItalic.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Regular.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Italic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Italic.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Medium.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Medium.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-MediumItalic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-MediumItalic.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Bold.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Bold.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-BoldItalic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-BoldItalic.woff" as="font" type="font/woff" crossorigin="anonymous"/><title>How to create your own bar graph in React and TypeScript with tests (Part 1) | Dominic Arrojado</title><meta name="robots" content="index,follow"/><meta name="description" content="Learn how to build a bar graph with positive and negative values in a reactive and reusable way"/><meta property="og:title" content="How to create your own bar graph in React and TypeScript with tests (Part 1) | Dominic Arrojado"/><meta property="og:description" content="Learn how to build a bar graph with positive and negative values in a reactive and reusable way"/><meta property="og:url" content="https://dominicarrojado.com/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests-part-1/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2022-11-25T14:00:00Z"/><meta property="article:modified_time" content="2022-11-25T14:00:00Z"/><meta property="article:author" content="https://dominicarrojado.com/about/"/><link rel="canonical" href="https://dominicarrojado.com/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests-part-1/"/><meta name="next-head-count" content="39"/><link rel="preload" href="/_next/static/css/22df08f2a4bd8f8e.css" as="style"/><link rel="stylesheet" href="/_next/static/css/22df08f2a4bd8f8e.css" data-n-g=""/><link rel="preload" href="/_next/static/css/82d01f71dc75279c.css" as="style"/><link rel="stylesheet" href="/_next/static/css/82d01f71dc75279c.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-9e7ef124c6212fc6.js" defer=""></script><script src="/_next/static/chunks/framework-433e73989db4e225.js" defer=""></script><script src="/_next/static/chunks/main-c51b0b3c89045435.js" defer=""></script><script src="/_next/static/chunks/pages/_app-972f59fab989cde1.js" defer=""></script><script src="/_next/static/chunks/216-1077b041778ead2e.js" defer=""></script><script src="/_next/static/chunks/466-2aafae0e90314603.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-101bdca647312681.js" defer=""></script><script src="/_next/static/dZcmuQ2S9SKP6MfF1Rl-L/_buildManifest.js" defer=""></script><script src="/_next/static/dZcmuQ2S9SKP6MfF1Rl-L/_ssgManifest.js" defer=""></script><script src="/_next/static/dZcmuQ2S9SKP6MfF1Rl-L/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><noscript>
            <iframe
              src="https://www.googletagmanager.com/ns.html?id=GTM-TSMLTPT"
              height="0"
              width="0"
              style="display: none; visibility: hidden"
            ></iframe>
          </noscript><div tabindex="-1" class="h-full outline-none"><header class="fixed flex items-center top-0 w-full z-50"><a href="#main" tabindex="0" class="absolute -top-96 -left-96 w-px h-px text-center text-white overflow-hidden -z-50 focus:top-4 focus:inset-x-0 focus:m-auto focus:w-44 focus:h-auto focus:z-50 focus:sm:w-52 focus:xl:w-56">Skip to main content</a><a class="absolute top-3.5 left-3.5 flex shadow-3xl border border-white bg-gray-750 bg-opacity-90 p-1.5 z-50 transform transition ease-in-out duration-500 hover:shadow-md hover:bg-opacity-100 motion-reduce:transition-none sm:top-4 sm:left-4 md:top-5 md:left-5 md:border-2 lg:top-8 lg:left-8 delay-700 opacity-0 -translate-y-full" aria-label="Dominic Arrojado logo" href="/"><svg viewBox="0 0 25750 29700" role="img" class="w-7 h-7 text-white transition-colors duration-300 sm:w-8 sm:h-8 md:w-10 md:h-10 xl:w-11 xl:h-11"><path fill="currentColor" d="M4850 19266H1025V2039l4600-129c2511 0 4500 735 5970 2206 1470 1470 2206 3423 2206 5854 0 6199-2985 9296-8951 9296zM4086 4719v11751c494 48 1025 72 1599 72 1543 0 2752-558 3624-1679s1310-2688 1310-4705c0-3684-1712-5524-5135-5524-329 0-795 28-1398 85zm17656 21711l-1437-3969h-6721l974-2655h4730l-2242-6854 1518-4167 7010 17645zM17826 435h3307L10351 29313H7044l4243-11322c1982-1513 2973-4055 2973-7627 0-171-4-340-11-506l3577-9423z"></path></svg></a><div class="absolute top-3.5 right-3.5 flex items-end gap-3 ml-auto sm:top-4 sm:right-4 sm:gap-4 md:top-5 md:right-5 md:gap-5 lg:top-8 lg:right-8 lg:gap-6" style="padding-right:0px" data-testid="header-buttons"><button type="button" aria-expanded="false" aria-controls="dialog-menu" aria-haspopup="dialog" class="group flex items-center flex-col min-w-8 outline-none md:min-w-10 xl:min-w-11" aria-label="Toggle menu"><div class="w-6 h-0.5 bg-gray-400 rounded dark:bg-gray-300 transform transition group-hover:bg-gray-500 group-focus-visible:bg-gray-500 motion-reduce:transition-none dark:group-hover:bg-white dark:group-focus-visible:bg-white md:w-7 md:h-1 xl:w-8 duration-1000 opacity-0 translate-x-1/2" style="transition-delay:500ms" data-testid="menu-stack"></div><div class="w-6 h-0.5 bg-gray-400 rounded dark:bg-gray-300 transform transition group-hover:bg-gray-500 group-focus-visible:bg-gray-500 motion-reduce:transition-none dark:group-hover:bg-white dark:group-focus-visible:bg-white md:w-7 md:h-1 xl:w-8 mt-1.5 duration-1000 opacity-0 -translate-x-1/2" style="transition-delay:650ms" data-testid="menu-stack"></div><div class="w-6 h-0.5 bg-gray-400 rounded dark:bg-gray-300 transform transition group-hover:bg-gray-500 group-focus-visible:bg-gray-500 motion-reduce:transition-none dark:group-hover:bg-white dark:group-focus-visible:bg-white md:w-7 md:h-1 xl:w-8 mt-1.5 duration-1000 opacity-0 translate-x-1/2" style="transition-delay:800ms" data-testid="menu-stack"></div><div class="mt-1.5 text-gray-400 text-3xs font-normal uppercase select-none dark:text-gray-300 transform transition-transform-opacity-color group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-gray-100 md:mt-2 md:text-2xs xl:text-xs duration-700 delay-1000 opacity-0 -translate-y-3">Menu</div></button></div></header><div id="main"></div><section class="relative flex flex-col justify-center bg-gray-550 py-28 px-6 text-center overflow-hidden dark:bg-gray-750 transform transition-transform ease-in-out duration-500 motion-reduce:transition-none sm:px-20 lg:px-32 min-h-96 -translate-y-full" data-testid="container"><div class="absolute top-0 left-0 w-full h-full bg-repeat bg-center invert-[.1] dark:invert-0 motion-safe:animate-slide transition-opacity duration-1250 delay-500 motion-reduce:transition-none opacity-0" style="background-image:url(&#x27;/images/bg/pattern.png&#x27;)" data-testid="background"></div><div class="overflow-hidden py-2" style="opacity:1"><h1 class="text-3xl font-bold text-white leading-tight transform transition duration-1000 delay-500 motion-reduce:transition-none sm:text-4xl md:text-5xl lg:text-6xl xl:text-7xl opacity-0 translate-y-full">How to create your own bar graph in React and TypeScript with tests (Part 1)</h1></div><div class="overflow-hidden" style="opacity:1"><p class="font-light text-white transform transition duration-1000 delay-1000 motion-reduce:transition-none xl:text-2xl opacity-0 translate-y-full">Learn how to build a bar graph with positive and negative values in a reactive and reusable way</p></div></section><section class="pt-16 pb-20 px-6 sm:pt-20 sm:pb-24 sm:px-8 md:pt-24 md:pb-28 lg:px-10 xl:pt-28 xl:pb-32 transform transition-transform-opacity duration-1000 motion-reduce:transition-none delay-1500 opacity-0 translate-y-10" data-testid="section"><div class="w-11/12 max-w-screen-3xl -mt-8 mx-auto pb-8 sm:-mt-10 sm:pb-10 md:-mt-12 md:pb-12 lg:w-5/6"><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="4984498713" data-ad-format="auto" data-full-width-responsive="true" data-testid="ad-unit"></ins></div><div class="flex justify-between items-center w-11/12 max-w-screen-3xl mx-auto lg:w-5/6"><div class="mr-4 text-sm text-gray-400 sm:text-base xl:text-lg">Last Updated: <time dateTime="2022-11-25">November 25, 2022</time></div><div class="rounded py-0.5 px-1.5 bg-gray-200 text-2xs capitalize dark:bg-gray-600 md:py-1 md:px-2 md:text-xs xl:text-sm">technology</div></div><div class="w-11/12 max-w-screen-3xl mt-4 mx-auto lg:w-5/6"><a class="group inline-flex items-center font-normal select-none dark:hover:text-white transition-colors duration-300 hover:text-black group-hover:text-black motion-reduce:transition-none" target="_blank" rel="noopener noreferrer nofollow" href="https://youtu.be/IPQzaSfUm7U"><svg viewBox="0 0 576 512" role="img" class="w-6 h-6 mr-2 text-gray-400 transition-colors duration-300 group-hover:text-red motion-reduce:transition-none dark:group-hover:text-white sm:w-7 sm:h-7 sm:mr-3 xl:w-8 xl:h-8"><path fill="currentColor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"></path></svg> <!-- -->Watch it on YouTube<svg viewBox="0 0 320 512" role="img" class="inline-block w-2 h-2 ml-2 text-black opacity-30 dark:text-white transform transition duration-300 group-hover:translate-x-1.5 group-hover:opacity-100 motion-reduce:transition-none sm:w-2.5 sm:h-2.5 sm:ml-2.5 md:w-3 md:h-3 md:ml-3 xl:w-3.5 xl:h-3.5"><path fill="currentColor" d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"></path></svg></a></div><article class="w-11/12 max-w-screen-3xl mx-auto prose dark:prose-dark sm:prose-lg lg:w-5/6 xl:prose-xl mt-8 sm:mt-10 xl:mt-14" data-clarity-region="article" data-testid="content"><h2>Introduction</h2>
<p>Charts (or also known as graphs) are graphical representations of data, in which the data is represented by symbols such as bars in bar graphs. In JavaScript, we already have popular third-party libraries such as <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/d3/d3">D3</a>, <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/chartjs/Chart.js">Chart.js</a> and <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/apache/echarts">ECharts</a> to help us create charts or graphs in a simple and customizable way with lots of features that come with it.</p>
<p>A few months ago, I had a requirement from our product team to build a bar graph that can display both positive and negative values. Though it&#x27;s so easy to use one of the libraries to implement the requirement, I decided to build the bar graph on my own because I thought the requirement was not too complicated and the data is not that big. If I use one of these libraries then it might be an overkill where we&#x27;re not able to utilize all the features. We are especially conscious about the size that gets added into our assets when we install a third-party library because the bigger the size of our JavaScript files, the slower our page gets loaded.</p>
<p>Every developer has their own way of building things, I definitely don&#x27;t think my solution is the best way - but it was the solution that made the most sense to me. I&#x27;m not going to use <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API">Canvas</a> to build the bar graph and most will argue that I should use it because that&#x27;s more efficient for drawing graphics and I agree on that. But the reason why I chose to build it with just regular <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/HTML">HTML</a> and <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/CSS">CSS</a> is because I find it more simpler and flexible to implement the expected bar graph. I also mentioned earlier that the data we need to display is not that big. Based on the requirement, we only needed to display four bars in the bar graph. The bar graph I implemented in this post may not exactly fit your requirement but I hope you&#x27;ll still learn something from this post to help you build it or something similar. Like my other <a target="_blank" rel="noopener noreferrer nofollow" href="https://reactjs.org/">React</a> and <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.typescriptlang.org/">TypeScript</a> with test posts or tutorials, this is also a good way for you to practice and learn TypeScript and writing tests with <a target="_blank" rel="noopener noreferrer nofollow" href="https://jestjs.io/">Jest</a> and <a target="_blank" rel="noopener noreferrer nofollow" href="https://testing-library.com/">Testing Library</a> if you&#x27;re still new to them. So without further ado, let&#x27;s get started!</p>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<h2>Prerequisites</h2>
<p>This is the <a target="_blank" href="/react-typescript-bar-graph/">link to the bar graph component</a> which we&#x27;ll accomplish by the end of this post, you can see and play around with it or use it as your reference throughout this tutorial.</p>
<p>Upon writing this post, I assume that you have some web development background and basic knowledge regarding <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.npmjs.com/">npm</a>, <a target="_blank" rel="noopener noreferrer nofollow" href="https://classic.yarnpkg.com/lang/en/">yarn</a>, <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/HTML">HTML</a>, <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/CSS">CSS</a>, <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript">JavaScript</a> and <a target="_blank" rel="noopener noreferrer nofollow" href="https://reactjs.org/">React</a>.</p>
<p>Make sure to install <a target="_blank" rel="noopener noreferrer nofollow" href="https://classic.yarnpkg.com/lang/en/">Yarn</a> in your system if you haven&#x27;t. We will use <a target="_blank" rel="noopener noreferrer nofollow" href="https://classic.yarnpkg.com/lang/en/">Yarn</a> as our package manager, it&#x27;s just like <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.npmjs.com/">npm</a> but <em>faster</em>.</p>
<p>I&#x27;ve written a <a href="/posts/local-development-setup-for-react-and-typescript-projects/">separate post</a> about the <a target="_blank" rel="noopener noreferrer nofollow" href="https://en.wikipedia.org/wiki/Integrated_development_environment">IDE</a> and extensions I use to help save time and energy when writing code in React. I highly suggest that you check it out if you haven&#x27;t!</p>
<h2>Initialize your project</h2>
<p>Fastest way to start a new project with React is using the <a target="_blank" rel="noopener noreferrer nofollow" href="https://create-react-app.dev/">Create React App</a>. It is an officially supported way to create single-page React applications. It offers a modern build setup with no configuration so you can focus on code, not build tools.</p>
<p>To create our project with React and TypeScript, run this command in your terminal:</p>
<pre><code class="hljs language-bash">yarn create react-app react-typescript-bar-graph --template typescript
</code></pre>
<p>Once project is initiated, install the additional package below:</p>
<pre><code class="hljs language-bash"><span class="hljs-built_in">cd</span> react-typescript-bar-graph
yarn add classnames
</code></pre>
<p>The <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/JedWatson/classnames"><code>classnames</code></a> library we just installed will help us with joining <code>classNames</code> together conditionally. You&#x27;ll get to see how we&#x27;ll use this later on.</p>
<p>To run our project, execute the command below:</p>
<pre><code class="hljs language-bash">yarn start
</code></pre>
<p>This command will open your default browser and direct you to <code>http://localhost:3000/</code>. If it doesn&#x27;t, you can do it yourself too.</p>
<p>This setup comes with live-editing or hot reloading which means when we save file changes, it will automatically update the app and reload on the browser. That&#x27;s great for local development!</p>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<h2>Clean up the project</h2>
<p>We&#x27;re ready to code! Let&#x27;s clean up our project which was created by Create React App. We won&#x27;t be needing some of them. Delete or clear the contents of the following below:</p>
<ul>
<li>src/App.css (clear contents)</li>
<li>src/App.test.tsx (delete)</li>
<li>src/logo.svg (delete)</li>
</ul>
<p>Then let&#x27;s update the code in <code>src/App.tsx</code>:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./App.css&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">App</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>React TypeScript Bar Graph<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>We will use the <code>App</code> component as the container of our bar graph component. Next, add the following styles in <code>src/App.css</code>:</p>
<pre><code class="hljs language-css"><span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">800px</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span> <span class="hljs-number">15px</span>;
}
</code></pre>
<p>Then let&#x27;s also update the styles in <code>src/index.css</code>:</p>
<pre><code class="hljs language-css">* {
  <span class="hljs-attribute">box-sizing</span>: border-box;
}

<span class="hljs-selector-tag">body</span> {
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">font-family</span>: -apple-system, BlinkMacSystemFont, <span class="hljs-string">&#x27;Segoe UI&#x27;</span>, <span class="hljs-string">&#x27;Roboto&#x27;</span>,
    <span class="hljs-string">&#x27;Oxygen&#x27;</span>, <span class="hljs-string">&#x27;Ubuntu&#x27;</span>, <span class="hljs-string">&#x27;Cantarell&#x27;</span>, <span class="hljs-string">&#x27;Fira Sans&#x27;</span>, <span class="hljs-string">&#x27;Droid Sans&#x27;</span>,
    <span class="hljs-string">&#x27;Helvetica Neue&#x27;</span>, sans-serif;
  -webkit-<span class="hljs-attribute">font-smoothing</span>: antialiased;
  -moz-osx-<span class="hljs-attribute">font-smoothing</span>: grayscale;
}
</code></pre>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<h2>Create BarItem component</h2>
<p>In a bar graph, it consists of bars. So let&#x27;s start with creating the component of a single bar and call it the <code>BarItem</code> component. We can reuse this component later inside of a bar graph.</p>
<p>First, create a folder called <code>components</code> under the <code>src</code> folder. I usually like to group the components I create inside this folder for easier reference. Inside the <code>components</code> folder, create the <a target="_blank" rel="noopener noreferrer nofollow" href="https://reactjs.org/docs/introducing-jsx.html">JSX</a> file and name it <code>BarItem.tsx</code>. The path for this new file should be <code>src/components/BarItem.tsx</code>. If you&#x27;re new to TypeScript, you will notice that the extension we used for JSX is <code>.tsx</code> instead of <code>.jsx</code>. This is the TypeScript extension for JSX and that is how the TypeScript compiler will know which files to enforce TypeScript rules and transpile its source code to JavaScript.</p>
<p>Once the file is created, add the following code below in <code>src/components/BarItem.tsx</code>:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./BarItem.css&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">BarItem</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bar-item&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p>Then, let&#x27;s style our <code>BarItem</code> component by creating the CSS file <code>src/components/BarItem.css</code> and add the styles below:</p>
<pre><code class="hljs language-css"><span class="hljs-selector-class">.bar-item</span> {
  <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f2f2f2</span>;
  <span class="hljs-attribute">border-top-right-radius</span>: <span class="hljs-number">4px</span>;
  <span class="hljs-attribute">border-top-left-radius</span>: <span class="hljs-number">4px</span>;
}

<span class="hljs-selector-class">.bar-item</span><span class="hljs-selector-pseudo">:hover</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#54d6da</span>;
}
</code></pre>
<p>We&#x27;re going to use the <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Learn/CSS/CSS_layout/Flexbox">Flexbox</a> layout system which is a one-dimensional layout method for arranging items in rows or columns, perfect for creating our bar graph. The <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/CSS/flex">flex</a> CSS shorthand property sets how a flex item will grow or shrink to fit the space available in its flex container.</p>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<h2>Create BarGraph component</h2>
<p>Next, let&#x27;s now proceed to create the component for our bar graph and call it the <code>BarGraph</code> component. The bar graph will be the container for our <code>BarItem</code> components and it will handle the calculation of the percentages of each bar. It will also contain a line bar that acts as the base of our graph - do note that the line bar will rise above the base if there are negative values in one of the bars. Do not worry about these logics for now and let&#x27;s focus first on creating the HTML structure and the styles of our bar graph.</p>
<p>Create the JSX file with the path <code>src/components/BarGraph.tsx</code> and add the following code:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;
<span class="hljs-keyword">import</span> BarItem <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./BarItem&#x27;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./BarGraph.css&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">BarGraph</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bar-graph&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bars-list&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">BarItem</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">BarItem</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">BarItem</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">BarItem</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bars-line&quot;</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>Then, create a CSS file with the path <code>src/components/BarGraph.css</code> to style our <code>BarGraph</code> component. Add the following styles below:</p>
<pre><code class="hljs language-css"><span class="hljs-selector-class">.bar-graph</span> {
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">400px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">170px</span>;
}

<span class="hljs-selector-class">.bars-list</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">align-items</span>: flex-end;
  <span class="hljs-attribute">column-gap</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
}

<span class="hljs-selector-class">.bars-line</span> {
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">bottom</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">1px</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#505050</span>;
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.5</span>;
  <span class="hljs-attribute">pointer-events</span>: none;
}
</code></pre>
<p>The <code>BarGraph</code> component is now ready to be imported and used in the <code>App</code> component. Let&#x27;s update <code>src/App.tsx</code> with the following code changes:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./App.css&#x27;</span>;
<span class="hljs-keyword">import</span> BarGraph <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/BarGraph&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">App</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>React TypeScript Bar Graph<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">BarGraph</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>After saving the changes, this is what you should see on your React application:</p>
<div class="lazyload-wrapper "><div class="lazyload-placeholder"></div></div>
<p>Great! We now have the first look of our bar graph.</p>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<h2>Implement bar legend</h2>
<p>To make our bar graph a little more informational, let&#x27;s add a legend for each of the bars which represents a caption for the content of it.</p>
<p>Let&#x27;s update the <code>BarItem</code> component in <code>src/components/BarItem.tsx</code> with the following:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./BarItem.css&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">BarItem</span>(<span class="hljs-params">props</span>) </span>{
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bar-item&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bar-item-legend&quot;</span>&gt;</span>{props.legend}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>When you apply the changes, you should see a squiggly underline on the component &quot;props&quot; (which stands for properties) object argument. When you hover on it, you should see the TypeScript error message: <code>Parameter &#x27;props&#x27; implicitly has an &#x27;any&#x27; type</code>. This means we didn&#x27;t explicitly define the type for the &quot;props&quot; and that will potentially cause errors later on. Let&#x27;s fix this by defining the type:</p>
<pre><code class="hljs language-tsx">...
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">BarItem</span>(<span class="hljs-params">props: { legend: <span class="hljs-built_in">string</span> }</span>) </span>{
  <span class="hljs-keyword">return</span> (
    ...
  );
}
</code></pre>
<p>If you&#x27;re new to TypeScript, this is how we define a type. We first add a colon <code>:</code> right after the variable or argument we are defining a type of. Since &quot;props&quot; is an object, hence our type is also wrapped with the curly braces <code>{}</code> that make it an object. Inside the object, we define the keys or properties we require for our &quot;props&quot;, which in this case is the <code>legend</code> key or property. Again, we add a colon <code>:</code> right after it and define the type it should accept which in this case legend should be a <code>string</code>. The type <code>string</code> is one of the very commonly used <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#the-primitives-string-number-and-boolean">primitives</a> apart from <code>number</code> and <code>boolean</code>.</p>
<p>We&#x27;ve used object types by writing them directly in type annotations. This is convenient, but it&#x27;s common to want to use the same type more than once and refer to it by a single name. You can also extract the type and declare it like a variable like this:</p>
<pre><code class="hljs language-tsx">...
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> Props = {
  <span class="hljs-attr">legend</span>: <span class="hljs-built_in">string</span>;
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">BarItem</span>(<span class="hljs-params">props: Props</span>) </span>{
  <span class="hljs-keyword">return</span> (
    ...
  );
}
</code></pre>
<p>This is what we call a <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#type-aliases">Type Alias</a>. Now that the <code>Props</code> type is exported, it can be reused by other files such as test files which we&#x27;ll do later on.</p>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>After saving the changes, you will get a new error from the <code>BarGraph</code> component with the following message: <code>Property &#x27;legend&#x27; is missing in type &#x27;{}&#x27; but required in type &#x27;Props&#x27;.</code></p>
<p>You can already see how useful TypeScript is and how helpful it would be when debugging at this early stage rather than later on.</p>
<p>We can fix the error by updating <code>src/components/BarGraph.tsx</code> with the following code:</p>
<pre><code class="hljs language-tsx">...
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">BarGraph</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bar-graph&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bars-list&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">BarItem</span> <span class="hljs-attr">legend</span>=<span class="hljs-string">&quot;Year 1&quot;</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">BarItem</span> <span class="hljs-attr">legend</span>=<span class="hljs-string">&quot;Year 2&quot;</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">BarItem</span> <span class="hljs-attr">legend</span>=<span class="hljs-string">&quot;Year 3&quot;</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">BarItem</span> <span class="hljs-attr">legend</span>=<span class="hljs-string">&quot;Thereafter&quot;</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bars-line&quot;</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>Then, let&#x27;s add the style of the legends in <code>src/components/BarItem.css</code>:</p>
<pre><code class="hljs language-css"><span class="hljs-selector-class">.bar-item</span> {
  ...
  <span class="hljs-attribute">position</span>: relative;
}

...

<span class="hljs-selector-class">.bar-item-legend</span> {
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">top</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#999999</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;
  <span class="hljs-attribute">line-height</span>: <span class="hljs-number">14px</span>;
  <span class="hljs-attribute">text-align</span>: center;
}

<span class="hljs-selector-class">.bar-item</span><span class="hljs-selector-pseudo">:hover</span> <span class="hljs-selector-class">.bar-item-legend</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#2c2c2c</span>;
}
</code></pre>
<p>Once you save the changes, you should see that each of the bar has a legend right below them:</p>
<div class="lazyload-wrapper "><div class="lazyload-placeholder"></div></div>
<p>Our bar graph is looking great so far!</p>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<h2>Display bars based on their value</h2>
<p>When we display graphs such as a bar graph, we normally use percentages to represent each bar. To implement the percentage for each bar, it&#x27;s not as straightforward as you might think. This is because we want to display bars with negative values as well which makes this post interesting, at least for me. If it&#x27;s just positive values, it will be straightforward and we just have to define the value of the <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/CSS/height">height</a> CSS property of the bar with the percentage we calculated. But the height CSS property can&#x27;t accept negative percentage and hence that&#x27;s where the complication is.</p>
<p>Don&#x27;t worry! I&#x27;m here to help and guide you on how to solve this. As always, before we tackle any problems or complications, we can do some observations to help us understand the problem, collect all the data and eventually find a solution. First, let&#x27;s observe the different instances below that we need to handle in our bar graph:</p>
<div class="lazyload-wrapper "><div class="lazyload-placeholder"></div></div>
<p>Starting from the left of the image or screenshot, the first graph displays a bar graph with all positive values, the line bar is at the bottom and one of the bars with the highest value occupies 100% of the graph height. The second graph displays a bar graph with one negative value, notice how the line bar elevates the <strong><em>same level</em></strong> as the bars with positive values. You could also say that the height of the bar with negative value is the <strong><em>same level</em></strong> as the line bar&#x27;s elevation level. The third graph displays a bar graph with all negative values, aside from the line bar elevating, bars with smaller negative values also elevate until it sticks to the line bar.</p>
<p>Also from the observation, we can tell that all the graphs utilize 100% of the container height and the container height is static based on our CSS styles. In the first graph, the highest positive value becomes 100% and the rest of the bars will be based on that. In the second graph, the sum of the highest positive value and the highest negative value (by <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/abs">absolute</a>) becomes 100% and the rest of the bars will be based on that. In the third graph, similarly to the first graph, the highest negative value (by absolute) becomes 100% and the rest of the bars will be based on that. I hope I explained it clearly enough, but if not, maybe the following steps will do.</p>
<p>Let&#x27;s start with the actual values of the first graph. That would be <code>200</code>, <code>300</code>, <code>700</code> and <code>500</code>. Our first step is to get the highest positive value among these values and that would be <code>700</code>.</p>
<p>Once we get the highest positive value, we can divide each value with the highest positive value.</p>
<p>In order, it would be: <code>200 / 700</code>, <code>300 / 700</code>, <code>700 / 700</code> and <code>500 / 700</code>. We will get: <code>0.29</code>, <code>0.43</code>, <code>1</code> and <code>0.71</code>. To convert them into percentages, we just have to multiply them by <code>100</code> and we will get: <code>29%</code>, <code>43%</code>, <code>100%</code>, and <code>71%</code>.</p>
<p>I think this is a good start for us to update our React app code with this logic in mind, open <code>src/App.tsx</code> and update our <code>App</code> component to provide data to our bar graph with the following code:</p>
<pre><code class="hljs language-tsx">...
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">App</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> dataArray1 = [
    {
      <span class="hljs-attr">value</span>: <span class="hljs-number">200</span>,
      <span class="hljs-attr">legend</span>: <span class="hljs-string">&#x27;Year 1&#x27;</span>,
    },
    {
      <span class="hljs-attr">value</span>: <span class="hljs-number">300</span>,
      <span class="hljs-attr">legend</span>: <span class="hljs-string">&#x27;Year 2&#x27;</span>,
    },
    {
      <span class="hljs-attr">value</span>: <span class="hljs-number">700</span>,
      <span class="hljs-attr">legend</span>: <span class="hljs-string">&#x27;Year 3&#x27;</span>,
    },
    {
      <span class="hljs-attr">value</span>: <span class="hljs-number">500</span>,
      <span class="hljs-attr">legend</span>: <span class="hljs-string">&#x27;Thereafter&#x27;</span>,
    },
  ];

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>React TypeScript Bar Graph<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">BarGraph</span> <span class="hljs-attr">dataArray</span>=<span class="hljs-string">{dataArray1}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>You will receive TypeScript errors when you save this change but they will be fixed once we complete the overall changes.</p>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>Next, let&#x27;s open <code>src/components/BarGraph.tsx</code> and update our <code>BarGraph</code> component to convert the values from <code>dataArray</code> into percentages using the logic we discussed earlier so they can be represented accordingly in each of the bars:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> React, { useMemo } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;
<span class="hljs-keyword">import</span> BarItem <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./BarItem&#x27;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./BarGraph.css&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> Props = {
  <span class="hljs-attr">dataArray</span>: <span class="hljs-built_in">Array</span>&lt;{
    <span class="hljs-attr">value</span>: <span class="hljs-built_in">number</span>;
    legend: <span class="hljs-built_in">string</span>;
  }&gt;;
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">BarGraph</span>(<span class="hljs-params">{ dataArray }: Props</span>) </span>{
  <span class="hljs-keyword">const</span> barItems = useMemo(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">let</span> highestValue = <span class="hljs-number">0</span>;

    <span class="hljs-comment">// get the highest value</span>
    dataArray.forEach(<span class="hljs-function">(<span class="hljs-params">{ value }</span>) =&gt;</span> {
      highestValue = <span class="hljs-built_in">Math</span>.max(highestValue, value);
    });

    <span class="hljs-comment">// calculate &quot;barPercentage&quot; using the &quot;highestValue&quot; to construct the bar items</span>
    <span class="hljs-keyword">return</span> dataArray.map(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> ({
      <span class="hljs-attr">legend</span>: item.legend,
      <span class="hljs-attr">barPercentage</span>: <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.round((item.value / highestValue) * <span class="hljs-number">100</span>)}</span>%`</span>,
    }));
  }, [dataArray]);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bar-graph&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bars-list&quot;</span>&gt;</span>
        {barItems.map((barItem, idx) =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">BarItem</span>
            <span class="hljs-attr">key</span>=<span class="hljs-string">{idx}</span>
            <span class="hljs-attr">legend</span>=<span class="hljs-string">{barItem.legend}</span>
            <span class="hljs-attr">barPercentage</span>=<span class="hljs-string">{barItem.barPercentage}</span>
          /&gt;</span>
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bars-line&quot;</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>In the code above, we created the type <code>Props</code> for the required props of the <code>BarGraph</code> component. If you&#x27;re new to TypeScript, this is how we define a type for an array of values. You might wonder why it&#x27;s not defined like this:</p>
<pre><code class="hljs language-ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> Props = {
  <span class="hljs-attr">dataArray</span>: [{ <span class="hljs-attr">value</span>: <span class="hljs-built_in">number</span>; legend: <span class="hljs-built_in">string</span> }];
};
</code></pre>
<p>This is actually accepted in TypeScript as well, but this type means that it requires the prop <code>dataArray</code> to be an array with <strong>one</strong> object only. It will not accept less than or more than one object. Hence we are using the <code>Array</code> interface to represent the type for <code>dataArray</code> props can accept an array of items with any length.</p>
<p>Also in the code above, we use <code>React.useMemo()</code> to convert the values into percentages and construct the <code>barItems</code> array that we can loop to render each <code>BarItem</code> component and pass the required props. <code>React.useMemo()</code> returns a <a target="_blank" rel="noopener noreferrer nofollow" href="https://en.wikipedia.org/wiki/Memoization">memoized</a> value which also means that it will only recompute the memoized value when one of the dependencies has changed, in this case is the <code>dataArray</code> we got from the props of the <code>BarGraph</code> component. This makes our bar graph reactive!</p>
<p>Finally, let&#x27;s update <code>src/components/BarItem.tsx</code> to support the new prop <code>barPercentage</code> and use that to set the height of the bar in the <code>BarItem</code> component:</p>
<pre><code class="hljs language-tsx">...
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> Props = {
  <span class="hljs-attr">legend</span>: <span class="hljs-built_in">string</span>;
  barPercentage: <span class="hljs-built_in">string</span>;
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">BarItem</span>(<span class="hljs-params">props: Props</span>) </span>{
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bar-item&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">height:</span> <span class="hljs-attr">props.barPercentage</span> }}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bar-item-legend&quot;</span>&gt;</span>{props.legend}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>Alright. Once all the changes are saved, you should see something like this in your React application:</p>
<div class="lazyload-wrapper "><div class="lazyload-placeholder"></div></div>
<p>Great! We can see our bar graph displaying the bars with different heights which is a percentile representation of the values we passed from the <code>App</code> component. This is exactly the same as the first graph that displays the bars with all positive values.</p>
<h2>Display bars with negative values (Part 1)</h2>
<p>With our current logic, what happens if we have a negative value in the <code>dataArray</code>? Let&#x27;s find out by updating our <code>App</code> component in <code>src/App.tsx</code> and see what happens. Here are the values for the expected second graph:</p>
<pre><code class="hljs language-tsx">...
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">App</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> dataArray1 = [
    ...
  ];
  <span class="hljs-keyword">const</span> dataArray2 = [
    {
      <span class="hljs-attr">value</span>: <span class="hljs-number">500</span>,
      <span class="hljs-attr">legend</span>: <span class="hljs-string">&#x27;Year 1&#x27;</span>,
    },
    {
      <span class="hljs-attr">value</span>: <span class="hljs-number">300</span>,
      <span class="hljs-attr">legend</span>: <span class="hljs-string">&#x27;Year 2&#x27;</span>,
    },
    {
      <span class="hljs-attr">value</span>: -<span class="hljs-number">200</span>,
      <span class="hljs-attr">legend</span>: <span class="hljs-string">&#x27;Year 3&#x27;</span>,
    },
    {
      <span class="hljs-attr">value</span>: <span class="hljs-number">700</span>,
      <span class="hljs-attr">legend</span>: <span class="hljs-string">&#x27;Thereafter&#x27;</span>,
    },
  ];

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>React TypeScript Bar Graph<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">BarGraph</span> <span class="hljs-attr">dataArray</span>=<span class="hljs-string">{dataArray1}</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">BarGraph</span> <span class="hljs-attr">dataArray</span>=<span class="hljs-string">{dataArray2}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>Before we look into our React app, let&#x27;s update the style in <code>src/components/BarGraph.css</code> to give some space between the bar graphs:</p>
<pre><code class="hljs language-css"><span class="hljs-selector-class">.bar-graph</span> {
  ...
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">60px</span>;
}
...
</code></pre>
<p>Alright, now let&#x27;s see what is displayed in our React app:</p>
<div class="lazyload-wrapper "><div class="lazyload-placeholder"></div></div>
<p>Not quite what we expected because our current logic doesn&#x27;t handle negative values properly yet.</p>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>Let us recall the observation we had for the expected second graph. The sum of the highest positive value and the highest negative value (by absolute) becomes 100% and the rest of the bars will be based on that. We already know how to get the highest value, now we just need to check if the value is positive or negative, and store them separately depending on the <a target="_blank" rel="noopener noreferrer nofollow" href="https://en.wikipedia.org/wiki/Sign_(mathematics)">number sign</a>. Let&#x27;s do that first and update our <code>BarGraph</code> component in <code>src/components/BarGraph.tsx</code>:</p>
<pre><code class="hljs language-tsx">...
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">BarGraph</span>(<span class="hljs-params">{ dataArray }: Props</span>) </span>{
  <span class="hljs-keyword">const</span> barItems = useMemo(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">let</span> highestValuePositive = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> highestValueNegative = <span class="hljs-number">0</span>;

    dataArray.forEach(<span class="hljs-function">(<span class="hljs-params">{ value }</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (value &gt; <span class="hljs-number">0</span>) {
        highestValuePositive = <span class="hljs-built_in">Math</span>.max(highestValuePositive, value);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// use Math.abs() to convert the values from negative to positive</span>
        <span class="hljs-comment">// when storing them as &quot;highestValueNegative&quot;</span>
        highestValueNegative = <span class="hljs-built_in">Math</span>.max(highestValueNegative, <span class="hljs-built_in">Math</span>.abs(value));
      }
    });

    <span class="hljs-comment">// use the sum of &quot;highestValuePositive&quot; and</span>
    <span class="hljs-comment">// &quot;highestValueNegative&quot; as the 100%</span>
    <span class="hljs-keyword">const</span> highestValueTotal = highestValuePositive + highestValueNegative;

    <span class="hljs-keyword">return</span> dataArray.map(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> ({
      <span class="hljs-attr">legend</span>: item.legend,
      <span class="hljs-attr">barPercentage</span>: <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.round(
        (<span class="hljs-built_in">Math</span>.abs(item.value) / highestValueTotal) * <span class="hljs-number">100</span>
      )}</span>%`</span>,
    }));
  }, [dataArray]);

  <span class="hljs-keyword">return</span> (
    ...
  );
}
</code></pre>
<p>Once we save the changes, let&#x27;s take a look at our second graph now:</p>
<div class="lazyload-wrapper "><div class="lazyload-placeholder"></div></div>
<p>Alright! We&#x27;ve implemented the logic of converting the negative values to its proper percentage. For our next step, let&#x27;s elevate the line bar. From our observation earlier, it was mentioned that the height of the bar with negative value is the <strong><em>same level</em></strong> as the line bar&#x27;s elevation level. This means that we can use the <code>highestValueNegative</code> to determine how many percent the line bar would elevate. You might ask, how do we elevate the line bar? We can use the <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/CSS/bottom">bottom</a> CSS property for that as it supports percentage value as well. Let&#x27;s update our <code>BarGraph</code> component once again in <code>src/components/BarGraph.tsx</code>:</p>
<pre><code class="hljs language-tsx">...
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">BarGraph</span>(<span class="hljs-params">{ dataArray }: Props</span>) </span>{
  <span class="hljs-keyword">const</span> [barItems, barsLinePercentage] = useMemo(<span class="hljs-function">() =&gt;</span> {
    ...

    <span class="hljs-keyword">const</span> highestValueTotal = highestValuePositive + highestValueNegative;
    <span class="hljs-keyword">const</span> barsLinePercent = <span class="hljs-built_in">Math</span>.round(
      (highestValueNegative / highestValueTotal) * <span class="hljs-number">100</span>
    );
    <span class="hljs-keyword">const</span> barItems = dataArray.map(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> ({
      <span class="hljs-attr">legend</span>: item.legend,
      <span class="hljs-attr">barPercentage</span>: <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.round(
        (<span class="hljs-built_in">Math</span>.abs(item.value) / highestValueTotal) * <span class="hljs-number">100</span>
      )}</span>%`</span>,
    }));

    <span class="hljs-keyword">return</span> [barItems, <span class="hljs-string">`<span class="hljs-subst">${barsLinePercent}</span>%`</span>];
  }, [dataArray]);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bar-graph&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bars-list&quot;</span>&gt;</span>
        ...
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bars-line&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">bottom:</span> <span class="hljs-attr">barsLinePercentage</span> }} /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>Once you save the changes, you should see something like this:</p>
<div class="lazyload-wrapper "><div class="lazyload-placeholder"></div></div>
<p>Alright, our line bar has elevated and that&#x27;s where we expect it to be. You can already tell what our next step is going to be, we need to elevate the bars with positive values the same level as our line bar. To do that, we&#x27;ll need to pass a new prop to our <code>BarItem</code> component with the percentage value of the elevation, let&#x27;s call this prop as the <code>risePercentage</code>. Here&#x27;s the change we need for <code>BarGraph</code> component in <code>src/components/BarGraph.tsx</code>:</p>
<pre><code class="hljs language-tsx">...
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">BarGraph</span>(<span class="hljs-params">{ dataArray }: Props</span>) </span>{
  <span class="hljs-keyword">const</span> [barItems, barsLinePercentage] = useMemo(<span class="hljs-function">() =&gt;</span> {
    ...
    <span class="hljs-keyword">const</span> barsLinePercent = <span class="hljs-built_in">Math</span>.round(
      (highestValueNegative / highestValueTotal) * <span class="hljs-number">100</span>
    );
    <span class="hljs-keyword">const</span> barsLinePercentage = <span class="hljs-string">`<span class="hljs-subst">${barsLinePercent}</span>%`</span>;
    <span class="hljs-keyword">const</span> barItems = dataArray.map(<span class="hljs-function">(<span class="hljs-params">{ legend, value }</span>) =&gt;</span> ({
      legend,
      <span class="hljs-attr">barPercentage</span>: <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.round(
        (<span class="hljs-built_in">Math</span>.abs(value) / highestValueTotal) * <span class="hljs-number">100</span>
      )}</span>%`</span>,

      <span class="hljs-comment">// if &quot;value&quot; is negative, let&#x27;s put `0` for now which means no elevation needed</span>
      <span class="hljs-attr">risePercentage</span>: value &gt; <span class="hljs-number">0</span> ? barsLinePercentage : <span class="hljs-string">&#x27;0&#x27;</span>,
    }));

    <span class="hljs-keyword">return</span> [barItems, barsLinePercentage];
  }, [dataArray]);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bar-graph&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bars-list&quot;</span>&gt;</span>
        {barItems.map((barItem, idx) =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">BarItem</span>
            <span class="hljs-attr">...</span>
            <span class="hljs-attr">risePercentage</span>=<span class="hljs-string">{barItem.risePercentage}</span>
          /&gt;</span>
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bars-line&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">bottom:</span> <span class="hljs-attr">barsLinePercentage</span> }} /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>Next, we will need to support the new prop <code>risePercentage</code> in our <code>BarItem</code> component. Let&#x27;s go ahead and update the code in <code>src/components/BarItem.tsx</code>:</p>
<pre><code class="hljs language-tsx">...
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> Props = {
  ...
  <span class="hljs-attr">risePercentage</span>: <span class="hljs-built_in">string</span>;
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">BarItem</span>(<span class="hljs-params">props: Props</span>) </span>{
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bar-item&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bar-item-main&quot;</span>
        <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">height:</span> <span class="hljs-attr">props.barPercentage</span> }}
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bar-item-offset&quot;</span>
        <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">height:</span> <span class="hljs-attr">props.risePercentage</span> }}
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bar-item-legend&quot;</span>&gt;</span>{props.legend}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>So in the changes above, we modified the structure of the HTML and created two new <code>div</code> elements inside the <code>.bar-item</code> element. The <code>.bar-item-main</code> element will be the actual bar and the <code>.bar-item-offset</code> will be the one to elevate or raise the actual bar. By making the <code>.bar-item</code> element a flexbox container and setting the <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/CSS/flex-direction"><code>flex-direction</code></a> value as <code>column</code>, this will work as expected. Let&#x27;s update the styles for the <code>BarItem</code> component in <code>src/components/BarItem.css</code>:</p>
<pre><code class="hljs language-css"><span class="hljs-selector-class">.bar-item</span> {
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">flex-direction</span>: column;
  <span class="hljs-attribute">justify-content</span>: flex-end;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
}

<span class="hljs-selector-class">.bar-item-main</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f2f2f2</span>;
  <span class="hljs-attribute">border-top-right-radius</span>: <span class="hljs-number">4px</span>;
  <span class="hljs-attribute">border-top-left-radius</span>: <span class="hljs-number">4px</span>;
}

<span class="hljs-selector-class">.bar-item</span><span class="hljs-selector-pseudo">:hover</span> <span class="hljs-selector-class">.bar-item-main</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#54d6da</span>;
}
...
</code></pre>
<p>Okay, save the changes and let&#x27;s see how our second graph is looking now:</p>
<div class="lazyload-wrapper "><div class="lazyload-placeholder"></div></div>
<p>Sweet! To complete the changes for our second graph, let&#x27;s make bars with negative values to actually face downwards by applying the border radius on the bottom instead of the top and also changing the background color on hover.</p>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>Let&#x27;s have a prop that is passed down to the <code>BarItem</code> component to determine if it has a negative value. Go to <code>src/components/BarGraph.tsx</code> and update the code with the following below:</p>
<pre><code class="hljs language-tsx">...
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">BarGraph</span>(<span class="hljs-params">{ dataArray }: Props</span>) </span>{
  <span class="hljs-keyword">const</span> [barItems, barsLinePercentage] = useMemo(<span class="hljs-function">() =&gt;</span> {
    ...
    <span class="hljs-keyword">const</span> barItems = dataArray.map(<span class="hljs-function">(<span class="hljs-params">{ legend, value }</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> isNegative = value &lt; <span class="hljs-number">0</span>;

      <span class="hljs-keyword">return</span> {
        legend,
        isNegative,
        <span class="hljs-attr">barPercentage</span>: <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.round(
          (<span class="hljs-built_in">Math</span>.abs(value) / highestValueTotal) * <span class="hljs-number">100</span>
        )}</span>%`</span>,
        <span class="hljs-attr">risePercentage</span>: isNegative ? <span class="hljs-string">&#x27;0&#x27;</span> : barsLinePercentage,
      };
    });

    <span class="hljs-keyword">return</span> [barItems, barsLinePercentage];
  }, [dataArray]);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bar-graph&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bars-list&quot;</span>&gt;</span>
        {barItems.map((barItem, idx) =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">BarItem</span>
            <span class="hljs-attr">...</span>
            <span class="hljs-attr">isNegative</span>=<span class="hljs-string">{barItem.isNegative}</span>
          /&gt;</span>
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bars-line&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">bottom:</span> <span class="hljs-attr">barsLinePercentage</span> }} /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>Then, let&#x27;s go to <code>src/components/BarItem.tsx</code> and support this new prop <code>isNegative</code>:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;
<span class="hljs-keyword">import</span> cn <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;classnames&#x27;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./BarItem.css&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> Props = {
  ...
  <span class="hljs-attr">isNegative</span>: <span class="hljs-built_in">boolean</span>;
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">BarItem</span>(<span class="hljs-params">props: Props</span>) </span>{
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{cn(</span>&#x27;<span class="hljs-attr">bar-item</span>&#x27;, { &#x27;<span class="hljs-attr">is-negative</span>&#x27;<span class="hljs-attr">:</span> <span class="hljs-attr">props.isNegative</span> })}&gt;</span>
      ...
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>In the changes above, we&#x27;re using the <code>classnames</code> library we installed earlier. The <code>classnames</code> function can accept an object of keys with <code>boolean</code> values. If the value of the key is <code>true</code>, then that key will be added as a part of the <code>className</code> string. So if the <code>props.isNegative</code> is <code>true</code>, the <code>className</code> value would be <code>&quot;bar-item is-negative&quot;</code>, but if it&#x27;s <code>false</code>, then the <code>className</code> value would only be <code>&quot;bar-item&quot;</code>.</p>
<p>Finally, let&#x27;s update the styles in <code>src/components/BarItem.css</code> to support the <code>is-negative</code> class:</p>
<pre><code class="hljs language-css">...
<span class="hljs-selector-class">.bar-item</span><span class="hljs-selector-pseudo">:hover</span> <span class="hljs-selector-class">.bar-item-main</span> {
  ...
}

<span class="hljs-selector-class">.bar-item</span><span class="hljs-selector-class">.is-negative</span> <span class="hljs-selector-class">.bar-item-main</span> {
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">4px</span> <span class="hljs-number">4px</span>;
}

<span class="hljs-selector-class">.bar-item</span><span class="hljs-selector-class">.is-negative</span><span class="hljs-selector-pseudo">:hover</span> <span class="hljs-selector-class">.bar-item-main</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#ff9869</span>;
}
...
</code></pre>
<p>After saving the changes above, here&#x27;s the final look for our second graph:</p>
<div class="lazyload-wrapper "><div class="lazyload-placeholder"></div></div>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<h2>Display bars with negative values (Part 2)</h2>
<p>Nice! We&#x27;re down to the last graph we need to handle. Let&#x27;s first define the values for the third graph in our <code>App</code> component in <code>src/App.tsx</code> to see how our current logic will display all the bars with negative values:</p>
<pre><code class="hljs language-tsx">...
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">App</span>(<span class="hljs-params"></span>) </span>{
  ...
  <span class="hljs-keyword">const</span> dataArray3 = [
    {
      <span class="hljs-attr">value</span>: -<span class="hljs-number">150</span>,
      <span class="hljs-attr">legend</span>: <span class="hljs-string">&#x27;Year 1&#x27;</span>,
    },
    {
      <span class="hljs-attr">value</span>: -<span class="hljs-number">300</span>,
      <span class="hljs-attr">legend</span>: <span class="hljs-string">&#x27;Year 2&#x27;</span>,
    },
    {
      <span class="hljs-attr">value</span>: -<span class="hljs-number">700</span>,
      <span class="hljs-attr">legend</span>: <span class="hljs-string">&#x27;Year 3&#x27;</span>,
    },
    {
      <span class="hljs-attr">value</span>: -<span class="hljs-number">500</span>,
      <span class="hljs-attr">legend</span>: <span class="hljs-string">&#x27;Thereafter&#x27;</span>,
    },
  ];

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span>
      ...
      <span class="hljs-tag">&lt;<span class="hljs-name">BarGraph</span> <span class="hljs-attr">dataArray</span>=<span class="hljs-string">{dataArray3}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>Here&#x27;s what happens when we save the changes above:</p>
<div class="lazyload-wrapper "><div class="lazyload-placeholder"></div></div>
<p>As you can see from the screenshot, only the highest negative value is sticking to the line bar while the smaller negative values are at the bottom. This is because we&#x27;re setting the <code>risePercentage</code> of all negative values to <code>0</code>.</p>
<p>How do we determine the correct <code>risePercentage</code> for each bar? The trick is in the highest negative value. If you guessed it correctly, we just have to deduct the percentage of each negative value with the percentage of the highest negative value (which is the equivalent value as our line bar&#x27;s elevation level - <code>barsLinePercent</code>).</p>
<p>Let&#x27;s do the final update of our <code>BarGraph</code> component with the following:</p>
<pre><code class="hljs language-tsx">...
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">BarGraph</span>(<span class="hljs-params">{ dataArray }: Props</span>) </span>{
  <span class="hljs-keyword">const</span> [barItems, barsLinePercentage] = useMemo(<span class="hljs-function">() =&gt;</span> {
    ...
    <span class="hljs-keyword">const</span> barItems = dataArray.map(<span class="hljs-function">(<span class="hljs-params">{ legend, value }</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> isNegative = value &lt; <span class="hljs-number">0</span>;
      <span class="hljs-keyword">const</span> barPercent = <span class="hljs-built_in">Math</span>.round(
        (<span class="hljs-built_in">Math</span>.abs(value) / highestValueTotal) * <span class="hljs-number">100</span>
      );

      <span class="hljs-keyword">return</span> {
        legend,
        isNegative,
        <span class="hljs-attr">barPercentage</span>: <span class="hljs-string">`<span class="hljs-subst">${barPercent}</span>%`</span>,
        <span class="hljs-attr">risePercentage</span>: isNegative
          ? <span class="hljs-string">`<span class="hljs-subst">${barsLinePercent - barPercent}</span>%`</span>
          : barsLinePercentage,
      };
    });

    <span class="hljs-keyword">return</span> [barItems, barsLinePercentage];
  }, [dataArray]);

  <span class="hljs-keyword">return</span> (
    ...
  );
}
</code></pre>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>Don&#x27;t forget to save the changes and let&#x27;s see if it&#x27;s working as expected:</p>
<div class="lazyload-wrapper "><div class="lazyload-placeholder"></div></div>
<p>Well, would you look at that? We&#x27;re done. That&#x27;s it! We&#x27;ve just built our very own bar graph that can handle positive and negative values in React and TypeScript. Feel free to modify the values and see how our bar graph will display them.</p>
<p>We&#x27;re now ready to write some tests for this bar graph component. Please proceed to the <a href="/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests-part-2">next part</a> of this post.</p></article><div class="w-11/12 max-w-screen-3xl mx-auto lg:w-5/6"><p class="mt-16 text-gray-400">Found an issue with this post?<!-- --> <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/dominicarrojado/dominicarrojado.github.io/issues">Report it here</a>.</p><div class="mt-24 flex justify-between items-center"><a class="group relative pr-2" href="/posts/how-to-create-your-own-pagination-in-react-and-typescript-with-tests-part-2"><div class=""><div class="font-normal transition-colors duration-300 group-hover:text-black motion-reduce:transition-none dark:group-hover:text-white">How to create your own pagination in React and TypeScript with tests (Part 2)</div><small class="text-gray-400 transition-colors duration-300 group-hover:text-black motion-reduce:transition-none dark:group-hover:text-white">Previous Post</small></div><svg viewBox="0 0 320 512" role="img" class="absolute top-0 bottom-0 m-auto shrink-0 w-2 h-2 text-black opacity-30 dark:text-white transform transition-transform-opacity duration-300 group-hover:opacity-100 motion-reduce:transition-none sm:w-2.5 sm:h-2.5 md:w-3 md:h-3 xl:w-3.5 xl:h-3.5 -left-5 sm:-left-7 xl:-left-8 group-hover:-translate-x-1.5"><path fill="currentColor" d="M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"></path></svg></a><div></div><a class="group relative pl-2" href="/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests-part-2"><div class="text-right"><div class="font-normal transition-colors duration-300 group-hover:text-black motion-reduce:transition-none dark:group-hover:text-white">How to create your own bar graph in React and TypeScript with tests (Part 2)</div><small class="text-gray-400 transition-colors duration-300 group-hover:text-black motion-reduce:transition-none dark:group-hover:text-white">Next Post</small></div><svg viewBox="0 0 320 512" role="img" class="absolute top-0 bottom-0 m-auto shrink-0 w-2 h-2 text-black opacity-30 dark:text-white transform transition-transform-opacity duration-300 group-hover:opacity-100 motion-reduce:transition-none sm:w-2.5 sm:h-2.5 md:w-3 md:h-3 xl:w-3.5 xl:h-3.5 -right-5 sm:-right-7 xl:-right-8 group-hover:translate-x-1.5"><path fill="currentColor" d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"></path></svg></a></div><div class="mt-16 text-center"><a class="group inline-flex items-center font-normal select-none dark:hover:text-white transition-colors duration-300 hover:text-black group-hover:text-black motion-reduce:transition-none" href="/posts">See Latest Posts<svg viewBox="0 0 320 512" role="img" class="inline-block w-2 h-2 ml-2 text-black opacity-30 dark:text-white transform transition duration-300 group-hover:translate-x-1.5 group-hover:opacity-100 motion-reduce:transition-none sm:w-2.5 sm:h-2.5 sm:ml-2.5 md:w-3 md:h-3 md:ml-3 xl:w-3.5 xl:h-3.5"><path fill="currentColor" d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"></path></svg></a></div></div><div class="w-11/12 max-w-screen-3xl -mb-8 mx-auto pt-8 sm:-mb-10 sm:pt-10 md:-mb-12 md:pt-12 lg:w-5/6"><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="6892691691" data-ad-format="auto" data-full-width-responsive="true" data-testid="ad-unit"></ins></div></section><footer class="py-20 px-6 bg-gray-100 dark:bg-gray-850 overflow-hidden lg:overflow-auto transition-opacity duration-1000 delay-1750 motion-reduce:transition-none opacity-0" data-testid="footer"><ul class="relative text-center overflow-hidden transition-height duration-1000 motion-reduce:transition-none sm:text-lg xl:text-xl" style="height:0"><li class="absolute top-0 left-0 w-full transition-opacity duration-1000 motion-reduce:transition-none"><blockquote><!-- -->If there is no struggle, there is no progress.<!-- --></blockquote><p class="mt-1 sm:mt-2"> <!-- -->Frederick Douglass</p></li><li class="absolute top-0 left-0 w-full transition-opacity duration-1000 motion-reduce:transition-none opacity-0 pointer-events-none"><blockquote><!-- -->It&#x27;s okay to figure out murder mysteries, but you shouldn&#x27;t need to figure out code. You should be able to read it.<!-- --></blockquote><p class="mt-1 sm:mt-2"> <!-- -->Steve McConnell</p></li><li class="absolute top-0 left-0 w-full transition-opacity duration-1000 motion-reduce:transition-none opacity-0 pointer-events-none"><blockquote><!-- -->If you can&#x27;t explain it simply, you don&#x27;t understand it well enough.<!-- --></blockquote><p class="mt-1 sm:mt-2"> <!-- -->Albert Einstein</p></li><li class="absolute top-0 left-0 w-full transition-opacity duration-1000 motion-reduce:transition-none opacity-0 pointer-events-none"><blockquote><!-- -->The secret of getting ahead is getting started.<!-- --></blockquote><p class="mt-1 sm:mt-2"> <!-- -->Mark Twain</p></li></ul><ul class="max-w-full mt-10 flex flex-wrap justify-center"><li><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" aria-describedby="tooltip-donate" href="https://www.paypal.com/paypalme/DominicArrojado" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Show your support and donate!"><svg viewBox="0 0 512 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M256 416c114.9 0 208-93.1 208-208S370.9 0 256 0 48 93.1 48 208s93.1 208 208 208zM233.8 97.4V80.6c0-9.2 7.4-16.6 16.6-16.6h11.1c9.2 0 16.6 7.4 16.6 16.6v17c15.5.8 30.5 6.1 43 15.4 5.6 4.1 6.2 12.3 1.2 17.1L306 145.6c-3.8 3.7-9.5 3.8-14 1-5.4-3.4-11.4-5.1-17.8-5.1h-38.9c-9 0-16.3 8.2-16.3 18.3 0 8.2 5 15.5 12.1 17.6l62.3 18.7c25.7 7.7 43.7 32.4 43.7 60.1 0 34-26.4 61.5-59.1 62.4v16.8c0 9.2-7.4 16.6-16.6 16.6h-11.1c-9.2 0-16.6-7.4-16.6-16.6v-17c-15.5-.8-30.5-6.1-43-15.4-5.6-4.1-6.2-12.3-1.2-17.1l16.3-15.5c3.8-3.7 9.5-3.8 14-1 5.4 3.4 11.4 5.1 17.8 5.1h38.9c9 0 16.3-8.2 16.3-18.3 0-8.2-5-15.5-12.1-17.6l-62.3-18.7c-25.7-7.7-43.7-32.4-43.7-60.1.1-34 26.4-61.5 59.1-62.4zM480 352h-32.5c-19.6 26-44.6 47.7-73 64h63.8c5.3 0 9.6 3.6 9.6 8v16c0 4.4-4.3 8-9.6 8H73.6c-5.3 0-9.6-3.6-9.6-8v-16c0-4.4 4.3-8 9.6-8h63.8c-28.4-16.3-53.3-38-73-64H32c-17.7 0-32 14.3-32 32v96c0 17.7 14.3 32 32 32h448c17.7 0 32-14.3 32-32v-96c0-17.7-14.3-32-32-32z"></path></svg></a></li><li><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" aria-describedby="tooltip-youtube" href="https://www.youtube.com/channel/UCWwV__qrzg5BYCSwO91Xhxg/videos?view=0&amp;sort=dd" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Watch my tech videos!"><svg viewBox="0 0 576 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"></path></svg></a></li><li><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" aria-describedby="tooltip-linkedin" href="https://www.linkedin.com/in/dominic-arrojado-75ba03a9/" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Let&#x27;s connect on LinkedIn!"><svg viewBox="0 0 448 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a></li><li><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" aria-describedby="tooltip-github" href="https://github.com/dominicarrojado/" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Follow me on GitHub!"><svg viewBox="0 0 496 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></li><li><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" aria-describedby="tooltip-email" href="mailto:dominicarrojado@gmail.com" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Email me!"><svg viewBox="0 0 512 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"></path></svg></a></li></ul><p class="mt-4 text-gray-400 text-sm text-center sm:text-base lg:mt-10 xl:text-lg"><span class="font-normal"><!-- -->2023<!-- --> <!-- -->Dominic Arrojado</span> <span class="block mt-1 sm:hidden"></span><span class="hidden sm:inline"></span> <a href="/privacy-policy/">Privacy Policy</a> <!-- --><!-- --> <a href="/disclaimer/">Disclaimer</a></p></footer><footer class="fixed flex items-center justify-end bottom-0 w-full z-50"><div class="absolute bottom-3.5 right-3.5 flex items-end gap-3 ml-auto sm:bottom-4 sm:right-4 md:bottom-5 md:right-5 lg:bottom-8 lg:right-8" style="padding-right:0px"><button type="button" aria-expanded="false" aria-controls="dialog-subscribe" aria-haspopup="dialog" class="group text-gray-400 outline-none dark:text-gray-300 hover:text-gray-500 focus-visible:text-gray-500 dark:hover:text-white dark:focus-visible:text-white" aria-label="Subscribe"><div class="flex items-center flex-col"><div class="relative w-5 h-5 transform transition-transform-opacity-color motion-reduce:transition-none md:w-7 md:h-7 duration-700 delay-700 opacity-0 -translate-y-2"><svg viewBox="0 0 448 512" role="img" class="absolute inset-0 m-auto"><path fill="currentColor" d="M224 0c-17.7 0-32 14.3-32 32V51.2C119 66 64 130.6 64 208v18.8c0 47-17.3 92.4-48.5 127.6l-7.4 8.3c-8.4 9.4-10.4 22.9-5.3 34.4S19.4 416 32 416H416c12.6 0 24-7.4 29.2-18.9s3.1-25-5.3-34.4l-7.4-8.3C401.3 319.2 384 273.9 384 226.8V208c0-77.4-55-142-128-156.8V32c0-17.7-14.3-32-32-32zm45.3 493.3c12-12 18.7-28.3 18.7-45.3H224 160c0 17 6.7 33.3 18.7 45.3s28.3 18.7 45.3 18.7s33.3-6.7 45.3-18.7z"></path></svg></div><div class="mt-2 text-3xs font-normal uppercase select-none transform transition-transform-opacity-color motion-reduce:transition-none md:text-2xs xl:text-xs duration-700 delay-1000 opacity-0 -translate-y-3">Subscribe</div></div></button></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests-part-1","content":"\n## Introduction\n\nCharts (or also known as graphs) are graphical representations of data, in which the data is represented by symbols such as bars in bar graphs. In JavaScript, we already have popular third-party libraries such as [D3](https://github.com/d3/d3), [Chart.js](https://github.com/chartjs/Chart.js) and [ECharts](https://github.com/apache/echarts) to help us create charts or graphs in a simple and customizable way with lots of features that come with it.\n\nA few months ago, I had a requirement from our product team to build a bar graph that can display both positive and negative values. Though it's so easy to use one of the libraries to implement the requirement, I decided to build the bar graph on my own because I thought the requirement was not too complicated and the data is not that big. If I use one of these libraries then it might be an overkill where we're not able to utilize all the features. We are especially conscious about the size that gets added into our assets when we install a third-party library because the bigger the size of our JavaScript files, the slower our page gets loaded.\n\nEvery developer has their own way of building things, I definitely don't think my solution is the best way - but it was the solution that made the most sense to me. I'm not going to use [Canvas](https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API) to build the bar graph and most will argue that I should use it because that's more efficient for drawing graphics and I agree on that. But the reason why I chose to build it with just regular [HTML](https://developer.mozilla.org/en-US/docs/Web/HTML) and [CSS](https://developer.mozilla.org/en-US/docs/Web/CSS) is because I find it more simpler and flexible to implement the expected bar graph. I also mentioned earlier that the data we need to display is not that big. Based on the requirement, we only needed to display four bars in the bar graph. The bar graph I implemented in this post may not exactly fit your requirement but I hope you'll still learn something from this post to help you build it or something similar. Like my other [React](https://reactjs.org/) and [TypeScript](https://www.typescriptlang.org/) with test posts or tutorials, this is also a good way for you to practice and learn TypeScript and writing tests with [Jest](https://jestjs.io/) and [Testing Library](https://testing-library.com/) if you're still new to them. So without further ado, let's get started!\n\n---\n\n## Prerequisites\n\nThis is the [link to the bar graph component](/react-typescript-bar-graph/) which we'll accomplish by the end of this post, you can see and play around with it or use it as your reference throughout this tutorial.\n\nUpon writing this post, I assume that you have some web development background and basic knowledge regarding [npm](https://www.npmjs.com/), [yarn](https://classic.yarnpkg.com/lang/en/), [HTML](https://developer.mozilla.org/en-US/docs/Web/HTML), [CSS](https://developer.mozilla.org/en-US/docs/Web/CSS), [JavaScript](https://developer.mozilla.org/en-US/docs/Web/JavaScript) and [React](https://reactjs.org/).\n\nMake sure to install [Yarn](https://classic.yarnpkg.com/lang/en/) in your system if you haven't. We will use [Yarn](https://classic.yarnpkg.com/lang/en/) as our package manager, it's just like [npm](https://www.npmjs.com/) but _faster_.\n\nI've written a [separate post](/posts/local-development-setup-for-react-and-typescript-projects/) about the [IDE](https://en.wikipedia.org/wiki/Integrated_development_environment) and extensions I use to help save time and energy when writing code in React. I highly suggest that you check it out if you haven't!\n\n## Initialize your project\n\nFastest way to start a new project with React is using the [Create React App](https://create-react-app.dev/). It is an officially supported way to create single-page React applications. It offers a modern build setup with no configuration so you can focus on code, not build tools.\n\nTo create our project with React and TypeScript, run this command in your terminal:\n\n```bash\nyarn create react-app react-typescript-bar-graph --template typescript\n```\n\nOnce project is initiated, install the additional package below:\n\n```bash\ncd react-typescript-bar-graph\nyarn add classnames\n```\n\nThe [`classnames`](https://github.com/JedWatson/classnames) library we just installed will help us with joining `classNames` together conditionally. You'll get to see how we'll use this later on.\n\nTo run our project, execute the command below:\n\n```bash\nyarn start\n```\n\nThis command will open your default browser and direct you to `http://localhost:3000/`. If it doesn't, you can do it yourself too.\n\nThis setup comes with live-editing or hot reloading which means when we save file changes, it will automatically update the app and reload on the browser. That's great for local development!\n\n---\n\n## Clean up the project\n\nWe're ready to code! Let's clean up our project which was created by Create React App. We won't be needing some of them. Delete or clear the contents of the following below:\n\n- src/App.css (clear contents)\n- src/App.test.tsx (delete)\n- src/logo.svg (delete)\n\nThen let's update the code in `src/App.tsx`:\n\n```tsx\nimport './App.css';\n\nexport default function App() {\n  return (\n    \u003cdiv className=\"container\"\u003e\n      \u003ch1\u003eReact TypeScript Bar Graph\u003c/h1\u003e\n    \u003c/div\u003e\n  );\n}\n```\n\nWe will use the `App` component as the container of our bar graph component. Next, add the following styles in `src/App.css`:\n\n```css\n.container {\n  width: 100%;\n  max-width: 800px;\n  margin: 0 auto;\n  padding: 20px 15px;\n}\n```\n\nThen let's also update the styles in `src/index.css`:\n\n```css\n* {\n  box-sizing: border-box;\n}\n\nbody {\n  margin: 0;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto',\n    'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans',\n    'Helvetica Neue', sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n```\n\n---\n\n## Create BarItem component\n\nIn a bar graph, it consists of bars. So let's start with creating the component of a single bar and call it the `BarItem` component. We can reuse this component later inside of a bar graph.\n\nFirst, create a folder called `components` under the `src` folder. I usually like to group the components I create inside this folder for easier reference. Inside the `components` folder, create the [JSX](https://reactjs.org/docs/introducing-jsx.html) file and name it `BarItem.tsx`. The path for this new file should be `src/components/BarItem.tsx`. If you're new to TypeScript, you will notice that the extension we used for JSX is `.tsx` instead of `.jsx`. This is the TypeScript extension for JSX and that is how the TypeScript compiler will know which files to enforce TypeScript rules and transpile its source code to JavaScript.\n\nOnce the file is created, add the following code below in `src/components/BarItem.tsx`:\n\n```tsx\nimport React from 'react';\nimport './BarItem.css';\n\nexport default function BarItem() {\n  return \u003cdiv className=\"bar-item\"\u003e\u003c/div\u003e;\n}\n```\n\nThen, let's style our `BarItem` component by creating the CSS file `src/components/BarItem.css` and add the styles below:\n\n```css\n.bar-item {\n  flex: 1;\n  height: 100%;\n  background-color: #f2f2f2;\n  border-top-right-radius: 4px;\n  border-top-left-radius: 4px;\n}\n\n.bar-item:hover {\n  background-color: #54d6da;\n}\n```\n\nWe're going to use the [Flexbox](https://developer.mozilla.org/en-US/docs/Learn/CSS/CSS_layout/Flexbox) layout system which is a one-dimensional layout method for arranging items in rows or columns, perfect for creating our bar graph. The [flex](https://developer.mozilla.org/en-US/docs/Web/CSS/flex) CSS shorthand property sets how a flex item will grow or shrink to fit the space available in its flex container.\n\n---\n\n## Create BarGraph component\n\nNext, let's now proceed to create the component for our bar graph and call it the `BarGraph` component. The bar graph will be the container for our `BarItem` components and it will handle the calculation of the percentages of each bar. It will also contain a line bar that acts as the base of our graph - do note that the line bar will rise above the base if there are negative values in one of the bars. Do not worry about these logics for now and let's focus first on creating the HTML structure and the styles of our bar graph.\n\nCreate the JSX file with the path `src/components/BarGraph.tsx` and add the following code:\n\n```tsx\nimport React from 'react';\nimport BarItem from './BarItem';\nimport './BarGraph.css';\n\nexport default function BarGraph() {\n  return (\n    \u003cdiv className=\"bar-graph\"\u003e\n      \u003cdiv className=\"bars-list\"\u003e\n        \u003cBarItem /\u003e\n        \u003cBarItem /\u003e\n        \u003cBarItem /\u003e\n        \u003cBarItem /\u003e\n      \u003c/div\u003e\n      \u003cdiv className=\"bars-line\" /\u003e\n    \u003c/div\u003e\n  );\n}\n```\n\nThen, create a CSS file with the path `src/components/BarGraph.css` to style our `BarGraph` component. Add the following styles below:\n\n```css\n.bar-graph {\n  position: relative;\n  width: 100%;\n  max-width: 400px;\n  height: 170px;\n}\n\n.bars-list {\n  display: flex;\n  align-items: flex-end;\n  column-gap: 20px;\n  width: 100%;\n  height: 100%;\n}\n\n.bars-line {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 1px;\n  background-color: #505050;\n  opacity: 0.5;\n  pointer-events: none;\n}\n```\n\nThe `BarGraph` component is now ready to be imported and used in the `App` component. Let's update `src/App.tsx` with the following code changes:\n\n```tsx\nimport './App.css';\nimport BarGraph from './components/BarGraph';\n\nexport default function App() {\n  return (\n    \u003cdiv className=\"container\"\u003e\n      \u003ch1\u003eReact TypeScript Bar Graph\u003c/h1\u003e\n      \u003cBarGraph /\u003e\n    \u003c/div\u003e\n  );\n}\n```\n\nAfter saving the changes, this is what you should see on your React application:\n\n![Screenshot of bar graph built in React and TypeScript](/images/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests/bar-graph-1.png)\n\nGreat! We now have the first look of our bar graph.\n\n---\n\n## Implement bar legend\n\nTo make our bar graph a little more informational, let's add a legend for each of the bars which represents a caption for the content of it.\n\nLet's update the `BarItem` component in `src/components/BarItem.tsx` with the following:\n\n```tsx\nimport React from 'react';\nimport './BarItem.css';\n\nexport default function BarItem(props) {\n  return (\n    \u003cdiv className=\"bar-item\"\u003e\n      \u003cdiv className=\"bar-item-legend\"\u003e{props.legend}\u003c/div\u003e\n    \u003c/div\u003e\n  );\n}\n```\n\nWhen you apply the changes, you should see a squiggly underline on the component \"props\" (which stands for properties) object argument. When you hover on it, you should see the TypeScript error message: `Parameter 'props' implicitly has an 'any' type`. This means we didn't explicitly define the type for the \"props\" and that will potentially cause errors later on. Let's fix this by defining the type:\n\n```tsx\n...\nexport default function BarItem(props: { legend: string }) {\n  return (\n    ...\n  );\n}\n```\n\nIf you're new to TypeScript, this is how we define a type. We first add a colon `:` right after the variable or argument we are defining a type of. Since \"props\" is an object, hence our type is also wrapped with the curly braces `{}` that make it an object. Inside the object, we define the keys or properties we require for our \"props\", which in this case is the `legend` key or property. Again, we add a colon `:` right after it and define the type it should accept which in this case legend should be a `string`. The type `string` is one of the very commonly used [primitives](https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#the-primitives-string-number-and-boolean) apart from `number` and `boolean`.\n\nWe've used object types by writing them directly in type annotations. This is convenient, but it's common to want to use the same type more than once and refer to it by a single name. You can also extract the type and declare it like a variable like this:\n\n```tsx\n...\nexport type Props = {\n  legend: string;\n};\n\nexport default function BarItem(props: Props) {\n  return (\n    ...\n  );\n}\n```\n\nThis is what we call a [Type Alias](https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#type-aliases). Now that the `Props` type is exported, it can be reused by other files such as test files which we'll do later on.\n\n---\n\nAfter saving the changes, you will get a new error from the `BarGraph` component with the following message: `Property 'legend' is missing in type '{}' but required in type 'Props'.`\n\nYou can already see how useful TypeScript is and how helpful it would be when debugging at this early stage rather than later on.\n\nWe can fix the error by updating `src/components/BarGraph.tsx` with the following code:\n\n```tsx\n...\nexport default function BarGraph() {\n  return (\n    \u003cdiv className=\"bar-graph\"\u003e\n      \u003cdiv className=\"bars-list\"\u003e\n        \u003cBarItem legend=\"Year 1\" /\u003e\n        \u003cBarItem legend=\"Year 2\" /\u003e\n        \u003cBarItem legend=\"Year 3\" /\u003e\n        \u003cBarItem legend=\"Thereafter\" /\u003e\n      \u003c/div\u003e\n      \u003cdiv className=\"bars-line\" /\u003e\n    \u003c/div\u003e\n  );\n}\n```\n\nThen, let's add the style of the legends in `src/components/BarItem.css`:\n\n```css\n.bar-item {\n  ...\n  position: relative;\n}\n\n...\n\n.bar-item-legend {\n  position: absolute;\n  top: 100%;\n  width: 100%;\n  padding-top: 10px;\n  color: #999999;\n  font-size: 12px;\n  line-height: 14px;\n  text-align: center;\n}\n\n.bar-item:hover .bar-item-legend {\n  color: #2c2c2c;\n}\n```\n\nOnce you save the changes, you should see that each of the bar has a legend right below them:\n\n![Screenshot of bar graph built in React and TypeScript](/images/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests/bar-graph-2.png)\n\nOur bar graph is looking great so far!\n\n---\n\n## Display bars based on their value\n\nWhen we display graphs such as a bar graph, we normally use percentages to represent each bar. To implement the percentage for each bar, it's not as straightforward as you might think. This is because we want to display bars with negative values as well which makes this post interesting, at least for me. If it's just positive values, it will be straightforward and we just have to define the value of the [height](https://developer.mozilla.org/en-US/docs/Web/CSS/height) CSS property of the bar with the percentage we calculated. But the height CSS property can't accept negative percentage and hence that's where the complication is.\n\nDon't worry! I'm here to help and guide you on how to solve this. As always, before we tackle any problems or complications, we can do some observations to help us understand the problem, collect all the data and eventually find a solution. First, let's observe the different instances below that we need to handle in our bar graph:\n\n![Screenshot of different bar graphs built in React and TypeScript](/images/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests/bar-graphs-1.png)\n\nStarting from the left of the image or screenshot, the first graph displays a bar graph with all positive values, the line bar is at the bottom and one of the bars with the highest value occupies 100% of the graph height. The second graph displays a bar graph with one negative value, notice how the line bar elevates the **_same level_** as the bars with positive values. You could also say that the height of the bar with negative value is the **_same level_** as the line bar's elevation level. The third graph displays a bar graph with all negative values, aside from the line bar elevating, bars with smaller negative values also elevate until it sticks to the line bar.\n\nAlso from the observation, we can tell that all the graphs utilize 100% of the container height and the container height is static based on our CSS styles. In the first graph, the highest positive value becomes 100% and the rest of the bars will be based on that. In the second graph, the sum of the highest positive value and the highest negative value (by [absolute](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/abs)) becomes 100% and the rest of the bars will be based on that. In the third graph, similarly to the first graph, the highest negative value (by absolute) becomes 100% and the rest of the bars will be based on that. I hope I explained it clearly enough, but if not, maybe the following steps will do.\n\nLet's start with the actual values of the first graph. That would be `200`, `300`, `700` and `500`. Our first step is to get the highest positive value among these values and that would be `700`.\n\nOnce we get the highest positive value, we can divide each value with the highest positive value.\n\nIn order, it would be: `200 / 700`, `300 / 700`, `700 / 700` and `500 / 700`. We will get: `0.29`, `0.43`, `1` and `0.71`. To convert them into percentages, we just have to multiply them by `100` and we will get: `29%`, `43%`, `100%`, and `71%`.\n\nI think this is a good start for us to update our React app code with this logic in mind, open `src/App.tsx` and update our `App` component to provide data to our bar graph with the following code:\n\n```tsx\n...\nexport default function App() {\n  const dataArray1 = [\n    {\n      value: 200,\n      legend: 'Year 1',\n    },\n    {\n      value: 300,\n      legend: 'Year 2',\n    },\n    {\n      value: 700,\n      legend: 'Year 3',\n    },\n    {\n      value: 500,\n      legend: 'Thereafter',\n    },\n  ];\n\n  return (\n    \u003cdiv className=\"container\"\u003e\n      \u003ch1\u003eReact TypeScript Bar Graph\u003c/h1\u003e\n      \u003cBarGraph dataArray={dataArray1} /\u003e\n    \u003c/div\u003e\n  );\n}\n```\n\nYou will receive TypeScript errors when you save this change but they will be fixed once we complete the overall changes.\n\n---\n\nNext, let's open `src/components/BarGraph.tsx` and update our `BarGraph` component to convert the values from `dataArray` into percentages using the logic we discussed earlier so they can be represented accordingly in each of the bars:\n\n```tsx\nimport React, { useMemo } from 'react';\nimport BarItem from './BarItem';\nimport './BarGraph.css';\n\nexport type Props = {\n  dataArray: Array\u003c{\n    value: number;\n    legend: string;\n  }\u003e;\n};\n\nexport default function BarGraph({ dataArray }: Props) {\n  const barItems = useMemo(() =\u003e {\n    let highestValue = 0;\n\n    // get the highest value\n    dataArray.forEach(({ value }) =\u003e {\n      highestValue = Math.max(highestValue, value);\n    });\n\n    // calculate \"barPercentage\" using the \"highestValue\" to construct the bar items\n    return dataArray.map((item) =\u003e ({\n      legend: item.legend,\n      barPercentage: `${Math.round((item.value / highestValue) * 100)}%`,\n    }));\n  }, [dataArray]);\n\n  return (\n    \u003cdiv className=\"bar-graph\"\u003e\n      \u003cdiv className=\"bars-list\"\u003e\n        {barItems.map((barItem, idx) =\u003e (\n          \u003cBarItem\n            key={idx}\n            legend={barItem.legend}\n            barPercentage={barItem.barPercentage}\n          /\u003e\n        ))}\n      \u003c/div\u003e\n      \u003cdiv className=\"bars-line\" /\u003e\n    \u003c/div\u003e\n  );\n}\n```\n\nIn the code above, we created the type `Props` for the required props of the `BarGraph` component. If you're new to TypeScript, this is how we define a type for an array of values. You might wonder why it's not defined like this:\n\n```ts\nexport type Props = {\n  dataArray: [{ value: number; legend: string }];\n};\n```\n\nThis is actually accepted in TypeScript as well, but this type means that it requires the prop `dataArray` to be an array with **one** object only. It will not accept less than or more than one object. Hence we are using the `Array` interface to represent the type for `dataArray` props can accept an array of items with any length.\n\nAlso in the code above, we use `React.useMemo()` to convert the values into percentages and construct the `barItems` array that we can loop to render each `BarItem` component and pass the required props. `React.useMemo()` returns a [memoized](https://en.wikipedia.org/wiki/Memoization) value which also means that it will only recompute the memoized value when one of the dependencies has changed, in this case is the `dataArray` we got from the props of the `BarGraph` component. This makes our bar graph reactive!\n\nFinally, let's update `src/components/BarItem.tsx` to support the new prop `barPercentage` and use that to set the height of the bar in the `BarItem` component:\n\n```tsx\n...\nexport type Props = {\n  legend: string;\n  barPercentage: string;\n};\n\nexport default function BarItem(props: Props) {\n  return (\n    \u003cdiv className=\"bar-item\" style={{ height: props.barPercentage }}\u003e\n      \u003cdiv className=\"bar-item-legend\"\u003e{props.legend}\u003c/div\u003e\n    \u003c/div\u003e\n  );\n}\n```\n\n---\n\nAlright. Once all the changes are saved, you should see something like this in your React application:\n\n![Screenshot of bar graph built in React and TypeScript](/images/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests/bar-graph-3.png)\n\nGreat! We can see our bar graph displaying the bars with different heights which is a percentile representation of the values we passed from the `App` component. This is exactly the same as the first graph that displays the bars with all positive values.\n\n## Display bars with negative values (Part 1)\n\nWith our current logic, what happens if we have a negative value in the `dataArray`? Let's find out by updating our `App` component in `src/App.tsx` and see what happens. Here are the values for the expected second graph:\n\n```tsx\n...\nexport default function App() {\n  const dataArray1 = [\n    ...\n  ];\n  const dataArray2 = [\n    {\n      value: 500,\n      legend: 'Year 1',\n    },\n    {\n      value: 300,\n      legend: 'Year 2',\n    },\n    {\n      value: -200,\n      legend: 'Year 3',\n    },\n    {\n      value: 700,\n      legend: 'Thereafter',\n    },\n  ];\n\n  return (\n    \u003cdiv className=\"container\"\u003e\n      \u003ch1\u003eReact TypeScript Bar Graph\u003c/h1\u003e\n      \u003cBarGraph dataArray={dataArray1} /\u003e\n      \u003cBarGraph dataArray={dataArray2} /\u003e\n    \u003c/div\u003e\n  );\n}\n```\n\nBefore we look into our React app, let's update the style in `src/components/BarGraph.css` to give some space between the bar graphs:\n\n```css\n.bar-graph {\n  ...\n  margin-bottom: 60px;\n}\n...\n```\n\nAlright, now let's see what is displayed in our React app:\n\n![Screenshot of bar graphs built in React and TypeScript](/images/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests/bar-graphs-2.png)\n\nNot quite what we expected because our current logic doesn't handle negative values properly yet.\n\n---\n\nLet us recall the observation we had for the expected second graph. The sum of the highest positive value and the highest negative value (by absolute) becomes 100% and the rest of the bars will be based on that. We already know how to get the highest value, now we just need to check if the value is positive or negative, and store them separately depending on the [number sign](\u003chttps://en.wikipedia.org/wiki/Sign_(mathematics)\u003e). Let's do that first and update our `BarGraph` component in `src/components/BarGraph.tsx`:\n\n```tsx\n...\nexport default function BarGraph({ dataArray }: Props) {\n  const barItems = useMemo(() =\u003e {\n    let highestValuePositive = 0;\n    let highestValueNegative = 0;\n\n    dataArray.forEach(({ value }) =\u003e {\n      if (value \u003e 0) {\n        highestValuePositive = Math.max(highestValuePositive, value);\n      } else {\n        // use Math.abs() to convert the values from negative to positive\n        // when storing them as \"highestValueNegative\"\n        highestValueNegative = Math.max(highestValueNegative, Math.abs(value));\n      }\n    });\n\n    // use the sum of \"highestValuePositive\" and\n    // \"highestValueNegative\" as the 100%\n    const highestValueTotal = highestValuePositive + highestValueNegative;\n\n    return dataArray.map((item) =\u003e ({\n      legend: item.legend,\n      barPercentage: `${Math.round(\n        (Math.abs(item.value) / highestValueTotal) * 100\n      )}%`,\n    }));\n  }, [dataArray]);\n\n  return (\n    ...\n  );\n}\n```\n\nOnce we save the changes, let's take a look at our second graph now:\n\n![Screenshot of bar graphs built in React and TypeScript](/images/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests/bar-graphs-3.png)\n\nAlright! We've implemented the logic of converting the negative values to its proper percentage. For our next step, let's elevate the line bar. From our observation earlier, it was mentioned that the height of the bar with negative value is the **_same level_** as the line bar's elevation level. This means that we can use the `highestValueNegative` to determine how many percent the line bar would elevate. You might ask, how do we elevate the line bar? We can use the [bottom](https://developer.mozilla.org/en-US/docs/Web/CSS/bottom) CSS property for that as it supports percentage value as well. Let's update our `BarGraph` component once again in `src/components/BarGraph.tsx`:\n\n```tsx\n...\nexport default function BarGraph({ dataArray }: Props) {\n  const [barItems, barsLinePercentage] = useMemo(() =\u003e {\n    ...\n\n    const highestValueTotal = highestValuePositive + highestValueNegative;\n    const barsLinePercent = Math.round(\n      (highestValueNegative / highestValueTotal) * 100\n    );\n    const barItems = dataArray.map((item) =\u003e ({\n      legend: item.legend,\n      barPercentage: `${Math.round(\n        (Math.abs(item.value) / highestValueTotal) * 100\n      )}%`,\n    }));\n\n    return [barItems, `${barsLinePercent}%`];\n  }, [dataArray]);\n\n  return (\n    \u003cdiv className=\"bar-graph\"\u003e\n      \u003cdiv className=\"bars-list\"\u003e\n        ...\n      \u003c/div\u003e\n      \u003cdiv className=\"bars-line\" style={{ bottom: barsLinePercentage }} /\u003e\n    \u003c/div\u003e\n  );\n}\n```\n\n---\n\nOnce you save the changes, you should see something like this:\n\n![Screenshot of bar graphs built in React and TypeScript](/images/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests/bar-graphs-4.png)\n\nAlright, our line bar has elevated and that's where we expect it to be. You can already tell what our next step is going to be, we need to elevate the bars with positive values the same level as our line bar. To do that, we'll need to pass a new prop to our `BarItem` component with the percentage value of the elevation, let's call this prop as the `risePercentage`. Here's the change we need for `BarGraph` component in `src/components/BarGraph.tsx`:\n\n```tsx\n...\nexport default function BarGraph({ dataArray }: Props) {\n  const [barItems, barsLinePercentage] = useMemo(() =\u003e {\n    ...\n    const barsLinePercent = Math.round(\n      (highestValueNegative / highestValueTotal) * 100\n    );\n    const barsLinePercentage = `${barsLinePercent}%`;\n    const barItems = dataArray.map(({ legend, value }) =\u003e ({\n      legend,\n      barPercentage: `${Math.round(\n        (Math.abs(value) / highestValueTotal) * 100\n      )}%`,\n\n      // if \"value\" is negative, let's put `0` for now which means no elevation needed\n      risePercentage: value \u003e 0 ? barsLinePercentage : '0',\n    }));\n\n    return [barItems, barsLinePercentage];\n  }, [dataArray]);\n\n  return (\n    \u003cdiv className=\"bar-graph\"\u003e\n      \u003cdiv className=\"bars-list\"\u003e\n        {barItems.map((barItem, idx) =\u003e (\n          \u003cBarItem\n            ...\n            risePercentage={barItem.risePercentage}\n          /\u003e\n        ))}\n      \u003c/div\u003e\n      \u003cdiv className=\"bars-line\" style={{ bottom: barsLinePercentage }} /\u003e\n    \u003c/div\u003e\n  );\n}\n```\n\n---\n\nNext, we will need to support the new prop `risePercentage` in our `BarItem` component. Let's go ahead and update the code in `src/components/BarItem.tsx`:\n\n```tsx\n...\nexport type Props = {\n  ...\n  risePercentage: string;\n};\n\nexport default function BarItem(props: Props) {\n  return (\n    \u003cdiv className=\"bar-item\"\u003e\n      \u003cdiv\n        className=\"bar-item-main\"\n        style={{ height: props.barPercentage }}\n      /\u003e\n      \u003cdiv\n        className=\"bar-item-offset\"\n        style={{ height: props.risePercentage }}\n      /\u003e\n      \u003cdiv className=\"bar-item-legend\"\u003e{props.legend}\u003c/div\u003e\n    \u003c/div\u003e\n  );\n}\n```\n\nSo in the changes above, we modified the structure of the HTML and created two new `div` elements inside the `.bar-item` element. The `.bar-item-main` element will be the actual bar and the `.bar-item-offset` will be the one to elevate or raise the actual bar. By making the `.bar-item` element a flexbox container and setting the [`flex-direction`](https://developer.mozilla.org/en-US/docs/Web/CSS/flex-direction) value as `column`, this will work as expected. Let's update the styles for the `BarItem` component in `src/components/BarItem.css`:\n\n```css\n.bar-item {\n  position: relative;\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  height: 100%;\n}\n\n.bar-item-main {\n  width: 100%;\n  background-color: #f2f2f2;\n  border-top-right-radius: 4px;\n  border-top-left-radius: 4px;\n}\n\n.bar-item:hover .bar-item-main {\n  background-color: #54d6da;\n}\n...\n```\n\nOkay, save the changes and let's see how our second graph is looking now:\n\n![Screenshot of bar graphs built in React and TypeScript](/images/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests/bar-graphs-5.png)\n\nSweet! To complete the changes for our second graph, let's make bars with negative values to actually face downwards by applying the border radius on the bottom instead of the top and also changing the background color on hover.\n\n---\n\nLet's have a prop that is passed down to the `BarItem` component to determine if it has a negative value. Go to `src/components/BarGraph.tsx` and update the code with the following below:\n\n```tsx\n...\nexport default function BarGraph({ dataArray }: Props) {\n  const [barItems, barsLinePercentage] = useMemo(() =\u003e {\n    ...\n    const barItems = dataArray.map(({ legend, value }) =\u003e {\n      const isNegative = value \u003c 0;\n\n      return {\n        legend,\n        isNegative,\n        barPercentage: `${Math.round(\n          (Math.abs(value) / highestValueTotal) * 100\n        )}%`,\n        risePercentage: isNegative ? '0' : barsLinePercentage,\n      };\n    });\n\n    return [barItems, barsLinePercentage];\n  }, [dataArray]);\n\n  return (\n    \u003cdiv className=\"bar-graph\"\u003e\n      \u003cdiv className=\"bars-list\"\u003e\n        {barItems.map((barItem, idx) =\u003e (\n          \u003cBarItem\n            ...\n            isNegative={barItem.isNegative}\n          /\u003e\n        ))}\n      \u003c/div\u003e\n      \u003cdiv className=\"bars-line\" style={{ bottom: barsLinePercentage }} /\u003e\n    \u003c/div\u003e\n  );\n}\n```\n\nThen, let's go to `src/components/BarItem.tsx` and support this new prop `isNegative`:\n\n```tsx\nimport React from 'react';\nimport cn from 'classnames';\nimport './BarItem.css';\n\nexport type Props = {\n  ...\n  isNegative: boolean;\n};\n\nexport default function BarItem(props: Props) {\n  return (\n    \u003cdiv className={cn('bar-item', { 'is-negative': props.isNegative })}\u003e\n      ...\n    \u003c/div\u003e\n  );\n}\n```\n\nIn the changes above, we're using the `classnames` library we installed earlier. The `classnames` function can accept an object of keys with `boolean` values. If the value of the key is `true`, then that key will be added as a part of the `className` string. So if the `props.isNegative` is `true`, the `className` value would be `\"bar-item is-negative\"`, but if it's `false`, then the `className` value would only be `\"bar-item\"`.\n\nFinally, let's update the styles in `src/components/BarItem.css` to support the `is-negative` class:\n\n```css\n...\n.bar-item:hover .bar-item-main {\n  ...\n}\n\n.bar-item.is-negative .bar-item-main {\n  border-radius: 0 0 4px 4px;\n}\n\n.bar-item.is-negative:hover .bar-item-main {\n  background-color: #ff9869;\n}\n...\n```\n\nAfter saving the changes above, here's the final look for our second graph:\n\n![Screenshot of bar graphs built in React and TypeScript](/images/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests/bar-graphs-6.png)\n\n---\n\n## Display bars with negative values (Part 2)\n\nNice! We're down to the last graph we need to handle. Let's first define the values for the third graph in our `App` component in `src/App.tsx` to see how our current logic will display all the bars with negative values:\n\n```tsx\n...\nexport default function App() {\n  ...\n  const dataArray3 = [\n    {\n      value: -150,\n      legend: 'Year 1',\n    },\n    {\n      value: -300,\n      legend: 'Year 2',\n    },\n    {\n      value: -700,\n      legend: 'Year 3',\n    },\n    {\n      value: -500,\n      legend: 'Thereafter',\n    },\n  ];\n\n  return (\n    \u003cdiv className=\"container\"\u003e\n      ...\n      \u003cBarGraph dataArray={dataArray3} /\u003e\n    \u003c/div\u003e\n  );\n}\n```\n\nHere's what happens when we save the changes above:\n\n![Screenshot of bar graphs built in React and TypeScript](/images/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests/bar-graphs-7.png)\n\nAs you can see from the screenshot, only the highest negative value is sticking to the line bar while the smaller negative values are at the bottom. This is because we're setting the `risePercentage` of all negative values to `0`.\n\nHow do we determine the correct `risePercentage` for each bar? The trick is in the highest negative value. If you guessed it correctly, we just have to deduct the percentage of each negative value with the percentage of the highest negative value (which is the equivalent value as our line bar's elevation level - `barsLinePercent`).\n\nLet's do the final update of our `BarGraph` component with the following:\n\n```tsx\n...\nexport default function BarGraph({ dataArray }: Props) {\n  const [barItems, barsLinePercentage] = useMemo(() =\u003e {\n    ...\n    const barItems = dataArray.map(({ legend, value }) =\u003e {\n      const isNegative = value \u003c 0;\n      const barPercent = Math.round(\n        (Math.abs(value) / highestValueTotal) * 100\n      );\n\n      return {\n        legend,\n        isNegative,\n        barPercentage: `${barPercent}%`,\n        risePercentage: isNegative\n          ? `${barsLinePercent - barPercent}%`\n          : barsLinePercentage,\n      };\n    });\n\n    return [barItems, barsLinePercentage];\n  }, [dataArray]);\n\n  return (\n    ...\n  );\n}\n```\n\n---\n\nDon't forget to save the changes and let's see if it's working as expected:\n\n![Screenshot of bar graphs built in React and TypeScript](/images/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests/bar-graphs-8.png)\n\nWell, would you look at that? We're done. That's it! We've just built our very own bar graph that can handle positive and negative values in React and TypeScript. Feel free to modify the values and see how our bar graph will display them.\n\nWe're now ready to write some tests for this bar graph component. Please proceed to the [next part](/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests-part-2) of this post.\n","previousPost":{"id":"how-to-create-your-own-pagination-in-react-and-typescript-with-tests-part-2","title":"How to create your own pagination in React and TypeScript with tests (Part 2)","date":"2022-08-15","excerpt":"Learn how to build a modern page navigation in a reactive and reusable way","category":"technology","videoUrl":"https://youtu.be/FQA-6Nyr6kM"},"nextPost":{"id":"how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests-part-2","title":"How to create your own bar graph in React and TypeScript with tests (Part 2)","date":"2022-11-25","excerpt":"Learn how to build a bar graph with positive and negative values in a reactive and reusable way","category":"technology","videoUrl":"https://youtu.be/P2LZ5waJRaU"},"title":"How to create your own bar graph in React and TypeScript with tests (Part 1)","date":"2022-11-25","excerpt":"Learn how to build a bar graph with positive and negative values in a reactive and reusable way","category":"technology","videoUrl":"https://youtu.be/IPQzaSfUm7U"}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests-part-1"},"buildId":"dZcmuQ2S9SKP6MfF1Rl-L","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>