<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#2c2c34"/><link rel="icon" href="https://dominicarrojado.com/favicon.ico"/><link rel="manifest" href="https://dominicarrojado.com/manifest.json"/><meta name="twitter:card" content="summary_large_image"/><meta property="og:image" content="https://dominicarrojado.com/images/pages/guides-tips-and-tricks-to-web-development.png"/><meta property="og:image:alt" content="Dominic Arrojado | Guides, Tips and Tricks to Web Development"/><meta property="og:image:type" content="image/png"/><meta property="og:image:width" content="2400"/><meta property="og:image:height" content="1254"/><meta property="og:site_name" content="Dominic Arrojado"/><link rel="preload" href="/fonts/Roboto-Light.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Light.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-LightItalic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-LightItalic.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Regular.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Italic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Italic.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Medium.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Medium.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-MediumItalic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-MediumItalic.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Bold.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Bold.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-BoldItalic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-BoldItalic.woff" as="font" type="font/woff" crossorigin="anonymous"/><title>How to create your own bar graph in React and TypeScript with tests (Part 2) | Dominic Arrojado</title><meta name="robots" content="index,follow"/><meta name="description" content="Learn how to build a bar graph with positive and negative values in a reactive and reusable way"/><meta property="og:title" content="How to create your own bar graph in React and TypeScript with tests (Part 2) | Dominic Arrojado"/><meta property="og:description" content="Learn how to build a bar graph with positive and negative values in a reactive and reusable way"/><meta property="og:url" content="https://dominicarrojado.com/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests-part-2/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2022-11-25T14:00:00Z"/><meta property="article:modified_time" content="2022-11-25T14:00:00Z"/><meta property="article:author" content="https://dominicarrojado.com/about/"/><link rel="canonical" href="https://dominicarrojado.com/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests-part-2/"/><meta name="next-head-count" content="39"/><link rel="preload" href="/_next/static/css/672b9c18f2cf5d8b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/672b9c18f2cf5d8b.css" data-n-g=""/><link rel="preload" href="/_next/static/css/82d01f71dc75279c.css" as="style"/><link rel="stylesheet" href="/_next/static/css/82d01f71dc75279c.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-7ddcf04b2bd1e96a.js" defer=""></script><script src="/_next/static/chunks/framework-73b8966a3c579ab0.js" defer=""></script><script src="/_next/static/chunks/main-f0c986bda8fad686.js" defer=""></script><script src="/_next/static/chunks/pages/_app-f8b9ccaf5904b773.js" defer=""></script><script src="/_next/static/chunks/374-b35b83a20fdd9d5b.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-3eaaed6cc51dd36d.js" defer=""></script><script src="/_next/static/t3qDNQ3q0ssjJDc3XqCZC/_buildManifest.js" defer=""></script><script src="/_next/static/t3qDNQ3q0ssjJDc3XqCZC/_ssgManifest.js" defer=""></script></head><body><div id="__next"><noscript>
            <iframe
              src="https://www.googletagmanager.com/ns.html?id=GTM-TSMLTPT"
              height="0"
              width="0"
              style="display: none; visibility: hidden"
            ></iframe>
          </noscript><div tabindex="-1" class="h-full outline-none"><header class="fixed flex items-center top-0 w-full z-40"><a href="#main" tabindex="0" class="absolute -top-96 -left-96 w-px h-px text-center text-white overflow-hidden -z-50 focus:top-4 focus:inset-x-0 focus:m-auto focus:w-44 focus:h-auto focus:z-50 focus:sm:w-52 focus:xl:w-56">Skip to main content</a><a class="absolute top-3.5 left-3.5 flex shadow-3xl border border-white bg-gray-750 bg-opacity-90 p-1.5 z-50 transform transition ease-in-out duration-500 hover:shadow-md hover:bg-opacity-100 motion-reduce:transition-none sm:top-4 sm:left-4 md:top-5 md:left-5 md:border-2 lg:top-8 lg:left-8 opacity-0 -translate-y-full" aria-label="Dominic Arrojado logo" href="/"><svg viewBox="0 0 25750 29700" role="img" class="w-7 h-7 text-white transition-colors duration-300 sm:w-8 sm:h-8 md:w-10 md:h-10 xl:w-11 xl:h-11"><path fill="currentColor" d="M4850 19266H1025V2039l4600-129c2511 0 4500 735 5970 2206 1470 1470 2206 3423 2206 5854 0 6199-2985 9296-8951 9296zM4086 4719v11751c494 48 1025 72 1599 72 1543 0 2752-558 3624-1679s1310-2688 1310-4705c0-3684-1712-5524-5135-5524-329 0-795 28-1398 85zm17656 21711l-1437-3969h-6721l974-2655h4730l-2242-6854 1518-4167 7010 17645zM17826 435h3307L10351 29313H7044l4243-11322c1982-1513 2973-4055 2973-7627 0-171-4-340-11-506l3577-9423z"></path></svg></a><div class="absolute top-3.5 right-3.5 flex items-end gap-3 ml-auto sm:top-4 sm:right-4 sm:gap-4 md:top-5 md:right-5 md:gap-5 lg:top-8 lg:right-8 lg:gap-6" style="padding-right:var(--scrollbar-width, 0)" data-testid="header-buttons"><button data-command="" data-disclosure="" aria-expanded="false" class="group flex items-center flex-col min-w-8 outline-none md:min-w-10 xl:min-w-11" aria-label="Toggle menu"><div class="w-6 h-0.5 bg-gray-400 rounded dark:bg-gray-300 transform transition group-hover:bg-gray-500 group-focus-visible:bg-gray-500 motion-reduce:transition-none dark:group-hover:bg-white dark:group-focus-visible:bg-white md:w-7 md:h-1 xl:w-8 duration-700 opacity-0 translate-x-1/2" style="transition-delay:0ms" data-testid="menu-stack"></div><div class="w-6 h-0.5 bg-gray-400 rounded dark:bg-gray-300 transform transition group-hover:bg-gray-500 group-focus-visible:bg-gray-500 motion-reduce:transition-none dark:group-hover:bg-white dark:group-focus-visible:bg-white md:w-7 md:h-1 xl:w-8 mt-1.5 duration-700 opacity-0 -translate-x-1/2" style="transition-delay:100ms" data-testid="menu-stack"></div><div class="w-6 h-0.5 bg-gray-400 rounded dark:bg-gray-300 transform transition group-hover:bg-gray-500 group-focus-visible:bg-gray-500 motion-reduce:transition-none dark:group-hover:bg-white dark:group-focus-visible:bg-white md:w-7 md:h-1 xl:w-8 mt-1.5 duration-700 opacity-0 translate-x-1/2" style="transition-delay:200ms" data-testid="menu-stack"></div><div class="mt-1.5 text-gray-400 text-3xs font-normal uppercase select-none dark:text-gray-300 transform transition-transform-opacity-color duration-700 group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-gray-100 md:mt-2 md:text-2xs xl:text-xs opacity-0 -translate-y-3">Menu</div></button></div></header><span id=":R366:" style="position:fixed"></span><div id="main"></div><section class="relative flex flex-col bg-gray-550 items-center justify-center px-6 text-center overflow-hidden dark:bg-gray-650 sm:px-20 lg:px-32 min-h-96 py-28"><div class="absolute top-0 left-0 w-full h-full bg-repeat bg-center invert-[.1] dark:invert-0 motion-safe:animate-slide transition-opacity duration-1250 motion-reduce:transition-none opacity-0" style="background-image:url(&#x27;/images/bg/pattern.png&#x27;)"></div><div class="overflow-hidden py-2" style="opacity:1"><h1 class="text-3xl font-bold text-white leading-tight transform transition duration-700 motion-reduce:transition-none sm:text-4xl md:text-5xl lg:text-6xl xl:text-7xl opacity-0 translate-y-full">How to create your own bar graph in React and TypeScript with tests (Part 2)</h1></div><div class="overflow-hidden" style="opacity:1"><p class="font-light text-white transform transition duration-700 motion-reduce:transition-none xl:text-2xl opacity-0 translate-y-full">Learn how to build a bar graph with positive and negative values in a reactive and reusable way</p></div></section><section class="pt-16 pb-20 px-6 sm:pt-20 sm:pb-24 sm:px-8 md:pt-24 md:pb-28 lg:px-10 xl:pt-28 xl:pb-32 transform transition-transform-opacity duration-700 motion-reduce:transition-none opacity-0" data-testid="section"><div class="w-11/12 max-w-screen-3xl -mt-8 mx-auto pb-8 sm:-mt-10 sm:pb-10 md:-mt-12 md:pb-12 lg:w-5/6"><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="4984498713" data-ad-format="auto" data-full-width-responsive="true" data-testid="ad-unit"></ins></div><div class="flex justify-between items-center w-11/12 max-w-screen-3xl mx-auto lg:w-5/6"><div class="mr-4 text-sm text-gray-400 sm:text-base xl:text-lg">Last Updated: <time dateTime="2022-11-25">November 25, 2022</time></div><div class="rounded py-0.5 px-1.5 bg-gray-200 text-2xs capitalize dark:bg-gray-600 md:py-1 md:px-2 md:text-xs xl:text-sm">technology</div></div><div class="w-11/12 max-w-screen-3xl mt-4 mx-auto lg:w-5/6"><a class="group inline-flex items-center font-normal select-none dark:hover:text-white transition-colors duration-300 hover:text-black group-hover:text-black motion-reduce:transition-none" target="_blank" rel="noopener noreferrer nofollow" href="https://youtu.be/P2LZ5waJRaU"><svg viewBox="0 0 576 512" role="img" class="w-6 h-6 mr-2 text-gray-400 transition-colors duration-300 group-hover:text-red motion-reduce:transition-none dark:group-hover:text-white sm:w-7 sm:h-7 sm:mr-3 xl:w-8 xl:h-8"><path fill="currentColor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"></path></svg> <!-- -->Watch it on YouTube<svg viewBox="0 0 320 512" role="img" class="inline-block w-2 h-2 ml-2 text-black opacity-30 dark:text-white transform transition duration-300 group-hover:translate-x-1.5 group-hover:opacity-100 motion-reduce:transition-none sm:w-2.5 sm:h-2.5 sm:ml-2.5 md:w-3 md:h-3 md:ml-3 xl:w-3.5 xl:h-3.5"><path fill="currentColor" d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"></path></svg></a></div><article class="w-11/12 max-w-screen-3xl mx-auto prose dark:prose-dark sm:prose-lg lg:w-5/6 xl:prose-xl mt-8 sm:mt-10 xl:mt-14" data-clarity-region="article" data-testid="content"><h2>Introduction</h2>
<p>This is a continuation from <a href="/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests-part-1">Part 1</a>.</p>
<h2>Prerequisites</h2>
<p>To get started with testing, first install the package below:</p>
<pre><code class="hljs language-bash">yarn add @faker-js/faker
</code></pre>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/faker-js/faker"><code>@faker-js/faker</code></a> helps us generate massive amounts of fake (but realistic) data for testing. Check out the guide for <code>faker</code> <a target="_blank" rel="noopener noreferrer nofollow" href="https://fakerjs.dev/guide/">here</a>.</p>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<h2>Write tests for BarItem component</h2>
<p>Before we go ahead with creating the test file for the <code>BarItem</code> component, let&#x27;s first add the <code>data-testid</code> attributes to help us <a target="_blank" rel="noopener noreferrer nofollow" href="https://testing-library.com/docs/queries/about">query</a> the elements in the component later. Open <code>src/components/BarItem.tsx</code> and update the code with the following:</p>
<pre><code class="hljs language-tsx">...
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">BarItem</span>(<span class="hljs-params">props: Props</span>) </span>{
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">className</span>=<span class="hljs-string">{cn(</span>&#x27;<span class="hljs-attr">bar-item</span>&#x27;, { &#x27;<span class="hljs-attr">is-negative</span>&#x27;<span class="hljs-attr">:</span> <span class="hljs-attr">props.isNegative</span> })}
      <span class="hljs-attr">data-testid</span>=<span class="hljs-string">&quot;bar-item&quot;</span>
    &gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">...</span>
        <span class="hljs-attr">data-testid</span>=<span class="hljs-string">&quot;bar-item-main&quot;</span>
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">...</span>
        <span class="hljs-attr">data-testid</span>=<span class="hljs-string">&quot;bar-item-offset&quot;</span>
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bar-item-legend&quot;</span> <span class="hljs-attr">data-testid</span>=<span class="hljs-string">&quot;bar-item-legend&quot;</span>&gt;</span>
        {props.legend}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>Alright, we&#x27;re ready to start writing some tests. For test files, I like to separate them in a folder so that it&#x27;s less cluttered when viewing the main files. Create a new folder named <code>__tests__</code> under the <code>src/components</code> folder. This is where we will put the test files for the components we have. For our first test case, we can start with the <code>BarItem</code> component. Create a file under the <code>src/components/__tests__</code> folder and name it <code>BarItem.test.tsx</code>. The path for this new file should be <code>src/components/__tests__/BarItem.test.tsx</code>. This is a common naming convention for test files, make sure it matches the file name that you are testing then add infix <code>.test</code> for the test file name.</p>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>Now let&#x27;s add in the initial structure of the test file:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> BarItem, { Props } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../BarItem&#x27;</span>;

describe(<span class="hljs-string">&#x27;BarItem component&#x27;</span>, <span class="hljs-function">() =&gt;</span> {});
</code></pre>
<p>Aside from importing the component that we will test, we also imported the type <code>Props</code>. You&#x27;ll get to know why we did that later on.</p>
<p>In your test files, Jest puts <a target="_blank" rel="noopener noreferrer nofollow" href="https://jestjs.io/docs/api">functions and objects</a> into the global environment. <a target="_blank" rel="noopener noreferrer nofollow" href="https://jestjs.io/docs/api#describename-fn"><code>describe</code></a> is one of the functions available globally, so with the setup of Create React App, we don&#x27;t need to require or import anything to use them. <code>describe</code> creates a block that groups together several related tests. So ideally the description should be explaining what we are testing, so this is why I put <code>&#x27;BarItem component&#x27;</code>. Feel free to rename the description according to your preference if you feel that there&#x27;s a better description of what we are testing.</p>
<p>Next we can add a test case inside the <code>describe</code> block:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> BarItem, { Props } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../BarItem&#x27;</span>;

describe(<span class="hljs-string">&#x27;BarItem component&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  it(<span class="hljs-string">&#x27;should render a bar with positive values&#x27;</span>, <span class="hljs-function">() =&gt;</span> {});
});
</code></pre>
<p>The <a target="_blank" rel="noopener noreferrer nofollow" href="https://jestjs.io/docs/api#testname-fn-timeout"><code>it</code></a> (or <code>test</code>) method is another global function by Jest that runs a test.</p>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>Let&#x27;s start to write some code for the first test case. First, you want to create a reusable function called <code>renderComponent</code> inside the <code>describe</code> block, it should accept the props (or properties) of our component as an argument and call the <code>render()</code> method from Testing Library to render our component with the passed props in a test environment.</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> { render } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@testing-library/react&#x27;</span>;
<span class="hljs-keyword">import</span> BarItem, { Props } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../BarItem&#x27;</span>;

describe(<span class="hljs-string">&#x27;&lt;BarItem /&gt;&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> renderComponent = <span class="hljs-function">(<span class="hljs-params">props: Props</span>) =&gt;</span> render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">BarItem</span> {<span class="hljs-attr">...props</span>} /&gt;</span></span>);

  it(<span class="hljs-string">&#x27;should render a bar with positive values&#x27;</span>, <span class="hljs-function">() =&gt;</span> {});
});
</code></pre>
<p>Since we&#x27;ll have more than one test case for this component, creating a reusable function to render the component will reduce the code duplication. This will also make it easier if ever next time you have to rename your component, we can just change it within these lines and not in multiple separate lines.</p>
<p>Before we can render our component using the reusable function, we need to provide the required props for it. This is where we can use <code>faker</code> to generate random data for us. This makes our test more trustable and reliable instead of hardcoding the values.</p>
<p>Here&#x27;s the code we need to add inside our first test case in <code>src/components/__tests__/BarItem.test.tsx</code>:</p>
<pre><code class="hljs language-tsx">...
describe(<span class="hljs-string">&#x27;&lt;BarItem /&gt;&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  ...
  it(<span class="hljs-string">&#x27;should render a bar with positive values&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> legend = faker.lorem.sentence();
    <span class="hljs-keyword">const</span> barPercent = faker.datatype.number({ <span class="hljs-attr">min</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">max</span>: <span class="hljs-number">100</span> });
    <span class="hljs-keyword">const</span> barPercentage = <span class="hljs-string">`<span class="hljs-subst">${barPercent}</span>%`</span>;
    <span class="hljs-keyword">const</span> risePercent = faker.datatype.number({ <span class="hljs-attr">min</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">max</span>: barPercent });
    <span class="hljs-keyword">const</span> risePercentage = <span class="hljs-string">`<span class="hljs-subst">${risePercent}</span>%`</span>;

    renderComponent({
      legend,
      barPercentage,
      risePercentage,
      <span class="hljs-attr">isNegative</span>: <span class="hljs-literal">false</span>,
    });
  });
});
</code></pre>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>So now that our component has been rendered, we need to verify if the props we passed have been received from the component and render the component as expected. To do that, let&#x27;s first query for our main element which is the <code>bar-item</code>. It is advisable to use <a target="_blank" rel="noopener noreferrer nofollow" href="https://testing-library.com/docs/queries/about/#screen"><code>screen</code></a> methods from the Testing Library, and in our case we can use <code>.queryByTestId(&#x27;bar-item&#x27;)</code>, which returns the <code>bar-item</code> element based on its <code>data-testid</code> attribute. To learn more about queries in the Testing Library, you can read more about them <a target="_blank" rel="noopener noreferrer nofollow" href="https://testing-library.com/docs/queries/about">here</a>.</p>
<pre><code class="hljs language-tsx">...
describe(<span class="hljs-string">&#x27;&lt;BarItem /&gt;&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  ...
  it(<span class="hljs-string">&#x27;should render a bar with positive values&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    ...

    renderComponent({
      ...
    });

    <span class="hljs-keyword">const</span> barItemEl = screen.queryByTestId(<span class="hljs-string">&#x27;bar-item&#x27;</span>);
  });
});
</code></pre>
<p>Now that we have the element, what do we do with it? We can do the checks by executing one of Jest&#x27;s global functions called the <code>expect()</code> method and pass the element returned from our query. Next is to run what we call a matcher method <code>.toHaveClass()</code> which checks if the <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/class"><code>class</code></a> attribute value of the element is equal to the argument passed. This is one of the matcher methods provided by Jest. You can check this <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/testing-library/jest-dom#custom-matchers">documentation</a> for the other custom matcher methods which are specific to the <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model/Introduction">DOM</a>.</p>
<p>Remember that in our props, we are passing the value for <code>isNegative</code> as <code>false</code>. Hence, we do not expect our <code>bar-item</code> element to have the <code>is-negative</code> in the class. We can use the <code>.not.toHaveClass()</code> instead which is the reverse check of <code>.toHaveClass()</code>. Here&#x27;s the code we need to add in our test case:</p>
<pre><code class="hljs language-tsx">...
describe(<span class="hljs-string">&#x27;&lt;BarItem /&gt;&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  ...
  it(<span class="hljs-string">&#x27;should render a bar with positive values&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    ...
    <span class="hljs-keyword">const</span> barItemEl = screen.queryByTestId(<span class="hljs-string">&#x27;bar-item&#x27;</span>);

    expect(barItemEl).not.toHaveClass(<span class="hljs-string">&#x27;is-negative&#x27;</span>);
  });
});
</code></pre>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>Now save your changes and let&#x27;s verify if this test case will pass or not. In your terminal, run the script command available in <code>package.json</code> to run the tests:</p>
<pre><code class="hljs language-bash">yarn <span class="hljs-built_in">test</span> --coverage
</code></pre>
<p>The <code>--coverage</code> parameter will show you how many percent you have covered in each file of your project and/or if you have missed any lines to test. Once the command ran successfully, the terminal should display something like this:</p>
<img src="/images/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests/bar-item-component-test-coverage-incomplete.png" alt="Screenshot of incomplete test coverage for BarItem component" loading="lazy"/>
<p>Alright our very first test case passed! We easily achieved 100% test coverage because there&#x27;s no conditional statements in the component. Let&#x27;s complete this test case by adding the rest of the checks:</p>
<pre><code class="hljs language-tsx">...
describe(<span class="hljs-string">&#x27;&lt;BarItem /&gt;&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  ...
  it(<span class="hljs-string">&#x27;should render a bar with positive values&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    ...
    <span class="hljs-keyword">const</span> barItemEl = screen.queryByTestId(<span class="hljs-string">&#x27;bar-item&#x27;</span>);
    <span class="hljs-keyword">const</span> barMainEl = screen.queryByTestId(<span class="hljs-string">&#x27;bar-item-main&#x27;</span>);
    <span class="hljs-keyword">const</span> barOffsetEl = screen.queryByTestId(<span class="hljs-string">&#x27;bar-item-offset&#x27;</span>);
    <span class="hljs-keyword">const</span> barLegendEl = screen.queryByTestId(<span class="hljs-string">&#x27;bar-item-legend&#x27;</span>);

    expect(barItemEl).not.toHaveClass(<span class="hljs-string">&#x27;is-negative&#x27;</span>);
    expect(barMainEl).toHaveStyle({ <span class="hljs-attr">height</span>: barPercentage });
    expect(barOffsetEl).toHaveStyle({ <span class="hljs-attr">height</span>: risePercentage });
    expect(barLegendEl).toHaveTextContent(legend);
  });
});
</code></pre>
<p>Once the changes are saved, it should still pass. We&#x27;ve completed all the necessary checks based on the props we&#x27;re passing. Let&#x27;s move on to the next test case.</p>
<pre><code class="hljs language-tsx">...
describe(<span class="hljs-string">&#x27;&lt;BarItem /&gt;&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  ...
  it(<span class="hljs-string">&#x27;should render a bar with negative values&#x27;</span>, <span class="hljs-function">() =&gt;</span> {});
});
</code></pre>
<p>In the code above, I gave you the description of the second test case. As a challenge, add the codes that should be inside the second test case block and compare your code with the expected code later. The tip here is that it would be <strong><em>very</em></strong> similar to the first case.</p>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>Done? Alright. Here&#x27;s the the expected code:</p>
<pre><code class="hljs language-tsx">...
describe(<span class="hljs-string">&#x27;&lt;BarItem /&gt;&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  ...
  it(<span class="hljs-string">&#x27;should render a bar with negative values&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> legend = faker.lorem.sentence();
    <span class="hljs-keyword">const</span> barPercent = faker.datatype.number({ <span class="hljs-attr">min</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">max</span>: <span class="hljs-number">100</span> });
    <span class="hljs-keyword">const</span> barPercentage = <span class="hljs-string">`<span class="hljs-subst">${barPercent}</span>%`</span>;
    <span class="hljs-keyword">const</span> risePercent = faker.datatype.number({ <span class="hljs-attr">min</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">max</span>: barPercent });
    <span class="hljs-keyword">const</span> risePercentage = <span class="hljs-string">`<span class="hljs-subst">${risePercent}</span>%`</span>;

    renderComponent({
      legend,
      barPercentage,
      risePercentage,
      <span class="hljs-attr">isNegative</span>: <span class="hljs-literal">true</span>,
    });

    <span class="hljs-keyword">const</span> barItemEl = screen.queryByTestId(<span class="hljs-string">&#x27;bar-item&#x27;</span>);
    <span class="hljs-keyword">const</span> barMainEl = screen.queryByTestId(<span class="hljs-string">&#x27;bar-item-main&#x27;</span>);
    <span class="hljs-keyword">const</span> barOffsetEl = screen.queryByTestId(<span class="hljs-string">&#x27;bar-item-offset&#x27;</span>);
    <span class="hljs-keyword">const</span> barLegendEl = screen.queryByTestId(<span class="hljs-string">&#x27;bar-item-legend&#x27;</span>);

    expect(barItemEl).toHaveClass(<span class="hljs-string">&#x27;is-negative&#x27;</span>);
    expect(barMainEl).toHaveStyle({ <span class="hljs-attr">height</span>: barPercentage });
    expect(barOffsetEl).toHaveStyle({ <span class="hljs-attr">height</span>: risePercentage });
    expect(barLegendEl).toHaveTextContent(legend);
  });
});
</code></pre>
<p>Save your changes and let&#x27;s see the result of our tests in the terminal.</p>
<img src="/images/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests/bar-item-component-test-coverage-complete.png" alt="Screenshot of complete test coverage for BarItem component" loading="lazy"/>
<p>Awesome! We&#x27;re done with the tests for our <code>BarItem</code> component. Let&#x27;s move on to the next component.</p>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<h2>Write tests for BarGraph component</h2>
<p>Same as what we did for the <code>BarItem</code> component, let&#x27;s first add the <code>data-testid</code> attribute in our <code>BarGraph</code> component to help us query the elements in the component later. Querying an element, checking its attributes and content is the most common way to test a component. Open <code>src/components/BarGraph.tsx</code> and update the code with the following:</p>
<pre><code class="hljs language-tsx">...
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">BarGraph</span>(<span class="hljs-params">{ dataArray }: Props</span>) </span>{
  ...
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bar-graph&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bars-list&quot;</span>&gt;</span>
        ...
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">...</span>
        <span class="hljs-attr">data-testid</span>=<span class="hljs-string">&quot;bars-line&quot;</span>
      /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>You might ask why we didn&#x27;t need to add the <code>data-testid</code> attribute for the <code>bars-list</code> element. That&#x27;s because we can query for the <code>bar-item</code> elements using their <code>data-testid</code> we already added earlier and use the <code>.queryAllByTestId()</code> function to return an array of elements instead of one element.</p>
<p>Now it&#x27;s time to write tests for the <code>BarGraph</code> component. Create the test file with the following path <code>src/components/__tests__/BarGraph.test.tsx</code> and add the initial code:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> { render } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@testing-library/react&#x27;</span>;
<span class="hljs-keyword">import</span> BarGraph, { Props } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../BarGraph&#x27;</span>;

describe(<span class="hljs-string">&#x27;&lt;BarGraph /&gt;&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> renderComponent = <span class="hljs-function">(<span class="hljs-params">props: Props</span>) =&gt;</span> render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">BarGraph</span> {<span class="hljs-attr">...props</span>} /&gt;</span></span>);
});
</code></pre>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>Alright. What should be our first test case? We can actually use the three graphs we used to help us handle all the scenarios for our bar graph component. To help you recall, here was the screenshot from <a href="/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests-part-1">Part 1</a>:</p>
<img src="/images/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests/bar-graphs-1.png" alt="Screenshot of different bar graphs built in React and TypeScript" loading="lazy"/>
<p>Starting from the left of the image or screenshot, the first graph displays a bar graph with all positive values, the line bar is at the bottom and one of the bars with the highest value occupies 100% of the graph height. The second graph displays a bar graph with one negative value, notice how the line bar elevates the <strong><em>same level</em></strong> as the bars with positive values. You could also say that the height of the bar with negative value is the <strong><em>same level</em></strong> as the line bar&#x27;s elevation level. The third graph displays a bar graph with all negative values, aside from the line bar elevating, bars with smaller negative values also elevate until it sticks to the line bar.</p>
<p>So let&#x27;s start with the first graph with all positive values. We won&#x27;t be using <code>faker</code> to generate the values in the <code>dataArray</code> because in order to verify the random values, we need to also generate the expected results or percentages of them and we&#x27;ll probably end up copying the code from the main file and that will make the test file complicated and difficult to understand. Hence, it would be better to hardcode the values along with the expected result array.</p>
<p>Let&#x27;s use the same <code>dataArray</code> we have from the <code>App</code> component for our first test case. Here&#x27;s the additional code for our first test case in <code>src/components/__tests__/BarGraph.test.tsx</code>:</p>
<pre><code class="hljs language-tsx">...
<span class="hljs-keyword">import</span> { faker } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@faker-js/faker&#x27;</span>;

describe(<span class="hljs-string">&#x27;&lt;BarGraph /&gt;&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> renderComponent = <span class="hljs-function">(<span class="hljs-params">props: Props</span>) =&gt;</span> render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">BarGraph</span> {<span class="hljs-attr">...props</span>} /&gt;</span></span>);

  it(<span class="hljs-string">&#x27;should convert positives values to percentages&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> expectedPercentages = [<span class="hljs-string">&#x27;29%&#x27;</span>, <span class="hljs-string">&#x27;43%&#x27;</span>, <span class="hljs-string">&#x27;100%&#x27;</span>, <span class="hljs-string">&#x27;71%&#x27;</span>];
    <span class="hljs-keyword">const</span> dataArray = [
      {
        <span class="hljs-attr">value</span>: <span class="hljs-number">200</span>,
        <span class="hljs-attr">legend</span>: faker.lorem.sentence(),
      },
      {
        <span class="hljs-attr">value</span>: <span class="hljs-number">300</span>,
        <span class="hljs-attr">legend</span>: faker.lorem.sentence(),
      },
      {
        <span class="hljs-attr">value</span>: <span class="hljs-number">700</span>,
        <span class="hljs-attr">legend</span>: faker.lorem.sentence(),
      },
      {
        <span class="hljs-attr">value</span>: <span class="hljs-number">500</span>,
        <span class="hljs-attr">legend</span>: faker.lorem.sentence(),
      },
    ];

    renderComponent({ dataArray });
  });
});
</code></pre>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>You might be wondering how I get the hardcoded values for the <code>expectedPercentages</code>. I got it by using the inspect element feature of the browser I&#x27;m using. You can inspect the elements to view the HTML of our React app and you will be able to see the controlled style properties such as <code>height</code> and <code>bottom</code>. Here&#x27;s <a target="_blank" rel="noopener noreferrer nofollow" href="https://blog.hubspot.com/website/how-to-inspect">an article</a> on how to use the inspect element feature in <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.google.com/intl/en_sg/chrome/">Chrome</a>, <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apple.com/sg/safari/">Safari</a> and <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.mozilla.org/en-US/firefox/">Firefox</a>.</p>
<img src="/images/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests/bar-graph-inspect-element.png" alt="Screenshot of using inspect element on a bar graph built in React and TypeScript" loading="lazy"/>
<p>I have stored the expected percentages in an array called <code>expectedPercentages</code> to make our checks efficient later when looping through the <code>dataArray</code> and match their <a target="_blank" rel="noopener noreferrer nofollow" href="https://en.wikipedia.org/wiki/Zero-based_numbering">indexes</a> with the items from the <code>dataArray</code>. For the legend props, we still use <code>faker</code> to generate the text because it is straightforward to verify by just comparing the element&#x27;s content to it.</p>
<p>Alright, we&#x27;re all set to check our rendered component and verify whether each bar has the expected percentage. We need to query all of the <code>bar-item-main</code> elements from our rendered component. Here&#x27;s the code for that:</p>
<pre><code class="hljs language-tsx">...
describe(<span class="hljs-string">&#x27;&lt;BarGraph /&gt;&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  ...
  it(<span class="hljs-string">&#x27;should convert positives values to percentages&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    ...

    renderComponent({ dataArray });

    <span class="hljs-keyword">const</span> barPercentageItems = screen.queryAllByTestId(<span class="hljs-string">&#x27;bar-item-main&#x27;</span>);
  });
});
</code></pre>
<p>As for our first check, let&#x27;s check that the array length for <code>barPercentageItems</code> is the same as the length of our <code>dataArray</code>:</p>
<pre><code class="hljs language-tsx">...
describe(<span class="hljs-string">&#x27;&lt;BarGraph /&gt;&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  ...
  it(<span class="hljs-string">&#x27;should convert positives values to percentages&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    ...

    <span class="hljs-keyword">const</span> barPercentageItems = screen.queryAllByTestId(<span class="hljs-string">&#x27;bar-item-main&#x27;</span>);

    expect(barPercentageItems).toHaveLength(dataArray.length);
  });
});
</code></pre>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>Save the change and let&#x27;s see if this passes by looking at our terminal:</p>
<img src="/images/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests/bar-graph-component-test-coverage-incomplete-1.png" alt="Screenshot of incomplete test coverage for BarGraph component" loading="lazy"/>
<p>Awesome, it passed! You can also see how useful having the test coverage information is because it will tell you which lines of the main file have not been covered yet. We should be able to cover that line in the next test cases but we&#x27;re not done with our first test case yet. We still need to loop through the <code>bar-item-main</code> elements or the <code>barPercentageItems</code> and verify that their percentage or <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/CSS/height"><code>height</code></a> CSS property is what we expect it to be. Here&#x27;s the code for that:</p>
<pre><code class="hljs language-tsx">...
describe(<span class="hljs-string">&#x27;&lt;BarGraph /&gt;&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  ...
  it(<span class="hljs-string">&#x27;should convert positives values to percentages&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    ...
    expect(barPercentageItems).toHaveLength(dataArray.length);

    barPercentageItems.forEach(<span class="hljs-function">(<span class="hljs-params">element, idx</span>) =&gt;</span> {
      expect(element).toHaveStyle({
        <span class="hljs-attr">height</span>: expectedPercentage[idx],
      });
    });
  });
});
</code></pre>
<p>Don&#x27;t forget to save your changes. Now take a look at our terminal to see if it also passes:</p>
<img src="/images/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests/bar-graph-component-test-coverage-incomplete-2.png" alt="Screenshot of incomplete test coverage for BarGraph component" loading="lazy"/>
<p>And yes it still does.</p>
<p>In the same test case, we also need to check whether the elevation for each bar is what we expect it to be. Because all of them are in positive values, we expect the elevation or the height CSS property of each <code>bar-item-offset</code> element to be <code>0%</code>. We can query for the <code>bar-item-offset</code> elements the same way we did for the <code>bar-item-main</code> elements. Let&#x27;s update the code with the following below:</p>
<pre><code class="hljs language-tsx">...
describe(<span class="hljs-string">&#x27;&lt;BarGraph /&gt;&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  ...
  it(<span class="hljs-string">&#x27;should convert positives values to percentages&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    ...
    <span class="hljs-keyword">const</span> barPercentageItems = screen.queryAllByTestId(<span class="hljs-string">&#x27;bar-item-main&#x27;</span>);
    <span class="hljs-keyword">const</span> barOffsetItems = screen.queryAllByTestId(<span class="hljs-string">&#x27;bar-item-offset&#x27;</span>);

    expect(barPercentageItems).toHaveLength(dataArray.length);
    expect(barOffsetItems).toHaveLength(dataArray.length);

    barPercentageItems.forEach(<span class="hljs-function">(<span class="hljs-params">element, idx</span>) =&gt;</span> {
      expect(element).toHaveStyle({
        <span class="hljs-attr">height</span>: expectedPercentage[idx],
      });
    });

    barOffsetItems.forEach(<span class="hljs-function">(<span class="hljs-params">element</span>) =&gt;</span> {
      expect(element).toHaveStyle({ <span class="hljs-attr">height</span>: <span class="hljs-string">&#x27;0%&#x27;</span> });
    });
  });
});
</code></pre>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>Alright. When we save our changes, this is what we should see from the terminal:</p>
<img src="/images/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests/bar-graph-component-test-coverage-incomplete-3.png" alt="Screenshot of incomplete test coverage for BarGraph component" loading="lazy"/>
<p>We can optimize our test case by just doing one loop and here&#x27;s the refactored code:</p>
<pre><code class="hljs language-tsx">...
describe(<span class="hljs-string">&#x27;&lt;BarGraph /&gt;&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  ...
  it(<span class="hljs-string">&#x27;should convert positives values to percentages&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    ...
    <span class="hljs-keyword">const</span> barPercentageItems = screen.queryAllByTestId(<span class="hljs-string">&#x27;bar-item-main&#x27;</span>);
    <span class="hljs-keyword">const</span> barOffsetItems = screen.queryAllByTestId(<span class="hljs-string">&#x27;bar-item-offset&#x27;</span>);

    expect(barPercentageItems).toHaveLength(dataArray.length);
    expect(barOffsetItems).toHaveLength(dataArray.length);

    barPercentageItems.forEach(<span class="hljs-function">(<span class="hljs-params">element, idx</span>) =&gt;</span> {
      expect(element).toHaveStyle({
        <span class="hljs-attr">height</span>: expectedPercentages[idx],
      });
      expect(barOffsetItems[idx]).toHaveStyle({ <span class="hljs-attr">height</span>: <span class="hljs-string">&#x27;0%&#x27;</span> });
    });
  });
});
</code></pre>
<p>Save the following changes above and the test case should still pass.</p>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>In the same test case again, we need to check that the legends are displayed accordingly. We can query for the <code>bar-item-legends</code> elements and get the expected legend for each bar from the <code>dataArray</code> using the array index. Let&#x27;s update the code with the following below to verify that:</p>
<pre><code class="hljs language-tsx">...
describe(<span class="hljs-string">&#x27;&lt;BarGraph /&gt;&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  ...
  it(<span class="hljs-string">&#x27;should convert positives values to percentages&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    ...
    <span class="hljs-keyword">const</span> barPercentageItems = screen.queryAllByTestId(<span class="hljs-string">&#x27;bar-item-main&#x27;</span>);
    <span class="hljs-keyword">const</span> barOffsetItems = screen.queryAllByTestId(<span class="hljs-string">&#x27;bar-item-offset&#x27;</span>);
    <span class="hljs-keyword">const</span> barLegendItems = screen.queryAllByTestId(<span class="hljs-string">&#x27;bar-item-legend&#x27;</span>);

    expect(barPercentageItems).toHaveLength(dataArray.length);
    expect(barOffsetItems).toHaveLength(dataArray.length);
    expect(barLegendItems).toHaveLength(dataArray.length);

    barPercentageItems.forEach(<span class="hljs-function">(<span class="hljs-params">element, idx</span>) =&gt;</span> {
      expect(element).toHaveStyle({
        <span class="hljs-attr">height</span>: expectedPercentages[idx],
      });
      expect(barOffsetItems[idx]).toHaveStyle({ <span class="hljs-attr">height</span>: <span class="hljs-string">&#x27;0%&#x27;</span> });
      expect(barLegendItems[idx]).toHaveTextContent(dataArray[idx].legend);
    });
  });
});
</code></pre>
<p>After saving the changes, the test case will still pass as expected.</p>
<p>Okay. Finally, to complete our first test case for the <code>BarGraph</code> component, let&#x27;s also check whether the <code>bars-line</code> element elevation or the <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/CSS/bottom"><code>bottom</code></a> CSS property of it is what we expect. Since the values for the bar graph are all positive values, we expected it to be at the very bottom or the value of the bottom CSS property is <code>0%</code>. Let&#x27;s update the code to include this check:</p>
<pre><code class="hljs language-tsx">...
describe(<span class="hljs-string">&#x27;&lt;BarGraph /&gt;&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  ...
  it(<span class="hljs-string">&#x27;should convert positives values to percentages&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    ...
    barPercentageItems.forEach(<span class="hljs-function">(<span class="hljs-params">element, idx</span>) =&gt;</span> {
      ...
    });

    <span class="hljs-keyword">const</span> barsLine = screen.queryByTestId(<span class="hljs-string">&#x27;bars-line&#x27;</span>);

    expect(barsLine).toHaveStyle({ <span class="hljs-attr">bottom</span>: <span class="hljs-string">&#x27;0%&#x27;</span> });
  });
});
</code></pre>
<p>And this should pass after saving the changes.</p>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>Let&#x27;s move on to the second test case where we handle the second graph from the reference screenshot. Our <code>dataArray</code> will have one negative value. Let&#x27;s copy the <code>dataArray</code> from the <code>App</code> component again and here&#x27;s the initial code for our second test case in <code>src/components/__tests__/BarGraph.test.tsx</code>:</p>
<pre><code class="hljs language-tsx">...
describe(<span class="hljs-string">&#x27;&lt;BarGraph /&gt;&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  ...
  it(<span class="hljs-string">&#x27;should convert positives values to percentages&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    ...
  });

  it(<span class="hljs-string">&#x27;should convert positive values and one negative value to percentages&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> expectedPercentages = [<span class="hljs-string">&#x27;56%&#x27;</span>, <span class="hljs-string">&#x27;33%&#x27;</span>, <span class="hljs-string">&#x27;22%&#x27;</span>, <span class="hljs-string">&#x27;78%&#x27;</span>];
    <span class="hljs-keyword">const</span> expectedOffsets = [<span class="hljs-string">&#x27;22%&#x27;</span>, <span class="hljs-string">&#x27;22%&#x27;</span>, <span class="hljs-string">&#x27;0%&#x27;</span>, <span class="hljs-string">&#x27;22%&#x27;</span>];
    <span class="hljs-keyword">const</span> expectedBarsLine = <span class="hljs-string">&#x27;22%&#x27;</span>;
    <span class="hljs-keyword">const</span> dataArray = [
      {
        <span class="hljs-attr">value</span>: <span class="hljs-number">500</span>,
        <span class="hljs-attr">legend</span>: faker.lorem.sentence(),
      },
      {
        <span class="hljs-attr">value</span>: <span class="hljs-number">300</span>,
        <span class="hljs-attr">legend</span>: faker.lorem.sentence(),
      },
      {
        <span class="hljs-attr">value</span>: -<span class="hljs-number">200</span>,
        <span class="hljs-attr">legend</span>: faker.lorem.sentence(),
      },
      {
        <span class="hljs-attr">value</span>: <span class="hljs-number">700</span>,
        <span class="hljs-attr">legend</span>: faker.lorem.sentence(),
      },
    ];

    renderComponent({ dataArray });
  });
  });
});
</code></pre>
<p>Okay, I&#x27;ve added the expected percentages and offsets. As a challenge for yourself, you can try to complete the code to verify our second test case using the first test case as your reference.</p>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>Once you&#x27;re done, you can take a look at the expected code of the second test case below:</p>
<pre><code class="hljs language-tsx">...
describe(<span class="hljs-string">&#x27;&lt;BarGraph /&gt;&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  ...
  it(<span class="hljs-string">&#x27;should convert positive values and one negative value to percentages&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    ...

    renderComponent({ dataArray });

    <span class="hljs-keyword">const</span> barPercentageItems = screen.queryAllByTestId(<span class="hljs-string">&#x27;bar-item-main&#x27;</span>);
    <span class="hljs-keyword">const</span> barOffsetItems = screen.queryAllByTestId(<span class="hljs-string">&#x27;bar-item-offset&#x27;</span>);
    <span class="hljs-keyword">const</span> barLegendItems = screen.queryAllByTestId(<span class="hljs-string">&#x27;bar-item-legend&#x27;</span>);

    expect(barPercentageItems).toHaveLength(dataArray.length);
    expect(barOffsetItems).toHaveLength(dataArray.length);

    barPercentageItems.forEach(<span class="hljs-function">(<span class="hljs-params">element, idx</span>) =&gt;</span> {
      expect(element).toHaveStyle({
        <span class="hljs-attr">height</span>: expectedPercentages[idx],
      });
      expect(barOffsetItems[idx]).toHaveStyle({ <span class="hljs-attr">height</span>: expectedOffsets[idx] });
      expect(barLegendItems[idx]).toHaveTextContent(dataArray[idx].legend);
    });

    <span class="hljs-keyword">const</span> barsLine = screen.queryByTestId(<span class="hljs-string">&#x27;bars-line&#x27;</span>);

    expect(barsLine).toHaveStyle({ <span class="hljs-attr">bottom</span>: expectedBarsLine });
  });
});
</code></pre>
<p>Was your code similar to the code above? If yes, then great! If not, no worries. Just keep practicing as we all know, practice makes perfect.</p>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>Once you save the changes, our second test case should pass:</p>
<img src="/images/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests/bar-graph-component-test-coverage-complete-1.png" alt="Screenshot of complete test coverage for BarGraph component" loading="lazy"/>
<p>In the screenshot above, we&#x27;ve already reached <code>100%</code> test coverage. You might want to stop here, but just to make sure our <code>BarGraph</code> component can handle if all the values are negative, we should create a test case for that as well.</p>
<p>Here&#x27;s the code for the final test case which is just very similar from our second test case:</p>
<pre><code class="hljs language-tsx">...
describe(<span class="hljs-string">&#x27;&lt;BarGraph /&gt;&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  ...
  it(<span class="hljs-string">&#x27;should convert negatives values to percentages&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> expectedPercentages = [<span class="hljs-string">&#x27;21%&#x27;</span>, <span class="hljs-string">&#x27;43%&#x27;</span>, <span class="hljs-string">&#x27;100%&#x27;</span>, <span class="hljs-string">&#x27;71%&#x27;</span>];
    <span class="hljs-keyword">const</span> expectedOffsets = [<span class="hljs-string">&#x27;79%&#x27;</span>, <span class="hljs-string">&#x27;57%&#x27;</span>, <span class="hljs-string">&#x27;0%&#x27;</span>, <span class="hljs-string">&#x27;29%&#x27;</span>];
    <span class="hljs-keyword">const</span> expectedBarsLine = <span class="hljs-string">&#x27;100%&#x27;</span>;
    <span class="hljs-keyword">const</span> dataArray = [
      {
        <span class="hljs-attr">value</span>: -<span class="hljs-number">150</span>,
        <span class="hljs-attr">legend</span>: faker.lorem.sentence(),
      },
      {
        <span class="hljs-attr">value</span>: -<span class="hljs-number">300</span>,
        <span class="hljs-attr">legend</span>: faker.lorem.sentence(),
      },
      {
        <span class="hljs-attr">value</span>: -<span class="hljs-number">700</span>,
        <span class="hljs-attr">legend</span>: faker.lorem.sentence(),
      },
      {
        <span class="hljs-attr">value</span>: -<span class="hljs-number">500</span>,
        <span class="hljs-attr">legend</span>: faker.lorem.sentence(),
      },
    ];

    renderComponent({ dataArray });

    <span class="hljs-keyword">const</span> barPercentageItems = screen.queryAllByTestId(<span class="hljs-string">&#x27;bar-item-main&#x27;</span>);
    <span class="hljs-keyword">const</span> barOffsetItems = screen.queryAllByTestId(<span class="hljs-string">&#x27;bar-item-offset&#x27;</span>);
    <span class="hljs-keyword">const</span> barLegendItems = screen.queryAllByTestId(<span class="hljs-string">&#x27;bar-item-legend&#x27;</span>);

    expect(barPercentageItems).toHaveLength(dataArray.length);
    expect(barOffsetItems).toHaveLength(dataArray.length);

    barPercentageItems.forEach(<span class="hljs-function">(<span class="hljs-params">element, idx</span>) =&gt;</span> {
      expect(element).toHaveStyle({
        <span class="hljs-attr">height</span>: expectedPercentages[idx],
      });
      expect(barOffsetItems[idx]).toHaveStyle({ <span class="hljs-attr">height</span>: expectedOffsets[idx] });
      expect(barLegendItems[idx]).toHaveTextContent(dataArray[idx].legend);
    });

    <span class="hljs-keyword">const</span> barsLine = screen.queryByTestId(<span class="hljs-string">&#x27;bars-line&#x27;</span>);

    expect(barsLine).toHaveStyle({ <span class="hljs-attr">bottom</span>: expectedBarsLine });
  });
});
</code></pre>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>Don&#x27;t forget to save the changes and take a look at the final screenshot of our terminal below:</p>
<img src="/images/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests/bar-graph-component-test-coverage-complete-2.png" alt="Screenshot of complete test coverage for BarGraph component" loading="lazy"/>
<p>Alright, we are done! We&#x27;ve managed to write tests with 100% test coverage for our newly created bar graph component that can handle positive and negative values built in React and TypeScript.</p>
<p>I hope you learned a lot from this post. Please don&#x27;t forget to share this post to those people you think might find this helpful as well. If you like this series of posts for React and TypeScript with tests, you can check the rest of them <a href="/posts/">here</a>. There&#x27;s still more to come so do check them out once they&#x27;re published.</p></article><div class="w-11/12 max-w-screen-3xl mx-auto lg:w-5/6"><p class="mt-16 text-gray-400">Found an issue with this post?<!-- --> <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/dominicarrojado/dominicarrojado.github.io/issues">Report it here</a>.</p><div class="mt-24 flex justify-between items-center"><a class="group relative pr-2" href="/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests-part-1"><div class=""><div class="font-normal transition-colors duration-300 group-hover:text-black motion-reduce:transition-none dark:group-hover:text-white">How to create your own bar graph in React and TypeScript with tests (Part 1)</div><small class="text-gray-400 transition-colors duration-300 group-hover:text-black motion-reduce:transition-none dark:group-hover:text-white">Previous Post</small></div><svg viewBox="0 0 320 512" role="img" class="absolute top-0 bottom-0 m-auto shrink-0 w-2 h-2 text-black opacity-30 dark:text-white transform transition-transform-opacity duration-300 group-hover:opacity-100 motion-reduce:transition-none sm:w-2.5 sm:h-2.5 md:w-3 md:h-3 xl:w-3.5 xl:h-3.5 -left-5 sm:-left-7 xl:-left-8 group-hover:-translate-x-1.5"><path fill="currentColor" d="M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"></path></svg></a><div></div><a class="group relative pl-2" href="/posts/embassy-of-japan-in-singapore-visa-appointment-notification-service-for-visa-tourism-applications"><div class="text-right"><div class="font-normal transition-colors duration-300 group-hover:text-black motion-reduce:transition-none dark:group-hover:text-white">Embassy of Japan in Singapore Visa Appointment Notification Service for Visa (Tourism) applications</div><small class="text-gray-400 transition-colors duration-300 group-hover:text-black motion-reduce:transition-none dark:group-hover:text-white">Next Post</small></div><svg viewBox="0 0 320 512" role="img" class="absolute top-0 bottom-0 m-auto shrink-0 w-2 h-2 text-black opacity-30 dark:text-white transform transition-transform-opacity duration-300 group-hover:opacity-100 motion-reduce:transition-none sm:w-2.5 sm:h-2.5 md:w-3 md:h-3 xl:w-3.5 xl:h-3.5 -right-5 sm:-right-7 xl:-right-8 group-hover:translate-x-1.5"><path fill="currentColor" d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"></path></svg></a></div><div class="mt-16 text-center"><a class="group inline-flex items-center font-normal select-none dark:hover:text-white transition-colors duration-300 hover:text-black group-hover:text-black motion-reduce:transition-none" href="/posts">See Latest Posts<svg viewBox="0 0 320 512" role="img" class="inline-block w-2 h-2 ml-2 text-black opacity-30 dark:text-white transform transition duration-300 group-hover:translate-x-1.5 group-hover:opacity-100 motion-reduce:transition-none sm:w-2.5 sm:h-2.5 sm:ml-2.5 md:w-3 md:h-3 md:ml-3 xl:w-3.5 xl:h-3.5"><path fill="currentColor" d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"></path></svg></a></div></div><div class="w-11/12 max-w-screen-3xl -mb-8 mx-auto pt-8 sm:-mb-10 sm:pt-10 md:-mb-12 md:pt-12 lg:w-5/6"><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="6892691691" data-ad-format="auto" data-full-width-responsive="true" data-testid="ad-unit"></ins></div></section><footer class="py-20 px-6 bg-gray-100 dark:bg-gray-850 overflow-hidden lg:overflow-auto" data-testid="footer"><ul class="relative text-center overflow-hidden motion-reduce:transition-none sm:text-lg xl:text-xl" style="height:0"><li class="absolute top-0 left-0 w-full transition-opacity duration-1000 motion-reduce:transition-none"><blockquote><!-- -->If there is no struggle, there is no progress.<!-- --></blockquote><p class="mt-1 sm:mt-2"> <!-- -->Frederick Douglass</p></li><li class="absolute top-0 left-0 w-full transition-opacity duration-1000 motion-reduce:transition-none opacity-0 pointer-events-none"><blockquote><!-- -->It&#x27;s okay to figure out murder mysteries, but you shouldn&#x27;t need to figure out code. You should be able to read it.<!-- --></blockquote><p class="mt-1 sm:mt-2"> <!-- -->Steve McConnell</p></li><li class="absolute top-0 left-0 w-full transition-opacity duration-1000 motion-reduce:transition-none opacity-0 pointer-events-none"><blockquote><!-- -->If you can&#x27;t explain it simply, you don&#x27;t understand it well enough.<!-- --></blockquote><p class="mt-1 sm:mt-2"> <!-- -->Albert Einstein</p></li><li class="absolute top-0 left-0 w-full transition-opacity duration-1000 motion-reduce:transition-none opacity-0 pointer-events-none"><blockquote><!-- -->The secret of getting ahead is getting started.<!-- --></blockquote><p class="mt-1 sm:mt-2"> <!-- -->Mark Twain</p></li></ul><ul class="max-w-full mt-10 flex flex-wrap justify-center"><li><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" href="https://www.paypal.com/paypalme/DominicArrojado" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Show your support and donate!"><svg viewBox="0 0 512 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M256 416c114.9 0 208-93.1 208-208S370.9 0 256 0 48 93.1 48 208s93.1 208 208 208zM233.8 97.4V80.6c0-9.2 7.4-16.6 16.6-16.6h11.1c9.2 0 16.6 7.4 16.6 16.6v17c15.5.8 30.5 6.1 43 15.4 5.6 4.1 6.2 12.3 1.2 17.1L306 145.6c-3.8 3.7-9.5 3.8-14 1-5.4-3.4-11.4-5.1-17.8-5.1h-38.9c-9 0-16.3 8.2-16.3 18.3 0 8.2 5 15.5 12.1 17.6l62.3 18.7c25.7 7.7 43.7 32.4 43.7 60.1 0 34-26.4 61.5-59.1 62.4v16.8c0 9.2-7.4 16.6-16.6 16.6h-11.1c-9.2 0-16.6-7.4-16.6-16.6v-17c-15.5-.8-30.5-6.1-43-15.4-5.6-4.1-6.2-12.3-1.2-17.1l16.3-15.5c3.8-3.7 9.5-3.8 14-1 5.4 3.4 11.4 5.1 17.8 5.1h38.9c9 0 16.3-8.2 16.3-18.3 0-8.2-5-15.5-12.1-17.6l-62.3-18.7c-25.7-7.7-43.7-32.4-43.7-60.1.1-34 26.4-61.5 59.1-62.4zM480 352h-32.5c-19.6 26-44.6 47.7-73 64h63.8c5.3 0 9.6 3.6 9.6 8v16c0 4.4-4.3 8-9.6 8H73.6c-5.3 0-9.6-3.6-9.6-8v-16c0-4.4 4.3-8 9.6-8h63.8c-28.4-16.3-53.3-38-73-64H32c-17.7 0-32 14.3-32 32v96c0 17.7 14.3 32 32 32h448c17.7 0 32-14.3 32-32v-96c0-17.7-14.3-32-32-32z"></path></svg><span id=":R26i6:" style="position:fixed"></span></a></li><li><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" href="https://www.youtube.com/channel/UCWwV__qrzg5BYCSwO91Xhxg/videos?view=0&amp;sort=dd" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Watch my tech videos!"><svg viewBox="0 0 576 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"></path></svg><span id=":R2ai6:" style="position:fixed"></span></a></li><li><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" href="https://www.linkedin.com/in/dominic-arrojado-75ba03a9/" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Let&#x27;s connect on LinkedIn!"><svg viewBox="0 0 448 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg><span id=":R2ei6:" style="position:fixed"></span></a></li><li><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" href="https://github.com/dominicarrojado/" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Follow me on GitHub!"><svg viewBox="0 0 496 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg><span id=":R2ii6:" style="position:fixed"></span></a></li><li><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" href="mailto:dominicarrojado@gmail.com" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Email me!"><svg viewBox="0 0 512 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"></path></svg><span id=":R2mi6:" style="position:fixed"></span></a></li></ul><p class="mt-4 text-gray-400 text-sm text-center sm:text-base lg:mt-10 xl:text-lg"><span class="font-normal"><!-- -->2023<!-- --> <!-- -->Dominic Arrojado</span> <span class="block mt-1 sm:hidden"></span><span class="hidden sm:inline"></span> <a href="/privacy-policy/">Privacy Policy</a> <!-- --><!-- --> <a href="/disclaimer/">Disclaimer</a></p></footer><footer class="fixed flex items-center justify-end bottom-0 w-full z-40"><div class="absolute bottom-3.5 right-3.5 flex items-end gap-3 ml-auto sm:bottom-4 sm:right-4 md:bottom-5 md:right-5 lg:bottom-8 lg:right-8" style="padding-right:var(--scrollbar-width, 0)"><button data-command="" data-disclosure="" aria-expanded="false" class="group text-gray-400 outline-none dark:text-gray-300 hover:text-gray-500 focus-visible:text-gray-500 dark:hover:text-white dark:focus-visible:text-white" aria-label="Subscribe"><div class="flex items-center flex-col"><div class="relative w-5 h-5 transform transition-transform-opacity-color motion-reduce:transition-none md:w-7 md:h-7 duration-700 opacity-0 -translate-y-2"><svg viewBox="0 0 448 512" role="img" class="absolute inset-0 m-auto"><path fill="currentColor" d="M224 0c-17.7 0-32 14.3-32 32V51.2C119 66 64 130.6 64 208v18.8c0 47-17.3 92.4-48.5 127.6l-7.4 8.3c-8.4 9.4-10.4 22.9-5.3 34.4S19.4 416 32 416H416c12.6 0 24-7.4 29.2-18.9s3.1-25-5.3-34.4l-7.4-8.3C401.3 319.2 384 273.9 384 226.8V208c0-77.4-55-142-128-156.8V32c0-17.7-14.3-32-32-32zm45.3 493.3c12-12 18.7-28.3 18.7-45.3H224 160c0 17 6.7 33.3 18.7 45.3s28.3 18.7 45.3 18.7s33.3-6.7 45.3-18.7z"></path></svg></div><div class="mt-2 text-3xs font-normal uppercase select-none transform transition-transform-opacity-color motion-reduce:transition-none md:text-2xs xl:text-xs duration-700 opacity-0 translate-y-3">Subscribe</div></div></button></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests-part-2","content":"\n## Introduction\n\nThis is a continuation from [Part 1](/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests-part-1).\n\n## Prerequisites\n\nTo get started with testing, first install the package below:\n\n```bash\nyarn add @faker-js/faker\n```\n\n[`@faker-js/faker`](https://github.com/faker-js/faker) helps us generate massive amounts of fake (but realistic) data for testing. Check out the guide for `faker` [here](https://fakerjs.dev/guide/).\n\n---\n\n## Write tests for BarItem component\n\nBefore we go ahead with creating the test file for the `BarItem` component, let's first add the `data-testid` attributes to help us [query](https://testing-library.com/docs/queries/about) the elements in the component later. Open `src/components/BarItem.tsx` and update the code with the following:\n\n```tsx\n...\nexport default function BarItem(props: Props) {\n  return (\n    \u003cdiv\n      className={cn('bar-item', { 'is-negative': props.isNegative })}\n      data-testid=\"bar-item\"\n    \u003e\n      \u003cdiv\n        ...\n        data-testid=\"bar-item-main\"\n      /\u003e\n      \u003cdiv\n        ...\n        data-testid=\"bar-item-offset\"\n      /\u003e\n      \u003cdiv className=\"bar-item-legend\" data-testid=\"bar-item-legend\"\u003e\n        {props.legend}\n      \u003c/div\u003e\n    \u003c/div\u003e\n  );\n}\n```\n\nAlright, we're ready to start writing some tests. For test files, I like to separate them in a folder so that it's less cluttered when viewing the main files. Create a new folder named `__tests__` under the `src/components` folder. This is where we will put the test files for the components we have. For our first test case, we can start with the `BarItem` component. Create a file under the `src/components/__tests__` folder and name it `BarItem.test.tsx`. The path for this new file should be `src/components/__tests__/BarItem.test.tsx`. This is a common naming convention for test files, make sure it matches the file name that you are testing then add infix `.test` for the test file name.\n\n---\n\nNow let's add in the initial structure of the test file:\n\n```tsx\nimport BarItem, { Props } from '../BarItem';\n\ndescribe('BarItem component', () =\u003e {});\n```\n\nAside from importing the component that we will test, we also imported the type `Props`. You'll get to know why we did that later on.\n\nIn your test files, Jest puts [functions and objects](https://jestjs.io/docs/api) into the global environment. [`describe`](https://jestjs.io/docs/api#describename-fn) is one of the functions available globally, so with the setup of Create React App, we don't need to require or import anything to use them. `describe` creates a block that groups together several related tests. So ideally the description should be explaining what we are testing, so this is why I put `'BarItem component'`. Feel free to rename the description according to your preference if you feel that there's a better description of what we are testing.\n\nNext we can add a test case inside the `describe` block:\n\n```tsx\nimport BarItem, { Props } from '../BarItem';\n\ndescribe('BarItem component', () =\u003e {\n  it('should render a bar with positive values', () =\u003e {});\n});\n```\n\nThe [`it`](https://jestjs.io/docs/api#testname-fn-timeout) (or `test`) method is another global function by Jest that runs a test.\n\n---\n\nLet's start to write some code for the first test case. First, you want to create a reusable function called `renderComponent` inside the `describe` block, it should accept the props (or properties) of our component as an argument and call the `render()` method from Testing Library to render our component with the passed props in a test environment.\n\n```tsx\nimport { render } from '@testing-library/react';\nimport BarItem, { Props } from '../BarItem';\n\ndescribe('\u003cBarItem /\u003e', () =\u003e {\n  const renderComponent = (props: Props) =\u003e render(\u003cBarItem {...props} /\u003e);\n\n  it('should render a bar with positive values', () =\u003e {});\n});\n```\n\nSince we'll have more than one test case for this component, creating a reusable function to render the component will reduce the code duplication. This will also make it easier if ever next time you have to rename your component, we can just change it within these lines and not in multiple separate lines.\n\nBefore we can render our component using the reusable function, we need to provide the required props for it. This is where we can use `faker` to generate random data for us. This makes our test more trustable and reliable instead of hardcoding the values.\n\nHere's the code we need to add inside our first test case in `src/components/__tests__/BarItem.test.tsx`:\n\n```tsx\n...\ndescribe('\u003cBarItem /\u003e', () =\u003e {\n  ...\n  it('should render a bar with positive values', () =\u003e {\n    const legend = faker.lorem.sentence();\n    const barPercent = faker.datatype.number({ min: 0, max: 100 });\n    const barPercentage = `${barPercent}%`;\n    const risePercent = faker.datatype.number({ min: 0, max: barPercent });\n    const risePercentage = `${risePercent}%`;\n\n    renderComponent({\n      legend,\n      barPercentage,\n      risePercentage,\n      isNegative: false,\n    });\n  });\n});\n```\n\n---\n\nSo now that our component has been rendered, we need to verify if the props we passed have been received from the component and render the component as expected. To do that, let's first query for our main element which is the `bar-item`. It is advisable to use [`screen`](https://testing-library.com/docs/queries/about/#screen) methods from the Testing Library, and in our case we can use `.queryByTestId('bar-item')`, which returns the `bar-item` element based on its `data-testid` attribute. To learn more about queries in the Testing Library, you can read more about them [here](https://testing-library.com/docs/queries/about).\n\n```tsx\n...\ndescribe('\u003cBarItem /\u003e', () =\u003e {\n  ...\n  it('should render a bar with positive values', () =\u003e {\n    ...\n\n    renderComponent({\n      ...\n    });\n\n    const barItemEl = screen.queryByTestId('bar-item');\n  });\n});\n```\n\nNow that we have the element, what do we do with it? We can do the checks by executing one of Jest's global functions called the `expect()` method and pass the element returned from our query. Next is to run what we call a matcher method `.toHaveClass()` which checks if the [`class`](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/class) attribute value of the element is equal to the argument passed. This is one of the matcher methods provided by Jest. You can check this [documentation](https://github.com/testing-library/jest-dom#custom-matchers) for the other custom matcher methods which are specific to the [DOM](https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model/Introduction).\n\nRemember that in our props, we are passing the value for `isNegative` as `false`. Hence, we do not expect our `bar-item` element to have the `is-negative` in the class. We can use the `.not.toHaveClass()` instead which is the reverse check of `.toHaveClass()`. Here's the code we need to add in our test case:\n\n```tsx\n...\ndescribe('\u003cBarItem /\u003e', () =\u003e {\n  ...\n  it('should render a bar with positive values', () =\u003e {\n    ...\n    const barItemEl = screen.queryByTestId('bar-item');\n\n    expect(barItemEl).not.toHaveClass('is-negative');\n  });\n});\n```\n\n---\n\nNow save your changes and let's verify if this test case will pass or not. In your terminal, run the script command available in `package.json` to run the tests:\n\n```bash\nyarn test --coverage\n```\n\nThe `--coverage` parameter will show you how many percent you have covered in each file of your project and/or if you have missed any lines to test. Once the command ran successfully, the terminal should display something like this:\n\n![Screenshot of incomplete test coverage for BarItem component](/images/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests/bar-item-component-test-coverage-incomplete.png)\n\nAlright our very first test case passed! We easily achieved 100% test coverage because there's no conditional statements in the component. Let's complete this test case by adding the rest of the checks:\n\n```tsx\n...\ndescribe('\u003cBarItem /\u003e', () =\u003e {\n  ...\n  it('should render a bar with positive values', () =\u003e {\n    ...\n    const barItemEl = screen.queryByTestId('bar-item');\n    const barMainEl = screen.queryByTestId('bar-item-main');\n    const barOffsetEl = screen.queryByTestId('bar-item-offset');\n    const barLegendEl = screen.queryByTestId('bar-item-legend');\n\n    expect(barItemEl).not.toHaveClass('is-negative');\n    expect(barMainEl).toHaveStyle({ height: barPercentage });\n    expect(barOffsetEl).toHaveStyle({ height: risePercentage });\n    expect(barLegendEl).toHaveTextContent(legend);\n  });\n});\n```\n\nOnce the changes are saved, it should still pass. We've completed all the necessary checks based on the props we're passing. Let's move on to the next test case.\n\n```tsx\n...\ndescribe('\u003cBarItem /\u003e', () =\u003e {\n  ...\n  it('should render a bar with negative values', () =\u003e {});\n});\n```\n\nIn the code above, I gave you the description of the second test case. As a challenge, add the codes that should be inside the second test case block and compare your code with the expected code later. The tip here is that it would be **_very_** similar to the first case.\n\n---\n\nDone? Alright. Here's the the expected code:\n\n```tsx\n...\ndescribe('\u003cBarItem /\u003e', () =\u003e {\n  ...\n  it('should render a bar with negative values', () =\u003e {\n    const legend = faker.lorem.sentence();\n    const barPercent = faker.datatype.number({ min: 0, max: 100 });\n    const barPercentage = `${barPercent}%`;\n    const risePercent = faker.datatype.number({ min: 0, max: barPercent });\n    const risePercentage = `${risePercent}%`;\n\n    renderComponent({\n      legend,\n      barPercentage,\n      risePercentage,\n      isNegative: true,\n    });\n\n    const barItemEl = screen.queryByTestId('bar-item');\n    const barMainEl = screen.queryByTestId('bar-item-main');\n    const barOffsetEl = screen.queryByTestId('bar-item-offset');\n    const barLegendEl = screen.queryByTestId('bar-item-legend');\n\n    expect(barItemEl).toHaveClass('is-negative');\n    expect(barMainEl).toHaveStyle({ height: barPercentage });\n    expect(barOffsetEl).toHaveStyle({ height: risePercentage });\n    expect(barLegendEl).toHaveTextContent(legend);\n  });\n});\n```\n\nSave your changes and let's see the result of our tests in the terminal.\n\n![Screenshot of complete test coverage for BarItem component](/images/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests/bar-item-component-test-coverage-complete.png)\n\nAwesome! We're done with the tests for our `BarItem` component. Let's move on to the next component.\n\n---\n\n## Write tests for BarGraph component\n\nSame as what we did for the `BarItem` component, let's first add the `data-testid` attribute in our `BarGraph` component to help us query the elements in the component later. Querying an element, checking its attributes and content is the most common way to test a component. Open `src/components/BarGraph.tsx` and update the code with the following:\n\n```tsx\n...\nexport default function BarGraph({ dataArray }: Props) {\n  ...\n  return (\n    \u003cdiv className=\"bar-graph\"\u003e\n      \u003cdiv className=\"bars-list\"\u003e\n        ...\n      \u003c/div\u003e\n      \u003cdiv\n        ...\n        data-testid=\"bars-line\"\n      /\u003e\n    \u003c/div\u003e\n  );\n}\n```\n\nYou might ask why we didn't need to add the `data-testid` attribute for the `bars-list` element. That's because we can query for the `bar-item` elements using their `data-testid` we already added earlier and use the `.queryAllByTestId()` function to return an array of elements instead of one element.\n\nNow it's time to write tests for the `BarGraph` component. Create the test file with the following path `src/components/__tests__/BarGraph.test.tsx` and add the initial code:\n\n```tsx\nimport { render } from '@testing-library/react';\nimport BarGraph, { Props } from '../BarGraph';\n\ndescribe('\u003cBarGraph /\u003e', () =\u003e {\n  const renderComponent = (props: Props) =\u003e render(\u003cBarGraph {...props} /\u003e);\n});\n```\n\n---\n\nAlright. What should be our first test case? We can actually use the three graphs we used to help us handle all the scenarios for our bar graph component. To help you recall, here was the screenshot from [Part 1](/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests-part-1):\n\n![Screenshot of different bar graphs built in React and TypeScript](/images/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests/bar-graphs-1.png)\n\nStarting from the left of the image or screenshot, the first graph displays a bar graph with all positive values, the line bar is at the bottom and one of the bars with the highest value occupies 100% of the graph height. The second graph displays a bar graph with one negative value, notice how the line bar elevates the **_same level_** as the bars with positive values. You could also say that the height of the bar with negative value is the **_same level_** as the line bar's elevation level. The third graph displays a bar graph with all negative values, aside from the line bar elevating, bars with smaller negative values also elevate until it sticks to the line bar.\n\nSo let's start with the first graph with all positive values. We won't be using `faker` to generate the values in the `dataArray` because in order to verify the random values, we need to also generate the expected results or percentages of them and we'll probably end up copying the code from the main file and that will make the test file complicated and difficult to understand. Hence, it would be better to hardcode the values along with the expected result array.\n\nLet's use the same `dataArray` we have from the `App` component for our first test case. Here's the additional code for our first test case in `src/components/__tests__/BarGraph.test.tsx`:\n\n```tsx\n...\nimport { faker } from '@faker-js/faker';\n\ndescribe('\u003cBarGraph /\u003e', () =\u003e {\n  const renderComponent = (props: Props) =\u003e render(\u003cBarGraph {...props} /\u003e);\n\n  it('should convert positives values to percentages', () =\u003e {\n    const expectedPercentages = ['29%', '43%', '100%', '71%'];\n    const dataArray = [\n      {\n        value: 200,\n        legend: faker.lorem.sentence(),\n      },\n      {\n        value: 300,\n        legend: faker.lorem.sentence(),\n      },\n      {\n        value: 700,\n        legend: faker.lorem.sentence(),\n      },\n      {\n        value: 500,\n        legend: faker.lorem.sentence(),\n      },\n    ];\n\n    renderComponent({ dataArray });\n  });\n});\n```\n\n---\n\nYou might be wondering how I get the hardcoded values for the `expectedPercentages`. I got it by using the inspect element feature of the browser I'm using. You can inspect the elements to view the HTML of our React app and you will be able to see the controlled style properties such as `height` and `bottom`. Here's [an article](https://blog.hubspot.com/website/how-to-inspect) on how to use the inspect element feature in [Chrome](https://www.google.com/intl/en_sg/chrome/), [Safari](https://www.apple.com/sg/safari/) and [Firefox](https://www.mozilla.org/en-US/firefox/).\n\n![Screenshot of using inspect element on a bar graph built in React and TypeScript](/images/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests/bar-graph-inspect-element.png)\n\nI have stored the expected percentages in an array called `expectedPercentages` to make our checks efficient later when looping through the `dataArray` and match their [indexes](https://en.wikipedia.org/wiki/Zero-based_numbering) with the items from the `dataArray`. For the legend props, we still use `faker` to generate the text because it is straightforward to verify by just comparing the element's content to it.\n\nAlright, we're all set to check our rendered component and verify whether each bar has the expected percentage. We need to query all of the `bar-item-main` elements from our rendered component. Here's the code for that:\n\n```tsx\n...\ndescribe('\u003cBarGraph /\u003e', () =\u003e {\n  ...\n  it('should convert positives values to percentages', () =\u003e {\n    ...\n\n    renderComponent({ dataArray });\n\n    const barPercentageItems = screen.queryAllByTestId('bar-item-main');\n  });\n});\n```\n\nAs for our first check, let's check that the array length for `barPercentageItems` is the same as the length of our `dataArray`:\n\n```tsx\n...\ndescribe('\u003cBarGraph /\u003e', () =\u003e {\n  ...\n  it('should convert positives values to percentages', () =\u003e {\n    ...\n\n    const barPercentageItems = screen.queryAllByTestId('bar-item-main');\n\n    expect(barPercentageItems).toHaveLength(dataArray.length);\n  });\n});\n```\n\n---\n\nSave the change and let's see if this passes by looking at our terminal:\n\n![Screenshot of incomplete test coverage for BarGraph component](/images/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests/bar-graph-component-test-coverage-incomplete-1.png)\n\nAwesome, it passed! You can also see how useful having the test coverage information is because it will tell you which lines of the main file have not been covered yet. We should be able to cover that line in the next test cases but we're not done with our first test case yet. We still need to loop through the `bar-item-main` elements or the `barPercentageItems` and verify that their percentage or [`height`](https://developer.mozilla.org/en-US/docs/Web/CSS/height) CSS property is what we expect it to be. Here's the code for that:\n\n```tsx\n...\ndescribe('\u003cBarGraph /\u003e', () =\u003e {\n  ...\n  it('should convert positives values to percentages', () =\u003e {\n    ...\n    expect(barPercentageItems).toHaveLength(dataArray.length);\n\n    barPercentageItems.forEach((element, idx) =\u003e {\n      expect(element).toHaveStyle({\n        height: expectedPercentage[idx],\n      });\n    });\n  });\n});\n```\n\nDon't forget to save your changes. Now take a look at our terminal to see if it also passes:\n\n![Screenshot of incomplete test coverage for BarGraph component](/images/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests/bar-graph-component-test-coverage-incomplete-2.png)\n\nAnd yes it still does.\n\nIn the same test case, we also need to check whether the elevation for each bar is what we expect it to be. Because all of them are in positive values, we expect the elevation or the height CSS property of each `bar-item-offset` element to be `0%`. We can query for the `bar-item-offset` elements the same way we did for the `bar-item-main` elements. Let's update the code with the following below:\n\n```tsx\n...\ndescribe('\u003cBarGraph /\u003e', () =\u003e {\n  ...\n  it('should convert positives values to percentages', () =\u003e {\n    ...\n    const barPercentageItems = screen.queryAllByTestId('bar-item-main');\n    const barOffsetItems = screen.queryAllByTestId('bar-item-offset');\n\n    expect(barPercentageItems).toHaveLength(dataArray.length);\n    expect(barOffsetItems).toHaveLength(dataArray.length);\n\n    barPercentageItems.forEach((element, idx) =\u003e {\n      expect(element).toHaveStyle({\n        height: expectedPercentage[idx],\n      });\n    });\n\n    barOffsetItems.forEach((element) =\u003e {\n      expect(element).toHaveStyle({ height: '0%' });\n    });\n  });\n});\n```\n\n---\n\nAlright. When we save our changes, this is what we should see from the terminal:\n\n![Screenshot of incomplete test coverage for BarGraph component](/images/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests/bar-graph-component-test-coverage-incomplete-3.png)\n\nWe can optimize our test case by just doing one loop and here's the refactored code:\n\n```tsx\n...\ndescribe('\u003cBarGraph /\u003e', () =\u003e {\n  ...\n  it('should convert positives values to percentages', () =\u003e {\n    ...\n    const barPercentageItems = screen.queryAllByTestId('bar-item-main');\n    const barOffsetItems = screen.queryAllByTestId('bar-item-offset');\n\n    expect(barPercentageItems).toHaveLength(dataArray.length);\n    expect(barOffsetItems).toHaveLength(dataArray.length);\n\n    barPercentageItems.forEach((element, idx) =\u003e {\n      expect(element).toHaveStyle({\n        height: expectedPercentages[idx],\n      });\n      expect(barOffsetItems[idx]).toHaveStyle({ height: '0%' });\n    });\n  });\n});\n```\n\nSave the following changes above and the test case should still pass.\n\n---\n\nIn the same test case again, we need to check that the legends are displayed accordingly. We can query for the `bar-item-legends` elements and get the expected legend for each bar from the `dataArray` using the array index. Let's update the code with the following below to verify that:\n\n```tsx\n...\ndescribe('\u003cBarGraph /\u003e', () =\u003e {\n  ...\n  it('should convert positives values to percentages', () =\u003e {\n    ...\n    const barPercentageItems = screen.queryAllByTestId('bar-item-main');\n    const barOffsetItems = screen.queryAllByTestId('bar-item-offset');\n    const barLegendItems = screen.queryAllByTestId('bar-item-legend');\n\n    expect(barPercentageItems).toHaveLength(dataArray.length);\n    expect(barOffsetItems).toHaveLength(dataArray.length);\n    expect(barLegendItems).toHaveLength(dataArray.length);\n\n    barPercentageItems.forEach((element, idx) =\u003e {\n      expect(element).toHaveStyle({\n        height: expectedPercentages[idx],\n      });\n      expect(barOffsetItems[idx]).toHaveStyle({ height: '0%' });\n      expect(barLegendItems[idx]).toHaveTextContent(dataArray[idx].legend);\n    });\n  });\n});\n```\n\nAfter saving the changes, the test case will still pass as expected.\n\nOkay. Finally, to complete our first test case for the `BarGraph` component, let's also check whether the `bars-line` element elevation or the [`bottom`](https://developer.mozilla.org/en-US/docs/Web/CSS/bottom) CSS property of it is what we expect. Since the values for the bar graph are all positive values, we expected it to be at the very bottom or the value of the bottom CSS property is `0%`. Let's update the code to include this check:\n\n```tsx\n...\ndescribe('\u003cBarGraph /\u003e', () =\u003e {\n  ...\n  it('should convert positives values to percentages', () =\u003e {\n    ...\n    barPercentageItems.forEach((element, idx) =\u003e {\n      ...\n    });\n\n    const barsLine = screen.queryByTestId('bars-line');\n\n    expect(barsLine).toHaveStyle({ bottom: '0%' });\n  });\n});\n```\n\nAnd this should pass after saving the changes.\n\n---\n\nLet's move on to the second test case where we handle the second graph from the reference screenshot. Our `dataArray` will have one negative value. Let's copy the `dataArray` from the `App` component again and here's the initial code for our second test case in `src/components/__tests__/BarGraph.test.tsx`:\n\n```tsx\n...\ndescribe('\u003cBarGraph /\u003e', () =\u003e {\n  ...\n  it('should convert positives values to percentages', () =\u003e {\n    ...\n  });\n\n  it('should convert positive values and one negative value to percentages', () =\u003e {\n    const expectedPercentages = ['56%', '33%', '22%', '78%'];\n    const expectedOffsets = ['22%', '22%', '0%', '22%'];\n    const expectedBarsLine = '22%';\n    const dataArray = [\n      {\n        value: 500,\n        legend: faker.lorem.sentence(),\n      },\n      {\n        value: 300,\n        legend: faker.lorem.sentence(),\n      },\n      {\n        value: -200,\n        legend: faker.lorem.sentence(),\n      },\n      {\n        value: 700,\n        legend: faker.lorem.sentence(),\n      },\n    ];\n\n    renderComponent({ dataArray });\n  });\n  });\n});\n```\n\nOkay, I've added the expected percentages and offsets. As a challenge for yourself, you can try to complete the code to verify our second test case using the first test case as your reference.\n\n---\n\nOnce you're done, you can take a look at the expected code of the second test case below:\n\n```tsx\n...\ndescribe('\u003cBarGraph /\u003e', () =\u003e {\n  ...\n  it('should convert positive values and one negative value to percentages', () =\u003e {\n    ...\n\n    renderComponent({ dataArray });\n\n    const barPercentageItems = screen.queryAllByTestId('bar-item-main');\n    const barOffsetItems = screen.queryAllByTestId('bar-item-offset');\n    const barLegendItems = screen.queryAllByTestId('bar-item-legend');\n\n    expect(barPercentageItems).toHaveLength(dataArray.length);\n    expect(barOffsetItems).toHaveLength(dataArray.length);\n\n    barPercentageItems.forEach((element, idx) =\u003e {\n      expect(element).toHaveStyle({\n        height: expectedPercentages[idx],\n      });\n      expect(barOffsetItems[idx]).toHaveStyle({ height: expectedOffsets[idx] });\n      expect(barLegendItems[idx]).toHaveTextContent(dataArray[idx].legend);\n    });\n\n    const barsLine = screen.queryByTestId('bars-line');\n\n    expect(barsLine).toHaveStyle({ bottom: expectedBarsLine });\n  });\n});\n```\n\nWas your code similar to the code above? If yes, then great! If not, no worries. Just keep practicing as we all know, practice makes perfect.\n\n---\n\nOnce you save the changes, our second test case should pass:\n\n![Screenshot of complete test coverage for BarGraph component](/images/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests/bar-graph-component-test-coverage-complete-1.png)\n\nIn the screenshot above, we've already reached `100%` test coverage. You might want to stop here, but just to make sure our `BarGraph` component can handle if all the values are negative, we should create a test case for that as well.\n\nHere's the code for the final test case which is just very similar from our second test case:\n\n```tsx\n...\ndescribe('\u003cBarGraph /\u003e', () =\u003e {\n  ...\n  it('should convert negatives values to percentages', () =\u003e {\n    const expectedPercentages = ['21%', '43%', '100%', '71%'];\n    const expectedOffsets = ['79%', '57%', '0%', '29%'];\n    const expectedBarsLine = '100%';\n    const dataArray = [\n      {\n        value: -150,\n        legend: faker.lorem.sentence(),\n      },\n      {\n        value: -300,\n        legend: faker.lorem.sentence(),\n      },\n      {\n        value: -700,\n        legend: faker.lorem.sentence(),\n      },\n      {\n        value: -500,\n        legend: faker.lorem.sentence(),\n      },\n    ];\n\n    renderComponent({ dataArray });\n\n    const barPercentageItems = screen.queryAllByTestId('bar-item-main');\n    const barOffsetItems = screen.queryAllByTestId('bar-item-offset');\n    const barLegendItems = screen.queryAllByTestId('bar-item-legend');\n\n    expect(barPercentageItems).toHaveLength(dataArray.length);\n    expect(barOffsetItems).toHaveLength(dataArray.length);\n\n    barPercentageItems.forEach((element, idx) =\u003e {\n      expect(element).toHaveStyle({\n        height: expectedPercentages[idx],\n      });\n      expect(barOffsetItems[idx]).toHaveStyle({ height: expectedOffsets[idx] });\n      expect(barLegendItems[idx]).toHaveTextContent(dataArray[idx].legend);\n    });\n\n    const barsLine = screen.queryByTestId('bars-line');\n\n    expect(barsLine).toHaveStyle({ bottom: expectedBarsLine });\n  });\n});\n```\n\n---\n\nDon't forget to save the changes and take a look at the final screenshot of our terminal below:\n\n![Screenshot of complete test coverage for BarGraph component](/images/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests/bar-graph-component-test-coverage-complete-2.png)\n\nAlright, we are done! We've managed to write tests with 100% test coverage for our newly created bar graph component that can handle positive and negative values built in React and TypeScript.\n\nI hope you learned a lot from this post. Please don't forget to share this post to those people you think might find this helpful as well. If you like this series of posts for React and TypeScript with tests, you can check the rest of them [here](/posts/). There's still more to come so do check them out once they're published.\n","previousPost":{"id":"how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests-part-1","title":"How to create your own bar graph in React and TypeScript with tests (Part 1)","date":"2022-11-25","excerpt":"Learn how to build a bar graph with positive and negative values in a reactive and reusable way","category":"technology","videoUrl":"https://youtu.be/IPQzaSfUm7U"},"nextPost":{"id":"embassy-of-japan-in-singapore-visa-appointment-notification-service-for-visa-tourism-applications","title":"Embassy of Japan in Singapore Visa Appointment Notification Service for Visa (Tourism) applications","date":"2023-03-24","excerpt":"A web application that lets you subscribe to email notifications for new booking slots","category":"technology","videoUrl":""},"title":"How to create your own bar graph in React and TypeScript with tests (Part 2)","date":"2022-11-25","excerpt":"Learn how to build a bar graph with positive and negative values in a reactive and reusable way","category":"technology","videoUrl":"https://youtu.be/P2LZ5waJRaU"}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests-part-2"},"buildId":"t3qDNQ3q0ssjJDc3XqCZC","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>