<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#2c2c34"/><link rel="icon" href="https://dominicarrojado.com/favicon.ico"/><link rel="manifest" href="https://dominicarrojado.com/manifest.json"/><meta name="twitter:card" content="summary_large_image"/><meta property="og:image" content="https://dominicarrojado.com/images/pages/guides-tips-and-tricks-to-web-development.png"/><meta property="og:image:alt" content="Dominic Arrojado | Guides, Tips and Tricks to Web Development"/><meta property="og:image:type" content="image/png"/><meta property="og:image:width" content="2400"/><meta property="og:image:height" content="1254"/><meta property="og:site_name" content="Dominic Arrojado"/><link rel="preload" href="/fonts/Roboto-Light.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Light.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-LightItalic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-LightItalic.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Regular.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Italic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Italic.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Medium.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Medium.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-MediumItalic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-MediumItalic.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Bold.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Bold.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-BoldItalic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-BoldItalic.woff" as="font" type="font/woff" crossorigin="anonymous"/><title>How to create your own pagination in React and TypeScript with tests (Part 1) | Dominic Arrojado</title><meta name="robots" content="index,follow"/><meta name="description" content="Learn how to build a modern page navigation in a reactive and reusable way"/><meta property="og:title" content="How to create your own pagination in React and TypeScript with tests (Part 1) | Dominic Arrojado"/><meta property="og:description" content="Learn how to build a modern page navigation in a reactive and reusable way"/><meta property="og:url" content="https://dominicarrojado.com/posts/how-to-create-your-own-pagination-in-react-and-typescript-with-tests-part-1/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2022-08-15T14:00:00Z"/><meta property="article:modified_time" content="2022-08-15T14:00:00Z"/><meta property="article:author" content="https://dominicarrojado.com/about/"/><link rel="canonical" href="https://dominicarrojado.com/posts/how-to-create-your-own-pagination-in-react-and-typescript-with-tests-part-1/"/><meta name="next-head-count" content="39"/><link rel="preload" href="/_next/static/css/29c3e5556fa80998.css" as="style"/><link rel="stylesheet" href="/_next/static/css/29c3e5556fa80998.css" data-n-g=""/><link rel="preload" href="/_next/static/css/82d01f71dc75279c.css" as="style"/><link rel="stylesheet" href="/_next/static/css/82d01f71dc75279c.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-733ebab8c439f8dc.js" defer=""></script><script src="/_next/static/chunks/framework-433e73989db4e225.js" defer=""></script><script src="/_next/static/chunks/main-c51b0b3c89045435.js" defer=""></script><script src="/_next/static/chunks/pages/_app-bccb21da172fce9f.js" defer=""></script><script src="/_next/static/chunks/216-1077b041778ead2e.js" defer=""></script><script src="/_next/static/chunks/466-2aafae0e90314603.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-101bdca647312681.js" defer=""></script><script src="/_next/static/IO9VE2HstJh-AQGGeUXLQ/_buildManifest.js" defer=""></script><script src="/_next/static/IO9VE2HstJh-AQGGeUXLQ/_ssgManifest.js" defer=""></script><script src="/_next/static/IO9VE2HstJh-AQGGeUXLQ/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><noscript>
            <iframe
              src="https://www.googletagmanager.com/ns.html?id=GTM-TSMLTPT"
              height="0"
              width="0"
              style="display: none; visibility: hidden"
            ></iframe>
          </noscript><div tabindex="-1" class="h-full outline-none"><header class="fixed flex items-center top-0 w-full z-50"><a href="#main" tabindex="0" class="absolute -top-96 -left-96 w-px h-px text-center text-white overflow-hidden -z-50 focus:top-4 focus:inset-x-0 focus:m-auto focus:w-44 focus:h-auto focus:z-50 focus:sm:w-52 focus:xl:w-56">Skip to main content</a><a class="absolute top-3.5 left-3.5 flex shadow-3xl border border-white bg-gray-750 bg-opacity-90 p-1.5 z-50 transform transition ease-in-out duration-500 hover:shadow-md hover:bg-opacity-100 motion-reduce:transition-none sm:top-4 sm:left-4 md:top-5 md:left-5 md:border-2 lg:top-8 lg:left-8 delay-700 opacity-0 -translate-y-full" aria-label="Dominic Arrojado logo" href="/"><svg viewBox="0 0 25750 29700" role="img" class="w-7 h-7 text-white transition-colors duration-300 sm:w-8 sm:h-8 md:w-10 md:h-10 xl:w-11 xl:h-11"><path fill="currentColor" d="M4850 19266H1025V2039l4600-129c2511 0 4500 735 5970 2206 1470 1470 2206 3423 2206 5854 0 6199-2985 9296-8951 9296zM4086 4719v11751c494 48 1025 72 1599 72 1543 0 2752-558 3624-1679s1310-2688 1310-4705c0-3684-1712-5524-5135-5524-329 0-795 28-1398 85zm17656 21711l-1437-3969h-6721l974-2655h4730l-2242-6854 1518-4167 7010 17645zM17826 435h3307L10351 29313H7044l4243-11322c1982-1513 2973-4055 2973-7627 0-171-4-340-11-506l3577-9423z"></path></svg></a><div class="absolute top-3.5 right-3.5 flex items-end gap-3 ml-auto sm:top-4 sm:right-4 sm:gap-4 md:top-5 md:right-5 md:gap-5 lg:top-8 lg:right-8 lg:gap-6" style="padding-right:0px" data-testid="header-buttons"><button type="button" aria-expanded="false" aria-controls="dialog-menu" aria-haspopup="dialog" class="group flex items-center flex-col min-w-8 outline-none md:min-w-10 xl:min-w-11"><div class="w-6 h-0.5 bg-gray-400 rounded dark:bg-gray-300 transform transition group-hover:bg-gray-500 group-focus-visible:bg-gray-500 motion-reduce:transition-none dark:group-hover:bg-white dark:group-focus-visible:bg-white md:w-7 md:h-1 xl:w-8 duration-1000 opacity-0 translate-x-1/2" style="transition-delay:500ms" data-testid="menu-stack"></div><div class="w-6 h-0.5 bg-gray-400 rounded dark:bg-gray-300 transform transition group-hover:bg-gray-500 group-focus-visible:bg-gray-500 motion-reduce:transition-none dark:group-hover:bg-white dark:group-focus-visible:bg-white md:w-7 md:h-1 xl:w-8 mt-1.5 duration-1000 opacity-0 -translate-x-1/2" style="transition-delay:650ms" data-testid="menu-stack"></div><div class="w-6 h-0.5 bg-gray-400 rounded dark:bg-gray-300 transform transition group-hover:bg-gray-500 group-focus-visible:bg-gray-500 motion-reduce:transition-none dark:group-hover:bg-white dark:group-focus-visible:bg-white md:w-7 md:h-1 xl:w-8 mt-1.5 duration-1000 opacity-0 translate-x-1/2" style="transition-delay:800ms" data-testid="menu-stack"></div><div class="mt-1.5 text-gray-400 text-3xs font-normal uppercase select-none dark:text-gray-300 transform transition-transform-opacity-color group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-gray-100 md:mt-2 md:text-2xs xl:text-xs duration-700 delay-1000 opacity-0 -translate-y-3">Menu</div></button></div></header><div id="main"></div><section class="relative flex flex-col justify-center bg-gray-550 py-28 px-6 text-center overflow-hidden dark:bg-gray-750 transform transition-transform ease-in-out duration-500 motion-reduce:transition-none sm:px-20 lg:px-32 min-h-96 -translate-y-full" data-testid="container"><div class="absolute top-0 left-0 w-full h-full bg-repeat bg-center invert-[.1] dark:invert-0 motion-safe:animate-slide transition-opacity duration-1250 delay-500 motion-reduce:transition-none opacity-0" style="background-image:url(&#x27;/images/bg/pattern.png&#x27;)" data-testid="background"></div><div class="overflow-hidden py-2" style="opacity:1"><h1 class="text-3xl font-bold text-white leading-tight transform transition duration-1000 delay-500 motion-reduce:transition-none sm:text-4xl md:text-5xl lg:text-6xl xl:text-7xl opacity-0 translate-y-full">How to create your own pagination in React and TypeScript with tests (Part 1)</h1></div><div class="overflow-hidden" style="opacity:1"><p class="font-light text-white transform transition duration-1000 delay-1000 motion-reduce:transition-none xl:text-2xl opacity-0 translate-y-full">Learn how to build a modern page navigation in a reactive and reusable way</p></div></section><section class="pt-16 pb-20 px-6 sm:pt-20 sm:pb-24 sm:px-8 md:pt-24 md:pb-28 lg:px-10 xl:pt-28 xl:pb-32 transform transition-transform-opacity duration-1000 motion-reduce:transition-none delay-1500 opacity-0 translate-y-10" data-testid="section"><div class="w-11/12 max-w-screen-3xl -mt-8 mx-auto pb-8 sm:-mt-10 sm:pb-10 md:-mt-12 md:pb-12 lg:w-5/6"><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="4984498713" data-ad-format="auto" data-full-width-responsive="true" data-testid="ad-unit"></ins></div><div class="flex justify-between items-center w-11/12 max-w-screen-3xl mx-auto lg:w-5/6"><div class="mr-4 text-sm text-gray-400 sm:text-base xl:text-lg">Last Updated: <time dateTime="2022-08-15">August 15, 2022</time></div><div class="rounded py-0.5 px-1.5 bg-gray-200 text-2xs capitalize dark:bg-gray-600 md:py-1 md:px-2 md:text-xs xl:text-sm">technology</div></div><div class="w-11/12 max-w-screen-3xl mt-4 mx-auto lg:w-5/6"><a class="group inline-flex items-center font-normal select-none dark:hover:text-white transition-colors duration-300 hover:text-black group-hover:text-black motion-reduce:transition-none" target="_blank" rel="noopener noreferrer nofollow" href="https://youtu.be/ZBmAJTwalGQ"><svg viewBox="0 0 576 512" role="img" class="w-6 h-6 mr-2 text-gray-400 transition-colors duration-300 group-hover:text-red motion-reduce:transition-none dark:group-hover:text-white sm:w-7 sm:h-7 sm:mr-3 xl:w-8 xl:h-8"><path fill="currentColor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"></path></svg> <!-- -->Watch it on YouTube<svg viewBox="0 0 320 512" role="img" class="inline-block w-2 h-2 ml-2 text-black opacity-30 dark:text-white transform transition duration-300 group-hover:translate-x-1.5 group-hover:opacity-100 motion-reduce:transition-none sm:w-2.5 sm:h-2.5 sm:ml-2.5 md:w-3 md:h-3 md:ml-3 xl:w-3.5 xl:h-3.5"><path fill="currentColor" d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"></path></svg></a></div><article class="w-11/12 max-w-screen-3xl mx-auto prose dark:prose-dark sm:prose-lg lg:w-5/6 xl:prose-xl mt-8 sm:mt-10 xl:mt-14" data-clarity-region="article" data-testid="content"><h2>Introduction</h2>
<p>Pagination can be seen a lot in both classic and modern websites today. They are the sequence of numbers assigned to pages in a website to indicate a series of related content that exists across multiple pages. They can be used to display a list of blog posts, products, search results and many more that enables the user to select a specific page from a range of pages. Many websites display pagination differently especially in cases where we can&#x27;t possibly display all the numbers in between the first page and the last page. Usually, they will swap a group of items in the pagination list with an ellipsis <code>...</code> where most applicable. In this post, I&#x27;m going to teach you how to create a pagination component in <a target="_blank" rel="noopener noreferrer nofollow" href="https://reactjs.org/">React</a> and <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.typescriptlang.org/">TypeScript</a> and learn how to achieve a 100% test coverage using <a target="_blank" rel="noopener noreferrer nofollow" href="https://jestjs.io/">Jest</a> and <a target="_blank" rel="noopener noreferrer nofollow" href="https://testing-library.com/">Testing Library</a>. The pagination component that we&#x27;ll be creating fits my idea of how pagination should be and <a href="/posts/">what I&#x27;m currently using</a> in this tech blog website of mine.</p>
<h2>Prerequisites</h2>
<p>This is the <a target="_blank" href="/react-typescript-pagination/">link to the pagination component</a> which we&#x27;ll accomplish by the end of this post, you can see and play around with it or use it as your reference throughout this tutorial.</p>
<p>Upon writing this post, I assume that you have some web development background and basic knowledge regarding <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.npmjs.com/">npm</a>, <a target="_blank" rel="noopener noreferrer nofollow" href="https://classic.yarnpkg.com/lang/en/">yarn</a>, <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/HTML">HTML</a>, <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/CSS">CSS</a>, <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript">JavaScript</a> and <a target="_blank" rel="noopener noreferrer nofollow" href="https://reactjs.org/">React</a>.</p>
<p>Make sure to install <a target="_blank" rel="noopener noreferrer nofollow" href="https://classic.yarnpkg.com/lang/en/">Yarn</a> in your system if you haven&#x27;t. We use <a target="_blank" rel="noopener noreferrer nofollow" href="https://classic.yarnpkg.com/lang/en/">Yarn</a> as our package manager, it&#x27;s just like <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.npmjs.com/">npm</a> but <em>faster</em>.</p>
<p>I&#x27;ve written a <a href="/posts/local-development-setup-for-react-and-typescript-projects/">separate post</a> about the <a target="_blank" rel="noopener noreferrer nofollow" href="https://en.wikipedia.org/wiki/Integrated_development_environment">IDE</a> and extensions I use to help save time and energy when writing code in React. I highly suggest that you check it out if you haven&#x27;t!</p>
<h2>Initialize your project</h2>
<p>Fastest way to start a new project with React is using the <a target="_blank" rel="noopener noreferrer nofollow" href="https://create-react-app.dev/">Create React App</a>. It is an officially supported way to create single-page React applications. It offers a modern build setup with no configuration so you can focus on code, not build tools.</p>
<p>To create our project with React and TypeScript, run this command in your terminal:</p>
<pre><code class="hljs language-bash">yarn create react-app react-typescript-pagination --template typescript
</code></pre>
<p>Once project is initiated, install the additional libraries which we&#x27;ll be using later on:</p>
<pre><code class="hljs language-bash"><span class="hljs-built_in">cd</span> react-typescript-pagination
yarn add classnames
</code></pre>
<p>To run our project, execute the command below:</p>
<pre><code class="hljs language-bash">yarn start
</code></pre>
<p>This command will open your default browser and direct you to <code>http://localhost:3000/</code>. If it doesn&#x27;t, you can do it yourself too.</p>
<p>This setup comes with live-editing or hot reloading which means when we save file changes, it will automatically update the app and reload on the browser. That&#x27;s great for local development!</p>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<h2>Clean up the project</h2>
<p>We&#x27;re ready to code! Let&#x27;s clean up our project which was created by Create React App. We won&#x27;t be needing some of them. Delete or clear the contents of the following below:</p>
<ul>
<li>src/App.css (clear contents)</li>
<li>src/App.test.tsx (delete)</li>
<li>src/logo.svg (delete)</li>
</ul>
<p>Then let&#x27;s update the code in <code>src/App.tsx</code>:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./App.css&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">App</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>React TypeScript Pagination<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>We will use the <code>App</code> component as the container of our pagination component. Next, add the following code in <code>src/App.css</code>:</p>
<pre><code class="hljs language-css"><span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">800px</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span> <span class="hljs-number">15px</span>;
  user-select: none;
}
</code></pre>
<p>Then update the <code>src/index.css</code> as well:</p>
<pre><code class="hljs language-css">* {
  <span class="hljs-attribute">box-sizing</span>: border-box;
}

<span class="hljs-selector-tag">body</span> {
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">font-family</span>: -apple-system, BlinkMacSystemFont, <span class="hljs-string">&#x27;Segoe UI&#x27;</span>, <span class="hljs-string">&#x27;Roboto&#x27;</span>,
    <span class="hljs-string">&#x27;Oxygen&#x27;</span>, <span class="hljs-string">&#x27;Ubuntu&#x27;</span>, <span class="hljs-string">&#x27;Cantarell&#x27;</span>, <span class="hljs-string">&#x27;Fira Sans&#x27;</span>, <span class="hljs-string">&#x27;Droid Sans&#x27;</span>,
    <span class="hljs-string">&#x27;Helvetica Neue&#x27;</span>, sans-serif;
  -webkit-<span class="hljs-attribute">font-smoothing</span>: antialiased;
  -moz-osx-<span class="hljs-attribute">font-smoothing</span>: grayscale;
}
</code></pre>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<h2>PageLink component</h2>
<p><code>PageLink</code> component will be the reusable component to be used in our <code>Pagination</code> component. This will return an anchor element by default and will support a custom prop <code>active</code> to make it look <em>active</em> using its class and styles. If the prop <code>disabled</code> value is <code>true</code>, it would return a span element instead and make it look <em>disabled</em> using its class and styles.</p>
<p>Now let&#x27;s create our <code>PageLink</code> component in <code>src/components/PageLink.tsx</code> and add the following code:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> { HTMLProps } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;
<span class="hljs-keyword">import</span> cn <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;classnames&#x27;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./PageLink.css&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> Props = HTMLProps&lt;HTMLAnchorElement&gt; &amp; { active?: <span class="hljs-built_in">boolean</span> };

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">PageLink</span>(<span class="hljs-params">{
  className,
  active,
  disabled,
  children,
  ...otherProps
}: Props</span>) </span>{
  <span class="hljs-keyword">const</span> customClassName = cn(<span class="hljs-string">&#x27;page-link&#x27;</span>, className, {
    active,
    disabled,
  });

  <span class="hljs-keyword">if</span> (disabled) {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{customClassName}</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>;
  }

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span>
      <span class="hljs-attr">className</span>=<span class="hljs-string">{customClassName}</span>
      <span class="hljs-attr">aria-current</span>=<span class="hljs-string">{active</span> ? &#x27;<span class="hljs-attr">page</span>&#x27; <span class="hljs-attr">:</span> <span class="hljs-attr">undefined</span>}
      {<span class="hljs-attr">...otherProps</span>}
    &gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span>
  );
}
</code></pre>
<p>So in the code, we accept properties (or <code>props</code>) for our <code>PageLink</code> component to make it reusable and customizable. Since we&#x27;re writing our React code in TypeScript, we initialized the type <code>Props</code> which has been reassigned with the type <code>HTMLProps</code> from <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/facebook/react"><code>react</code></a> library with an argument <code>HTMLAnchorElement</code>, this means it will accept props and attributes allowed for an anchor element based on the <code>HTMLProps</code> from React. We also <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.typescriptlang.org/docs/handbook/2/objects.html#intersection-types">intersected</a> the type <code>HTMLProps&lt;HTMLAnchorElement&gt;</code> with an object containing the <code>active</code> key that is an <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.typescriptlang.org/docs/handbook/2/objects.html#optional-properties">optional</a> prop with a type of <code>boolean</code>.</p>
<p>Here we also used <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/JedWatson/classnames"><code>classnames</code></a> utility to help with joining <code>classNames</code> together conditionally.</p>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>Let&#x27;s style this component by creating <code>src/components/PageLink.css</code> and add the following code:</p>
<pre><code class="hljs language-css"><span class="hljs-selector-class">.page-link</span> {
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">display</span>: inline-flex;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#dee2e6</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#ffffff</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">15px</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#0d6efd</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">500</span>;
  <span class="hljs-attribute">text-decoration</span>: none;
  <span class="hljs-attribute">transition</span>: color <span class="hljs-number">0.15s</span> ease-in-out, background-color <span class="hljs-number">0.15s</span> ease-in-out,
    border-color <span class="hljs-number">0.15s</span> ease-in-out;
  <span class="hljs-attribute">cursor</span>: pointer;
}

<span class="hljs-selector-class">.page-link</span><span class="hljs-selector-pseudo">:first</span>-child {
  <span class="hljs-attribute">border-top-left-radius</span>: <span class="hljs-number">5px</span>;
  <span class="hljs-attribute">border-bottom-left-radius</span>: <span class="hljs-number">5px</span>;
}

<span class="hljs-selector-class">.page-link</span><span class="hljs-selector-pseudo">:last-child</span> {
  <span class="hljs-attribute">border-top-right-radius</span>: <span class="hljs-number">5px</span>;
  <span class="hljs-attribute">border-bottom-right-radius</span>: <span class="hljs-number">5px</span>;
}

<span class="hljs-selector-class">.page-link</span><span class="hljs-selector-pseudo">:not</span>(<span class="hljs-selector-pseudo">:first</span>-child) {
  <span class="hljs-attribute">margin-left</span>: -<span class="hljs-number">1px</span>;
}

<span class="hljs-selector-class">.page-link</span><span class="hljs-selector-pseudo">:hover</span>,
<span class="hljs-selector-class">.page-link</span><span class="hljs-selector-pseudo">:focus</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#0a58ca</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#e9ecef</span>;
}

<span class="hljs-selector-class">.page-link</span><span class="hljs-selector-pseudo">:focus</span> {
  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">3</span>;
}

<span class="hljs-selector-class">.page-link</span><span class="hljs-selector-class">.active</span> {
  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">2</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#ffffff</span>;
  <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#0d6efd</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#0d6efd</span>;
}

<span class="hljs-selector-class">.page-link</span><span class="hljs-selector-class">.disabled</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#6c757d</span>;
  <span class="hljs-attribute">pointer-events</span>: none;
}
</code></pre>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<h2>Pagination component</h2>
<p>Now that we have the <code>PageLink</code> component ready for use, let&#x27;s create our <code>Pagination</code> component in <code>src/components/Pagination.tsx</code> and add the following code:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> PageLink <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./PageLink&#x27;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./Pagination.css&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> Props = {
  <span class="hljs-attr">currentPage</span>: <span class="hljs-built_in">number</span>;
  lastPage: <span class="hljs-built_in">number</span>;
  maxLength: <span class="hljs-built_in">number</span>;
  setCurrentPage: <span class="hljs-function">(<span class="hljs-params">page: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Pagination</span>(<span class="hljs-params">{
  currentPage,
  lastPage,
  maxLength,
  setCurrentPage,
}: Props</span>) </span>{
  <span class="hljs-keyword">const</span> pageNums = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">nav</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;pagination&quot;</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">&quot;Pagination&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">PageLink</span>
        <span class="hljs-attr">disabled</span>=<span class="hljs-string">{currentPage</span> === <span class="hljs-string">1}</span>
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCurrentPage(currentPage - 1)}
      &gt;
        Previous
      <span class="hljs-tag">&lt;/<span class="hljs-name">PageLink</span>&gt;</span>
      {pageNums.map((pageNum, idx) =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">PageLink</span>
          <span class="hljs-attr">key</span>=<span class="hljs-string">{idx}</span>
          <span class="hljs-attr">active</span>=<span class="hljs-string">{currentPage</span> === <span class="hljs-string">pageNum}</span>
          <span class="hljs-attr">disabled</span>=<span class="hljs-string">{isNaN(pageNum)}</span>
          <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCurrentPage(pageNum)}
        &gt;
          {pageNum}
        <span class="hljs-tag">&lt;/<span class="hljs-name">PageLink</span>&gt;</span>
      ))}
      <span class="hljs-tag">&lt;<span class="hljs-name">PageLink</span>
        <span class="hljs-attr">disabled</span>=<span class="hljs-string">{currentPage</span> === <span class="hljs-string">lastPage}</span>
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCurrentPage(currentPage + 1)}
      &gt;
        Next
      <span class="hljs-tag">&lt;/<span class="hljs-name">PageLink</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span></span>
  );
}
</code></pre>
<p>Here we have <code>currentPage</code>, <code>lastPage</code> and <code>maxLength</code> as part of the props. These three props are enough to come up with the page numbers to be displayed in our pagination. For now, let&#x27;s hard code the page numbers in a variable called <code>pageNums</code>.</p>
<p>I am exporting the type <code>Props</code> here because we&#x27;re going to use that later in our test file when we write tests for this component.</p>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>I also added <code>setCurrentPage</code> function prop so that we can control the value of the <code>currentPage</code> from the parent component but it may not be needed for production because you may want to rely on the actual <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Learn/Common_questions/What_is_a_URL">URL</a> in <code>href</code> and your users will be redirected to the page depending on the <code>href</code>. If we didn&#x27;t add <code>setCurrentPage</code> function prop in the component, it will look like this:</p>
<pre><code class="hljs language-tsx"><span class="hljs-comment">// EXAMPLE ONLY</span>
...
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Pagination</span>(<span class="hljs-params">{
  currentPage,
  lastPage,
  maxLength,
}: Props</span>) </span>{
  <span class="hljs-keyword">const</span> baseUrl = <span class="hljs-string">&#x27;https://example.com/posts&#x27;</span>;
  <span class="hljs-keyword">const</span> pageNums = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">nav</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;pagination&quot;</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">&quot;Pagination&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">PageLink</span>
        <span class="hljs-attr">href</span>=<span class="hljs-string">{</span>`${<span class="hljs-attr">baseUrl</span>}/${<span class="hljs-attr">currentPage</span> <span class="hljs-attr">-</span> <span class="hljs-attr">1</span>}`}
        <span class="hljs-attr">disabled</span>=<span class="hljs-string">{currentPage</span> === <span class="hljs-string">1}</span>
      &gt;</span>
        Previous
      <span class="hljs-tag">&lt;/<span class="hljs-name">PageLink</span>&gt;</span>
      {pageNums.map((pageNum, idx) =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">PageLink</span>
          <span class="hljs-attr">key</span>=<span class="hljs-string">{idx}</span>
          <span class="hljs-attr">href</span>=<span class="hljs-string">{</span>`${<span class="hljs-attr">baseUrl</span>}/${<span class="hljs-attr">pageNum</span>}`}
          <span class="hljs-attr">active</span>=<span class="hljs-string">{currentPage</span> === <span class="hljs-string">pageNum}</span>
          <span class="hljs-attr">disabled</span>=<span class="hljs-string">{isNaN(pageNum)}</span>
        &gt;</span>
          {pageNum}
        <span class="hljs-tag">&lt;/<span class="hljs-name">PageLink</span>&gt;</span>
      ))}
      <span class="hljs-tag">&lt;<span class="hljs-name">PageLink</span>
        <span class="hljs-attr">href</span>=<span class="hljs-string">{</span>`${<span class="hljs-attr">baseUrl</span>}/${<span class="hljs-attr">currentPage</span> + <span class="hljs-attr">1</span>}`}
        <span class="hljs-attr">disabled</span>=<span class="hljs-string">{currentPage</span> === <span class="hljs-string">lastPage}</span>
      &gt;</span>
        Next
      <span class="hljs-tag">&lt;/<span class="hljs-name">PageLink</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span></span>
  );
}
</code></pre>
<p>This is just an example, your base URL may be different and the way you handle the different page URLs may also be different, the page number could be in the query params instead of being part of the path. I hope I can leave that up to you - you can use the code above for your reference.</p>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>Now, let&#x27;s add styles for this <code>Pagination</code> component in <code>src/components/Pagination.css</code> with the following code:</p>
<pre><code class="hljs language-css"><span class="hljs-selector-class">.pagination</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">flex-wrap</span>: wrap;
}
</code></pre>
<p>This <code>Pagination</code> component is now ready to be used in the <code>App</code> component. Let&#x27;s update <code>src/App.tsx</code> with the following code changes:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;
<span class="hljs-keyword">import</span> Pagination <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/Pagination&#x27;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./App.css&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">App</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> [currentPage, setCurrentPage] = useState(<span class="hljs-number">1</span>);
  <span class="hljs-keyword">const</span> lastPage = <span class="hljs-number">3</span>;

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>React TypeScript Pagination<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Pagination</span>
        <span class="hljs-attr">currentPage</span>=<span class="hljs-string">{currentPage}</span>
        <span class="hljs-attr">lastPage</span>=<span class="hljs-string">{lastPage}</span>
        <span class="hljs-attr">maxLength</span>=<span class="hljs-string">{7}</span>
        <span class="hljs-attr">setCurrentPage</span>=<span class="hljs-string">{setCurrentPage}</span>
      /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>Once you save the changes, this is how our component will look like on the page:</p>
<div class="lazyload-wrapper "><div class="lazyload-placeholder"></div></div>
<p>Try playing around with the buttons in the <code>Pagination</code> component to see how it changes the current page and set it as the <em>active</em> page.</p>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<h2>Pagination logic</h2>
<p>It&#x27;s time to figure out the logic for the page numbers in the pagination. We need to create a function that would generate an array of page numbers that would be displayed in our <code>Pagination</code> component. The function would accept three arguments: the <code>currentPage</code>, the <code>lastPage</code> and the <code>maxLength</code>. The function would return an array of page numbers and the length of the array must not exceed the <code>maxLength</code>. To keep things simple and easy to understand, let&#x27;s use <code>7</code> as the <code>maxLength</code> for all the examples.</p>
<p>For example, we have <code>1</code> as our <code>currentPage</code> and <code>5</code> as our <code>lastPage</code>. The function should return: <code>[1, 2, 3, 4, 5]</code>. The result array consists of the <code>currentPage</code>, the <code>lastPage</code> and the numbers in between them. The length of the result array is <code>5</code> which is less than <code>7</code> (the maximum of items our result array can have).</p>
<p>Another example, let&#x27;s say we have <code>5</code> as our <code>currentPage</code> and <code>7</code> as our <code>lastPage</code>. The function should return <code>[1, 2, 3, 4, 5, 6, 7]</code>. The result array consists of the <code>currentPage</code>, the <code>lastPage</code>, the numbers in between them and the numbers before the <code>currentPage</code> down to the first page <code>1</code>. We were able to include all the numbers before the <code>currentPage</code> down to the first page because the length of the result array is still <code>7</code> which is equal to maximum array length <code>7</code>.</p>
<p>If I call the function in JavaScript where first argument is <code>currentPage</code>, second argument is <code>lastPage</code> and third argument is the <code>maxLength</code>, here&#x27;s how it would look like along with their expected results:</p>
<pre><code class="hljs language-js">getPaginationItems(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// expected result: [1, 2, 3, 4, 5]</span>
getPaginationItems(<span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// expected result: [1, 2, 3, 4, 5, 6, 7]</span>
</code></pre>
<p>This function should also be able to handle where <code>lastPage</code> is more than the <code>maxLength</code>, it should keep the items within the <code>maxLength</code> but it will replace some page number(s) as ellipsis <code>...</code> where most applicable, here are some of the examples with their expected results:</p>
<pre><code class="hljs language-js">getPaginationItems(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// expected: [1, 2, 3, ..., 8, 9, 10]</span>
getPaginationItems(<span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// expected: [1, 2, 3, ..., 8, 9, 10]</span>
getPaginationItems(<span class="hljs-number">5</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// expected: [1, ..., 4, 5, 6, ..., 10]</span>
getPaginationItems(<span class="hljs-number">6</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// expected: [1, ..., 5, 6, 7, ..., 10]</span>
getPaginationItems(<span class="hljs-number">3</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// expected: [1, 2, 3, 4, ..., 9, 10]</span>
getPaginationItems(<span class="hljs-number">4</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// expected: [1, 2, 3, 4, 5, ..., 10]</span>
getPaginationItems(<span class="hljs-number">7</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// expected: [1, ..., 6, 7, 8, 9, 10]</span>
getPaginationItems(<span class="hljs-number">8</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// expected: [1, 2, ..., 7, 8, 9, 10]</span>
</code></pre>
<p>You might be scratching your head right now, that&#x27;s how I felt when I was thinking of how to solve this as well. Don&#x27;t worry! To actually solve this, at least for my solution, we will have to break them up into a couple of cases and conditions which I think makes it easy to understand as well.</p>
<blockquote>
<p>Nothing is particularly hard if you divide it into small jobs.</p>
<ul>
<li>Henry Ford</li>
</ul>
</blockquote>
<p>Let&#x27;s first understand the examples and their expected results before we get to the solution part by observing them for a few seconds or minutes. After observing them, we can conclude the following:</p>
<ol>
<li>The first page which is <code>1</code>, the <code>currentPage</code> and the <code>lastPage</code> are always part of the result array.</li>
<li>The length of the result array is equal to or less than the <code>maxLength</code>.</li>
<li>Using <code>currentPage</code>, we should be able to determine the numbers to fill in the result array.</li>
</ol>
<p><em><strong>Fun fact</strong>: I actually use this pagination function as a programming challenge for the software engineer interviews I conduct.</em></p>
<p>First let&#x27;s create the pagination function in <code>src/lib/pagination.ts</code>:</p>
<pre><code class="hljs language-ts"><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getPaginationItems</span>(<span class="hljs-params">
  currentPage: <span class="hljs-built_in">number</span>,
  lastPage: <span class="hljs-built_in">number</span>,
  maxLength: <span class="hljs-built_in">number</span>
</span>) </span>{
  <span class="hljs-keyword">const</span> res: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">number</span>&gt; = [currentPage];

  <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> populate result array</span>

  <span class="hljs-keyword">return</span> res;
}
</code></pre>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>Now what should we do? Let&#x27;s start with the simple ones first. In the first two examples, we have:</p>
<pre><code class="hljs language-ts">getPaginationItems(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// expected result: [1, 2, 3, 4, 5]</span>
getPaginationItems(<span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// expected result: [1, 2, 3, 4, 5, 6, 7]</span>
</code></pre>
<p>Here, we actually don&#x27;t need the <code>currentPage</code> to generate the expected result array. As long as the <code>lastPage</code> is less than or equal to the <code>maxLength</code>. We can just iterate from <code>1</code> up to the <code>lastPage</code>.</p>
<p>Let&#x27;s update our function in <code>src/lib/pagination.ts</code> to add the loop iteration:</p>
<pre><code class="hljs language-ts"><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getPaginationItems</span>(<span class="hljs-params">
  ...
</span>) </span>{
  <span class="hljs-keyword">const</span> res: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">number</span>&gt; = [];

  <span class="hljs-comment">// handle lastPage less than or equal to maxLength</span>
  <span class="hljs-keyword">if</span> (lastPage &lt;= maxLength) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt;= lastPage; i++) {
      res.push(i);
    }
  }

  <span class="hljs-keyword">return</span> res;
}
</code></pre>
<p>If we run this function with the arguments from the first two examples, we will get our expected result array:</p>
<pre><code class="hljs language-js">getPaginationItems(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// [1, 2, 3, 4, 5]</span>
getPaginationItems(<span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// [1, 2, 3, 4, 5, 6, 7]</span>
</code></pre>
<p>Great! Now let&#x27;s try to achieve the expected result array of the next set of examples:</p>
<pre><code class="hljs language-js">getPaginationItems(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// expected result: [1, 2, 3, ..., 8, 9, 10]</span>
getPaginationItems(<span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// expected result: [1, 2, 3, ..., 8, 9, 10]</span>
</code></pre>
<p>This is considered to fall under the case where <code>lastPage</code> is more than <code>maxLength</code> and hence it will have an ellipsis <code>...</code> in the result array.</p>
<p>If you notice, we have the ellipsis <code>...</code> in the middle of the result array. If you analyze it further, the expected result would be the same if the <code>currentPage</code> is either <code>2</code> or <code>10</code>.</p>
<p>With this, we can conclude that if either of the following conditions below are met, we can put the ellipsis <code>...</code> in the middle of the result array:</p>
<ol start="2">
<li>If we deduct the <code>currentPage</code> with <code>1</code> (first page) and the difference is less than <code>2</code> (e.g. <code>2 - 1 = 1</code>, <code>1 - 1 = 0</code>).</li>
<li>If we deduct the <code>lastPage</code> with the <code>currentPage</code> and the difference is less than <code>2</code> (e.g. <code>10 - 9 = 1</code>, <code>10 - 10 = 0</code>).</li>
</ol>
<p>The value <code>2</code> in the conditions above should not be static because we want to get that value based on the <code>maxLength</code>. We need it to be dynamic. For example if our <code>maxLength</code> is <code>9</code>, the expected result array where ellipsis <code>...</code> is in the middle would now apply to <code>1</code>, <code>2</code>, <code>3</code>, <code>8</code>, <code>9</code> and <code>10</code>, which means the required difference in the conditions above should be less than <code>3</code>. How can we get this dynamic value?</p>
<p>So we have <code>7</code> as our maximum length for the result array, we are already certain that we always have the three numbers that would be part of the array: the first page (<code>1</code>), the current page (<code>currentPage</code>) and last page (<code>lastPage</code>). So we can deduct those three from the max length: <code>7 - 3 = 4</code>. Now we&#x27;re left with <code>4</code> numbers to fill in the result array, let&#x27;s assign <code>4</code> to a variable called <code>deductedMaxLength</code> since we deducted the <code>maxLength</code> with the confirmed page numbers count (<code>confirmedPagesCount</code>). We can divide the <code>deductedMaxLength</code> by two, <code>4 / 2 = 2</code>, since we need to fill both <em>sides</em> of the ellipsis: <em>left</em> and <em>right</em>. This is how we get <code>2</code> which is the dynamic variable of the conditions mentioned above. Let&#x27;s name this dynamic value as <code>sideLength</code> which hopefully explains that it is the length needed on both sides of the array. Now we can use it to determine when to handle the case where ellipsis <code>...</code> should be in the middle of the result array:</p>
<pre><code class="hljs language-ts"><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getPaginationItems</span>(<span class="hljs-params">
  ...
</span>) </span>{
  <span class="hljs-keyword">const</span> res: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">number</span>&gt; = [];

  <span class="hljs-comment">// handle lastPage less than or equal to maxLength</span>
  <span class="hljs-keyword">if</span> (lastPage &lt;= maxLength) {
    ...
  }

  <span class="hljs-comment">// handle ellipsis logics</span>
  <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">const</span> firstPage = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">const</span> confirmedPagesCount = <span class="hljs-number">3</span>;
    <span class="hljs-keyword">const</span> deductedMaxLength = maxLength - confirmedPagesCount;
    <span class="hljs-keyword">const</span> sideLength = deductedMaxLength / <span class="hljs-number">2</span>;

    <span class="hljs-comment">// handle ellipsis in the middle</span>
    <span class="hljs-keyword">if</span> (currentPage - firstPage &lt; sideLength || lastPage - currentPage &lt; sideLength) {
      <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> populate result array</span>
    }
  }

  <span class="hljs-keyword">return</span> res;
}
</code></pre>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>Now let&#x27;s fill the result array with the numbers on the <em>left</em> side of the ellipsis <code>...</code>. That is to iterate from the first page up to the <code>sideLength</code> plus <code>1</code> (since it includes the <code>firstPage</code>):</p>
<pre><code class="hljs language-ts"><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getPaginationItems</span>(<span class="hljs-params">
  ...
</span>) </span>{
  ...
  <span class="hljs-keyword">if</span> (lastPage &lt;= maxLength) {
    ...
  }
  ...
  <span class="hljs-keyword">else</span> {
    ...
    <span class="hljs-comment">// handle ellipsis in the middle</span>
    <span class="hljs-keyword">if</span> (currentPage - firstPage &lt; sideLength || lastPage - currentPage &lt; sideLength) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">1</span>; j &lt;= sideLength + firstPage; j++) {
        res.push(j);
      }
    }
  }
  ...
}
</code></pre>
<p>To get a better understanding of the state of our function with each changes we do, I&#x27;m going to display to you what the function currently returns for the result array and beside it will be the expected array to compare:</p>
<pre><code class="hljs language-ts">getPaginationItems(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// current: [1, 2, 3] | expected: [1, 2, 3, ..., 8, 9, 10]</span>
getPaginationItems(<span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// current: [1, 2, 3] | expected: [1, 2, 3, ..., 8, 9, 10]</span>
</code></pre>
<p>Now we can simply push the ellipsis <code>...</code> in the result array but instead of pushing the triple dot string <code>...</code>, I&#x27;m just gonna push <code>NaN</code> since we have defined the type of the result array <code>res</code> to be <code>Array&lt;number&gt;</code>:</p>
<pre><code class="hljs language-ts"><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getPaginationItems</span>(<span class="hljs-params">
  ...
</span>) </span>{
  <span class="hljs-keyword">const</span> res: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">number</span>&gt; = [];

  <span class="hljs-keyword">if</span> (lastPage &lt;= maxLength) {
    ...
  } <span class="hljs-keyword">else</span> {
    ...
    <span class="hljs-keyword">if</span> (currentPage - <span class="hljs-number">1</span> &lt;= sideLength || lastPage - currentPage &lt;= sideLength) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">1</span>; j &lt;= sideLength + firstPage; j++) {
        res.push(j);
      }

      res.push(<span class="hljs-literal">NaN</span>);
    }
  }

  <span class="hljs-keyword">return</span> res;
</code></pre>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>You can actually change the type of the result array to <code>Array&lt;number | string&gt;</code> which we call a <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#defining-a-union-type">union type in TypeScript</a> and then push the ellipsis <code>...</code> string in the result array. But I just felt that keeping it as just <code>Array&lt;number&gt;</code> and pushing <code>NaN</code> as the ellipsis would be simpler especially when handling the &quot;Previous&quot; and &quot;Next&quot; buttons where we add or subtract the <code>currentPage</code> to get their page numbers. Then we can just do a logic in the <a target="_blank" rel="noopener noreferrer nofollow" href="https://reactjs.org/docs/introducing-jsx.html">JSX</a> to display ellipsis <code>...</code> if the item in the result array is <code>NaN</code> using the <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/isNaN"><code>isNaN()</code></a> check.</p>
<p>To complete the result array for this case, let&#x27;s fill the result array with the numbers on the <em>right</em> side of the ellipsis <code>...</code> by iterating from <code>lastPage</code> minus <code>sideLength</code> up to the <code>lastPage</code>:</p>
<pre><code class="hljs language-ts"><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getPaginationItems</span>(<span class="hljs-params">
  ...
</span>) </span>{
  ...
  <span class="hljs-keyword">if</span> (lastPage &lt;= maxLength) {
    ...
  }
  ...
  <span class="hljs-keyword">else</span> {
    ...
    <span class="hljs-keyword">if</span> (currentPage - <span class="hljs-number">1</span> &lt;= sideLength || lastPage - currentPage &lt;= sideLength) {
      ...
      res.push(<span class="hljs-literal">NaN</span>);

      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> k = lastPage - sideLength; k &lt;= lastPage; k++) {
        res.push(k);
      }
    }
  }

  <span class="hljs-keyword">return</span> res;
</code></pre>
<p>With the updated function, we now get the expected result array:</p>
<pre><code class="hljs language-js">getPaginationItems(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// [1, 2, 3, NaN, 8, 9, 10]</span>
getPaginationItems(<span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// [1, 2, 3, NaN, 8, 9, 10]</span>
</code></pre>
<p>Awesome! Just think of <code>NaN</code> as the ellipsis here and this is exactly what we expect.</p>
<p>Let&#x27;s proceed to figure out how to achieve the expected result array from the next set of examples:</p>
<pre><code class="hljs language-js">getPaginationItems(<span class="hljs-number">5</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// expected: [1, ..., 4, 5, 6, ..., 10]</span>
getPaginationItems(<span class="hljs-number">6</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// expected: [1, ..., 5, 6, 7, ..., 10]</span>
</code></pre>
<p>This is also considered to fall under the case where <code>lastPage</code> is more than <code>maxLength</code> and hence it will have an ellipsis <code>...</code> in the result array.</p>
<p>Let&#x27;s first determine in what case the result array will contain two ellipses <code>...</code>. Try to think about it for a moment and look at the examples again.</p>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>Now see if your thoughts are the same as mine. It occurs if <strong>both</strong> of the conditions below are met:</p>
<ol>
<li>The difference between the <code>currentPage</code> and the first page is <code>4</code> and above (e.g. <code>5 - 1 = 4</code>, <code>6 - 1 = 5</code>).</li>
<li>The difference between the <code>lastPage</code> and the <code>currentPage</code> is <code>4</code> and above (e.g. <code>10 - 5 = 5</code>, <code>10 - 6 = 4</code>).</li>
</ol>
<p>The same case as the earlier case, the value <code>4</code> here should be dynamic and should depend on the <code>maxLength</code>. This value should look familiar to you, that&#x27;s because we already have this dynamic value earlier in the code. That would be the <code>deductedMaxLength</code>. Let&#x27;s use that and update the code with the following:</p>
<pre><code class="hljs language-ts"><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getPaginationItems</span>(<span class="hljs-params">
  ...
</span>) </span>{
  ...
  <span class="hljs-comment">// handle ellipsis logics</span>
  <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">const</span> firstPage = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">const</span> confirmedPagesCount = <span class="hljs-number">3</span>;
    <span class="hljs-keyword">const</span> deductedMaxLength = maxLength - confirmedPagesCount;
    <span class="hljs-keyword">const</span> sideLength = deductedMaxLength / <span class="hljs-number">2</span>;

    <span class="hljs-comment">// handle ellipsis in the middle</span>
    <span class="hljs-keyword">if</span> (
      currentPage - firstPage &lt; sideLength ||
      lastPage - currentPage &lt; sideLength
    ) {
      ...
    }

    <span class="hljs-comment">// handle two ellipsis</span>
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (
      currentPage - firstPage &gt;= deductedMaxLength &amp;&amp;
      lastPage - currentPage &gt;= deductedMaxLength
    ) {
      <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> populate result array</span>
    }
  }
  ...
}
</code></pre>
<p>Alright, now that we know the condition for the case where we have two ellipses, we can now proceed to fill in the result array with the page numbers. Let&#x27;s start with a couple of observations below:</p>
<ol>
<li>The <code>currentPage</code> is always in the middle of the result array.</li>
<li>The numbers surrounding the <code>currentPage</code> depend on the <code>maxLength</code>. The number needed on each side should be dynamic. If <code>7</code> is the <code>maxLength</code>, there&#x27;s only one number on each side of the <code>currentPage</code>. If <code>9</code> is the <code>maxLength</code>, there should be two numbers on each side of the <code>currentPage</code>.</li>
<li>The ellipsis <code>...</code> is always beside both the first page and the <code>lastPage</code>.</li>
</ol>
<p>Let&#x27;s start with the easy change first. We just need to push the first page and <code>NaN</code> in the result array:</p>
<pre><code class="hljs language-ts"><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getPaginationItems</span>(<span class="hljs-params">
  ...
</span>) </span>{
  ...
  <span class="hljs-keyword">else</span> {
    ...

    <span class="hljs-comment">// handle two ellipsis</span>
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (
      currentPage - firstPage &gt;= deductedMaxLength &amp;&amp;
      lastPage - currentPage &gt;= deductedMaxLength
    ) {
      res.push(<span class="hljs-number">1</span>);
      res.push(<span class="hljs-literal">NaN</span>);
    }
  }
  ...
}
</code></pre>
<p>If we run this function now, we will get the following and we can compare against the expected result array:</p>
<pre><code class="hljs language-ts">getPaginationItems(<span class="hljs-number">5</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// current: [1, NaN] | expected: [1, NaN, 4, 5, 6, NaN, 10]</span>
getPaginationItems(<span class="hljs-number">6</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// current: [1, NaN] | expected: [1, NaN, 5, 6, 7, NaN, 10]</span>
</code></pre>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>Now let&#x27;s think of how to generate the numbers around the <code>currentPage</code>. If you remember in one of the observations, if <code>maxLength</code> is <code>7</code>, we need one number on each side. We can make use of another existing dynamic value which is the <code>sideLength</code>. The value of <code>sideLength</code> is <code>2</code> which is the length needed in each side, since we already know that there is an ellipsis or <code>NaN</code> on each side of the result array, we can just have to deduct the <code>sideLength</code> by <code>1</code>: <code>2 - 1 = 1</code>. Now we get <code>1</code> which means we need to generate one number on each side of the <code>currentPage</code>. We can now do the iteration for the numbers around the <code>currentPage</code> or what we may call the numbers in the middle of the result array. After the iteration, we can just push the remaining items of the result array which are <code>NaN</code> and the <code>lastPage</code>, here&#x27;s the code for that:</p>
<pre><code class="hljs language-ts"><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getPaginationItems</span>(<span class="hljs-params">
  ...
</span>) </span>{
  ...
  <span class="hljs-keyword">else</span> {
    ...

    <span class="hljs-comment">// handle two ellipsis</span>
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (
      currentPage - firstPage &gt;= deductedMaxLength &amp;&amp;
      lastPage - currentPage &gt;= deductedMaxLength
    ) {
      <span class="hljs-keyword">const</span> deductedSideLength = sideLength - <span class="hljs-number">1</span>;

      res.push(<span class="hljs-number">1</span>);
      res.push(<span class="hljs-literal">NaN</span>);

      <span class="hljs-keyword">for</span> (
        <span class="hljs-keyword">let</span> l = currentPage - deductedSideLength;
        l &lt;= currentPage + deductedSideLength;
        l++
      ) {
        res.push(l);
      }

      res.push(<span class="hljs-literal">NaN</span>);
      res.push(lastPage);
    }
  }
  ...
}
</code></pre>
<p>By running the updated function, we are now able to get the expected result array for this set of examples:</p>
<pre><code class="hljs language-js">getPaginationItems(<span class="hljs-number">5</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// [1, NaN, 4, 5, 6, NaN, 10]</span>
getPaginationItems(<span class="hljs-number">6</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// [1, NaN, 5, 6, 7, NaN, 10]</span>
</code></pre>
<p>We&#x27;re almost done with the pagination logic. The last thing we need to handle is when the ellipsis <code>...</code> is not in the middle of the result array. Let me show again the set of examples from earlier:</p>
<pre><code class="hljs language-js">getPaginationItems(<span class="hljs-number">3</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// expected: [1, 2, 3, 4, ..., 9, 10]</span>
getPaginationItems(<span class="hljs-number">4</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// expected: [1, 2, 3, 4, 5, ..., 10]</span>
getPaginationItems(<span class="hljs-number">7</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// expected: [1, ..., 6, 7, 8, 9, 10]</span>
getPaginationItems(<span class="hljs-number">8</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// expected: [1, 2, ..., 7, 8, 9, 10]</span>
</code></pre>
<p>A couple of observations here:</p>
<ol>
<li>The ellipsis <code>...</code> could either be near the first page or near the last page. We can say the same thing for the <code>currentPage</code>.</li>
<li>There are more numbers surrounding the <code>currentPage</code> which means less numbers on the other side of the <code>ellipsis</code>.</li>
<li>The <code>currentPage</code> is surrounded by at least one number on both sides (left and right).</li>
</ol>
<p>With the observations above we can split the logic of generating the result array into two cases: First case is when the <code>currentPage</code> is near the first page, we iterate from first page <code>1</code> up to the <code>currentPage</code> plus <code>1</code>, we added <code>1</code> because from one of the observations we need at least one number on each side of the <code>currentPage</code>. Second case is when the <code>currentPage</code> is near the <code>lastPage</code>, we iterate from the <code>lastPage</code> down to the <code>currentPage</code> minus <code>1</code>. How do we know if the <code>currentPage</code> is near the first page or the <code>lastPage</code>? We can simply deduct <code>currentPage</code> with the first page and deduct <code>lastPage</code> with the <code>currentPage</code>, compare the difference of both, and whoever has the lesser difference is near to the <code>currentPage</code>.</p>
<p>Here&#x27;s how that will look like in the code:</p>
<pre><code class="hljs language-ts"><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getPaginationItems</span>(<span class="hljs-params">
  ...
</span>) </span>{
  ...
  <span class="hljs-keyword">else</span> {
    ...

    <span class="hljs-comment">// handle two ellipsis</span>
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (
      ...
    ) {
      ...
    }

    <span class="hljs-comment">// handle ellipsis not in the middle</span>
    <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">const</span> isNearFirstPage = currentPage - firstPage &lt; lastPage - currentPage;

      <span class="hljs-keyword">if</span> (isNearFirstPage) {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> m = <span class="hljs-number">1</span>; m &lt;= currentPage + <span class="hljs-number">1</span>; m++) {
          res.push(m);
        }

        res.push(<span class="hljs-literal">NaN</span>);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> o = lastPage; o &gt;= currentPage - <span class="hljs-number">1</span>; o--) {
          res.unshift(o);
        }

        res.unshift(<span class="hljs-literal">NaN</span>);
      }
    }
  }
  ...
}
</code></pre>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>By the way, if you don&#x27;t know what <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/unshift"><code>Array.unshift()</code></a> does here, it is the opposite of <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/push"><code>Array.push()</code></a>, it adds one or more elements to the beginning of an array. Although, I think I can achieve the same thing for when the <code>currentPage</code> is near the <code>lastPage</code> by just using <code>push</code> instead of <code>unshift</code> by deducting the initial value instead, I think what I&#x27;ve done is more easy to understand. If the <code>currentPage</code> is near the <code>lastPage</code>, we basically iterate backwards starting from the <code>lastPage</code> down to the <code>currentPage</code> minus <code>1</code> to generate the expected result.</p>
<p>If we run this function now, this is what we currently get:</p>
<pre><code class="hljs language-js">getPaginationItems(<span class="hljs-number">3</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// current: [1, 2, 3, 4, NaN] | expected: [1, 2, 3, 4, NaN, 9, 10]</span>
getPaginationItems(<span class="hljs-number">4</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// current: [1, 2, 3, 4, 5, NaN] | expected: [1, 2, 3, 4, 5, NaN, 10]</span>
getPaginationItems(<span class="hljs-number">7</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// current: [NaN, 6, 7, 8, 9, 10] | expected: [1, NaN, 6, 7, 8, 9, 10]</span>
getPaginationItems(<span class="hljs-number">8</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// current: [NaN, 7, 8, 9, 10] | expected: [1, 2, NaN, 7, 8, 9, 10]</span>
</code></pre>
<p>Now we just need to fill the remaining numbers into the result array. The key word here is the &quot;remaining length&quot;. How do we get that? By subtracting <code>maxLength</code> in each <code>push</code> or <code>unshift</code> and track that in a variable called <code>remainingLength</code>:</p>
<pre><code class="hljs language-ts"><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getPaginationItems</span>(<span class="hljs-params">
  ...
</span>) </span>{
  ...
  <span class="hljs-keyword">else</span> {
    ...
    <span class="hljs-comment">// handle ellipsis not in the middle</span>
    <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">const</span> isNearFirstPage = currentPage - firstPage &lt; lastPage - currentPage;
      <span class="hljs-keyword">let</span> remainingLength = maxLength;

      <span class="hljs-keyword">if</span> (isNearFirstPage) {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> m = <span class="hljs-number">1</span>; m &lt;= currentPage + <span class="hljs-number">1</span>; m++) {
          res.push(m);
          remainingLength -= <span class="hljs-number">1</span>;
        }

        res.push(<span class="hljs-literal">NaN</span>);
        remainingLength -= <span class="hljs-number">1</span>;
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> o = lastPage; o &gt;= currentPage - <span class="hljs-number">1</span>; o--) {
          res.unshift(o);
          remainingLength -= <span class="hljs-number">1</span>;
        }

        res.unshift(<span class="hljs-literal">NaN</span>);
        remainingLength -= <span class="hljs-number">1</span>;
      }
    }
  }
  ...
}
</code></pre>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>Then using the <code>remainingLength</code>, we know how much to iterate on the other side of the <code>ellipsis</code>. If the <code>currentPage</code> is near the first page, after pushing the numbers and <code>NaN</code>, we can deduct the <code>lastPage</code> with the <code>remainingLength</code> and the difference is where we start iterating up to the <code>lastPage</code>. If the <code>currentPage</code> is near the <code>lastPage</code>, after pushing the numbers and <code>NaN</code>, we start iterating from the <code>remainingLength</code> down to the first page:</p>
<pre><code class="hljs language-ts"><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getPaginationItems</span>(<span class="hljs-params">
  ...
</span>) </span>{
  ...
  <span class="hljs-keyword">else</span> {
    ...
    <span class="hljs-keyword">else</span> {
      ...
      <span class="hljs-keyword">if</span> (isNearFirstPage) {
        ...
        res.push(<span class="hljs-literal">NaN</span>);
        remainingLength -= <span class="hljs-number">1</span>;

        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> n = lastPage - (remainingLength - <span class="hljs-number">1</span>); n &lt;= lastPage; n++) {
          res.push(n);
        }
      } <span class="hljs-keyword">else</span> {
        ...
        res.unshift(<span class="hljs-literal">NaN</span>);
        remainingLength -= <span class="hljs-number">1</span>;

        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> p = remainingLength; p &gt;= <span class="hljs-number">1</span>; p--) {
          res.unshift(p);
        }
      }
    }
  }
  ...
}
</code></pre>
<p>Once you save the changes and run the function, we now get the expected result array:</p>
<pre><code class="hljs language-js">getPaginationItems(<span class="hljs-number">3</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// [1, 2, 3, 4, NaN, 9, 10]</span>
getPaginationItems(<span class="hljs-number">4</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// [1, 2, 3, 4, 5, NaN, 10]</span>
getPaginationItems(<span class="hljs-number">7</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// [1, NaN, 6, 7, 8, 9, 10]</span>
getPaginationItems(<span class="hljs-number">8</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// [1, 2, NaN, 7, 8, 9, 10]</span>
</code></pre>
<p>Very nice! We&#x27;re finally done with the pagination function.</p>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>We all know what to do now. Let&#x27;s go ahead and update the <code>Pagination</code> component in <code>src/components/Pagination.tsx</code> to use the <code>getPaginationItems</code> function:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> { getPaginationItems } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../lib/pagination&#x27;</span>;
...
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Pagination</span>(<span class="hljs-params">{
  ...
}: Props</span>) </span>{
  <span class="hljs-keyword">const</span> pageNums = getPaginationItems(currentPage, lastPage, maxLength);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">nav</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;pagination&quot;</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">&quot;Pagination&quot;</span>&gt;</span>
      ...
      {pageNums.map((pageNum, idx) =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">PageLink</span>
          <span class="hljs-attr">...</span>
        &gt;</span>
          {!isNaN(pageNum) ? pageNum : &#x27;...&#x27;}
        <span class="hljs-tag">&lt;/<span class="hljs-name">PageLink</span>&gt;</span>
      ))}
      ...
    <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span></span>
  );
}
</code></pre>
<p>Let&#x27;s also make our application more interesting by updating the <code>lastPage</code> to <code>20</code> in the <code>App</code> component in <code>src/App.tsx</code> so that it can display more page numbers in the <code>Pagination</code> component:</p>
<pre><code class="hljs language-tsx">...
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">App</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> [currentPage, setCurrentPage] = useState(<span class="hljs-number">1</span>);
  <span class="hljs-keyword">const</span> lastPage = <span class="hljs-number">20</span>;

  <span class="hljs-keyword">return</span> (
    ...
  );
}
</code></pre>
<p>Save those changes and let&#x27;s test it out!</p>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>Here&#x27;s a demo of the fully operational pagination component we&#x27;ve just built:</p>
<div class="lazyload-wrapper "><div class="lazyload-placeholder"></div></div>
<p>And there you have it! You can now proudly say that you have built your very own pagination component in React and TypeScript.</p>
<p>It&#x27;s time to write some tests for the pagination component. Please proceed to the <a href="/posts/how-to-create-your-own-pagination-in-react-and-typescript-with-tests-part-2">next part</a> of this post.</p></article><div class="w-11/12 max-w-screen-3xl mx-auto lg:w-5/6"><p class="mt-16 text-gray-400">Found an issue with this post?<!-- --> <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/dominicarrojado/dominicarrojado.github.io/issues">Report it here</a>.</p><div class="mt-24 flex justify-between items-center"><a class="group relative pr-2" href="/posts/local-development-setup-for-nextjs-typescript-and-tailwindcss-projects"><div class=""><div class="font-normal transition-colors duration-300 group-hover:text-black motion-reduce:transition-none dark:group-hover:text-white">Local development setup for Next.js projects with TypeScript and TailwindCSS</div><small class="text-gray-400 transition-colors duration-300 group-hover:text-black motion-reduce:transition-none dark:group-hover:text-white">Previous Post</small></div><svg viewBox="0 0 320 512" role="img" class="absolute top-0 bottom-0 m-auto shrink-0 w-2 h-2 text-black opacity-30 dark:text-white transform transition-transform-opacity duration-300 group-hover:opacity-100 motion-reduce:transition-none sm:w-2.5 sm:h-2.5 md:w-3 md:h-3 xl:w-3.5 xl:h-3.5 -left-5 sm:-left-7 xl:-left-8 group-hover:-translate-x-1.5"><path fill="currentColor" d="M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"></path></svg></a><div></div><a class="group relative pl-2" href="/posts/how-to-create-your-own-pagination-in-react-and-typescript-with-tests-part-2"><div class="text-right"><div class="font-normal transition-colors duration-300 group-hover:text-black motion-reduce:transition-none dark:group-hover:text-white">How to create your own pagination in React and TypeScript with tests (Part 2)</div><small class="text-gray-400 transition-colors duration-300 group-hover:text-black motion-reduce:transition-none dark:group-hover:text-white">Next Post</small></div><svg viewBox="0 0 320 512" role="img" class="absolute top-0 bottom-0 m-auto shrink-0 w-2 h-2 text-black opacity-30 dark:text-white transform transition-transform-opacity duration-300 group-hover:opacity-100 motion-reduce:transition-none sm:w-2.5 sm:h-2.5 md:w-3 md:h-3 xl:w-3.5 xl:h-3.5 -right-5 sm:-right-7 xl:-right-8 group-hover:translate-x-1.5"><path fill="currentColor" d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"></path></svg></a></div><div class="mt-16 text-center"><a class="group inline-flex items-center font-normal select-none dark:hover:text-white transition-colors duration-300 hover:text-black group-hover:text-black motion-reduce:transition-none" href="/posts">See Latest Posts<svg viewBox="0 0 320 512" role="img" class="inline-block w-2 h-2 ml-2 text-black opacity-30 dark:text-white transform transition duration-300 group-hover:translate-x-1.5 group-hover:opacity-100 motion-reduce:transition-none sm:w-2.5 sm:h-2.5 sm:ml-2.5 md:w-3 md:h-3 md:ml-3 xl:w-3.5 xl:h-3.5"><path fill="currentColor" d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"></path></svg></a></div></div><div class="w-11/12 max-w-screen-3xl -mb-8 mx-auto pt-8 sm:-mb-10 sm:pt-10 md:-mb-12 md:pt-12 lg:w-5/6"><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="6892691691" data-ad-format="auto" data-full-width-responsive="true" data-testid="ad-unit"></ins></div></section><footer class="py-20 px-6 bg-gray-100 dark:bg-gray-850 overflow-hidden lg:overflow-auto transition-opacity duration-1000 delay-1750 motion-reduce:transition-none opacity-0" data-testid="footer"><ul class="relative text-center overflow-hidden transition-height duration-1000 motion-reduce:transition-none sm:text-lg xl:text-xl" style="height:0"><li class="absolute top-0 left-0 w-full transition-opacity duration-1000 motion-reduce:transition-none"><blockquote>“<!-- -->If there is no struggle, there is no progress.<!-- -->”</blockquote><p class="mt-1 sm:mt-2">— <!-- -->Frederick Douglass</p></li><li class="absolute top-0 left-0 w-full transition-opacity duration-1000 motion-reduce:transition-none opacity-0 pointer-events-none"><blockquote>“<!-- -->It&#x27;s okay to figure out murder mysteries, but you shouldn&#x27;t need to figure out code. You should be able to read it.<!-- -->”</blockquote><p class="mt-1 sm:mt-2">— <!-- -->Steve McConnell</p></li><li class="absolute top-0 left-0 w-full transition-opacity duration-1000 motion-reduce:transition-none opacity-0 pointer-events-none"><blockquote>“<!-- -->If you can&#x27;t explain it simply, you don&#x27;t understand it well enough.<!-- -->”</blockquote><p class="mt-1 sm:mt-2">— <!-- -->Albert Einstein</p></li><li class="absolute top-0 left-0 w-full transition-opacity duration-1000 motion-reduce:transition-none opacity-0 pointer-events-none"><blockquote>“<!-- -->The secret of getting ahead is getting started.<!-- -->”</blockquote><p class="mt-1 sm:mt-2">— <!-- -->Mark Twain</p></li></ul><ul class="max-w-full mt-10 flex flex-wrap justify-center"><li><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" aria-describedby="tooltip-donate" href="https://www.paypal.com/paypalme/DominicArrojado" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Show your support and donate!"><svg viewBox="0 0 512 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M256 416c114.9 0 208-93.1 208-208S370.9 0 256 0 48 93.1 48 208s93.1 208 208 208zM233.8 97.4V80.6c0-9.2 7.4-16.6 16.6-16.6h11.1c9.2 0 16.6 7.4 16.6 16.6v17c15.5.8 30.5 6.1 43 15.4 5.6 4.1 6.2 12.3 1.2 17.1L306 145.6c-3.8 3.7-9.5 3.8-14 1-5.4-3.4-11.4-5.1-17.8-5.1h-38.9c-9 0-16.3 8.2-16.3 18.3 0 8.2 5 15.5 12.1 17.6l62.3 18.7c25.7 7.7 43.7 32.4 43.7 60.1 0 34-26.4 61.5-59.1 62.4v16.8c0 9.2-7.4 16.6-16.6 16.6h-11.1c-9.2 0-16.6-7.4-16.6-16.6v-17c-15.5-.8-30.5-6.1-43-15.4-5.6-4.1-6.2-12.3-1.2-17.1l16.3-15.5c3.8-3.7 9.5-3.8 14-1 5.4 3.4 11.4 5.1 17.8 5.1h38.9c9 0 16.3-8.2 16.3-18.3 0-8.2-5-15.5-12.1-17.6l-62.3-18.7c-25.7-7.7-43.7-32.4-43.7-60.1.1-34 26.4-61.5 59.1-62.4zM480 352h-32.5c-19.6 26-44.6 47.7-73 64h63.8c5.3 0 9.6 3.6 9.6 8v16c0 4.4-4.3 8-9.6 8H73.6c-5.3 0-9.6-3.6-9.6-8v-16c0-4.4 4.3-8 9.6-8h63.8c-28.4-16.3-53.3-38-73-64H32c-17.7 0-32 14.3-32 32v96c0 17.7 14.3 32 32 32h448c17.7 0 32-14.3 32-32v-96c0-17.7-14.3-32-32-32z"></path></svg></a></li><li><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" aria-describedby="tooltip-youtube" href="https://www.youtube.com/channel/UCWwV__qrzg5BYCSwO91Xhxg/videos?view=0&amp;sort=dd" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Watch my tech videos!"><svg viewBox="0 0 576 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"></path></svg></a></li><li><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" aria-describedby="tooltip-linkedin" href="https://www.linkedin.com/in/dominic-arrojado-75ba03a9/" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Let&#x27;s connect on LinkedIn!"><svg viewBox="0 0 448 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a></li><li><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" aria-describedby="tooltip-github" href="https://github.com/dominicarrojado/" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Follow me on GitHub!"><svg viewBox="0 0 496 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></li><li><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" aria-describedby="tooltip-email" href="mailto:dominicarrojado@gmail.com" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Email me!"><svg viewBox="0 0 512 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"></path></svg></a></li></ul><p class="mt-4 text-gray-400 text-sm text-center sm:text-base lg:mt-10 xl:text-lg"><span class="font-normal">©<!-- -->2023<!-- --> <!-- -->Dominic Arrojado</span> <span class="block mt-1 sm:hidden"></span><span class="hidden sm:inline">·</span> <a href="/privacy-policy/">Privacy Policy</a> <!-- -->·<!-- --> <a href="/disclaimer/">Disclaimer</a></p></footer><footer class="fixed flex items-center justify-end bottom-0 w-full z-50"><div class="absolute bottom-3.5 right-3.5 flex items-end gap-3 ml-auto sm:bottom-4 sm:right-4 md:bottom-5 md:right-5 lg:bottom-8 lg:right-8" style="padding-right:0px"><button type="button" aria-expanded="false" aria-controls="dialog-subscribe" aria-haspopup="dialog" class="group text-gray-400 outline-none dark:text-gray-300 hover:text-gray-500 focus-visible:text-gray-500 dark:hover:text-white dark:focus-visible:text-white" aria-label="Subscribe"><div class="flex items-center flex-col"><div class="relative w-5 h-5 transform transition-transform-opacity-color motion-reduce:transition-none md:w-7 md:h-7 duration-700 delay-700 opacity-0 -translate-y-2"><svg viewBox="0 0 448 512" role="img" class="absolute inset-0 m-auto"><path fill="currentColor" d="M224 0c-17.7 0-32 14.3-32 32V51.2C119 66 64 130.6 64 208v18.8c0 47-17.3 92.4-48.5 127.6l-7.4 8.3c-8.4 9.4-10.4 22.9-5.3 34.4S19.4 416 32 416H416c12.6 0 24-7.4 29.2-18.9s3.1-25-5.3-34.4l-7.4-8.3C401.3 319.2 384 273.9 384 226.8V208c0-77.4-55-142-128-156.8V32c0-17.7-14.3-32-32-32zm45.3 493.3c12-12 18.7-28.3 18.7-45.3H224 160c0 17 6.7 33.3 18.7 45.3s28.3 18.7 45.3 18.7s33.3-6.7 45.3-18.7z"></path></svg></div><div class="mt-2 text-3xs font-normal uppercase select-none transform transition-transform-opacity-color motion-reduce:transition-none md:text-2xs xl:text-xs duration-700 delay-1000 opacity-0 -translate-y-3">Subscribe</div></div></button></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"how-to-create-your-own-pagination-in-react-and-typescript-with-tests-part-1","content":"\n## Introduction\n\nPagination can be seen a lot in both classic and modern websites today. They are the sequence of numbers assigned to pages in a website to indicate a series of related content that exists across multiple pages. They can be used to display a list of blog posts, products, search results and many more that enables the user to select a specific page from a range of pages. Many websites display pagination differently especially in cases where we can't possibly display all the numbers in between the first page and the last page. Usually, they will swap a group of items in the pagination list with an ellipsis `...` where most applicable. In this post, I'm going to teach you how to create a pagination component in [React](https://reactjs.org/) and [TypeScript](https://www.typescriptlang.org/) and learn how to achieve a 100% test coverage using [Jest](https://jestjs.io/) and [Testing Library](https://testing-library.com/). The pagination component that we'll be creating fits my idea of how pagination should be and [what I'm currently using](/posts/) in this tech blog website of mine.\n\n## Prerequisites\n\nThis is the [link to the pagination component](/react-typescript-pagination/) which we'll accomplish by the end of this post, you can see and play around with it or use it as your reference throughout this tutorial.\n\nUpon writing this post, I assume that you have some web development background and basic knowledge regarding [npm](https://www.npmjs.com/), [yarn](https://classic.yarnpkg.com/lang/en/), [HTML](https://developer.mozilla.org/en-US/docs/Web/HTML), [CSS](https://developer.mozilla.org/en-US/docs/Web/CSS), [JavaScript](https://developer.mozilla.org/en-US/docs/Web/JavaScript) and [React](https://reactjs.org/).\n\nMake sure to install [Yarn](https://classic.yarnpkg.com/lang/en/) in your system if you haven't. We use [Yarn](https://classic.yarnpkg.com/lang/en/) as our package manager, it's just like [npm](https://www.npmjs.com/) but _faster_.\n\nI've written a [separate post](/posts/local-development-setup-for-react-and-typescript-projects/) about the [IDE](https://en.wikipedia.org/wiki/Integrated_development_environment) and extensions I use to help save time and energy when writing code in React. I highly suggest that you check it out if you haven't!\n\n## Initialize your project\n\nFastest way to start a new project with React is using the [Create React App](https://create-react-app.dev/). It is an officially supported way to create single-page React applications. It offers a modern build setup with no configuration so you can focus on code, not build tools.\n\nTo create our project with React and TypeScript, run this command in your terminal:\n\n```bash\nyarn create react-app react-typescript-pagination --template typescript\n```\n\nOnce project is initiated, install the additional libraries which we'll be using later on:\n\n```bash\ncd react-typescript-pagination\nyarn add classnames\n```\n\nTo run our project, execute the command below:\n\n```bash\nyarn start\n```\n\nThis command will open your default browser and direct you to `http://localhost:3000/`. If it doesn't, you can do it yourself too.\n\nThis setup comes with live-editing or hot reloading which means when we save file changes, it will automatically update the app and reload on the browser. That's great for local development!\n\n---\n\n## Clean up the project\n\nWe're ready to code! Let's clean up our project which was created by Create React App. We won't be needing some of them. Delete or clear the contents of the following below:\n\n- src/App.css (clear contents)\n- src/App.test.tsx (delete)\n- src/logo.svg (delete)\n\nThen let's update the code in `src/App.tsx`:\n\n```tsx\nimport './App.css';\n\nexport default function App() {\n  return (\n    \u003cdiv className=\"container\"\u003e\n      \u003ch1\u003eReact TypeScript Pagination\u003c/h1\u003e\n    \u003c/div\u003e\n  );\n}\n```\n\nWe will use the `App` component as the container of our pagination component. Next, add the following code in `src/App.css`:\n\n```css\n.container {\n  width: 100%;\n  max-width: 800px;\n  margin: 0 auto;\n  padding: 20px 15px;\n  user-select: none;\n}\n```\n\nThen update the `src/index.css` as well:\n\n```css\n* {\n  box-sizing: border-box;\n}\n\nbody {\n  margin: 0;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto',\n    'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans',\n    'Helvetica Neue', sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n```\n\n---\n\n## PageLink component\n\n`PageLink` component will be the reusable component to be used in our `Pagination` component. This will return an anchor element by default and will support a custom prop `active` to make it look _active_ using its class and styles. If the prop `disabled` value is `true`, it would return a span element instead and make it look _disabled_ using its class and styles.\n\nNow let's create our `PageLink` component in `src/components/PageLink.tsx` and add the following code:\n\n```tsx\nimport { HTMLProps } from 'react';\nimport cn from 'classnames';\nimport './PageLink.css';\n\nexport type Props = HTMLProps\u003cHTMLAnchorElement\u003e \u0026 { active?: boolean };\n\nexport default function PageLink({\n  className,\n  active,\n  disabled,\n  children,\n  ...otherProps\n}: Props) {\n  const customClassName = cn('page-link', className, {\n    active,\n    disabled,\n  });\n\n  if (disabled) {\n    return \u003cspan className={customClassName}\u003e{children}\u003c/span\u003e;\n  }\n\n  return (\n    \u003ca\n      className={customClassName}\n      aria-current={active ? 'page' : undefined}\n      {...otherProps}\n    \u003e\n      {children}\n    \u003c/a\u003e\n  );\n}\n```\n\nSo in the code, we accept properties (or `props`) for our `PageLink` component to make it reusable and customizable. Since we're writing our React code in TypeScript, we initialized the type `Props` which has been reassigned with the type `HTMLProps` from [`react`](https://github.com/facebook/react) library with an argument `HTMLAnchorElement`, this means it will accept props and attributes allowed for an anchor element based on the `HTMLProps` from React. We also [intersected](https://www.typescriptlang.org/docs/handbook/2/objects.html#intersection-types) the type `HTMLProps\u003cHTMLAnchorElement\u003e` with an object containing the `active` key that is an [optional](https://www.typescriptlang.org/docs/handbook/2/objects.html#optional-properties) prop with a type of `boolean`.\n\nHere we also used [`classnames`](https://github.com/JedWatson/classnames) utility to help with joining `classNames` together conditionally.\n\n---\n\nLet's style this component by creating `src/components/PageLink.css` and add the following code:\n\n```css\n.page-link {\n  position: relative;\n  display: inline-flex;\n  border: 1px solid #dee2e6;\n  background-color: #ffffff;\n  padding: 10px 15px;\n  color: #0d6efd;\n  font-size: 16px;\n  font-weight: 500;\n  text-decoration: none;\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out,\n    border-color 0.15s ease-in-out;\n  cursor: pointer;\n}\n\n.page-link:first-child {\n  border-top-left-radius: 5px;\n  border-bottom-left-radius: 5px;\n}\n\n.page-link:last-child {\n  border-top-right-radius: 5px;\n  border-bottom-right-radius: 5px;\n}\n\n.page-link:not(:first-child) {\n  margin-left: -1px;\n}\n\n.page-link:hover,\n.page-link:focus {\n  color: #0a58ca;\n  background-color: #e9ecef;\n}\n\n.page-link:focus {\n  z-index: 3;\n}\n\n.page-link.active {\n  z-index: 2;\n  color: #ffffff;\n  border-color: #0d6efd;\n  background-color: #0d6efd;\n}\n\n.page-link.disabled {\n  color: #6c757d;\n  pointer-events: none;\n}\n```\n\n---\n\n## Pagination component\n\nNow that we have the `PageLink` component ready for use, let's create our `Pagination` component in `src/components/Pagination.tsx` and add the following code:\n\n```tsx\nimport PageLink from './PageLink';\nimport './Pagination.css';\n\nexport type Props = {\n  currentPage: number;\n  lastPage: number;\n  maxLength: number;\n  setCurrentPage: (page: number) =\u003e void;\n};\n\nexport default function Pagination({\n  currentPage,\n  lastPage,\n  maxLength,\n  setCurrentPage,\n}: Props) {\n  const pageNums = [1, 2, 3];\n\n  return (\n    \u003cnav className=\"pagination\" aria-label=\"Pagination\"\u003e\n      \u003cPageLink\n        disabled={currentPage === 1}\n        onClick={() =\u003e setCurrentPage(currentPage - 1)}\n      \u003e\n        Previous\n      \u003c/PageLink\u003e\n      {pageNums.map((pageNum, idx) =\u003e (\n        \u003cPageLink\n          key={idx}\n          active={currentPage === pageNum}\n          disabled={isNaN(pageNum)}\n          onClick={() =\u003e setCurrentPage(pageNum)}\n        \u003e\n          {pageNum}\n        \u003c/PageLink\u003e\n      ))}\n      \u003cPageLink\n        disabled={currentPage === lastPage}\n        onClick={() =\u003e setCurrentPage(currentPage + 1)}\n      \u003e\n        Next\n      \u003c/PageLink\u003e\n    \u003c/nav\u003e\n  );\n}\n```\n\nHere we have `currentPage`, `lastPage` and `maxLength` as part of the props. These three props are enough to come up with the page numbers to be displayed in our pagination. For now, let's hard code the page numbers in a variable called `pageNums`.\n\nI am exporting the type `Props` here because we're going to use that later in our test file when we write tests for this component.\n\n---\n\nI also added `setCurrentPage` function prop so that we can control the value of the `currentPage` from the parent component but it may not be needed for production because you may want to rely on the actual [URL](https://developer.mozilla.org/en-US/docs/Learn/Common_questions/What_is_a_URL) in `href` and your users will be redirected to the page depending on the `href`. If we didn't add `setCurrentPage` function prop in the component, it will look like this:\n\n```tsx\n// EXAMPLE ONLY\n...\nexport default function Pagination({\n  currentPage,\n  lastPage,\n  maxLength,\n}: Props) {\n  const baseUrl = 'https://example.com/posts';\n  const pageNums = [1, 2, 3];\n\n  return (\n    \u003cnav className=\"pagination\" aria-label=\"Pagination\"\u003e\n      \u003cPageLink\n        href={`${baseUrl}/${currentPage - 1}`}\n        disabled={currentPage === 1}\n      \u003e\n        Previous\n      \u003c/PageLink\u003e\n      {pageNums.map((pageNum, idx) =\u003e (\n        \u003cPageLink\n          key={idx}\n          href={`${baseUrl}/${pageNum}`}\n          active={currentPage === pageNum}\n          disabled={isNaN(pageNum)}\n        \u003e\n          {pageNum}\n        \u003c/PageLink\u003e\n      ))}\n      \u003cPageLink\n        href={`${baseUrl}/${currentPage + 1}`}\n        disabled={currentPage === lastPage}\n      \u003e\n        Next\n      \u003c/PageLink\u003e\n    \u003c/nav\u003e\n  );\n}\n```\n\nThis is just an example, your base URL may be different and the way you handle the different page URLs may also be different, the page number could be in the query params instead of being part of the path. I hope I can leave that up to you - you can use the code above for your reference.\n\n---\n\nNow, let's add styles for this `Pagination` component in `src/components/Pagination.css` with the following code:\n\n```css\n.pagination {\n  display: flex;\n  flex-wrap: wrap;\n}\n```\n\nThis `Pagination` component is now ready to be used in the `App` component. Let's update `src/App.tsx` with the following code changes:\n\n```tsx\nimport { useState } from 'react';\nimport Pagination from './components/Pagination';\nimport './App.css';\n\nexport default function App() {\n  const [currentPage, setCurrentPage] = useState(1);\n  const lastPage = 3;\n\n  return (\n    \u003cdiv className=\"container\"\u003e\n      \u003ch1\u003eReact TypeScript Pagination\u003c/h1\u003e\n      \u003cPagination\n        currentPage={currentPage}\n        lastPage={lastPage}\n        maxLength={7}\n        setCurrentPage={setCurrentPage}\n      /\u003e\n    \u003c/div\u003e\n  );\n}\n```\n\nOnce you save the changes, this is how our component will look like on the page:\n\n![Screenshot of pagination built in React and TypeScript](/images/posts/how-to-create-your-own-pagination-in-react-and-typescript-with-tests/pagination.png)\n\nTry playing around with the buttons in the `Pagination` component to see how it changes the current page and set it as the _active_ page.\n\n---\n\n## Pagination logic\n\nIt's time to figure out the logic for the page numbers in the pagination. We need to create a function that would generate an array of page numbers that would be displayed in our `Pagination` component. The function would accept three arguments: the `currentPage`, the `lastPage` and the `maxLength`. The function would return an array of page numbers and the length of the array must not exceed the `maxLength`. To keep things simple and easy to understand, let's use `7` as the `maxLength` for all the examples.\n\nFor example, we have `1` as our `currentPage` and `5` as our `lastPage`. The function should return: `[1, 2, 3, 4, 5]`. The result array consists of the `currentPage`, the `lastPage` and the numbers in between them. The length of the result array is `5` which is less than `7` (the maximum of items our result array can have).\n\nAnother example, let's say we have `5` as our `currentPage` and `7` as our `lastPage`. The function should return `[1, 2, 3, 4, 5, 6, 7]`. The result array consists of the `currentPage`, the `lastPage`, the numbers in between them and the numbers before the `currentPage` down to the first page `1`. We were able to include all the numbers before the `currentPage` down to the first page because the length of the result array is still `7` which is equal to maximum array length `7`.\n\nIf I call the function in JavaScript where first argument is `currentPage`, second argument is `lastPage` and third argument is the `maxLength`, here's how it would look like along with their expected results:\n\n```js\ngetPaginationItems(1, 5, 7); // expected result: [1, 2, 3, 4, 5]\ngetPaginationItems(5, 7, 7); // expected result: [1, 2, 3, 4, 5, 6, 7]\n```\n\nThis function should also be able to handle where `lastPage` is more than the `maxLength`, it should keep the items within the `maxLength` but it will replace some page number(s) as ellipsis `...` where most applicable, here are some of the examples with their expected results:\n\n```js\ngetPaginationItems(1, 10, 7); // expected: [1, 2, 3, ..., 8, 9, 10]\ngetPaginationItems(9, 10, 7); // expected: [1, 2, 3, ..., 8, 9, 10]\ngetPaginationItems(5, 10, 7); // expected: [1, ..., 4, 5, 6, ..., 10]\ngetPaginationItems(6, 10, 7); // expected: [1, ..., 5, 6, 7, ..., 10]\ngetPaginationItems(3, 10, 7); // expected: [1, 2, 3, 4, ..., 9, 10]\ngetPaginationItems(4, 10, 7); // expected: [1, 2, 3, 4, 5, ..., 10]\ngetPaginationItems(7, 10, 7); // expected: [1, ..., 6, 7, 8, 9, 10]\ngetPaginationItems(8, 10, 7); // expected: [1, 2, ..., 7, 8, 9, 10]\n```\n\nYou might be scratching your head right now, that's how I felt when I was thinking of how to solve this as well. Don't worry! To actually solve this, at least for my solution, we will have to break them up into a couple of cases and conditions which I think makes it easy to understand as well.\n\n\u003e Nothing is particularly hard if you divide it into small jobs.\n\u003e\n\u003e - Henry Ford\n\nLet's first understand the examples and their expected results before we get to the solution part by observing them for a few seconds or minutes. After observing them, we can conclude the following:\n\n1. The first page which is `1`, the `currentPage` and the `lastPage` are always part of the result array.\n2. The length of the result array is equal to or less than the `maxLength`.\n3. Using `currentPage`, we should be able to determine the numbers to fill in the result array.\n\n_**Fun fact**: I actually use this pagination function as a programming challenge for the software engineer interviews I conduct._\n\nFirst let's create the pagination function in `src/lib/pagination.ts`:\n\n```ts\nexport function getPaginationItems(\n  currentPage: number,\n  lastPage: number,\n  maxLength: number\n) {\n  const res: Array\u003cnumber\u003e = [currentPage];\n\n  // TODO: populate result array\n\n  return res;\n}\n```\n\n---\n\nNow what should we do? Let's start with the simple ones first. In the first two examples, we have:\n\n```ts\ngetPaginationItems(1, 5, 7); // expected result: [1, 2, 3, 4, 5]\ngetPaginationItems(5, 7, 7); // expected result: [1, 2, 3, 4, 5, 6, 7]\n```\n\nHere, we actually don't need the `currentPage` to generate the expected result array. As long as the `lastPage` is less than or equal to the `maxLength`. We can just iterate from `1` up to the `lastPage`.\n\nLet's update our function in `src/lib/pagination.ts` to add the loop iteration:\n\n```ts\nexport function getPaginationItems(\n  ...\n) {\n  const res: Array\u003cnumber\u003e = [];\n\n  // handle lastPage less than or equal to maxLength\n  if (lastPage \u003c= maxLength) {\n    for (let i = 1; i \u003c= lastPage; i++) {\n      res.push(i);\n    }\n  }\n\n  return res;\n}\n```\n\nIf we run this function with the arguments from the first two examples, we will get our expected result array:\n\n```js\ngetPaginationItems(1, 5, 7); // [1, 2, 3, 4, 5]\ngetPaginationItems(5, 7, 7); // [1, 2, 3, 4, 5, 6, 7]\n```\n\nGreat! Now let's try to achieve the expected result array of the next set of examples:\n\n```js\ngetPaginationItems(1, 10, 7); // expected result: [1, 2, 3, ..., 8, 9, 10]\ngetPaginationItems(9, 10, 7); // expected result: [1, 2, 3, ..., 8, 9, 10]\n```\n\nThis is considered to fall under the case where `lastPage` is more than `maxLength` and hence it will have an ellipsis `...` in the result array.\n\nIf you notice, we have the ellipsis `...` in the middle of the result array. If you analyze it further, the expected result would be the same if the `currentPage` is either `2` or `10`.\n\nWith this, we can conclude that if either of the following conditions below are met, we can put the ellipsis `...` in the middle of the result array:\n\n2. If we deduct the `currentPage` with `1` (first page) and the difference is less than `2` (e.g. `2 - 1 = 1`, `1 - 1 = 0`).\n3. If we deduct the `lastPage` with the `currentPage` and the difference is less than `2` (e.g. `10 - 9 = 1`, `10 - 10 = 0`).\n\nThe value `2` in the conditions above should not be static because we want to get that value based on the `maxLength`. We need it to be dynamic. For example if our `maxLength` is `9`, the expected result array where ellipsis `...` is in the middle would now apply to `1`, `2`, `3`, `8`, `9` and `10`, which means the required difference in the conditions above should be less than `3`. How can we get this dynamic value?\n\nSo we have `7` as our maximum length for the result array, we are already certain that we always have the three numbers that would be part of the array: the first page (`1`), the current page (`currentPage`) and last page (`lastPage`). So we can deduct those three from the max length: `7 - 3 = 4`. Now we're left with `4` numbers to fill in the result array, let's assign `4` to a variable called `deductedMaxLength` since we deducted the `maxLength` with the confirmed page numbers count (`confirmedPagesCount`). We can divide the `deductedMaxLength` by two, `4 / 2 = 2`, since we need to fill both _sides_ of the ellipsis: _left_ and _right_. This is how we get `2` which is the dynamic variable of the conditions mentioned above. Let's name this dynamic value as `sideLength` which hopefully explains that it is the length needed on both sides of the array. Now we can use it to determine when to handle the case where ellipsis `...` should be in the middle of the result array:\n\n```ts\nexport function getPaginationItems(\n  ...\n) {\n  const res: Array\u003cnumber\u003e = [];\n\n  // handle lastPage less than or equal to maxLength\n  if (lastPage \u003c= maxLength) {\n    ...\n  }\n\n  // handle ellipsis logics\n  else {\n    const firstPage = 1;\n    const confirmedPagesCount = 3;\n    const deductedMaxLength = maxLength - confirmedPagesCount;\n    const sideLength = deductedMaxLength / 2;\n\n    // handle ellipsis in the middle\n    if (currentPage - firstPage \u003c sideLength || lastPage - currentPage \u003c sideLength) {\n      // TODO: populate result array\n    }\n  }\n\n  return res;\n}\n```\n\n---\n\nNow let's fill the result array with the numbers on the _left_ side of the ellipsis `...`. That is to iterate from the first page up to the `sideLength` plus `1` (since it includes the `firstPage`):\n\n```ts\nexport function getPaginationItems(\n  ...\n) {\n  ...\n  if (lastPage \u003c= maxLength) {\n    ...\n  }\n  ...\n  else {\n    ...\n    // handle ellipsis in the middle\n    if (currentPage - firstPage \u003c sideLength || lastPage - currentPage \u003c sideLength) {\n      for (let j = 1; j \u003c= sideLength + firstPage; j++) {\n        res.push(j);\n      }\n    }\n  }\n  ...\n}\n```\n\nTo get a better understanding of the state of our function with each changes we do, I'm going to display to you what the function currently returns for the result array and beside it will be the expected array to compare:\n\n```ts\ngetPaginationItems(1, 10, 7); // current: [1, 2, 3] | expected: [1, 2, 3, ..., 8, 9, 10]\ngetPaginationItems(9, 10, 7); // current: [1, 2, 3] | expected: [1, 2, 3, ..., 8, 9, 10]\n```\n\nNow we can simply push the ellipsis `...` in the result array but instead of pushing the triple dot string `...`, I'm just gonna push `NaN` since we have defined the type of the result array `res` to be `Array\u003cnumber\u003e`:\n\n```ts\nexport function getPaginationItems(\n  ...\n) {\n  const res: Array\u003cnumber\u003e = [];\n\n  if (lastPage \u003c= maxLength) {\n    ...\n  } else {\n    ...\n    if (currentPage - 1 \u003c= sideLength || lastPage - currentPage \u003c= sideLength) {\n      for (let j = 1; j \u003c= sideLength + firstPage; j++) {\n        res.push(j);\n      }\n\n      res.push(NaN);\n    }\n  }\n\n  return res;\n```\n\n---\n\nYou can actually change the type of the result array to `Array\u003cnumber | string\u003e` which we call a [union type in TypeScript](https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#defining-a-union-type) and then push the ellipsis `...` string in the result array. But I just felt that keeping it as just `Array\u003cnumber\u003e` and pushing `NaN` as the ellipsis would be simpler especially when handling the \"Previous\" and \"Next\" buttons where we add or subtract the `currentPage` to get their page numbers. Then we can just do a logic in the [JSX](https://reactjs.org/docs/introducing-jsx.html) to display ellipsis `...` if the item in the result array is `NaN` using the [`isNaN()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/isNaN) check.\n\nTo complete the result array for this case, let's fill the result array with the numbers on the _right_ side of the ellipsis `...` by iterating from `lastPage` minus `sideLength` up to the `lastPage`:\n\n```ts\nexport function getPaginationItems(\n  ...\n) {\n  ...\n  if (lastPage \u003c= maxLength) {\n    ...\n  }\n  ...\n  else {\n    ...\n    if (currentPage - 1 \u003c= sideLength || lastPage - currentPage \u003c= sideLength) {\n      ...\n      res.push(NaN);\n\n      for (let k = lastPage - sideLength; k \u003c= lastPage; k++) {\n        res.push(k);\n      }\n    }\n  }\n\n  return res;\n```\n\nWith the updated function, we now get the expected result array:\n\n```js\ngetPaginationItems(1, 10, 7); // [1, 2, 3, NaN, 8, 9, 10]\ngetPaginationItems(9, 10, 7); // [1, 2, 3, NaN, 8, 9, 10]\n```\n\nAwesome! Just think of `NaN` as the ellipsis here and this is exactly what we expect.\n\nLet's proceed to figure out how to achieve the expected result array from the next set of examples:\n\n```js\ngetPaginationItems(5, 10, 7); // expected: [1, ..., 4, 5, 6, ..., 10]\ngetPaginationItems(6, 10, 7); // expected: [1, ..., 5, 6, 7, ..., 10]\n```\n\nThis is also considered to fall under the case where `lastPage` is more than `maxLength` and hence it will have an ellipsis `...` in the result array.\n\nLet's first determine in what case the result array will contain two ellipses `...`. Try to think about it for a moment and look at the examples again.\n\n---\n\nNow see if your thoughts are the same as mine. It occurs if **both** of the conditions below are met:\n\n1. The difference between the `currentPage` and the first page is `4` and above (e.g. `5 - 1 = 4`, `6 - 1 = 5`).\n2. The difference between the `lastPage` and the `currentPage` is `4` and above (e.g. `10 - 5 = 5`, `10 - 6 = 4`).\n\nThe same case as the earlier case, the value `4` here should be dynamic and should depend on the `maxLength`. This value should look familiar to you, that's because we already have this dynamic value earlier in the code. That would be the `deductedMaxLength`. Let's use that and update the code with the following:\n\n```ts\nexport function getPaginationItems(\n  ...\n) {\n  ...\n  // handle ellipsis logics\n  else {\n    const firstPage = 1;\n    const confirmedPagesCount = 3;\n    const deductedMaxLength = maxLength - confirmedPagesCount;\n    const sideLength = deductedMaxLength / 2;\n\n    // handle ellipsis in the middle\n    if (\n      currentPage - firstPage \u003c sideLength ||\n      lastPage - currentPage \u003c sideLength\n    ) {\n      ...\n    }\n\n    // handle two ellipsis\n    else if (\n      currentPage - firstPage \u003e= deductedMaxLength \u0026\u0026\n      lastPage - currentPage \u003e= deductedMaxLength\n    ) {\n      // TODO: populate result array\n    }\n  }\n  ...\n}\n```\n\nAlright, now that we know the condition for the case where we have two ellipses, we can now proceed to fill in the result array with the page numbers. Let's start with a couple of observations below:\n\n1. The `currentPage` is always in the middle of the result array.\n2. The numbers surrounding the `currentPage` depend on the `maxLength`. The number needed on each side should be dynamic. If `7` is the `maxLength`, there's only one number on each side of the `currentPage`. If `9` is the `maxLength`, there should be two numbers on each side of the `currentPage`.\n3. The ellipsis `...` is always beside both the first page and the `lastPage`.\n\nLet's start with the easy change first. We just need to push the first page and `NaN` in the result array:\n\n```ts\nexport function getPaginationItems(\n  ...\n) {\n  ...\n  else {\n    ...\n\n    // handle two ellipsis\n    else if (\n      currentPage - firstPage \u003e= deductedMaxLength \u0026\u0026\n      lastPage - currentPage \u003e= deductedMaxLength\n    ) {\n      res.push(1);\n      res.push(NaN);\n    }\n  }\n  ...\n}\n```\n\nIf we run this function now, we will get the following and we can compare against the expected result array:\n\n```ts\ngetPaginationItems(5, 10, 7); // current: [1, NaN] | expected: [1, NaN, 4, 5, 6, NaN, 10]\ngetPaginationItems(6, 10, 7); // current: [1, NaN] | expected: [1, NaN, 5, 6, 7, NaN, 10]\n```\n\n---\n\nNow let's think of how to generate the numbers around the `currentPage`. If you remember in one of the observations, if `maxLength` is `7`, we need one number on each side. We can make use of another existing dynamic value which is the `sideLength`. The value of `sideLength` is `2` which is the length needed in each side, since we already know that there is an ellipsis or `NaN` on each side of the result array, we can just have to deduct the `sideLength` by `1`: `2 - 1 = 1`. Now we get `1` which means we need to generate one number on each side of the `currentPage`. We can now do the iteration for the numbers around the `currentPage` or what we may call the numbers in the middle of the result array. After the iteration, we can just push the remaining items of the result array which are `NaN` and the `lastPage`, here's the code for that:\n\n```ts\nexport function getPaginationItems(\n  ...\n) {\n  ...\n  else {\n    ...\n\n    // handle two ellipsis\n    else if (\n      currentPage - firstPage \u003e= deductedMaxLength \u0026\u0026\n      lastPage - currentPage \u003e= deductedMaxLength\n    ) {\n      const deductedSideLength = sideLength - 1;\n\n      res.push(1);\n      res.push(NaN);\n\n      for (\n        let l = currentPage - deductedSideLength;\n        l \u003c= currentPage + deductedSideLength;\n        l++\n      ) {\n        res.push(l);\n      }\n\n      res.push(NaN);\n      res.push(lastPage);\n    }\n  }\n  ...\n}\n```\n\nBy running the updated function, we are now able to get the expected result array for this set of examples:\n\n```js\ngetPaginationItems(5, 10, 7); // [1, NaN, 4, 5, 6, NaN, 10]\ngetPaginationItems(6, 10, 7); // [1, NaN, 5, 6, 7, NaN, 10]\n```\n\nWe're almost done with the pagination logic. The last thing we need to handle is when the ellipsis `...` is not in the middle of the result array. Let me show again the set of examples from earlier:\n\n```js\ngetPaginationItems(3, 10, 7); // expected: [1, 2, 3, 4, ..., 9, 10]\ngetPaginationItems(4, 10, 7); // expected: [1, 2, 3, 4, 5, ..., 10]\ngetPaginationItems(7, 10, 7); // expected: [1, ..., 6, 7, 8, 9, 10]\ngetPaginationItems(8, 10, 7); // expected: [1, 2, ..., 7, 8, 9, 10]\n```\n\nA couple of observations here:\n\n1. The ellipsis `...` could either be near the first page or near the last page. We can say the same thing for the `currentPage`.\n2. There are more numbers surrounding the `currentPage` which means less numbers on the other side of the `ellipsis`.\n3. The `currentPage` is surrounded by at least one number on both sides (left and right).\n\nWith the observations above we can split the logic of generating the result array into two cases: First case is when the `currentPage` is near the first page, we iterate from first page `1` up to the `currentPage` plus `1`, we added `1` because from one of the observations we need at least one number on each side of the `currentPage`. Second case is when the `currentPage` is near the `lastPage`, we iterate from the `lastPage` down to the `currentPage` minus `1`. How do we know if the `currentPage` is near the first page or the `lastPage`? We can simply deduct `currentPage` with the first page and deduct `lastPage` with the `currentPage`, compare the difference of both, and whoever has the lesser difference is near to the `currentPage`.\n\nHere's how that will look like in the code:\n\n```ts\nexport function getPaginationItems(\n  ...\n) {\n  ...\n  else {\n    ...\n\n    // handle two ellipsis\n    else if (\n      ...\n    ) {\n      ...\n    }\n\n    // handle ellipsis not in the middle\n    else {\n      const isNearFirstPage = currentPage - firstPage \u003c lastPage - currentPage;\n\n      if (isNearFirstPage) {\n        for (let m = 1; m \u003c= currentPage + 1; m++) {\n          res.push(m);\n        }\n\n        res.push(NaN);\n      } else {\n        for (let o = lastPage; o \u003e= currentPage - 1; o--) {\n          res.unshift(o);\n        }\n\n        res.unshift(NaN);\n      }\n    }\n  }\n  ...\n}\n```\n\n---\n\nBy the way, if you don't know what [`Array.unshift()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/unshift) does here, it is the opposite of [`Array.push()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/push), it adds one or more elements to the beginning of an array. Although, I think I can achieve the same thing for when the `currentPage` is near the `lastPage` by just using `push` instead of `unshift` by deducting the initial value instead, I think what I've done is more easy to understand. If the `currentPage` is near the `lastPage`, we basically iterate backwards starting from the `lastPage` down to the `currentPage` minus `1` to generate the expected result.\n\nIf we run this function now, this is what we currently get:\n\n```js\ngetPaginationItems(3, 10, 7); // current: [1, 2, 3, 4, NaN] | expected: [1, 2, 3, 4, NaN, 9, 10]\ngetPaginationItems(4, 10, 7); // current: [1, 2, 3, 4, 5, NaN] | expected: [1, 2, 3, 4, 5, NaN, 10]\ngetPaginationItems(7, 10, 7); // current: [NaN, 6, 7, 8, 9, 10] | expected: [1, NaN, 6, 7, 8, 9, 10]\ngetPaginationItems(8, 10, 7); // current: [NaN, 7, 8, 9, 10] | expected: [1, 2, NaN, 7, 8, 9, 10]\n```\n\nNow we just need to fill the remaining numbers into the result array. The key word here is the \"remaining length\". How do we get that? By subtracting `maxLength` in each `push` or `unshift` and track that in a variable called `remainingLength`:\n\n```ts\nexport function getPaginationItems(\n  ...\n) {\n  ...\n  else {\n    ...\n    // handle ellipsis not in the middle\n    else {\n      const isNearFirstPage = currentPage - firstPage \u003c lastPage - currentPage;\n      let remainingLength = maxLength;\n\n      if (isNearFirstPage) {\n        for (let m = 1; m \u003c= currentPage + 1; m++) {\n          res.push(m);\n          remainingLength -= 1;\n        }\n\n        res.push(NaN);\n        remainingLength -= 1;\n      } else {\n        for (let o = lastPage; o \u003e= currentPage - 1; o--) {\n          res.unshift(o);\n          remainingLength -= 1;\n        }\n\n        res.unshift(NaN);\n        remainingLength -= 1;\n      }\n    }\n  }\n  ...\n}\n```\n\n---\n\nThen using the `remainingLength`, we know how much to iterate on the other side of the `ellipsis`. If the `currentPage` is near the first page, after pushing the numbers and `NaN`, we can deduct the `lastPage` with the `remainingLength` and the difference is where we start iterating up to the `lastPage`. If the `currentPage` is near the `lastPage`, after pushing the numbers and `NaN`, we start iterating from the `remainingLength` down to the first page:\n\n```ts\nexport function getPaginationItems(\n  ...\n) {\n  ...\n  else {\n    ...\n    else {\n      ...\n      if (isNearFirstPage) {\n        ...\n        res.push(NaN);\n        remainingLength -= 1;\n\n        for (let n = lastPage - (remainingLength - 1); n \u003c= lastPage; n++) {\n          res.push(n);\n        }\n      } else {\n        ...\n        res.unshift(NaN);\n        remainingLength -= 1;\n\n        for (let p = remainingLength; p \u003e= 1; p--) {\n          res.unshift(p);\n        }\n      }\n    }\n  }\n  ...\n}\n```\n\nOnce you save the changes and run the function, we now get the expected result array:\n\n```js\ngetPaginationItems(3, 10, 7); // [1, 2, 3, 4, NaN, 9, 10]\ngetPaginationItems(4, 10, 7); // [1, 2, 3, 4, 5, NaN, 10]\ngetPaginationItems(7, 10, 7); // [1, NaN, 6, 7, 8, 9, 10]\ngetPaginationItems(8, 10, 7); // [1, 2, NaN, 7, 8, 9, 10]\n```\n\nVery nice! We're finally done with the pagination function.\n\n---\n\nWe all know what to do now. Let's go ahead and update the `Pagination` component in `src/components/Pagination.tsx` to use the `getPaginationItems` function:\n\n```tsx\nimport { getPaginationItems } from '../lib/pagination';\n...\nexport default function Pagination({\n  ...\n}: Props) {\n  const pageNums = getPaginationItems(currentPage, lastPage, maxLength);\n\n  return (\n    \u003cnav className=\"pagination\" aria-label=\"Pagination\"\u003e\n      ...\n      {pageNums.map((pageNum, idx) =\u003e (\n        \u003cPageLink\n          ...\n        \u003e\n          {!isNaN(pageNum) ? pageNum : '...'}\n        \u003c/PageLink\u003e\n      ))}\n      ...\n    \u003c/nav\u003e\n  );\n}\n```\n\nLet's also make our application more interesting by updating the `lastPage` to `20` in the `App` component in `src/App.tsx` so that it can display more page numbers in the `Pagination` component:\n\n```tsx\n...\nexport default function App() {\n  const [currentPage, setCurrentPage] = useState(1);\n  const lastPage = 20;\n\n  return (\n    ...\n  );\n}\n```\n\nSave those changes and let's test it out!\n\n---\n\nHere's a demo of the fully operational pagination component we've just built:\n\n![GIF of navigating in React Pagination](/images/posts/how-to-create-your-own-pagination-in-react-and-typescript-with-tests/pagination-navigating.gif)\n\nAnd there you have it! You can now proudly say that you have built your very own pagination component in React and TypeScript.\n\nIt's time to write some tests for the pagination component. Please proceed to the [next part](/posts/how-to-create-your-own-pagination-in-react-and-typescript-with-tests-part-2) of this post.\n","previousPost":{"id":"local-development-setup-for-nextjs-typescript-and-tailwindcss-projects","title":"Local development setup for Next.js projects with TypeScript and TailwindCSS","date":"2022-07-20","excerpt":"A quick way to get started with the React framework for production","category":"technology","videoUrl":"https://youtu.be/2Zb93oc0068"},"nextPost":{"id":"how-to-create-your-own-pagination-in-react-and-typescript-with-tests-part-2","title":"How to create your own pagination in React and TypeScript with tests (Part 2)","date":"2022-08-15","excerpt":"Learn how to build a modern page navigation in a reactive and reusable way","category":"technology","videoUrl":"https://youtu.be/FQA-6Nyr6kM"},"title":"How to create your own pagination in React and TypeScript with tests (Part 1)","date":"2022-08-15","excerpt":"Learn how to build a modern page navigation in a reactive and reusable way","category":"technology","videoUrl":"https://youtu.be/ZBmAJTwalGQ"}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"how-to-create-your-own-pagination-in-react-and-typescript-with-tests-part-1"},"buildId":"IO9VE2HstJh-AQGGeUXLQ","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>