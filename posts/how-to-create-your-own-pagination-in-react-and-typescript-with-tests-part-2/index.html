<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#2c2c34"/><link rel="icon" href="https://dominicarrojado.com/favicon.ico"/><link rel="manifest" href="https://dominicarrojado.com/manifest.json"/><meta name="twitter:card" content="summary_large_image"/><meta property="og:image" content="https://dominicarrojado.com/images/pages/guides-tips-and-tricks-to-web-development.png"/><meta property="og:image:alt" content="Dominic Arrojado | Guides, Tips and Tricks to Web Development"/><meta property="og:image:type" content="image/png"/><meta property="og:image:width" content="2400"/><meta property="og:image:height" content="1254"/><meta property="og:site_name" content="Dominic Arrojado"/><link rel="preload" href="/fonts/Roboto-Light.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Light.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-LightItalic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-LightItalic.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Regular.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Italic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Italic.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Medium.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Medium.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-MediumItalic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-MediumItalic.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Bold.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Bold.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-BoldItalic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-BoldItalic.woff" as="font" type="font/woff" crossorigin="anonymous"/><title>How to create your own pagination in React and TypeScript with tests (Part 2) | Dominic Arrojado</title><meta name="robots" content="index,follow"/><meta name="description" content="Learn how to build a modern page navigation in a reactive and reusable way"/><meta property="og:title" content="How to create your own pagination in React and TypeScript with tests (Part 2) | Dominic Arrojado"/><meta property="og:description" content="Learn how to build a modern page navigation in a reactive and reusable way"/><meta property="og:url" content="https://dominicarrojado.com/posts/how-to-create-your-own-pagination-in-react-and-typescript-with-tests-part-2/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2022-08-15T14:00:00Z"/><meta property="article:modified_time" content="2022-08-15T14:00:00Z"/><meta property="article:author" content="https://dominicarrojado.com/about/"/><link rel="canonical" href="https://dominicarrojado.com/posts/how-to-create-your-own-pagination-in-react-and-typescript-with-tests-part-2/"/><meta name="next-head-count" content="39"/><link rel="preload" href="/_next/static/css/903b127ae59964e1.css" as="style"/><link rel="stylesheet" href="/_next/static/css/903b127ae59964e1.css" data-n-g=""/><link rel="preload" href="/_next/static/css/82d01f71dc75279c.css" as="style"/><link rel="stylesheet" href="/_next/static/css/82d01f71dc75279c.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-9ee1fe28cecbc786.js" defer=""></script><script src="/_next/static/chunks/framework-73b8966a3c579ab0.js" defer=""></script><script src="/_next/static/chunks/main-f0c986bda8fad686.js" defer=""></script><script src="/_next/static/chunks/pages/_app-53900c3339f14317.js" defer=""></script><script src="/_next/static/chunks/374-b35b83a20fdd9d5b.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-e0b6ec643205bfdf.js" defer=""></script><script src="/_next/static/zVBr5-EnPo_rvV_D8ZC7e/_buildManifest.js" defer=""></script><script src="/_next/static/zVBr5-EnPo_rvV_D8ZC7e/_ssgManifest.js" defer=""></script></head><body><div id="__next"><noscript>
            <iframe
              src="https://www.googletagmanager.com/ns.html?id=GTM-TSMLTPT"
              height="0"
              width="0"
              style="display: none; visibility: hidden"
            ></iframe>
          </noscript><div tabindex="-1" class="h-full outline-none"><header class="fixed top-0 z-40 flex w-full items-center"><a href="#main" tabindex="0" class="absolute -left-96 -top-96 -z-50 h-px w-px overflow-hidden text-center text-white focus:inset-x-0 focus:top-4 focus:z-50 focus:m-auto focus:h-auto focus:w-44 focus:sm:w-52 focus:xl:w-56">Skip to main content</a><a class="absolute left-3.5 top-3.5 z-50 flex border border-white bg-gray-750 bg-opacity-90 p-1.5 shadow-3xl transform transition duration-500 ease-in-out hover:bg-opacity-100 hover:shadow-md motion-reduce:transition-none sm:left-4 sm:top-4 md:left-5 md:top-5 md:border-2 lg:left-8 lg:top-8 -translate-y-full opacity-0" aria-label="Dominic Arrojado logo" href="/"><svg viewBox="0 0 25750 29700" role="img" class="h-7 w-7 text-white transition-colors duration-300 sm:h-8 sm:w-8 md:h-10 md:w-10 xl:h-11 xl:w-11"><path fill="currentColor" d="M4850 19266H1025V2039l4600-129c2511 0 4500 735 5970 2206 1470 1470 2206 3423 2206 5854 0 6199-2985 9296-8951 9296zM4086 4719v11751c494 48 1025 72 1599 72 1543 0 2752-558 3624-1679s1310-2688 1310-4705c0-3684-1712-5524-5135-5524-329 0-795 28-1398 85zm17656 21711l-1437-3969h-6721l974-2655h4730l-2242-6854 1518-4167 7010 17645zM17826 435h3307L10351 29313H7044l4243-11322c1982-1513 2973-4055 2973-7627 0-171-4-340-11-506l3577-9423z"></path></svg></a><div class="absolute right-3.5 top-3.5 ml-auto flex items-end gap-3 sm:right-4 sm:top-4 sm:gap-4 md:right-5 md:top-5 md:gap-5 lg:right-8 lg:top-8 lg:gap-6" style="padding-right:var(--scrollbar-width, 0)" data-testid="header-buttons"><button data-command="" data-disclosure="" aria-expanded="false" class="group flex min-w-8 flex-col items-center outline-none md:min-w-10 xl:min-w-11" aria-label="Toggle menu"><div class="h-0.5 w-6 rounded bg-gray-400 dark:bg-gray-300 transform transition group-hover:bg-gray-500 group-focus-visible:bg-gray-500 motion-reduce:transition-none dark:group-hover:bg-white dark:group-focus-visible:bg-white md:h-1 md:w-7 xl:w-8 duration-700 opacity-0 translate-x-1/2" style="transition-delay:0ms" data-testid="menu-stack"></div><div class="h-0.5 w-6 rounded bg-gray-400 dark:bg-gray-300 transform transition group-hover:bg-gray-500 group-focus-visible:bg-gray-500 motion-reduce:transition-none dark:group-hover:bg-white dark:group-focus-visible:bg-white md:h-1 md:w-7 xl:w-8 mt-1.5 duration-700 opacity-0 -translate-x-1/2" style="transition-delay:100ms" data-testid="menu-stack"></div><div class="h-0.5 w-6 rounded bg-gray-400 dark:bg-gray-300 transform transition group-hover:bg-gray-500 group-focus-visible:bg-gray-500 motion-reduce:transition-none dark:group-hover:bg-white dark:group-focus-visible:bg-white md:h-1 md:w-7 xl:w-8 mt-1.5 duration-700 opacity-0 translate-x-1/2" style="transition-delay:200ms" data-testid="menu-stack"></div><div class="mt-1.5 select-none text-3xs font-normal uppercase text-gray-400 dark:text-gray-300 transform transition-transform-opacity-color duration-700 group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-gray-100 md:mt-2 md:text-2xs xl:text-xs -translate-y-3 opacity-0">Menu</div></button></div></header><span id=":R366:" style="position:fixed"></span><div id="main"></div><section class="relative flex flex-col items-center justify-center overflow-hidden bg-gray-550 px-6 text-center dark:bg-gray-650 sm:px-20 lg:px-32 min-h-96 py-28"><div class="absolute left-0 top-0 h-full w-full bg-center bg-repeat invert-[.1] dark:invert-0 transition-opacity duration-1250 motion-safe:animate-slide motion-reduce:transition-none opacity-0" style="background-image:url(&#x27;/images/bg/pattern.png&#x27;)"></div><div class="overflow-hidden py-2" style="opacity:1"><h1 class="text-3xl font-bold leading-tight text-white transform transition duration-700 motion-reduce:transition-none sm:text-4xl md:text-5xl lg:text-6xl xl:text-7xl translate-y-full opacity-0">How to create your own pagination in React and TypeScript with tests (Part 2)</h1></div><div class="overflow-hidden" style="opacity:1"><p class="font-light text-white transform transition duration-700 motion-reduce:transition-none xl:text-2xl translate-y-full opacity-0">Learn how to build a modern page navigation in a reactive and reusable way</p></div></section><section class="px-6 pb-20 pt-16 sm:px-8 sm:pb-24 sm:pt-20 md:pb-28 md:pt-24 lg:px-10 xl:pb-32 xl:pt-28 transform transition-transform-opacity duration-700 motion-reduce:transition-none opacity-0" data-testid="section"><div class="mx-auto -mt-8 w-11/12 max-w-screen-3xl pb-8 sm:-mt-10 sm:pb-10 md:-mt-12 md:pb-12 lg:w-5/6"><ins class="adsbygoogle mx-auto block max-w-[1200px] adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="4984498713" data-ad-format="auto" data-full-width-responsive="true" data-testid="ad-unit"></ins></div><div class="mx-auto flex w-11/12 max-w-screen-3xl items-center justify-between lg:w-5/6"><div class="mr-4 text-sm text-gray-400 sm:text-base xl:text-lg">Last Updated: <time dateTime="2022-08-15">August 15, 2022</time></div><div class="rounded bg-gray-200 px-1.5 py-0.5 text-2xs capitalize dark:bg-gray-600 md:px-2 md:py-1 md:text-xs xl:text-sm">technology</div></div><div class="mx-auto mt-4 w-11/12 max-w-screen-3xl lg:w-5/6"><a class="group inline-flex select-none items-center font-normal dark:hover:text-white transition-colors duration-300 hover:text-black group-hover:text-black motion-reduce:transition-none" target="_blank" rel="noopener noreferrer nofollow" href="https://youtu.be/FQA-6Nyr6kM"><svg viewBox="0 0 576 512" role="img" class="mr-2 h-6 w-6 text-gray-400 transition-colors duration-300 group-hover:text-red motion-reduce:transition-none dark:group-hover:text-white sm:mr-3 sm:h-7 sm:w-7 xl:h-8 xl:w-8"><path fill="currentColor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"></path></svg> <!-- -->Watch it on YouTube<svg viewBox="0 0 320 512" role="img" class="ml-2 inline-block h-2 w-2 text-black opacity-30 dark:text-white transform transition duration-300 group-hover:translate-x-1.5 group-hover:opacity-100 motion-reduce:transition-none sm:ml-2.5 sm:h-2.5 sm:w-2.5 md:ml-3 md:h-3 md:w-3 xl:h-3.5 xl:w-3.5"><path fill="currentColor" d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"></path></svg></a></div><article class="prose mx-auto w-11/12 max-w-screen-3xl dark:prose-dark sm:prose-lg lg:w-5/6 xl:prose-xl mt-8 sm:mt-10 xl:mt-14" data-clarity-region="article" data-testid="content"><h2>Introduction</h2>
<p>This is a continuation from <a href="/posts/how-to-create-your-own-pagination-in-react-and-typescript-with-tests-part-1/">Part 1</a>.</p>
<h2>Prerequisites</h2>
<p>To get started with testing, first install the package below:</p>
<pre><code class="hljs language-bash">yarn add @faker-js/faker
</code></pre>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/faker-js/faker"><code>@faker-js/faker</code></a> helps us generate massive amounts of fake (but realistic) data for testing. Check out the guide for <code>faker</code> <a target="_blank" rel="noopener noreferrer nofollow" href="https://fakerjs.dev/guide/">here</a>.</p>
<div><ins class="adsbygoogle mx-auto block max-w-[1200px] adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<h2>Add tests for getPaginationItems function</h2>
<p>For test files, I like to separate them in a folder so that it&#x27;s less cluttered when viewing the main files. Create a new folder named <code>__tests__</code> under the <code>src/lib</code>. This is where we will put the test files for the utility functions under the <code>src/lib</code> folder.</p>
<p>Since we are writing tests for the <code>getPaginationItems</code> function in <code>pagination.ts</code>, create a file under <code>src/lib/__tests__</code> and name it <code>pagination.test.ts</code>. This is a common naming convention for test files, make sure it matches the file name that you are testing then add the infix <code>test</code> for the test file name.</p>
<p>Now let&#x27;s add in the structure of the test:</p>
<pre><code class="hljs language-ts"><span class="hljs-keyword">import</span> { getPaginationItems } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../pagination&#x27;</span>;

describe(<span class="hljs-string">&#x27;pagination utilities&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  describe(<span class="hljs-string">&#x27;getPaginationItems()&#x27;</span>, <span class="hljs-function">() =&gt;</span> {});
});
</code></pre>
<p>In your test files, Jest puts <a target="_blank" rel="noopener noreferrer nofollow" href="https://jestjs.io/docs/api">functions and objects</a> into the global environment. <a target="_blank" rel="noopener noreferrer nofollow" href="https://jestjs.io/docs/api#describename-fn"><code>describe</code></a> is one of the functions available globally, so with the setup of Create React App, we don&#x27;t need to require or import anything to use them. <code>describe</code> creates a block that groups together several related tests. So ideally the description should be describing what we are testing, so in this case I used the <code>pagination utilities</code> since the <code>pagination.ts</code> file may include other utility functions in the future then another <code>describe</code> block for the <code>getPaginationItems</code> function. Feel free to rename them according to your preference if you feel there&#x27;s a better description that describes what we are testing.</p>
<div><ins class="adsbygoogle mx-auto block max-w-[1200px] adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>Next we can add a test case inside the <code>describe</code> block:</p>
<pre><code class="hljs language-ts">...
describe(<span class="hljs-string">&#x27;pagination utilities&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  describe(<span class="hljs-string">&#x27;getPaginationItems()&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    it(<span class="hljs-string">&#x27;should handle lastPage less than maxLength&#x27;</span>, <span class="hljs-function">() =&gt;</span> {});
  });
});
</code></pre>
<p>The <a target="_blank" rel="noopener noreferrer nofollow" href="https://jestjs.io/docs/api#testname-fn-timeout"><code>it</code></a> (or <code>test</code>) method is another global function by Jest that runs a test. This is how we can have different test cases. Let&#x27;s add the code for our first test case:</p>
<pre><code class="hljs language-ts">...
describe(<span class="hljs-string">&#x27;pagination utilities&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  describe(<span class="hljs-string">&#x27;getPaginationItems()&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    it(<span class="hljs-string">&#x27;should handle lastPage less than or equal to maxLength&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
      expect(getPaginationItems(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>)).toEqual([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]);
      expect(getPaginationItems(<span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">7</span>)).toEqual([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>]);
    });
  });
});
</code></pre>
<p>We just wrote our first test case! Pretty simple isn&#x27;t it? We used the exact same arguments from the examples in part 1.</p>
<div><ins class="adsbygoogle mx-auto block max-w-[1200px] adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>When writing tests, we often need to check that values meet certain conditions. <a target="_blank" rel="noopener noreferrer nofollow" href="https://jestjs.io/docs/expect"><code>expect()</code></a> is another one of Jest&#x27;s global functions that gives us access to a number of &quot;matchers&quot; that let us validate different things. The matcher we&#x27;re using here is <a target="_blank" rel="noopener noreferrer nofollow" href="https://jestjs.io/docs/expect#toequalvalue"><code>.toEqual()</code></a> which will compare recursively all properties of object instances (also known as &quot;deep&quot; equality).</p>
<p>You might be thinking here why we didn&#x27;t use <code>faker</code> to generate the arguments for us randomly. That&#x27;s because we would need to create a function in the test file to generate the expected result depending on the arguments, we&#x27;ll probably end up copying the code from the main file and that will make the test file complicated and difficult to understand. Hence, it would be better to hardcode the arguments along with the expected result array. If you want to have more confidence in the test cases, you can add more arguments to the test.</p>
<p>Now save your changes and let&#x27;s verify if this test case will pass or not. In your terminal, run the script command available in <code>package.json</code> to run the tests:</p>
<pre><code class="hljs language-bash">yarn <span class="hljs-built_in">test</span> --coverage
</code></pre>
<p>The <code>--coverage</code> parameter will show you how many percentages you have covered in each file of your project and/or if you have missed any lines to test. Once the command ran successfully, the terminal should display something like this:</p>
<img src="/images/posts/how-to-create-your-own-pagination-in-react-and-typescript-with-tests/get-pagination-items-test-coverage-incomplete.png" alt="Screenshot of get pagination items function incomplete test coverage" loading="lazy"/>
<p>Of course, it will pass as expected because we already know that our function was working well from part 1.</p>
<div><ins class="adsbygoogle mx-auto block max-w-[1200px] adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>By the way, when you run <code>yarn test</code> in a Create React App project, Jest will launch in watch mode. Every time you save a file, it will re-run the tests, like how <code>yarn start</code> recompiles the code. That helps to save time when writing tests because we don&#x27;t have to run the test command again and again on every file change.</p>
<p>Now that you know how to write a test. The other test cases should be easy enough for you to write on your own. Just remember the arguments from the examples earlier in part 1 and validate with their expected array result. You can use the comments we added in the code as your test cases the same way I did for the first test case. Challenge yourself to write those test cases and you can compare it with my code below when you&#x27;re done.</p>
<p>Done? Now check whether you did something similar with my code below. Here&#x27;s the rest of test cases:</p>
<pre><code class="hljs language-ts">...
describe(<span class="hljs-string">&#x27;pagination utilities&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  describe(<span class="hljs-string">&#x27;getPaginationItems()&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    ...
    it(<span class="hljs-string">&#x27;should handle ellipsis in the middle&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
      expect(getPaginationItems(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>)).toEqual([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-literal">NaN</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>]);
      expect(getPaginationItems(<span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>)).toEqual([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-literal">NaN</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>]);
    });

    it(<span class="hljs-string">&#x27;should handle two ellipsis&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
      expect(getPaginationItems(<span class="hljs-number">5</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>)).toEqual([<span class="hljs-number">1</span>, <span class="hljs-literal">NaN</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-literal">NaN</span>, <span class="hljs-number">10</span>]);
      expect(getPaginationItems(<span class="hljs-number">6</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>)).toEqual([<span class="hljs-number">1</span>, <span class="hljs-literal">NaN</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-literal">NaN</span>, <span class="hljs-number">10</span>]);
    });

    it(<span class="hljs-string">&#x27;handle ellipsis not in the middle&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
      expect(getPaginationItems(<span class="hljs-number">3</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>)).toEqual([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-literal">NaN</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>]);
      expect(getPaginationItems(<span class="hljs-number">4</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>)).toEqual([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-literal">NaN</span>, <span class="hljs-number">10</span>]);
      expect(getPaginationItems(<span class="hljs-number">7</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>)).toEqual([<span class="hljs-number">1</span>, <span class="hljs-literal">NaN</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>]);
      expect(getPaginationItems(<span class="hljs-number">8</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>)).toEqual([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-literal">NaN</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>]);
    });
  });
});
</code></pre>
<p>I hope you got it right. If not, don&#x27;t worry. Just keep learning and practicing and you&#x27;ll get there!</p>
<p>Once you save the changes, you can check your terminal which keeps track of the files changes and runs the test command and you&#x27;ll see a whopping 100% test coverage!</p>
<img src="/images/posts/how-to-create-your-own-pagination-in-react-and-typescript-with-tests/get-pagination-items-test-coverage-complete.png" alt="Screenshot of get pagination items function complete test coverage" loading="lazy"/>
<p>I find it very satisfying to see them all green. Don&#x27;t you too?</p>
<div><ins class="adsbygoogle mx-auto block max-w-[1200px] adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<h2>Add tests for PageLink component</h2>
<p>Now moving on to adding tests for the <code>PageLink</code> component.</p>
<p>Let&#x27;s start with a simple test case that the element rendered by our <code>PageLink</code> component is an <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a">anchor element</a> by <em>default</em> (because if <code>disabled</code> prop value is <code>true</code> then the <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/span">span element</a> is rendered. We will need to provide a children when we render the component, so we can use <code>faker</code> to generate random data for us. Here&#x27;s how the first test case for <code>PageLink</code> component in <code>src/components/__tests__/PageLink.test.tsx</code> will be:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> { faker } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@faker-js/faker&#x27;</span>;
<span class="hljs-keyword">import</span> { render, screen } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@testing-library/react&#x27;</span>;
<span class="hljs-keyword">import</span> PageLink <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../PageLink&#x27;</span>;

describe(<span class="hljs-string">&#x27;&lt;PageLink /&gt;&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  it(<span class="hljs-string">&#x27;should render anchor element by default&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> text = faker.lorem.sentence();

    render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">PageLink</span>&gt;</span>{text}<span class="hljs-tag">&lt;/<span class="hljs-name">PageLink</span>&gt;</span></span>);

    <span class="hljs-keyword">const</span> el = screen.queryByText(text);

    expect(el?.tagName).toBe(<span class="hljs-string">&#x27;A&#x27;</span>);
  });
});
</code></pre>
<p>So in the code above, we generated a random lorem ipsum sentence using <code>faker</code> as a text and used that as children for the <code>PageLink</code> component. Then, we executed the <a target="_blank" rel="noopener noreferrer nofollow" href="https://testing-library.com/docs/react-testing-library/api/#render"><code>render()</code></a> method from the Testing Library to render our <code>PageLink</code> component in a test environment.</p>
<p>After rendering the component, we queried for the element by using a method from Testing Library called <a target="_blank" rel="noopener noreferrer nofollow" href="https://testing-library.com/docs/queries/about/#screen"><code>screen</code></a>, you can pass a <a target="_blank" rel="noopener noreferrer nofollow" href="https://testing-library.com/docs/queries/about/#queryoptions"><code>queryOptions</code></a> object with the query type. See the <a target="_blank" rel="noopener noreferrer nofollow" href="https://testing-library.com/docs/queries/about/">documentation</a> for each query type to see available options such as <a target="_blank" rel="noopener noreferrer nofollow" href="https://testing-library.com/docs/queries/bytext">ByText API</a>.</p>
<p>After getting the element, we did an assertion by using the <code>expect()</code> method and passing the element&#x27;s tag name as the argument, and running the matcher method <a target="_blank" rel="noopener noreferrer nofollow" href="https://jestjs.io/docs/expect#tobevalue"><code>.toBe()</code></a> which compares primitive values or to check referential identity of object instances.</p>
<div><ins class="adsbygoogle mx-auto block max-w-[1200px] adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>In case you&#x27;re wondering, we also have <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/testing-library/jest-dom#custom-matchers">custom matchers</a> methods which are specific to the <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model/Introduction">DOM</a>. We can actually use one right now. Usually for anchor elements, it will have an <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#attr-href"><code>href</code></a> attribute. Hence, we can further increase the reliability of this test case by generating a random <a target="_blank" rel="noopener noreferrer nofollow" href="https://en.wikipedia.org/wiki/URL">URL</a> using <code>faker</code> and pass that as the value for the <code>href</code> prop and adding the check using the custom matcher <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/testing-library/jest-dom#tohaveattribute"><code>.toHaveAttribute()</code></a>:</p>
<pre><code class="hljs language-tsx">...
describe(<span class="hljs-string">&#x27;&lt;PageLink /&gt;&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  it(<span class="hljs-string">&#x27;should render anchor element by default&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> text = faker.lorem.sentence();
    <span class="hljs-keyword">const</span> href = faker.internet.url();

    render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">PageLink</span> <span class="hljs-attr">href</span>=<span class="hljs-string">{href}</span>&gt;</span>{text}<span class="hljs-tag">&lt;/<span class="hljs-name">PageLink</span>&gt;</span></span>);

    <span class="hljs-keyword">const</span> el = screen.queryByText(text);

    expect(el?.tagName).toBe(<span class="hljs-string">&#x27;A&#x27;</span>);
    expect(el).toHaveAttribute(<span class="hljs-string">&#x27;href&#x27;</span>, href);
  });
});

</code></pre>
<p>In each test case of a React component, we will have to render the component again because the <code>@testing-library/react@9.0.0</code> or higher automatically runs the <a target="_blank" rel="noopener noreferrer nofollow" href="https://testing-library.com/docs/react-testing-library/api/#cleanup"><code>cleanup</code></a> in <a target="_blank" rel="noopener noreferrer nofollow" href="https://jestjs.io/docs/api#aftereachfn-timeout"><code>afterEach</code></a>. That&#x27;s totally valid because we usually render the component with different props in each test case.</p>
<div><ins class="adsbygoogle mx-auto block max-w-[1200px] adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>Since we&#x27;ll be writing a couple more test cases for the <code>PageLink</code> component, instead of directly rendering the component using the <code>render</code> function, I&#x27;m going to create a reusable function that renders the component to reduce code duplications. This will also make it easier if ever next time we have to rename our component, we can just change it within the reusable function and not in different locations of the test file. We can create the function inside the <code>describe</code> block so all the test cases under it can use it. We will also import <code>Props</code> from the <code>PageLink</code> component file to use it as the type for the argument of this reusable function since we also utilize TypeScript when writing tests. Here&#x27;s the code for that:</p>
<pre><code class="hljs language-tsx">...
<span class="hljs-keyword">import</span> PageLink, { Props } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../PageLink&#x27;</span>;

describe(<span class="hljs-string">&#x27;&lt;PageLink /&gt;&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> renderComponent = <span class="hljs-function">(<span class="hljs-params">{ children, ...props }: Props</span>) =&gt;</span>
    render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">PageLink</span> {<span class="hljs-attr">...props</span>}&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">PageLink</span>&gt;</span></span>);

  it(<span class="hljs-string">&#x27;should render anchor element by default&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> text = faker.lorem.sentence();
    <span class="hljs-keyword">const</span> href = faker.internet.url();

    renderComponent({ href, <span class="hljs-attr">children</span>: text });

    ...
  });
});
</code></pre>
<p>Once you saved the changes, you can check your terminal to see the test result:</p>
<img src="/images/posts/how-to-create-your-own-pagination-in-react-and-typescript-with-tests/page-link-test-coverage-incomplete-1.png" alt="Screenshot of PageLink component incomplete test coverage" loading="lazy"/>
<p>Using what you&#x27;ve learned from the first test case, try to write the test case that it should or can accept the <code>className</code> prop. For the validation, you can compare the element&#x27;s class name using the custom matcher <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/testing-library/jest-dom#tohaveclass"><code>.toHaveClass()</code></a>.</p>
<div><ins class="adsbygoogle mx-auto block max-w-[1200px] adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>Done? See if you wrote a similar code to the test case below:</p>
<pre><code class="hljs language-tsx">...
describe(<span class="hljs-string">&#x27;&lt;PageLink /&gt;&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  ...
  it(<span class="hljs-string">&#x27;should accept className props&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> text = faker.lorem.sentence();
    <span class="hljs-keyword">const</span> className = faker.word.noun();

    renderComponent({ className, <span class="hljs-attr">children</span>: text });

    <span class="hljs-keyword">const</span> el = screen.queryByText(text);

    expect(el).toHaveClass(className);
  });
});
</code></pre>
<p>With changes saved, this test case should pass as well:</p>
<img src="/images/posts/how-to-create-your-own-pagination-in-react-and-typescript-with-tests/page-link-test-coverage-incomplete-2.png" alt="Screenshot of PageLink component incomplete test coverage" loading="lazy"/>
<p>The next few test cases would be related to <code>active</code> and <code>disabled</code> props. If either of these two prop values are <code>true</code>, their class would be added in the element&#x27;s class name. I think it&#x27;s good to have a counter check in our recent test case that <code>active</code> and <code>disabled</code> are not in the class since we didn&#x27;t pass any values to these props. Here&#x27;s the updated test case:</p>
<pre><code class="hljs language-tsx">...
describe(<span class="hljs-string">&#x27;&lt;PageLink /&gt;&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  ...
  it(<span class="hljs-string">&#x27;should accept className prop&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    ...
    expect(el).toHaveClass(className);
    expect(el).not.toHaveClass(<span class="hljs-string">&#x27;active disabled&#x27;</span>);
  });
});
</code></pre>
<div><ins class="adsbygoogle mx-auto block max-w-[1200px] adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>Now for the third test case, let&#x27;s validate that it can accept the <code>active</code> prop. If you look at the code in <code>src/components/PageLink.tsx</code> regarding how <code>active</code> prop is being used. If the <code>active</code> prop value is <code>true</code>, we can do two checks here. One is to validate that the element should have an <code>active</code> class name. Second is to validate that the element should have an <code>aria-current</code> with the value of &quot;page&quot;. Here&#x27;s the code for this test case:</p>
<pre><code class="hljs language-tsx">...
describe(<span class="hljs-string">&#x27;&lt;PageLink /&gt;&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  ...

  it(<span class="hljs-string">&#x27;should accept active props&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> text = faker.lorem.sentence();

    renderComponent({ <span class="hljs-attr">children</span>: text, <span class="hljs-attr">active</span>: <span class="hljs-literal">true</span> });

    <span class="hljs-keyword">const</span> el = screen.queryByText(text);

    expect(el).toHaveClass(<span class="hljs-string">&#x27;active&#x27;</span>);
    expect(el).toHaveAttribute(<span class="hljs-string">&#x27;aria-current&#x27;</span>, <span class="hljs-string">&#x27;page&#x27;</span>);
  });
});
</code></pre>
<p>Once the changes are saved, let&#x27;s look at the terminal again and see the test results along with the test coverage:</p>
<img src="/images/posts/how-to-create-your-own-pagination-in-react-and-typescript-with-tests/page-link-test-coverage-incomplete-3.png" alt="Screenshot of PageLink component incomplete test coverage" loading="lazy"/>
<p>In the test coverage above, we keep seeing line <code>20</code> as an uncovered line for a while now. Well, it&#x27;s time to address that! If you look at the code in <code>src/components/PageLink.tsx</code> and look for that line. You&#x27;ll see that it is related to the <code>disabled</code> prop, so let&#x27;s write the test case for when the <code>disabled</code> prop value is <code>true</code>. In the test case, we can do two checks. Can you guess what those checks are? Take a moment and after you&#x27;ve made your guess, see and compare it with my code for this test case:</p>
<pre><code class="hljs language-tsx">...
describe(<span class="hljs-string">&#x27;&lt;PageLink /&gt;&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  ...
  it(<span class="hljs-string">&#x27;should accept disabled props&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> text = faker.lorem.sentence();

    renderComponent({ <span class="hljs-attr">children</span>: text, <span class="hljs-attr">disabled</span>: <span class="hljs-literal">true</span> });

    <span class="hljs-keyword">const</span> el = screen.queryByText(text);

    expect(el?.tagName).toBe(<span class="hljs-string">&#x27;SPAN&#x27;</span>);
    expect(el).toHaveClass(<span class="hljs-string">&#x27;disabled&#x27;</span>);
  });
});
</code></pre>
<p>In the code above, we asserted that the element rendered is a <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/span"><code>span</code></a> element and that it has a <code>disabled</code> class name.</p>
<p>Okay, don&#x27;t forget to save your changes. Now check how the test result and coverage is looking right now:</p>
<img src="/images/posts/how-to-create-your-own-pagination-in-react-and-typescript-with-tests/page-link-test-coverage-complete.png" alt="Screenshot of PageLink component complete test coverage" loading="lazy"/>
<p>Boom, it passes as well and now with a 100% test coverage!</p>
<p>Just to wrap up the test cases for the <code>PageLink</code> component, let&#x27;s do an additional check in the first test case to validate that it doesn&#x27;t have the <code>aria-current</code> attribute which will be a counter check against the <code>active</code> prop test case:</p>
<pre><code class="hljs language-tsx">...
describe(<span class="hljs-string">&#x27;&lt;PageLink /&gt;&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  ...
  it(<span class="hljs-string">&#x27;should render anchor element by default&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    ...
    expect(el).toHaveAttribute(<span class="hljs-string">&#x27;href&#x27;</span>, href);
    expect(el).not.toHaveAttribute(<span class="hljs-string">&#x27;aria-current&#x27;</span>);
  });
  ...
});
</code></pre>
<p>Alright! We&#x27;re done with the tests for the <code>PageLink</code> component.</p>
<div><ins class="adsbygoogle mx-auto block max-w-[1200px] adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<h2>Add tests for Pagination component</h2>
<p>Let&#x27;s proceed with the final set of test cases to write. Those would be for the <code>Pagination</code> component - our main component!</p>
<p>For the first test case, we can just check that it renders the <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/nav"><code>nav</code></a> element. From the code in <code>src/components/Pagination.tsx</code>, the <code>nav</code> element has an attribute of <code>aria-label</code> with the value of &quot;Pagination&quot;. We can use that to query the element. Here&#x27;s the code for that:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> { render, screen } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@testing-library/react&#x27;</span>;
<span class="hljs-keyword">import</span> Pagination, { Props } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../Pagination&#x27;</span>;

describe(<span class="hljs-string">&#x27;&lt;Pagination /&gt;&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> renderComponent = <span class="hljs-function">(<span class="hljs-params">props: Props</span>) =&gt;</span> render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Pagination</span> {<span class="hljs-attr">...props</span>} /&gt;</span></span>);

  it(<span class="hljs-string">&#x27;should render nav element&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    renderComponent({
      <span class="hljs-attr">currentPage</span>: <span class="hljs-number">1</span>,
      <span class="hljs-attr">lastPage</span>: <span class="hljs-number">5</span>,
      <span class="hljs-attr">maxLength</span>: <span class="hljs-number">7</span>,
      <span class="hljs-attr">setCurrentPage</span>: jest.fn(),
    });

    <span class="hljs-keyword">const</span> navEl = screen.queryByLabelText(<span class="hljs-string">&#x27;Pagination&#x27;</span>);

    expect(navEl?.tagName).toBe(<span class="hljs-string">&#x27;NAV&#x27;</span>);
  });
});
</code></pre>
<p>Here, I&#x27;m just reusing the same arguments again from one of the examples in part 1 to keep the test cases simple and easy to understand. As for the <code>setCurrentPage</code> prop value, we needed to pass a function but instead of passing an anonymous function <code>() =&gt; {}</code>, we passed <code>jest.fn()</code> or what we call a <a target="_blank" rel="noopener noreferrer nofollow" href="https://jestjs.io/docs/mock-function-api">mock function</a> in Jest. They are also known as &quot;spies&quot;, because they let you spy on the behavior of a function that is called indirectly by some other code, rather than only testing the output. We don&#x27;t need to do anything with the mock function for now besides using it as a prop value.</p>
<p>Now let&#x27;s check whether this test case passes:</p>
<img src="/images/posts/how-to-create-your-own-pagination-in-react-and-typescript-with-tests/pagination-test-coverage-incomplete-1.png" alt="Screenshot of Pagination component incomplete test coverage" loading="lazy"/>
<p>Indeed it passes!</p>
<div><ins class="adsbygoogle mx-auto block max-w-[1200px] adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>In the same test case, we can also check the number of children or elements that the <code>nav</code> element should have. The page numbered elements count should be the same as the <code>lastPage</code> since <code>lastPage</code> is lesser than the <code>maxLength</code>, then we also have two extra elements which are the &quot;Previous&quot; and &quot;Next&quot; anchor elements. Let&#x27;s update the test case:</p>
<pre><code class="hljs language-tsx">...
describe(<span class="hljs-string">&#x27;&lt;Pagination /&gt;&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  ...
  it(<span class="hljs-string">&#x27;should render nav element&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> lastPage = <span class="hljs-number">5</span>;

    renderComponent({
      lastPage,
      <span class="hljs-attr">currentPage</span>: <span class="hljs-number">1</span>,
      <span class="hljs-attr">maxLength</span>: <span class="hljs-number">7</span>,
      <span class="hljs-attr">setCurrentPage</span>: jest.fn(),
    });

    <span class="hljs-keyword">const</span> navEl = screen.queryByLabelText(<span class="hljs-string">&#x27;Pagination&#x27;</span>);

    expect(navEl?.tagName).toBe(<span class="hljs-string">&#x27;NAV&#x27;</span>);
    expect(navEl?.childElementCount).toBe(lastPage + <span class="hljs-number">2</span>);
  });
});
</code></pre>
<p>And finally to complete this test case, let&#x27;s check that the elements in the <code>nav</code> element are positioned as we expected by getting the <code>nav</code> element&#x27;s <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/API/Node/childNodes"><code>childNodes</code></a> then check the text context of each elements via its index:</p>
<pre><code class="hljs language-tsx">...
describe(<span class="hljs-string">&#x27;&lt;Pagination /&gt;&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  ...
  it(<span class="hljs-string">&#x27;should render nav element&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    ...
    <span class="hljs-keyword">const</span> navEl = screen.queryByLabelText(<span class="hljs-string">&#x27;Pagination&#x27;</span>);

    expect(navEl?.tagName).toBe(<span class="hljs-string">&#x27;NAV&#x27;</span>);
    expect(navEl?.childElementCount).toBe(lastPage + <span class="hljs-number">2</span>);
    expect(navEl?.childNodes[<span class="hljs-number">0</span>]).toHaveTextContent(<span class="hljs-string">&#x27;Previous&#x27;</span>);
    expect(navEl?.childNodes[<span class="hljs-number">1</span>]).toHaveTextContent(<span class="hljs-string">&#x27;1&#x27;</span>);
    expect(navEl?.childNodes[<span class="hljs-number">2</span>]).toHaveTextContent(<span class="hljs-string">&#x27;2&#x27;</span>);
    expect(navEl?.childNodes[<span class="hljs-number">3</span>]).toHaveTextContent(<span class="hljs-string">&#x27;3&#x27;</span>);
    expect(navEl?.childNodes[<span class="hljs-number">4</span>]).toHaveTextContent(<span class="hljs-string">&#x27;4&#x27;</span>);
    expect(navEl?.childNodes[<span class="hljs-number">5</span>]).toHaveTextContent(<span class="hljs-string">&#x27;5&#x27;</span>);
    expect(navEl?.childNodes[<span class="hljs-number">6</span>]).toHaveTextContent(<span class="hljs-string">&#x27;Next&#x27;</span>);
  });
});
</code></pre>
<div><ins class="adsbygoogle mx-auto block max-w-[1200px] adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>We can refactor the code above to reduce the code duplications:</p>
<pre><code class="hljs language-tsx">...
describe(<span class="hljs-string">&#x27;&lt;Pagination /&gt;&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  ...
  it(<span class="hljs-string">&#x27;should render nav element&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    renderComponent({
      <span class="hljs-attr">currentPage</span>: <span class="hljs-number">1</span>,
      <span class="hljs-attr">lastPage</span>: <span class="hljs-number">5</span>,
      <span class="hljs-attr">maxLength</span>: <span class="hljs-number">7</span>,
      <span class="hljs-attr">setCurrentPage</span>: jest.fn(),
    });

    <span class="hljs-keyword">const</span> navEl = screen.queryByLabelText(<span class="hljs-string">&#x27;Pagination&#x27;</span>);
    <span class="hljs-keyword">const</span> navElChildTextContents = [
      <span class="hljs-string">&#x27;Previous&#x27;</span>,
      <span class="hljs-string">&#x27;1&#x27;</span>,
      <span class="hljs-string">&#x27;2&#x27;</span>,
      <span class="hljs-string">&#x27;3&#x27;</span>,
      <span class="hljs-string">&#x27;4&#x27;</span>,
      <span class="hljs-string">&#x27;5&#x27;</span>,
      <span class="hljs-string">&#x27;Next&#x27;</span>,
    ];

    expect(navEl?.tagName).toBe(<span class="hljs-string">&#x27;NAV&#x27;</span>);
    expect(navEl?.childElementCount).toBe(navElChildTextContents.length);

    navElChildTextContents.forEach(<span class="hljs-function">(<span class="hljs-params">textContent, idx</span>) =&gt;</span> {
      expect(navEl?.childNodes[idx]).toHaveTextContent(textContent);
    });
  });
});
</code></pre>
<p>Alright, this should still pass if you check your terminal after saving the changes.</p>
<div><ins class="adsbygoogle mx-auto block max-w-[1200px] adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>For the next test case, we can validate that the ellipsis <code>...</code> is rendered if the page number is <code>NaN</code> in the render function. We should use a <code>lastPage</code> that&#x27;s more than the <code>maxLength</code> in order to get a <code>NaN</code> in the page numbers array.</p>
<p>Here&#x27;s the code for that:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> { render, screen } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@testing-library/react&#x27;</span>;
<span class="hljs-keyword">import</span> Pagination, { Props } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../Pagination&#x27;</span>;

describe(<span class="hljs-string">&#x27;&lt;Pagination /&gt;&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  ...
  it(<span class="hljs-string">&#x27;should render ellipsis&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    renderComponent({
      <span class="hljs-attr">currentPage</span>: <span class="hljs-number">5</span>,
      <span class="hljs-attr">lastPage</span>: <span class="hljs-number">10</span>,
      <span class="hljs-attr">maxLength</span>: <span class="hljs-number">7</span>,
      <span class="hljs-attr">setCurrentPage</span>: jest.fn(),
    });

    <span class="hljs-keyword">const</span> navEl = screen.queryByLabelText(<span class="hljs-string">&#x27;Pagination&#x27;</span>);
    <span class="hljs-keyword">const</span> navElChildTextContents = [
      <span class="hljs-string">&#x27;Previous&#x27;</span>,
      <span class="hljs-string">&#x27;1&#x27;</span>,
      <span class="hljs-string">&#x27;...&#x27;</span>,
      <span class="hljs-string">&#x27;4&#x27;</span>,
      <span class="hljs-string">&#x27;5&#x27;</span>,
      <span class="hljs-string">&#x27;6&#x27;</span>,
      <span class="hljs-string">&#x27;...&#x27;</span>,
      <span class="hljs-string">&#x27;10&#x27;</span>,
      <span class="hljs-string">&#x27;Next&#x27;</span>,
    ];

    expect(navEl?.childElementCount).toBe(navElChildTextContents.length);

    navElChildTextContents.forEach(<span class="hljs-function">(<span class="hljs-params">textContent, idx</span>) =&gt;</span> {
      expect(navEl?.childNodes[idx]).toHaveTextContent(textContent);
    });
  });
});
</code></pre>
<p>Once we save the changes and check the test result and coverage in the terminal, we should get this:</p>
<img src="/images/posts/how-to-create-your-own-pagination-in-react-and-typescript-with-tests/pagination-test-coverage-incomplete-2.png" alt="Screenshot of Pagination component incomplete test coverage" loading="lazy"/>
<div><ins class="adsbygoogle mx-auto block max-w-[1200px] adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>For the final test case, let&#x27;s add the tests to cover the uncovered lines <code>25, 35-43</code>. If you look for these lines in <code>src/components/Pagination.tsx</code>, these are the <code>onClick</code> events for each of the <code>PageLink</code> components rendered.</p>
<p>We can use the <a target="_blank" rel="noopener noreferrer nofollow" href="https://testing-library.com/docs/dom-testing-library/api-events/#fireevent"><code>fireEvent</code></a> method which is also from the Testing Library to trigger DOM events in the test environment such as a click event.</p>
<p>Here&#x27;s an example on how to use it:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> el = screen.getByText(<span class="hljs-string">&#x27;Click Me&#x27;</span>);

fireEvent.click(el);
</code></pre>
<p>First argument it accepts is the element you want the event to get fired to while optionally, you can pass a second argument to override the event data. To fire other DOM events, you can check out the <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/testing-library/dom-testing-library/blob/master/src/event-map.js">full list here</a>.</p>
<p>So how do we validate that something happened when a <code>PageLink</code> component was clicked? Remember about &quot;spying&quot; of mock functions? We&#x27;ll be doing exactly that. Here&#x27;s in the initial code for the last test case:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> { fireEvent, render, screen } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@testing-library/react&#x27;</span>;
...
describe(<span class="hljs-string">&#x27;&lt;Pagination /&gt;&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  ...
  it(<span class="hljs-string">&#x27;should handle PageLink on click&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> setCurrentPageMock = jest.fn();
    <span class="hljs-keyword">const</span> currentPage = <span class="hljs-number">5</span>;

    renderComponent({
      currentPage,
      <span class="hljs-attr">lastPage</span>: <span class="hljs-number">10</span>,
      <span class="hljs-attr">maxLength</span>: <span class="hljs-number">7</span>,
      <span class="hljs-attr">setCurrentPage</span>: setCurrentPageMock,
    });

    expect(setCurrentPageMock).not.toBeCalled();

    <span class="hljs-keyword">const</span> previousEl = screen.queryByText(<span class="hljs-string">&#x27;Previous&#x27;</span>) <span class="hljs-keyword">as</span> HTMLElement;

    fireEvent.click(previousEl);

    expect(setCurrentPageMock).toBeCalledTimes(<span class="hljs-number">1</span>);
    expect(setCurrentPageMock).toBeCalledWith(currentPage - <span class="hljs-number">1</span>);
  });
});
</code></pre>
<p>In the code above, we stored the mock function in a variable called <code>setCurrentPageMock</code>. Right after rendering the component, we first check that the <code>setCurrentPageMock</code> was not called before as a counter check. We then queried for the &quot;Previous&quot; anchor element and fired a click event. After that, we validated that <code>setCurrentPageMock</code> was called once and that it returned the new <code>currentPage</code> value which is <code>currentPage</code> minus <code>1</code> because that&#x27;s what the &quot;Previous&quot; anchor element should return when clicked.</p>
<div><ins class="adsbygoogle mx-auto block max-w-[1200px] adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>Save the changes and this should cover line <code>25</code>. Let&#x27;s verify that in the test result and coverage in the terminal:</p>
<img src="/images/posts/how-to-create-your-own-pagination-in-react-and-typescript-with-tests/pagination-test-coverage-incomplete-3.png" alt="Screenshot of Pagination component incomplete test coverage" loading="lazy"/>
<p>Great! Now to achieve a 100% test coverage for the <code>Pagination</code> component, let&#x27;s cover lines <code>35 - 43</code> in the same test case. Here&#x27;s the code for that:</p>
<pre><code class="hljs language-tsx">...
describe(<span class="hljs-string">&#x27;&lt;Pagination /&gt;&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  ...
  it(<span class="hljs-string">&#x27;should handle PageLink on click&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    ...
    <span class="hljs-keyword">const</span> previousEl = screen.queryByText(<span class="hljs-string">&#x27;Previous&#x27;</span>) <span class="hljs-keyword">as</span> HTMLElement;

    fireEvent.click(previousEl);

    expect(setCurrentPageMock).toBeCalledTimes(<span class="hljs-number">1</span>);
    expect(setCurrentPageMock).toBeCalledWith(currentPage - <span class="hljs-number">1</span>);

    setCurrentPageMock.mockClear();

    <span class="hljs-keyword">const</span> nextEl = screen.queryByText(<span class="hljs-string">&#x27;Next&#x27;</span>) <span class="hljs-keyword">as</span> HTMLElement;

    fireEvent.click(nextEl);

    expect(setCurrentPageMock).toBeCalledTimes(<span class="hljs-number">1</span>);
    expect(setCurrentPageMock).toBeCalledWith(currentPage + <span class="hljs-number">1</span>);

    setCurrentPageMock.mockClear();

    <span class="hljs-keyword">const</span> numText = <span class="hljs-string">&#x27;4&#x27;</span>;
    <span class="hljs-keyword">const</span> numEl = screen.queryByText(numText) <span class="hljs-keyword">as</span> HTMLElement;

    fireEvent.click(numEl);

    expect(setCurrentPageMock).toBeCalledTimes(<span class="hljs-number">1</span>);
    expect(setCurrentPageMock).toBeCalledWith(<span class="hljs-built_in">Number</span>(numText));
  });
});
</code></pre>
<p>This will now cover both the click event of a page number anchor element (<code>4</code>) and the &quot;Next&quot; anchor element. In the added code above, we called <a target="_blank" rel="noopener noreferrer nofollow" href="https://jestjs.io/docs/mock-function-api#mockfnmockclear"><code>setCurrentPageMock.mockClear()</code></a> right after the first assertions to clear all information stored such as how many times the mock function was called and what it was called with. It is useful when we want to do another assertion such as what we did above.</p>
<div><ins class="adsbygoogle mx-auto block max-w-[1200px] adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>We can refactor the code above to reduce code duplications:</p>
<pre><code class="hljs language-tsx">...
describe(<span class="hljs-string">&#x27;&lt;Pagination /&gt;&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  ...
  it(<span class="hljs-string">&#x27;should handle PageLink on click&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> setCurrentPageMock = jest.fn();
    <span class="hljs-keyword">const</span> currentPage = <span class="hljs-number">5</span>;
    <span class="hljs-keyword">const</span> btnItems = [
      {
        <span class="hljs-attr">text</span>: <span class="hljs-string">&#x27;Previous&#x27;</span>,
        <span class="hljs-attr">pageNum</span>: currentPage - <span class="hljs-number">1</span>,
      },
      {
        <span class="hljs-attr">text</span>: <span class="hljs-string">&#x27;Next&#x27;</span>,
        <span class="hljs-attr">pageNum</span>: currentPage + <span class="hljs-number">1</span>,
      },
      {
        <span class="hljs-attr">text</span>: <span class="hljs-string">&#x27;4&#x27;</span>,
        <span class="hljs-attr">pageNum</span>: <span class="hljs-number">4</span>,
      },
    ];

    renderComponent({
      currentPage,
      <span class="hljs-attr">lastPage</span>: <span class="hljs-number">10</span>,
      <span class="hljs-attr">maxLength</span>: <span class="hljs-number">7</span>,
      <span class="hljs-attr">setCurrentPage</span>: setCurrentPageMock,
    });

    expect(setCurrentPageMock).not.toBeCalled();

    btnItems.forEach(<span class="hljs-function">(<span class="hljs-params">{ text, pageNum }</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> btnEl = screen.queryByText(text) <span class="hljs-keyword">as</span> HTMLElement;

      fireEvent.click(btnEl);

      expect(setCurrentPageMock).toBeCalledTimes(<span class="hljs-number">1</span>);
      expect(setCurrentPageMock).toBeCalledWith(pageNum);

      setCurrentPageMock.mockClear();
    });
  });
});
</code></pre>
<p>Once the changes are saved, we should achieve a 100% test coverage for the <code>Pagination</code> component as displayed in the terminal:</p>
<img src="/images/posts/how-to-create-your-own-pagination-in-react-and-typescript-with-tests/pagination-test-coverage-complete.png" alt="Screenshot of Pagination component complete test coverage" loading="lazy"/>
<p>Nice job! You have completed building your own pagination component in React and TypeScript and also wrote tests for it with a 100% test coverage using Jest and Testing Library. Give yourself a pat in the back because you deserve it!</p>
<div><ins class="adsbygoogle mx-auto block max-w-[1200px] adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>I hope you have learned a lot from this post, especially if you&#x27;re new to TypeScript and Jest. If you found this post useful, please help to share this post to your network, colleagues or friends that may find this useful too.</p>
<p>If you need the final code of the pagination component as a reference, here&#x27;s the <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/dominicarrojado/react-typescript-pagination">GitHub repository</a>.</p>
<p>There are more posts to come for building your own components in React and TypeScript so stay tuned and come back to my blog when it&#x27;s out. See ya!</p></article><div class="mx-auto w-11/12 max-w-screen-3xl lg:w-5/6"><p class="mt-16 text-gray-400">Found an issue with this post?<!-- --> <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/dominicarrojado/dominicarrojado.github.io/issues">Report it here</a>.</p><div class="mt-24 flex items-center justify-between"><a class="group relative pr-2" href="/posts/how-to-create-your-own-pagination-in-react-and-typescript-with-tests-part-1/"><div class=""><div class="font-normal transition-colors duration-300 group-hover:text-black motion-reduce:transition-none dark:group-hover:text-white">How to create your own pagination in React and TypeScript with tests (Part 1)</div><small class="text-gray-400 transition-colors duration-300 group-hover:text-black motion-reduce:transition-none dark:group-hover:text-white">Previous Post</small></div><svg viewBox="0 0 320 512" role="img" class="absolute bottom-0 top-0 m-auto h-2 w-2 shrink-0 text-black opacity-30 dark:text-white transform transition-transform-opacity duration-300 group-hover:opacity-100 motion-reduce:transition-none sm:h-2.5 sm:w-2.5 md:h-3 md:w-3 xl:h-3.5 xl:w-3.5 -left-5 group-hover:-translate-x-1.5 sm:-left-7 xl:-left-8"><path fill="currentColor" d="M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"></path></svg></a><div></div><a class="group relative pl-2" href="/posts/how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests-part-1/"><div class="text-right"><div class="font-normal transition-colors duration-300 group-hover:text-black motion-reduce:transition-none dark:group-hover:text-white">How to create your own bar graph in React and TypeScript with tests (Part 1)</div><small class="text-gray-400 transition-colors duration-300 group-hover:text-black motion-reduce:transition-none dark:group-hover:text-white">Next Post</small></div><svg viewBox="0 0 320 512" role="img" class="absolute bottom-0 top-0 m-auto h-2 w-2 shrink-0 text-black opacity-30 dark:text-white transform transition-transform-opacity duration-300 group-hover:opacity-100 motion-reduce:transition-none sm:h-2.5 sm:w-2.5 md:h-3 md:w-3 xl:h-3.5 xl:w-3.5 -right-5 group-hover:translate-x-1.5 sm:-right-7 xl:-right-8"><path fill="currentColor" d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"></path></svg></a></div><div class="mt-16 text-center"><a class="group inline-flex select-none items-center font-normal dark:hover:text-white transition-colors duration-300 hover:text-black group-hover:text-black motion-reduce:transition-none" href="/posts/">See Latest Posts<svg viewBox="0 0 320 512" role="img" class="ml-2 inline-block h-2 w-2 text-black opacity-30 dark:text-white transform transition duration-300 group-hover:translate-x-1.5 group-hover:opacity-100 motion-reduce:transition-none sm:ml-2.5 sm:h-2.5 sm:w-2.5 md:ml-3 md:h-3 md:w-3 xl:h-3.5 xl:w-3.5"><path fill="currentColor" d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"></path></svg></a></div></div><div class="mx-auto -mb-8 w-11/12 max-w-screen-3xl pt-8 sm:-mb-10 sm:pt-10 md:-mb-12 md:pt-12 lg:w-5/6"><ins class="adsbygoogle mx-auto block max-w-[1200px] adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="6892691691" data-ad-format="auto" data-full-width-responsive="true" data-testid="ad-unit"></ins></div></section><footer class="overflow-hidden bg-gray-100 px-6 py-20 dark:bg-gray-850 lg:overflow-auto" data-testid="footer"><ul class="relative overflow-hidden text-center motion-reduce:transition-none sm:text-lg xl:text-xl" style="height:0"><li class="absolute left-0 top-0 w-full transition-opacity duration-1000 motion-reduce:transition-none"><blockquote>“<!-- -->If there is no struggle, there is no progress.<!-- -->”</blockquote><p class="mt-1 sm:mt-2">— <!-- -->Frederick Douglass</p></li><li class="absolute left-0 top-0 w-full transition-opacity duration-1000 motion-reduce:transition-none pointer-events-none opacity-0"><blockquote>“<!-- -->It&#x27;s okay to figure out murder mysteries, but you shouldn&#x27;t need to figure out code. You should be able to read it.<!-- -->”</blockquote><p class="mt-1 sm:mt-2">— <!-- -->Steve McConnell</p></li><li class="absolute left-0 top-0 w-full transition-opacity duration-1000 motion-reduce:transition-none pointer-events-none opacity-0"><blockquote>“<!-- -->If you can&#x27;t explain it simply, you don&#x27;t understand it well enough.<!-- -->”</blockquote><p class="mt-1 sm:mt-2">— <!-- -->Albert Einstein</p></li><li class="absolute left-0 top-0 w-full transition-opacity duration-1000 motion-reduce:transition-none pointer-events-none opacity-0"><blockquote>“<!-- -->The secret of getting ahead is getting started.<!-- -->”</blockquote><p class="mt-1 sm:mt-2">— <!-- -->Mark Twain</p></li></ul><ul class="mt-10 flex max-w-full flex-wrap justify-center"><li><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" href="/donate/" class="group inline-flex cursor-pointer p-3 sm:p-4" aria-label="Show your support and donate!"><svg viewBox="0 0 512 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M256 416c114.9 0 208-93.1 208-208S370.9 0 256 0 48 93.1 48 208s93.1 208 208 208zM233.8 97.4V80.6c0-9.2 7.4-16.6 16.6-16.6h11.1c9.2 0 16.6 7.4 16.6 16.6v17c15.5.8 30.5 6.1 43 15.4 5.6 4.1 6.2 12.3 1.2 17.1L306 145.6c-3.8 3.7-9.5 3.8-14 1-5.4-3.4-11.4-5.1-17.8-5.1h-38.9c-9 0-16.3 8.2-16.3 18.3 0 8.2 5 15.5 12.1 17.6l62.3 18.7c25.7 7.7 43.7 32.4 43.7 60.1 0 34-26.4 61.5-59.1 62.4v16.8c0 9.2-7.4 16.6-16.6 16.6h-11.1c-9.2 0-16.6-7.4-16.6-16.6v-17c-15.5-.8-30.5-6.1-43-15.4-5.6-4.1-6.2-12.3-1.2-17.1l16.3-15.5c3.8-3.7 9.5-3.8 14-1 5.4 3.4 11.4 5.1 17.8 5.1h38.9c9 0 16.3-8.2 16.3-18.3 0-8.2-5-15.5-12.1-17.6l-62.3-18.7c-25.7-7.7-43.7-32.4-43.7-60.1.1-34 26.4-61.5 59.1-62.4zM480 352h-32.5c-19.6 26-44.6 47.7-73 64h63.8c5.3 0 9.6 3.6 9.6 8v16c0 4.4-4.3 8-9.6 8H73.6c-5.3 0-9.6-3.6-9.6-8v-16c0-4.4 4.3-8 9.6-8h63.8c-28.4-16.3-53.3-38-73-64H32c-17.7 0-32 14.3-32 32v96c0 17.7 14.3 32 32 32h448c17.7 0 32-14.3 32-32v-96c0-17.7-14.3-32-32-32z"></path></svg><span id=":R26i6:" style="position:fixed"></span></a></li><li><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" href="https://www.youtube.com/channel/UCWwV__qrzg5BYCSwO91Xhxg/videos?view=0&amp;sort=dd" class="group inline-flex cursor-pointer p-3 sm:p-4" aria-label="Watch my tech videos!"><svg viewBox="0 0 576 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"></path></svg><span id=":R2ai6:" style="position:fixed"></span></a></li><li><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" href="https://www.linkedin.com/in/dominic-arrojado-75ba03a9/" class="group inline-flex cursor-pointer p-3 sm:p-4" aria-label="Let&#x27;s connect on LinkedIn!"><svg viewBox="0 0 448 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg><span id=":R2ei6:" style="position:fixed"></span></a></li><li><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" href="https://github.com/dominicarrojado/" class="group inline-flex cursor-pointer p-3 sm:p-4" aria-label="Follow me on GitHub!"><svg viewBox="0 0 496 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg><span id=":R2ii6:" style="position:fixed"></span></a></li><li><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" href="mailto:dominicarrojado@gmail.com" class="group inline-flex cursor-pointer p-3 sm:p-4" aria-label="Email me!"><svg viewBox="0 0 512 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"></path></svg><span id=":R2mi6:" style="position:fixed"></span></a></li></ul><p class="mt-4 text-center text-sm text-gray-400 sm:text-base lg:mt-10 xl:text-lg"><span class="font-normal">©<!-- -->2024<!-- --> <!-- -->Dominic Arrojado</span> <span class="mt-1 block sm:hidden"></span><span class="hidden sm:inline">·</span> <a href="/privacy-policy/">Privacy Policy</a> <!-- -->·<!-- --> <a href="/disclaimer/">Disclaimer</a></p></footer><footer class="fixed bottom-0 z-40 flex w-full items-center justify-end"><div class="absolute bottom-3.5 right-3.5 ml-auto flex items-end gap-3 sm:bottom-4 sm:right-4 md:bottom-5 md:right-5 lg:bottom-8 lg:right-8" style="padding-right:var(--scrollbar-width, 0)"><button data-command="" data-disclosure="" aria-expanded="false" class="group text-gray-400 outline-none dark:text-gray-300 hover:text-gray-500 focus-visible:text-gray-500 dark:hover:text-white dark:focus-visible:text-white" aria-label="Subscribe"><div class="flex flex-col items-center"><div class="relative h-5 w-5 transform transition-transform-opacity-color motion-reduce:transition-none md:h-7 md:w-7 duration-700 -translate-y-2 opacity-0"><svg viewBox="0 0 448 512" role="img" class="absolute inset-0 m-auto"><path fill="currentColor" d="M224 0c-17.7 0-32 14.3-32 32V51.2C119 66 64 130.6 64 208v18.8c0 47-17.3 92.4-48.5 127.6l-7.4 8.3c-8.4 9.4-10.4 22.9-5.3 34.4S19.4 416 32 416H416c12.6 0 24-7.4 29.2-18.9s3.1-25-5.3-34.4l-7.4-8.3C401.3 319.2 384 273.9 384 226.8V208c0-77.4-55-142-128-156.8V32c0-17.7-14.3-32-32-32zm45.3 493.3c12-12 18.7-28.3 18.7-45.3H224 160c0 17 6.7 33.3 18.7 45.3s28.3 18.7 45.3 18.7s33.3-6.7 45.3-18.7z"></path></svg></div><div class="mt-2 select-none text-3xs font-normal uppercase transform transition-transform-opacity-color motion-reduce:transition-none md:text-2xs xl:text-xs duration-700 translate-y-3 opacity-0">Subscribe</div></div></button></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"how-to-create-your-own-pagination-in-react-and-typescript-with-tests-part-2","content":"\n## Introduction\n\nThis is a continuation from [Part 1](/posts/how-to-create-your-own-pagination-in-react-and-typescript-with-tests-part-1).\n\n## Prerequisites\n\nTo get started with testing, first install the package below:\n\n```bash\nyarn add @faker-js/faker\n```\n\n[`@faker-js/faker`](https://github.com/faker-js/faker) helps us generate massive amounts of fake (but realistic) data for testing. Check out the guide for `faker` [here](https://fakerjs.dev/guide/).\n\n---\n\n## Add tests for getPaginationItems function\n\nFor test files, I like to separate them in a folder so that it's less cluttered when viewing the main files. Create a new folder named `__tests__` under the `src/lib`. This is where we will put the test files for the utility functions under the `src/lib` folder.\n\nSince we are writing tests for the `getPaginationItems` function in `pagination.ts`, create a file under `src/lib/__tests__` and name it `pagination.test.ts`. This is a common naming convention for test files, make sure it matches the file name that you are testing then add the infix `test` for the test file name.\n\nNow let's add in the structure of the test:\n\n```ts\nimport { getPaginationItems } from '../pagination';\n\ndescribe('pagination utilities', () =\u003e {\n  describe('getPaginationItems()', () =\u003e {});\n});\n```\n\nIn your test files, Jest puts [functions and objects](https://jestjs.io/docs/api) into the global environment. [`describe`](https://jestjs.io/docs/api#describename-fn) is one of the functions available globally, so with the setup of Create React App, we don't need to require or import anything to use them. `describe` creates a block that groups together several related tests. So ideally the description should be describing what we are testing, so in this case I used the `pagination utilities` since the `pagination.ts` file may include other utility functions in the future then another `describe` block for the `getPaginationItems` function. Feel free to rename them according to your preference if you feel there's a better description that describes what we are testing.\n\n---\n\nNext we can add a test case inside the `describe` block:\n\n```ts\n...\ndescribe('pagination utilities', () =\u003e {\n  describe('getPaginationItems()', () =\u003e {\n    it('should handle lastPage less than maxLength', () =\u003e {});\n  });\n});\n```\n\nThe [`it`](https://jestjs.io/docs/api#testname-fn-timeout) (or `test`) method is another global function by Jest that runs a test. This is how we can have different test cases. Let's add the code for our first test case:\n\n```ts\n...\ndescribe('pagination utilities', () =\u003e {\n  describe('getPaginationItems()', () =\u003e {\n    it('should handle lastPage less than or equal to maxLength', () =\u003e {\n      expect(getPaginationItems(1, 5, 7)).toEqual([1, 2, 3, 4, 5]);\n      expect(getPaginationItems(5, 7, 7)).toEqual([1, 2, 3, 4, 5, 6, 7]);\n    });\n  });\n});\n```\n\nWe just wrote our first test case! Pretty simple isn't it? We used the exact same arguments from the examples in part 1.\n\n---\n\nWhen writing tests, we often need to check that values meet certain conditions. [`expect()`](https://jestjs.io/docs/expect) is another one of Jest's global functions that gives us access to a number of \"matchers\" that let us validate different things. The matcher we're using here is [`.toEqual()`](https://jestjs.io/docs/expect#toequalvalue) which will compare recursively all properties of object instances (also known as \"deep\" equality).\n\nYou might be thinking here why we didn't use `faker` to generate the arguments for us randomly. That's because we would need to create a function in the test file to generate the expected result depending on the arguments, we'll probably end up copying the code from the main file and that will make the test file complicated and difficult to understand. Hence, it would be better to hardcode the arguments along with the expected result array. If you want to have more confidence in the test cases, you can add more arguments to the test.\n\nNow save your changes and let's verify if this test case will pass or not. In your terminal, run the script command available in `package.json` to run the tests:\n\n```bash\nyarn test --coverage\n```\n\nThe `--coverage` parameter will show you how many percentages you have covered in each file of your project and/or if you have missed any lines to test. Once the command ran successfully, the terminal should display something like this:\n\n![Screenshot of get pagination items function incomplete test coverage](/images/posts/how-to-create-your-own-pagination-in-react-and-typescript-with-tests/get-pagination-items-test-coverage-incomplete.png)\n\nOf course, it will pass as expected because we already know that our function was working well from part 1.\n\n---\n\nBy the way, when you run `yarn test` in a Create React App project, Jest will launch in watch mode. Every time you save a file, it will re-run the tests, like how `yarn start` recompiles the code. That helps to save time when writing tests because we don't have to run the test command again and again on every file change.\n\nNow that you know how to write a test. The other test cases should be easy enough for you to write on your own. Just remember the arguments from the examples earlier in part 1 and validate with their expected array result. You can use the comments we added in the code as your test cases the same way I did for the first test case. Challenge yourself to write those test cases and you can compare it with my code below when you're done.\n\nDone? Now check whether you did something similar with my code below. Here's the rest of test cases:\n\n```ts\n...\ndescribe('pagination utilities', () =\u003e {\n  describe('getPaginationItems()', () =\u003e {\n    ...\n    it('should handle ellipsis in the middle', () =\u003e {\n      expect(getPaginationItems(1, 10, 7)).toEqual([1, 2, 3, NaN, 8, 9, 10]);\n      expect(getPaginationItems(9, 10, 7)).toEqual([1, 2, 3, NaN, 8, 9, 10]);\n    });\n\n    it('should handle two ellipsis', () =\u003e {\n      expect(getPaginationItems(5, 10, 7)).toEqual([1, NaN, 4, 5, 6, NaN, 10]);\n      expect(getPaginationItems(6, 10, 7)).toEqual([1, NaN, 5, 6, 7, NaN, 10]);\n    });\n\n    it('handle ellipsis not in the middle', () =\u003e {\n      expect(getPaginationItems(3, 10, 7)).toEqual([1, 2, 3, 4, NaN, 9, 10]);\n      expect(getPaginationItems(4, 10, 7)).toEqual([1, 2, 3, 4, 5, NaN, 10]);\n      expect(getPaginationItems(7, 10, 7)).toEqual([1, NaN, 6, 7, 8, 9, 10]);\n      expect(getPaginationItems(8, 10, 7)).toEqual([1, 2, NaN, 7, 8, 9, 10]);\n    });\n  });\n});\n```\n\nI hope you got it right. If not, don't worry. Just keep learning and practicing and you'll get there!\n\nOnce you save the changes, you can check your terminal which keeps track of the files changes and runs the test command and you'll see a whopping 100% test coverage!\n\n![Screenshot of get pagination items function complete test coverage](/images/posts/how-to-create-your-own-pagination-in-react-and-typescript-with-tests/get-pagination-items-test-coverage-complete.png)\n\nI find it very satisfying to see them all green. Don't you too?\n\n---\n\n## Add tests for PageLink component\n\nNow moving on to adding tests for the `PageLink` component.\n\nLet's start with a simple test case that the element rendered by our `PageLink` component is an [anchor element](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a) by _default_ (because if `disabled` prop value is `true` then the [span element](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/span) is rendered. We will need to provide a children when we render the component, so we can use `faker` to generate random data for us. Here's how the first test case for `PageLink` component in `src/components/__tests__/PageLink.test.tsx` will be:\n\n```tsx\nimport { faker } from '@faker-js/faker';\nimport { render, screen } from '@testing-library/react';\nimport PageLink from '../PageLink';\n\ndescribe('\u003cPageLink /\u003e', () =\u003e {\n  it('should render anchor element by default', () =\u003e {\n    const text = faker.lorem.sentence();\n\n    render(\u003cPageLink\u003e{text}\u003c/PageLink\u003e);\n\n    const el = screen.queryByText(text);\n\n    expect(el?.tagName).toBe('A');\n  });\n});\n```\n\nSo in the code above, we generated a random lorem ipsum sentence using `faker` as a text and used that as children for the `PageLink` component. Then, we executed the [`render()`](https://testing-library.com/docs/react-testing-library/api/#render) method from the Testing Library to render our `PageLink` component in a test environment.\n\nAfter rendering the component, we queried for the element by using a method from Testing Library called [`screen`](https://testing-library.com/docs/queries/about/#screen), you can pass a [`queryOptions`](https://testing-library.com/docs/queries/about/#queryoptions) object with the query type. See the [documentation](https://testing-library.com/docs/queries/about/) for each query type to see available options such as [ByText API](https://testing-library.com/docs/queries/bytext).\n\nAfter getting the element, we did an assertion by using the `expect()` method and passing the element's tag name as the argument, and running the matcher method [`.toBe()`](https://jestjs.io/docs/expect#tobevalue) which compares primitive values or to check referential identity of object instances.\n\n---\n\nIn case you're wondering, we also have [custom matchers](https://github.com/testing-library/jest-dom#custom-matchers) methods which are specific to the [DOM](https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model/Introduction). We can actually use one right now. Usually for anchor elements, it will have an [`href`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#attr-href) attribute. Hence, we can further increase the reliability of this test case by generating a random [URL](https://en.wikipedia.org/wiki/URL) using `faker` and pass that as the value for the `href` prop and adding the check using the custom matcher [`.toHaveAttribute()`](https://github.com/testing-library/jest-dom#tohaveattribute):\n\n```tsx\n...\ndescribe('\u003cPageLink /\u003e', () =\u003e {\n  it('should render anchor element by default', () =\u003e {\n    const text = faker.lorem.sentence();\n    const href = faker.internet.url();\n\n    render(\u003cPageLink href={href}\u003e{text}\u003c/PageLink\u003e);\n\n    const el = screen.queryByText(text);\n\n    expect(el?.tagName).toBe('A');\n    expect(el).toHaveAttribute('href', href);\n  });\n});\n\n```\n\nIn each test case of a React component, we will have to render the component again because the `@testing-library/react@9.0.0` or higher automatically runs the [`cleanup`](https://testing-library.com/docs/react-testing-library/api/#cleanup) in [`afterEach`](https://jestjs.io/docs/api#aftereachfn-timeout). That's totally valid because we usually render the component with different props in each test case.\n\n---\n\nSince we'll be writing a couple more test cases for the `PageLink` component, instead of directly rendering the component using the `render` function, I'm going to create a reusable function that renders the component to reduce code duplications. This will also make it easier if ever next time we have to rename our component, we can just change it within the reusable function and not in different locations of the test file. We can create the function inside the `describe` block so all the test cases under it can use it. We will also import `Props` from the `PageLink` component file to use it as the type for the argument of this reusable function since we also utilize TypeScript when writing tests. Here's the code for that:\n\n```tsx\n...\nimport PageLink, { Props } from '../PageLink';\n\ndescribe('\u003cPageLink /\u003e', () =\u003e {\n  const renderComponent = ({ children, ...props }: Props) =\u003e\n    render(\u003cPageLink {...props}\u003e{children}\u003c/PageLink\u003e);\n\n  it('should render anchor element by default', () =\u003e {\n    const text = faker.lorem.sentence();\n    const href = faker.internet.url();\n\n    renderComponent({ href, children: text });\n\n    ...\n  });\n});\n```\n\nOnce you saved the changes, you can check your terminal to see the test result:\n\n![Screenshot of PageLink component incomplete test coverage](/images/posts/how-to-create-your-own-pagination-in-react-and-typescript-with-tests/page-link-test-coverage-incomplete-1.png)\n\nUsing what you've learned from the first test case, try to write the test case that it should or can accept the `className` prop. For the validation, you can compare the element's class name using the custom matcher [`.toHaveClass()`](https://github.com/testing-library/jest-dom#tohaveclass).\n\n---\n\nDone? See if you wrote a similar code to the test case below:\n\n```tsx\n...\ndescribe('\u003cPageLink /\u003e', () =\u003e {\n  ...\n  it('should accept className props', () =\u003e {\n    const text = faker.lorem.sentence();\n    const className = faker.word.noun();\n\n    renderComponent({ className, children: text });\n\n    const el = screen.queryByText(text);\n\n    expect(el).toHaveClass(className);\n  });\n});\n```\n\nWith changes saved, this test case should pass as well:\n\n![Screenshot of PageLink component incomplete test coverage](/images/posts/how-to-create-your-own-pagination-in-react-and-typescript-with-tests/page-link-test-coverage-incomplete-2.png)\n\nThe next few test cases would be related to `active` and `disabled` props. If either of these two prop values are `true`, their class would be added in the element's class name. I think it's good to have a counter check in our recent test case that `active` and `disabled` are not in the class since we didn't pass any values to these props. Here's the updated test case:\n\n```tsx\n...\ndescribe('\u003cPageLink /\u003e', () =\u003e {\n  ...\n  it('should accept className prop', () =\u003e {\n    ...\n    expect(el).toHaveClass(className);\n    expect(el).not.toHaveClass('active disabled');\n  });\n});\n```\n\n---\n\nNow for the third test case, let's validate that it can accept the `active` prop. If you look at the code in `src/components/PageLink.tsx` regarding how `active` prop is being used. If the `active` prop value is `true`, we can do two checks here. One is to validate that the element should have an `active` class name. Second is to validate that the element should have an `aria-current` with the value of \"page\". Here's the code for this test case:\n\n```tsx\n...\ndescribe('\u003cPageLink /\u003e', () =\u003e {\n  ...\n\n  it('should accept active props', () =\u003e {\n    const text = faker.lorem.sentence();\n\n    renderComponent({ children: text, active: true });\n\n    const el = screen.queryByText(text);\n\n    expect(el).toHaveClass('active');\n    expect(el).toHaveAttribute('aria-current', 'page');\n  });\n});\n```\n\nOnce the changes are saved, let's look at the terminal again and see the test results along with the test coverage:\n\n![Screenshot of PageLink component incomplete test coverage](/images/posts/how-to-create-your-own-pagination-in-react-and-typescript-with-tests/page-link-test-coverage-incomplete-3.png)\n\nIn the test coverage above, we keep seeing line `20` as an uncovered line for a while now. Well, it's time to address that! If you look at the code in `src/components/PageLink.tsx` and look for that line. You'll see that it is related to the `disabled` prop, so let's write the test case for when the `disabled` prop value is `true`. In the test case, we can do two checks. Can you guess what those checks are? Take a moment and after you've made your guess, see and compare it with my code for this test case:\n\n```tsx\n...\ndescribe('\u003cPageLink /\u003e', () =\u003e {\n  ...\n  it('should accept disabled props', () =\u003e {\n    const text = faker.lorem.sentence();\n\n    renderComponent({ children: text, disabled: true });\n\n    const el = screen.queryByText(text);\n\n    expect(el?.tagName).toBe('SPAN');\n    expect(el).toHaveClass('disabled');\n  });\n});\n```\n\nIn the code above, we asserted that the element rendered is a [`span`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/span) element and that it has a `disabled` class name.\n\nOkay, don't forget to save your changes. Now check how the test result and coverage is looking right now:\n\n![Screenshot of PageLink component complete test coverage](/images/posts/how-to-create-your-own-pagination-in-react-and-typescript-with-tests/page-link-test-coverage-complete.png)\n\nBoom, it passes as well and now with a 100% test coverage!\n\nJust to wrap up the test cases for the `PageLink` component, let's do an additional check in the first test case to validate that it doesn't have the `aria-current` attribute which will be a counter check against the `active` prop test case:\n\n```tsx\n...\ndescribe('\u003cPageLink /\u003e', () =\u003e {\n  ...\n  it('should render anchor element by default', () =\u003e {\n    ...\n    expect(el).toHaveAttribute('href', href);\n    expect(el).not.toHaveAttribute('aria-current');\n  });\n  ...\n});\n```\n\nAlright! We're done with the tests for the `PageLink` component.\n\n---\n\n## Add tests for Pagination component\n\nLet's proceed with the final set of test cases to write. Those would be for the `Pagination` component - our main component!\n\nFor the first test case, we can just check that it renders the [`nav`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/nav) element. From the code in `src/components/Pagination.tsx`, the `nav` element has an attribute of `aria-label` with the value of \"Pagination\". We can use that to query the element. Here's the code for that:\n\n```tsx\nimport { render, screen } from '@testing-library/react';\nimport Pagination, { Props } from '../Pagination';\n\ndescribe('\u003cPagination /\u003e', () =\u003e {\n  const renderComponent = (props: Props) =\u003e render(\u003cPagination {...props} /\u003e);\n\n  it('should render nav element', () =\u003e {\n    renderComponent({\n      currentPage: 1,\n      lastPage: 5,\n      maxLength: 7,\n      setCurrentPage: jest.fn(),\n    });\n\n    const navEl = screen.queryByLabelText('Pagination');\n\n    expect(navEl?.tagName).toBe('NAV');\n  });\n});\n```\n\nHere, I'm just reusing the same arguments again from one of the examples in part 1 to keep the test cases simple and easy to understand. As for the `setCurrentPage` prop value, we needed to pass a function but instead of passing an anonymous function `() =\u003e {}`, we passed `jest.fn()` or what we call a [mock function](https://jestjs.io/docs/mock-function-api) in Jest. They are also known as \"spies\", because they let you spy on the behavior of a function that is called indirectly by some other code, rather than only testing the output. We don't need to do anything with the mock function for now besides using it as a prop value.\n\nNow let's check whether this test case passes:\n\n![Screenshot of Pagination component incomplete test coverage](/images/posts/how-to-create-your-own-pagination-in-react-and-typescript-with-tests/pagination-test-coverage-incomplete-1.png)\n\nIndeed it passes!\n\n---\n\nIn the same test case, we can also check the number of children or elements that the `nav` element should have. The page numbered elements count should be the same as the `lastPage` since `lastPage` is lesser than the `maxLength`, then we also have two extra elements which are the \"Previous\" and \"Next\" anchor elements. Let's update the test case:\n\n```tsx\n...\ndescribe('\u003cPagination /\u003e', () =\u003e {\n  ...\n  it('should render nav element', () =\u003e {\n    const lastPage = 5;\n\n    renderComponent({\n      lastPage,\n      currentPage: 1,\n      maxLength: 7,\n      setCurrentPage: jest.fn(),\n    });\n\n    const navEl = screen.queryByLabelText('Pagination');\n\n    expect(navEl?.tagName).toBe('NAV');\n    expect(navEl?.childElementCount).toBe(lastPage + 2);\n  });\n});\n```\n\nAnd finally to complete this test case, let's check that the elements in the `nav` element are positioned as we expected by getting the `nav` element's [`childNodes`](https://developer.mozilla.org/en-US/docs/Web/API/Node/childNodes) then check the text context of each elements via its index:\n\n```tsx\n...\ndescribe('\u003cPagination /\u003e', () =\u003e {\n  ...\n  it('should render nav element', () =\u003e {\n    ...\n    const navEl = screen.queryByLabelText('Pagination');\n\n    expect(navEl?.tagName).toBe('NAV');\n    expect(navEl?.childElementCount).toBe(lastPage + 2);\n    expect(navEl?.childNodes[0]).toHaveTextContent('Previous');\n    expect(navEl?.childNodes[1]).toHaveTextContent('1');\n    expect(navEl?.childNodes[2]).toHaveTextContent('2');\n    expect(navEl?.childNodes[3]).toHaveTextContent('3');\n    expect(navEl?.childNodes[4]).toHaveTextContent('4');\n    expect(navEl?.childNodes[5]).toHaveTextContent('5');\n    expect(navEl?.childNodes[6]).toHaveTextContent('Next');\n  });\n});\n```\n\n---\n\nWe can refactor the code above to reduce the code duplications:\n\n```tsx\n...\ndescribe('\u003cPagination /\u003e', () =\u003e {\n  ...\n  it('should render nav element', () =\u003e {\n    renderComponent({\n      currentPage: 1,\n      lastPage: 5,\n      maxLength: 7,\n      setCurrentPage: jest.fn(),\n    });\n\n    const navEl = screen.queryByLabelText('Pagination');\n    const navElChildTextContents = [\n      'Previous',\n      '1',\n      '2',\n      '3',\n      '4',\n      '5',\n      'Next',\n    ];\n\n    expect(navEl?.tagName).toBe('NAV');\n    expect(navEl?.childElementCount).toBe(navElChildTextContents.length);\n\n    navElChildTextContents.forEach((textContent, idx) =\u003e {\n      expect(navEl?.childNodes[idx]).toHaveTextContent(textContent);\n    });\n  });\n});\n```\n\nAlright, this should still pass if you check your terminal after saving the changes.\n\n---\n\nFor the next test case, we can validate that the ellipsis `...` is rendered if the page number is `NaN` in the render function. We should use a `lastPage` that's more than the `maxLength` in order to get a `NaN` in the page numbers array.\n\nHere's the code for that:\n\n```tsx\nimport { render, screen } from '@testing-library/react';\nimport Pagination, { Props } from '../Pagination';\n\ndescribe('\u003cPagination /\u003e', () =\u003e {\n  ...\n  it('should render ellipsis', () =\u003e {\n    renderComponent({\n      currentPage: 5,\n      lastPage: 10,\n      maxLength: 7,\n      setCurrentPage: jest.fn(),\n    });\n\n    const navEl = screen.queryByLabelText('Pagination');\n    const navElChildTextContents = [\n      'Previous',\n      '1',\n      '...',\n      '4',\n      '5',\n      '6',\n      '...',\n      '10',\n      'Next',\n    ];\n\n    expect(navEl?.childElementCount).toBe(navElChildTextContents.length);\n\n    navElChildTextContents.forEach((textContent, idx) =\u003e {\n      expect(navEl?.childNodes[idx]).toHaveTextContent(textContent);\n    });\n  });\n});\n```\n\nOnce we save the changes and check the test result and coverage in the terminal, we should get this:\n\n![Screenshot of Pagination component incomplete test coverage](/images/posts/how-to-create-your-own-pagination-in-react-and-typescript-with-tests/pagination-test-coverage-incomplete-2.png)\n\n---\n\nFor the final test case, let's add the tests to cover the uncovered lines `25, 35-43`. If you look for these lines in `src/components/Pagination.tsx`, these are the `onClick` events for each of the `PageLink` components rendered.\n\nWe can use the [`fireEvent`](https://testing-library.com/docs/dom-testing-library/api-events/#fireevent) method which is also from the Testing Library to trigger DOM events in the test environment such as a click event.\n\nHere's an example on how to use it:\n\n```js\nconst el = screen.getByText('Click Me');\n\nfireEvent.click(el);\n```\n\nFirst argument it accepts is the element you want the event to get fired to while optionally, you can pass a second argument to override the event data. To fire other DOM events, you can check out the [full list here](https://github.com/testing-library/dom-testing-library/blob/master/src/event-map.js).\n\nSo how do we validate that something happened when a `PageLink` component was clicked? Remember about \"spying\" of mock functions? We'll be doing exactly that. Here's in the initial code for the last test case:\n\n```tsx\nimport { fireEvent, render, screen } from '@testing-library/react';\n...\ndescribe('\u003cPagination /\u003e', () =\u003e {\n  ...\n  it('should handle PageLink on click', () =\u003e {\n    const setCurrentPageMock = jest.fn();\n    const currentPage = 5;\n\n    renderComponent({\n      currentPage,\n      lastPage: 10,\n      maxLength: 7,\n      setCurrentPage: setCurrentPageMock,\n    });\n\n    expect(setCurrentPageMock).not.toBeCalled();\n\n    const previousEl = screen.queryByText('Previous') as HTMLElement;\n\n    fireEvent.click(previousEl);\n\n    expect(setCurrentPageMock).toBeCalledTimes(1);\n    expect(setCurrentPageMock).toBeCalledWith(currentPage - 1);\n  });\n});\n```\n\nIn the code above, we stored the mock function in a variable called `setCurrentPageMock`. Right after rendering the component, we first check that the `setCurrentPageMock` was not called before as a counter check. We then queried for the \"Previous\" anchor element and fired a click event. After that, we validated that `setCurrentPageMock` was called once and that it returned the new `currentPage` value which is `currentPage` minus `1` because that's what the \"Previous\" anchor element should return when clicked.\n\n---\n\nSave the changes and this should cover line `25`. Let's verify that in the test result and coverage in the terminal:\n\n![Screenshot of Pagination component incomplete test coverage](/images/posts/how-to-create-your-own-pagination-in-react-and-typescript-with-tests/pagination-test-coverage-incomplete-3.png)\n\nGreat! Now to achieve a 100% test coverage for the `Pagination` component, let's cover lines `35 - 43` in the same test case. Here's the code for that:\n\n```tsx\n...\ndescribe('\u003cPagination /\u003e', () =\u003e {\n  ...\n  it('should handle PageLink on click', () =\u003e {\n    ...\n    const previousEl = screen.queryByText('Previous') as HTMLElement;\n\n    fireEvent.click(previousEl);\n\n    expect(setCurrentPageMock).toBeCalledTimes(1);\n    expect(setCurrentPageMock).toBeCalledWith(currentPage - 1);\n\n    setCurrentPageMock.mockClear();\n\n    const nextEl = screen.queryByText('Next') as HTMLElement;\n\n    fireEvent.click(nextEl);\n\n    expect(setCurrentPageMock).toBeCalledTimes(1);\n    expect(setCurrentPageMock).toBeCalledWith(currentPage + 1);\n\n    setCurrentPageMock.mockClear();\n\n    const numText = '4';\n    const numEl = screen.queryByText(numText) as HTMLElement;\n\n    fireEvent.click(numEl);\n\n    expect(setCurrentPageMock).toBeCalledTimes(1);\n    expect(setCurrentPageMock).toBeCalledWith(Number(numText));\n  });\n});\n```\n\nThis will now cover both the click event of a page number anchor element (`4`) and the \"Next\" anchor element. In the added code above, we called [`setCurrentPageMock.mockClear()`](https://jestjs.io/docs/mock-function-api#mockfnmockclear) right after the first assertions to clear all information stored such as how many times the mock function was called and what it was called with. It is useful when we want to do another assertion such as what we did above.\n\n---\n\nWe can refactor the code above to reduce code duplications:\n\n```tsx\n...\ndescribe('\u003cPagination /\u003e', () =\u003e {\n  ...\n  it('should handle PageLink on click', () =\u003e {\n    const setCurrentPageMock = jest.fn();\n    const currentPage = 5;\n    const btnItems = [\n      {\n        text: 'Previous',\n        pageNum: currentPage - 1,\n      },\n      {\n        text: 'Next',\n        pageNum: currentPage + 1,\n      },\n      {\n        text: '4',\n        pageNum: 4,\n      },\n    ];\n\n    renderComponent({\n      currentPage,\n      lastPage: 10,\n      maxLength: 7,\n      setCurrentPage: setCurrentPageMock,\n    });\n\n    expect(setCurrentPageMock).not.toBeCalled();\n\n    btnItems.forEach(({ text, pageNum }) =\u003e {\n      const btnEl = screen.queryByText(text) as HTMLElement;\n\n      fireEvent.click(btnEl);\n\n      expect(setCurrentPageMock).toBeCalledTimes(1);\n      expect(setCurrentPageMock).toBeCalledWith(pageNum);\n\n      setCurrentPageMock.mockClear();\n    });\n  });\n});\n```\n\nOnce the changes are saved, we should achieve a 100% test coverage for the `Pagination` component as displayed in the terminal:\n\n![Screenshot of Pagination component complete test coverage](/images/posts/how-to-create-your-own-pagination-in-react-and-typescript-with-tests/pagination-test-coverage-complete.png)\n\nNice job! You have completed building your own pagination component in React and TypeScript and also wrote tests for it with a 100% test coverage using Jest and Testing Library. Give yourself a pat in the back because you deserve it!\n\n---\n\nI hope you have learned a lot from this post, especially if you're new to TypeScript and Jest. If you found this post useful, please help to share this post to your network, colleagues or friends that may find this useful too.\n\nIf you need the final code of the pagination component as a reference, here's the [GitHub repository](https://github.com/dominicarrojado/react-typescript-pagination).\n\nThere are more posts to come for building your own components in React and TypeScript so stay tuned and come back to my blog when it's out. See ya!\n","previousPost":{"id":"how-to-create-your-own-pagination-in-react-and-typescript-with-tests-part-1","title":"How to create your own pagination in React and TypeScript with tests (Part 1)","date":"2022-08-15","excerpt":"Learn how to build a modern page navigation in a reactive and reusable way","category":"technology","videoUrl":"https://youtu.be/ZBmAJTwalGQ"},"nextPost":{"id":"how-to-create-your-own-bar-graph-in-react-and-typescript-with-tests-part-1","title":"How to create your own bar graph in React and TypeScript with tests (Part 1)","date":"2022-11-25","excerpt":"Learn how to build a bar graph with positive and negative values in a reactive and reusable way","category":"technology","videoUrl":"https://youtu.be/IPQzaSfUm7U"},"title":"How to create your own pagination in React and TypeScript with tests (Part 2)","date":"2022-08-15","excerpt":"Learn how to build a modern page navigation in a reactive and reusable way","category":"technology","videoUrl":"https://youtu.be/FQA-6Nyr6kM"}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"how-to-create-your-own-pagination-in-react-and-typescript-with-tests-part-2"},"buildId":"zVBr5-EnPo_rvV_D8ZC7e","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>