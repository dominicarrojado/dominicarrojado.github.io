<!DOCTYPE html><html><head><script>
              if (window.location.hostname !== 'localhost') {
                (function (w, d, s, l, i) {
                  w[l] = w[l] || [];
                  w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
                  var f = d.getElementsByTagName(s)[0],
                    j = d.createElement(s),
                    dl = l != 'dataLayer' ? '&l=' + l : '';
                  j.async = true;
                  j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
                  f.parentNode.insertBefore(j, f);
                })(window, document, 'script', 'dataLayer', 'GTM-TSMLTPT');
              }
            </script><link rel="preload" href="/fonts/Roboto-Light.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Light.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-LightItalic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-LightItalic.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Regular.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Italic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Italic.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Medium.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Medium.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-MediumItalic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-MediumItalic.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Bold.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Bold.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-BoldItalic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-BoldItalic.woff" as="font" type="font/woff" crossorigin="anonymous"/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0, minimum-scale=1, maximum-scale=1"/><meta name="theme-color" content="#000000"/><meta name="description" content="Learn how to build a collapsible content in a reactive and reusable way"/><meta name="author" content="Dominic Arrojado"/><link rel="canonical" href="https://dominicarrojado.com/posts/how-to-create-your-own-accordion-in-react-and-typescript-with-tests/"/><link rel="icon" href="https://dominicarrojado.com/favicon.ico"/><link rel="manifest" href="https://dominicarrojado.com/manifest.json"/><meta property="og:locale" content="en_US"/><meta property="og:type" content="website"/><meta property="og:title" content="How to create your own accordion in React and TypeScript with tests - Dominic Arrojado"/><meta property="og:description" content="Learn how to build a collapsible content in a reactive and reusable way"/><meta property="og:url" content="https://dominicarrojado.com/posts/how-to-create-your-own-accordion-in-react-and-typescript-with-tests/"/><meta property="og:site_name" content="How to create your own accordion in React and TypeScript with tests - Dominic Arrojado"/><meta property="og:image" content="https://dominicarrojado.com/images/pages/guides-tips-and-tricks-to-web-development.png"/><meta property="og:image:secure_url" content="https://dominicarrojado.com/images/pages/guides-tips-and-tricks-to-web-development.png"/><meta property="og:image:width" content="2400"/><meta property="og:image:height" content="1254"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:description" content="Learn how to build a collapsible content in a reactive and reusable way"/><meta name="twitter:title" content="How to create your own accordion in React and TypeScript with tests - Dominic Arrojado"/><meta name="twitter:image" content="https://dominicarrojado.com/images/pages/guides-tips-and-tricks-to-web-development.png"/><title>How to create your own accordion in React and TypeScript with tests - Dominic Arrojado</title><meta name="next-head-count" content="25"/><link rel="preload" href="/_next/static/css/359f39ae3ad76ac8f598.css" as="style"/><link rel="stylesheet" href="/_next/static/css/359f39ae3ad76ac8f598.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-b0542a64e9b2f4b3edf5.js" defer=""></script><script src="/_next/static/chunks/framework-2191d16384373197bc0a.js" defer=""></script><script src="/_next/static/chunks/main-8413e91205f43c931d3e.js" defer=""></script><script src="/_next/static/chunks/pages/_app-d64bb1b6656025a7b279.js" defer=""></script><script src="/_next/static/chunks/522-f7346dcade1160f9e76b.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-18fe5466e7c625e29e98.js" defer=""></script><script src="/_next/static/Xu1Pf0Urb28SWhVPbxolC/_buildManifest.js" defer=""></script><script src="/_next/static/Xu1Pf0Urb28SWhVPbxolC/_ssgManifest.js" defer=""></script></head><body><div id="__next"><noscript>
            <iframe
              src="https://www.googletagmanager.com/ns.html?id=GTM-TSMLTPT"
              height="0"
              width="0"
              style="display: none; visibility: hidden"
            ></iframe>
          </noscript><header><a class="group fixed top-3.5 left-3.5 z-50 flex shadow-3xl border border-white bg-gray-750 bg-opacity-90 p-1.5 transform transition ease-in-out duration-500 hover:shadow-md hover:bg-opacity-100 sm:top-4 sm:left-4 md:top-6 md:left-8 md:border-2 xl:left-9 xl:p-2 delay-700 opacity-0 -translate-y-full" data-testid="logo" href="/"><svg viewBox="0 0 25750 29700" class="w-7 h-7 text-white transition-colors duration-300 sm:w-8 sm:h-8 md:w-10 md:h-10 xl:w-11 xl:h-11"><path fill="currentColor" d="M4850 19266H1025V2039l4600-129c2511 0 4500 735 5970 2206 1470 1470 2206 3423 2206 5854 0 6199-2985 9296-8951 9296zM4086 4719v11751c494 48 1025 72 1599 72 1543 0 2752-558 3624-1679s1310-2688 1310-4705c0-3684-1712-5524-5135-5524-329 0-795 28-1398 85zm17656 21711l-1437-3969h-6721l974-2655h4730l-2242-6854 1518-4167 7010 17645zM17826 435h3307L10351 29313H7044l4243-11322c1982-1513 2973-4055 2973-7627 0-171-4-340-11-506l3577-9423z"></path></svg></a><div class="fixed flex items-end top-3 right-1 z-50 sm:top-3 sm:right-2 md:top-6 md:right-4 xl:top-7"><button class="group flex items-center flex-col min-w-12 rounded pt-3 pb-2 px-2 md:min-w-15.5 md:px-3 xl:min-w-18.5" tabindex="1"><div class="w-6 h-0.5 bg-gray-400 rounded dark:bg-gray-300 transform transition group-hover:bg-gray-500 dark:group-hover:bg-white md:w-7 md:h-1 xl:w-8 duration-1000 opacity-0 translate-x-1/2" style="transition-delay:500ms" data-testid="menu-stack"></div><div class="w-6 h-0.5 bg-gray-400 rounded dark:bg-gray-300 transform transition group-hover:bg-gray-500 dark:group-hover:bg-white md:w-7 md:h-1 xl:w-8 mt-1.5 duration-1000 opacity-0 -translate-x-1/2" style="transition-delay:650ms" data-testid="menu-stack"></div><div class="w-6 h-0.5 bg-gray-400 rounded dark:bg-gray-300 transform transition group-hover:bg-gray-500 dark:group-hover:bg-white md:w-7 md:h-1 xl:w-8 mt-1.5 duration-1000 opacity-0 translate-x-1/2" style="transition-delay:800ms" data-testid="menu-stack"></div><div class="mt-1.5 text-gray-400 text-3xs font-normal uppercase select-none dark:text-gray-300 transform transition-transform-opacity-color group-hover:text-gray-500 dark:group-hover:text-gray-100 md:mt-2 md:text-2xs xl:text-xs duration-700 delay-1000 opacity-0 -translate-y-3">Menu</div></button></div></header><div class="fixed top-0 right-0 z-30 w-full h-full bg-gray-750 transition-opacity duration-500 opacity-0 pointer-events-none delay-100" data-testid="menu-background"></div><div class="fixed inset-0 z-40 overflow-y-auto overflow-x-hidden w-0 h-0 pointer-events-none" data-testid="menu-container"><div class="flex justify-center items-center min-h-full"><div class="py-10 pl-8 sm:pl-0"><ul><li class="flex mb-8 transform sm:mb-10 md:mb-12 xl:mb-14 opacity-0 transition-transform translate-x-1/3 duration-300"><a class="group relative pb-2 text-3xl text-gray-300 select-none transition-colors duration-300 hover:text-white focus:text-white sm:text-4xl md:pb-3 md:text-5xl xl:pb-4 xl:text-6xl" href="/">Home<div class="absolute bottom-0 right-0 w-full h-px bg-white bg-opacity-20 z-0 pointer-events-none"></div><div class="absolute bottom-0 right-0 z-10 w-0 h-px bg-white pointer-events-none transition-width duration-300 group-hover:right-auto group-hover:left-0 group-hover:w-full"></div></a></li><li class="flex mb-8 transform sm:mb-10 md:mb-12 xl:mb-14 opacity-0 transition-transform translate-x-1/3 duration-300"><a class="group relative pb-2 text-3xl text-gray-300 select-none transition-colors duration-300 hover:text-white focus:text-white sm:text-4xl md:pb-3 md:text-5xl xl:pb-4 xl:text-6xl" href="/about/">About Me<div class="absolute bottom-0 right-0 w-full h-px bg-white bg-opacity-20 z-0 pointer-events-none"></div><div class="absolute bottom-0 right-0 z-10 w-0 h-px bg-white pointer-events-none transition-width duration-300 group-hover:right-auto group-hover:left-0 group-hover:w-full"></div></a></li><li class="flex mb-8 transform sm:mb-10 md:mb-12 xl:mb-14 opacity-0 transition-transform translate-x-1/3 duration-300"><a class="group relative pb-2 text-3xl text-gray-300 select-none transition-colors duration-300 hover:text-white focus:text-white sm:text-4xl md:pb-3 md:text-5xl xl:pb-4 xl:text-6xl" href="/projects/">Projects<div class="absolute bottom-0 right-0 w-full h-px bg-white bg-opacity-20 z-0 pointer-events-none"></div><div class="absolute bottom-0 right-0 z-10 w-0 h-px bg-white pointer-events-none transition-width duration-300 group-hover:right-auto group-hover:left-0 group-hover:w-full"></div></a></li><li class="flex mb-8 transform sm:mb-10 md:mb-12 xl:mb-14 opacity-0 transition-transform translate-x-1/3 duration-300"><a class="group relative pb-2 text-3xl text-gray-300 select-none transition-colors duration-300 hover:text-white focus:text-white sm:text-4xl md:pb-3 md:text-5xl xl:pb-4 xl:text-6xl" href="/posts/">Blog<div class="absolute bottom-0 right-0 w-full h-px bg-white bg-opacity-20 z-0 pointer-events-none"></div><div class="absolute bottom-0 right-0 z-10 w-0 h-px bg-white pointer-events-none transition-width duration-300 group-hover:right-auto group-hover:left-0 group-hover:w-full"></div></a></li></ul><ul class="flex mt-10 transform -translate-x-4 sm:-translate-x-5 md:-translate-x-6 lg:hidden"><li class="transform opacity-0 transition-transform translate-y-1/2 duration-300"><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.paypal.com/paypalme/DominicArrojado" title="Show your support and donate!" class="flex items-center p-3.5 sm:p-5 md:p-6"><svg viewBox="0 0 512 512" class="w-8 h-8 text-gray-300 transition-colors hover:text-white focus:text-white sm:w-10 sm:h-10 md:w-11 md:h-11"><path fill="currentColor" d="M256 416c114.9 0 208-93.1 208-208S370.9 0 256 0 48 93.1 48 208s93.1 208 208 208zM233.8 97.4V80.6c0-9.2 7.4-16.6 16.6-16.6h11.1c9.2 0 16.6 7.4 16.6 16.6v17c15.5.8 30.5 6.1 43 15.4 5.6 4.1 6.2 12.3 1.2 17.1L306 145.6c-3.8 3.7-9.5 3.8-14 1-5.4-3.4-11.4-5.1-17.8-5.1h-38.9c-9 0-16.3 8.2-16.3 18.3 0 8.2 5 15.5 12.1 17.6l62.3 18.7c25.7 7.7 43.7 32.4 43.7 60.1 0 34-26.4 61.5-59.1 62.4v16.8c0 9.2-7.4 16.6-16.6 16.6h-11.1c-9.2 0-16.6-7.4-16.6-16.6v-17c-15.5-.8-30.5-6.1-43-15.4-5.6-4.1-6.2-12.3-1.2-17.1l16.3-15.5c3.8-3.7 9.5-3.8 14-1 5.4 3.4 11.4 5.1 17.8 5.1h38.9c9 0 16.3-8.2 16.3-18.3 0-8.2-5-15.5-12.1-17.6l-62.3-18.7c-25.7-7.7-43.7-32.4-43.7-60.1.1-34 26.4-61.5 59.1-62.4zM480 352h-32.5c-19.6 26-44.6 47.7-73 64h63.8c5.3 0 9.6 3.6 9.6 8v16c0 4.4-4.3 8-9.6 8H73.6c-5.3 0-9.6-3.6-9.6-8v-16c0-4.4 4.3-8 9.6-8h63.8c-28.4-16.3-53.3-38-73-64H32c-17.7 0-32 14.3-32 32v96c0 17.7 14.3 32 32 32h448c17.7 0 32-14.3 32-32v-96c0-17.7-14.3-32-32-32z"></path></svg></a></li><li class="transform opacity-0 transition-transform translate-y-1/2 duration-300"><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.youtube.com/channel/UCWwV__qrzg5BYCSwO91Xhxg" title="Watch my tech videos!" class="flex items-center p-3.5 sm:p-5 md:p-6"><svg viewBox="0 0 576 512" class="w-8 h-8 text-gray-300 transition-colors hover:text-white focus:text-white sm:w-10 sm:h-10 md:w-11 md:h-11"><path fill="currentColor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"></path></svg></a></li><li class="transform opacity-0 transition-transform translate-y-1/2 duration-300"><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.linkedin.com/in/dominic-arrojado-75ba03a9/" title="Let&#x27;s connect on LinkedIn!" class="flex items-center p-3.5 sm:p-5 md:p-6"><svg viewBox="0 0 448 512" class="w-8 h-8 text-gray-300 transition-colors hover:text-white focus:text-white sm:w-10 sm:h-10 md:w-11 md:h-11"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a></li><li class="transform opacity-0 transition-transform translate-y-1/2 duration-300"><a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/dominicarrojado/" title="Follow me on GitHub!" class="flex items-center p-3.5 sm:p-5 md:p-6"><svg viewBox="0 0 496 512" class="w-8 h-8 text-gray-300 transition-colors hover:text-white focus:text-white sm:w-10 sm:h-10 md:w-11 md:h-11"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></li><li class="transform opacity-0 transition-transform translate-y-1/2 duration-300"><a target="_blank" rel="noopener noreferrer nofollow" href="mailto:dominicarrojado@gmail.com" title="Email me!" class="flex items-center p-3.5 sm:p-5 md:p-6"><svg viewBox="0 0 512 512" class="w-8 h-8 text-gray-300 transition-colors hover:text-white focus:text-white sm:w-10 sm:h-10 md:w-11 md:h-11"><path fill="currentColor" d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"></path></svg></a></li></ul></div></div></div><section class="relative flex flex-col justify-center bg-gray-750 py-28 px-6 text-center overflow-hidden transform transition-transform ease-in-out duration-500 sm:px-20 lg:px-32 min-h-96 -translate-y-full" data-testid="container"><div class="absolute top-0 left-0 w-full h-full bg-repeat bg-center animate-slide transition-opacity duration-1250 delay-500 opacity-0" style="background-image:url(&#x27;/images/bg/pattern.png&#x27;)" data-testid="background"></div><div class="overflow-hidden py-2" style="opacity:1"><h1 class="text-3xl font-bold text-white leading-tight transform transition duration-1000 delay-500 sm:text-4xl md:text-5xl lg:text-6xl xl:text-7xl opacity-0 translate-y-full">How to create your own accordion in React and TypeScript with tests</h1></div><div class="overflow-hidden" style="opacity:1"><p class="font-light text-white transform transition duration-1000 delay-1000 xl:text-2xl opacity-0 translate-y-full">Learn how to build a collapsible content in a reactive and reusable way</p></div></section><section class="pt-16 pb-20 px-6 sm:pt-20 sm:pb-24 sm:px-8 md:pt-24 md:pb-28 lg:px-10 xl:pt-28 xl:pb-32 transform transition-transform-opacity duration-1000 delay-1500 opacity-0 translate-y-10" data-testid="section"><div class="flex justify-between items-center w-11/12 max-w-screen-3xl mx-auto lg:w-5/6"><div class="mr-4 text-sm text-gray-400 sm:text-base xl:text-lg">Last Updated: <time dateTime="2021-09-23">September 23, 2021</time></div><div class="rounded py-0.5 px-1.5 bg-gray-200 text-2xs capitalize dark:bg-gray-600 md:py-1 md:px-2 md:text-xs xl:text-sm">technology</div></div><article class="w-11/12 max-w-screen-3xl mx-auto prose dark:prose-dark sm:prose-lg lg:w-5/6 xl:prose-xl mt-8 sm:mt-10 xl:mt-14" data-testid="content"><h2>Introduction</h2>
<p>Accordions (or collapsible content) are useful for when you have large amount of content to display and allow users to toggle between showing and hiding the content. This can be seen a lot in different websites today. Learn how to build your own accordion in <a href="https://reactjs.org/" target="_blank" rel="noopener noreferrer nofollow">React</a> and <a href="https://www.typescriptlang.org/" target="_blank" rel="noopener noreferrer nofollow">TypeScript</a>. I'll also cover how to write tests for it and achieve 100% coverage using <a href="https://jestjs.io/" target="_blank" rel="noopener noreferrer nofollow">Jest</a> and <a href="https://testing-library.com/" target="_blank" rel="noopener noreferrer nofollow">Testing Library</a>, these two libraries are used together to test React components. If you're new to TypeScript and Jest/Testing Library, this is a good way to start learning it with simple components like this. Alright, here we go ~</p>
<h2>Prerequisites</h2>
<p>This is the <a href="/react-typescript-accordion/">link</a> to the accordion which we'll accomplish by the end of this post, you can open it in a new tab to see, play around with it or use it as your reference throughout this tutorial.</p>
<p>By the way, upon writing this post, I assume that you have some web development background and basic knowledge regarding <a href="https://www.npmjs.com/" target="_blank" rel="noopener noreferrer nofollow">npm</a>, <a href="https://classic.yarnpkg.com/lang/en/" target="_blank" rel="noopener noreferrer nofollow">yarn</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/HTML" target="_blank" rel="noopener noreferrer nofollow">HTML</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/CSS" target="_blank" rel="noopener noreferrer nofollow">CSS</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript" target="_blank" rel="noopener noreferrer nofollow">JavaScript</a> and <a href="https://reactjs.org/" target="_blank" rel="noopener noreferrer nofollow">React</a>.</p>
<p>Some prerequisites below. Make sure to install them in your system if you haven't!</p>
<ul>
<li><a href="https://code.visualstudio.com/" target="_blank" rel="noopener noreferrer nofollow">Visual Studio Code</a></li>
<li><a href="https://classic.yarnpkg.com/lang/en/" target="_blank" rel="noopener noreferrer nofollow">Yarn</a></li>
</ul>
<p>We'll be using <a href="https://code.visualstudio.com/" target="_blank" rel="noopener noreferrer nofollow">Visual Studio Code</a> as our <a href="https://en.wikipedia.org/wiki/Integrated_development_environment" target="_blank" rel="noopener noreferrer nofollow">IDE</a> in this tutorial as we will utilize a few extensions from their <a href="https://marketplace.visualstudio.com/vscode" target="_blank" rel="noopener noreferrer nofollow">marketplace</a>. And we'll use <a href="https://classic.yarnpkg.com/lang/en/" target="_blank" rel="noopener noreferrer nofollow">Yarn</a> as our package manager, it's just like <a href="https://www.npmjs.com/" target="_blank" rel="noopener noreferrer nofollow">npm</a> but <em>faster</em>.</p>
<h2>Initialize your project</h2>
<p>Fastest way to get started with React is using <a href="https://create-react-app.dev/" target="_blank" rel="noopener noreferrer nofollow">Create React App</a>. It is an officially supported way to create single-page React applications. It offers a modern build setup with no configuration so you can focus on code, not build tools.</p>
<p>To create our project with React and TypeScript, run this command in your terminal:</p>
<pre><code>yarn create react-app react-typescript-accordion --template typescript
</code></pre>
<p>Open the created project in your Visual Studio Code. Then open the terminal in Visual Studio Code. The keyboard shortcut would be <code> Ctrl</code> + <code>`</code>.</p>
<p>Then, let's run our project to see if everything is working fine:</p>
<pre><code>yarn start
</code></pre>
<p>This command will open your default browser and go to <code>http://localhost:3000/</code>. If it doesn't, you can do it yourself too. The page should show something like this:</p>
<p><img src="/images/posts/how-to-create-your-own-accordion-in-react-and-typescript-with-tests/create-react-app-default-page.png" alt="Screenshot of Create React App default page"></p>
<p>This setup comes with live-editing or hot reloading which means when we save file changes, it will automatically update the app and reload on the browser. That's great for local development!</p>
<h2>Install Prettier Extension in Visual Studio Code</h2>
<p>Before we start coding, let's install <a href="https://prettier.io/" target="_blank" rel="noopener noreferrer nofollow">Prettier</a>, it's a code formatter that saves us time and energy by formatting the code when we save file changes.</p>
<p>Click on the "Extensions" tab and look for "Prettier" and install it. You can also install it via this <a href="https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode" target="_blank" rel="noopener noreferrer nofollow">link</a>.</p>
<p><img src="/images/posts/how-to-create-your-own-accordion-in-react-and-typescript-with-tests/install-prettier-extension-in-visual-studio-code.png" alt="Screenshot of how to install Prettier extension in Visual Studio Code"></p>
<p>After Prettier is installed, we still need to enable the formatting feature by updating our settings in Visual Studio Code. Let's create a folder in the root directory and name it <code>.vscode</code>. Then, create a file inside it and name it <code>settings.json</code>. Then update the created file with the code below:</p>
<pre><code>{
  "editor.formatOnSave": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "editor.tabSize": 2
}
</code></pre>
<p>Feel free to modify <code>editor.tabSize</code> as that can be changed according to your preference.</p>
<p>Next, create another file in the root directory and name it <code>.prettierrc</code>. Update the created file and add the code below:</p>
<pre><code>{
  "singleQuote": true,
  "trailingComma": "es5",
  "arrowParens": "always",
  "tabWidth": 2
}
</code></pre>
<p>This will be the config for Prettier to follow when formatting the code. These configs can be updated according to your preference.</p>
<p>Alright, once the changes are done. That should make our Prettier work.</p>
<h2>Clean up the project</h2>
<p>Now, let's clean up our project which was created by Create React App. We won't be needing some of them. Delete or clear the contents of the following below:</p>
<ul>
<li>src/App.css (clear contents)</li>
<li>src/App.test.tsx (delete)</li>
<li>src/logo.svg (delete)</li>
</ul>
<p>Then let's update the code of <code>src/App.tsx</code>:</p>
<pre><code>import './App.css';

function App() {
  return &#x3C;div className="container">&#x3C;/div>;
}

export default App;
</code></pre>
<p>We will use the <code>App</code> component as the container of our accordion. So just a small update on the <code>src/App.css</code>:</p>
<pre><code>.container {
  width: 600px;
  max-width: 100%;
  margin: 0 auto;
  padding: 20px 15px;
}
</code></pre>
<p>And update the <code>src/index.css</code> too:</p>
<pre><code>* {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto',
    'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans',
    'Helvetica Neue', sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
</code></pre>
<h2>Sample data + Accordion component</h2>
<p>Now, let's create a sample data that we can pass to our accordion component because we would want our accordion to be reusable, so it should accept data as props. We can initialize the data from a parent component so for our case, it would be <code>src/App.tsx</code>. I have a sample data that we can use here, update the code of it:</p>
<pre><code>import './App.css';
import Accordion from './components/Accordion';

function App() {
  const accordionItems = [
    {
      title: 'Accordion Item #1',
      content: (
        &#x3C;div>
          &#x3C;strong>This is the first item's accordion body.&#x3C;/strong> It is hidden
          by default, but shown when title is clicked. It will also be hidden if
          the title is clicked again or when another item is clicked. You can
          pass HTML tags in the content such as &#x3C;u>underline tag&#x3C;/u>,{' '}
          &#x3C;i>italic&#x3C;/i>, or even another list like this:
          &#x3C;ul>
            &#x3C;li>Bread&#x3C;/li>
            &#x3C;li>Eggs&#x3C;/li>
            &#x3C;li>Milk&#x3C;/li>
          &#x3C;/ul>
        &#x3C;/div>
      ),
    },
    {
      title: 'Accordion Item #2',
      content: (
        &#x3C;div>
          &#x3C;strong>This is the second item's accordion body.&#x3C;/strong> It is
          hidden by default, but shown when title is clicked. It will also be
          hidden if the title is clicked again or when another item is clicked.
          You can pass HTML tags in the content such as &#x3C;u>underline tag&#x3C;/u>,{' '}
          &#x3C;i>italic&#x3C;/i>, or even another list like this:
          &#x3C;ul>
            &#x3C;li>Bread&#x3C;/li>
            &#x3C;li>Eggs&#x3C;/li>
            &#x3C;li>Milk&#x3C;/li>
          &#x3C;/ul>
        &#x3C;/div>
      ),
    },
    {
      title: 'Accordion Item #3',
      content: (
        &#x3C;div>
          &#x3C;strong>This is the third item's accordion body.&#x3C;/strong> It is hidden
          by default, but shown when title is clicked. It will also be hidden if
          the title is clicked again or when another item is clicked. You can
          pass HTML tags in the content such as &#x3C;u>underline tag&#x3C;/u>,{' '}
          &#x3C;i>italic&#x3C;/i>, or even another list like this:
          &#x3C;ul>
            &#x3C;li>Bread&#x3C;/li>
            &#x3C;li>Eggs&#x3C;/li>
            &#x3C;li>Milk&#x3C;/li>
          &#x3C;/ul>
        &#x3C;/div>
      ),
    },
  ];

  return (
    &#x3C;div className="container">
      &#x3C;Accordion items={accordionItems} />
    &#x3C;/div>
  );
}

export default App;
</code></pre>
<p>If you save the changes we would get errors in the meantime as we would still need to create the <code>Accordion</code> component. So create a folder under <code>src</code> and name it <code>components</code>. We can put our reusable components in this folder. After that, create a file named <code>Accordion.tsx</code> inside the <code>components</code> folder.</p>
<p>Then, let's add the code for <code>src/components/Accordion.tsx</code>:</p>
<pre><code>import { AccordionData } from '../types';

function Accordion({ items }: { items: Array&#x3C;AccordionData> }) {
  return &#x3C;ul className="accordion">&#x3C;/ul>;
}

export default Accordion;
</code></pre>
<p>If you're new to TypeScript, the object besides the props will look foreign to you. It would be explained better once we do the remaining change. For now, create a new file <code>types.ts</code> inside the <code>src</code> folder and add the following code to it:</p>
<pre><code>import { ReactNode } from 'react';

export type AccordionData = {
  title: string;
  content: ReactNode;
};
</code></pre>
<p>Now comes the explanation part for those of you who are new to TypeScript, feel free to skip this if you are already familiar with it. So we are defining the type for the <code>items</code> props that our <code>Accordion</code> component will accept. So we declared a <code>type AccordionData</code> which is an <code>object</code> that contains <code>title</code> that should only be a <code>string</code>, one of the <a href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html" target="_blank" rel="noopener noreferrer nofollow">primitive types</a> in TypeScript, and <code>content</code> that should only be a <code>ReactNode</code>, a type defined by <code>React</code> library, same thing we did when we defined our type <code>AccordionData</code>. We can hover to a non-primitive type and it will show a tooltip with more information about the type like this:</p>
<p><img src="/images/posts/how-to-create-your-own-accordion-in-react-and-typescript-with-tests/hovering-type-in-visual-studio-code.png" alt="Screenshot of hovering a type in Visual Studio Code"></p>
<p>You can also <code>Cmd</code> + <code>click</code> (<code>Ctrl</code> + <code>click</code> on Windows) to view the type with even more information.</p>
<p><img src="/images/posts/how-to-create-your-own-accordion-in-react-and-typescript-with-tests/checking-type-in-visual-studio-code.png" alt="Screenshot of checking a type in Visual Studio Code"></p>
<p>So we created <code>src/types.ts</code> so that it can be exported and imported across different components which you will see in a bit. Since <code>Accordion</code> component accepts an array of <code>AccordionData</code>, we wrapped it in type <code>Array</code> like this - <code>Array&#x3C;AccordionData></code>. You can also wrap it like this - <code>AccordionData[]</code>, I just prefer the former as it I can read it as "array of accordion data".</p>
<p>Now if we didn't pass the expected data or type for <code>items</code> props to our accordion component, our IDE would display an inline error and hovering it would show something like this:</p>
<p><img src="/images/posts/how-to-create-your-own-accordion-in-react-and-typescript-with-tests/inline-error-by-typescript-in-visual-studio-code.png" alt="Screenshot of inline error by TypeScript in Visual Studio Code"></p>
<p>This is why TypeScript is really helpful for catching errors early while you're still writing the code.</p>
<h2>Accordion Item component</h2>
<p>Alright, let's create a new component under <code>components</code> and name it <code>AccordionItem.tsx</code>. This will be the component used by each item in our accordion. Add the following code below to display both the title and content of each item:</p>
<pre><code>import { AccordionData } from '../types';

function AccordionItem({ data }: { data: AccordionData }) {
  return (
    &#x3C;li className="accordion-item">
      &#x3C;h2 className="accordion-item-title">
        &#x3C;button className="accordion-item-btn">{data.title}&#x3C;/button>
      &#x3C;/h2>
      &#x3C;div className="accordion-item-container">
        &#x3C;div className="accordion-item-content">{data.content}&#x3C;/div>
      &#x3C;/div>
    &#x3C;/li>
  );
}

export default AccordionItem;
</code></pre>
<p>As you can see here, we've also added a type for <code>data</code> which should only be <code>AccordionData</code>, this is where we reused the type we declared and exported earlier in <code>src/types.ts</code>.</p>
<p>Now let's go back to <code>src/components/Accordion.tsx</code> and update the code to loop through the items and pass the data to the imported <code>AccordionItem</code> component:</p>
<pre><code>...
import AccordionItem from './AccordionItem';
...
    &#x3C;ul className="accordion">
      {items.map((item, idx) => (
        &#x3C;AccordionItem key={idx} data={item} />
      ))}
    &#x3C;/ul>
...
</code></pre>
<p>Once you save the changes, our web app should be working fine now without any errors and display something like this:</p>
<p><img src="/images/posts/how-to-create-your-own-accordion-in-react-and-typescript-with-tests/accordion-partial-unstyled.png" alt="Screenshot of accordion partially built in React and TypeScript"></p>
<h2>Accordion styles</h2>
<p>Yes, it doesn't look like an accordion yet. So let's create the styles and import them to their respective components. Create <code>Accordion.css</code> under <code>components</code> folder and add the following code below:</p>
<pre><code>.accordion {
  list-style: none;
  margin: 0;
  padding: 0;
}
</code></pre>
<p>Then import it in <code>Accordion.tsx</code>:</p>
<pre><code>import { AccordionData } from '../types';
import AccordionItem from './AccordionItem';
import './Accordion.css';

function Accordion({ items }: { items: Array&#x3C;AccordionData> }) {
...
</code></pre>
<p>Next, create <code>AccordionItem.css</code> under <code>components</code> folder and add the following code below:</p>
<pre><code>.accordion-item {
  border: 1px solid #cccccc;
}

.accordion-item:not(:first-of-type) {
  border-top: 0;
}

.accordion-item-title {
  width: 100%;
  background-color: #ffffff;
  margin: 0;
}

.accordion-item-btn {
  display: flex;
  align-items: center;
  width: 100%;
  background-color: #ffffff;
  border: 0;
  padding: 15px 20px;
  font-size: 18px;
  font-weight: 400;
  text-align: left;
  cursor: pointer;
}

.accordion-item-btn::after {
  flex-shrink: 0;
  width: 18px;
  height: 18px;
  margin-left: auto;
  content: '';
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23212529'%3e%3cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e");
  background-repeat: no-repeat;
  background-size: 18px;
  transition: transform 0.2s ease-in-out;
}

.accordion-item.active .accordion-item-btn::after {
  transform: rotate(-180deg);
}

.accordion-item-container {
  transition: height 0.2s ease-in-out;
  overflow: hidden;
}

.accordion-item-content {
  border-top: 1px solid #cccccc;
  padding: 15px 20px;
}
</code></pre>
<p>And import it in <code>AccordionItem.tsx</code>:</p>
<pre><code>import { AccordionData } from '../types';
import './AccordionItem.css';

function AccordionItem({ data }: { data: AccordionData }) {
...
</code></pre>
<p>Once you saved the changes, our component should look like this now:</p>
<p><img src="/images/posts/how-to-create-your-own-accordion-in-react-and-typescript-with-tests/accordion-partial-styled.png" alt="Screenshot of accordion partially built in React and TypeScript"></p>
<h2>Accordion Item props</h2>
<p>That's looking like an accordion now. We just need to make it collapsible. Let's start with the logic for <code>AccordionItem.tsx</code>. It should accept a prop <code>isOpen</code> to determine whether to display the content or not. We can simply use a conditional statement like this:</p>
<pre><code>import { AccordionData } from '../types';
import './AccordionItem.css';

function AccordionItem({
  data,
  isOpen,
}: {
  data: AccordionData;
  isOpen: boolean;
}) {
  return (
    &#x3C;li className="accordion-item">
      &#x3C;h2 className="accordion-item-title">
        &#x3C;button className="accordion-item-btn">{data.title}&#x3C;/button>
      &#x3C;/h2>
      &#x3C;div className="accordion-item-container">
        {isOpen &#x26;&#x26; &#x3C;div className="accordion-item-content">{data.content}&#x3C;/div>}
      &#x3C;/div>
    &#x3C;/li>
  );
}

export default AccordionItem;
</code></pre>
<p>And we would be done with this component but because we want it to have a transition, then we need to be more creative here. What can we use then? Yes, you've guessed it! We can control the height of the content's container. If <code>isOpen</code> is <code>false</code>, then we set the height of the container to <code>0</code>, and if it's <code>true</code>, then we set the height using the content's height. Since <code>isOpen</code> can change at any point of time, we can use one of the React hooks, <code>useEffect</code>, to help us with this accordion logic. Let's update the code of <code>AccordionItem.tsx</code>:</p>
<pre><code>import { useEffect, useRef, useState } from 'react';
import { AccordionData } from '../types';
import './AccordionItem.css';

function AccordionItem({
  data,
  isOpen,
  btnOnClick,
}: {
  data: AccordionData;
  isOpen: boolean;
  btnOnClick: () => void;
}) {
  const contentRef = useRef&#x3C;HTMLDivElement>(null);
  const [height, setHeight] = useState(0);

  useEffect(() => {
    if (isOpen) {
      const contentEl = contentRef.current as HTMLDivElement;

      setHeight(contentEl.scrollHeight);
    } else {
      setHeight(0);
    }
  }, [isOpen]);

  return (
    &#x3C;li className={`accordion-item ${isOpen ? 'active' : ''}`}>
      &#x3C;h2 className="accordion-item-title">
        &#x3C;button className="accordion-item-btn" onClick={btnOnClick}>
          {data.title}
        &#x3C;/button>
      &#x3C;/h2>
      &#x3C;div className="accordion-item-container" style={{ height }}>
        &#x3C;div ref={contentRef} className="accordion-item-content">
          {data.content}
        &#x3C;/div>
      &#x3C;/div>
    &#x3C;/li>
  );
}

export default AccordionItem;
</code></pre>
<p>And if you're new to TypeScript, you'll notice I used <code>as HTMLDivElement</code> here. This is called a <a href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#type-assertions" target="_blank" rel="noopener noreferrer nofollow">type assertion</a>. If we remove the type assertion, the type of <code>contentEl.current</code> would be <code>HTMLDivElement | null</code>, but we know in this case it will always have a value of <code>HTMLDivElement</code> when <code>useEffect</code> is executed. That's why type assertions are done when have information about the type of a value that TypeScript can't know about.</p>
<p>When <code>isOpen</code> is true, we should also add an <code>active</code> class so that the icon would rotate, it's a common transition effect whenever you toggle an accordion.</p>
<p>I've also added a new prop <code>btnOnClick</code> which accepts a callback when the button is clicked. We'll use this later to control when to display or hide our content from the parent component.</p>
<h2>Accordion logic (open one at a time)</h2>
<p>Moving on to the <code>Accordion.tsx</code>, this is where we'll be adding the logic for each accordion items. When an accordion button is clicked, then we should show the contents. We could store a state of which item is displayed, it should be something unique to that item, since our items doesn't have an identifier (or ID) in their data, we could use the <code>index</code> of each items. I could think of two ways an accordion behaves, the one that we'll do in this post (which is my favorite by the way!) is opening an accordion one at a time, meaning when there's an accordion that's currently opened, when I click another one, it will close or hide the previous one and display the content of what I last clicked upon. To do that logic, update the <code>Accordion</code> component with the following code below:</p>
<pre><code>import { useState } from 'react';
import { AccordionData } from '../types';
import AccordionItem from './AccordionItem';
import './Accordion.css';

function Accordion({ items }: { items: Array&#x3C;AccordionData> }) {
  const [currentIdx, setCurrentIdx] = useState(-1);
  const btnOnClick = (idx: number) => {
    setCurrentIdx(idx);
  };

  return (
    &#x3C;ul className="accordion">
      {items.map((item, idx) => (
        &#x3C;AccordionItem
          key={idx}
          data={item}
          isOpen={idx === currentIdx}
          btnOnClick={() => btnOnClick(idx)}
        />
      ))}
    &#x3C;/ul>
  );
}

export default Accordion;
</code></pre>
<p>The initial state value of <code>currentIdx</code> (current index) would be <code>-1</code>, which means no accordion would be open at the start. When an accordion button is clicked, we would set the <code>currentIdx</code> to that accordion's index. This makes the <code>isOpen</code> become true since <code>idx</code> and <code>currentIdx</code> values are equal.</p>
<p>Once you save the changes, you now have yourself an accordion!</p>
<p><img src="/images/posts/how-to-create-your-own-accordion-in-react-and-typescript-with-tests/accordion-open-one-at-a-time.png" alt="Screenshot of accordion with one opened in React and TypeScript"></p>
<p>But wait there's one last thing you need to do. If we click on the same accordion again, it still remains open, ideally it should close. So let's do a small update to the code:</p>
<pre><code>...
  const btnOnClick = (idx: number) => {
    setCurrentIdx((currentValue) => (currentValue !== idx ? idx : -1));
  };
...
</code></pre>
<p>And there you go, you've just built your own accordion in React and TypeScript!</p>
<h2>Write tests for Accordion.tsx</h2>
<p>Alright, time to write tests for the components we've built. Tests are really great as it helps us cover all the logics in our code and whenever we update the codebase, they help us determine whether we broke anything before it the changes get pushed to our repository.</p>
<p>Before we start, let's install a library called <code>faker</code> which gives us random data. Why do we want random data? It makes our tests more reliable as opposed to hardcoding the data we use in testing. Run the command below on your terminal to install it along with its type:</p>
<pre><code>yarn add -D faker @types/faker
</code></pre>
<p>So if your project uses TypeScript, when installing libraries like this, you would have to install their types as well, if not TypeScript would complain that it couldn't find the library's type declarations.</p>
<p>That's all we need to install because Create React App already set up and installed the necessary libraries for our testing environment such as Jest and Testing Library.</p>
<p>For test files, I like to separate them in a folder so that it's less cluttered when viewing main files. Now, create a new folder named <code>__tests__</code> under the <code>src/components</code>. This is where we will put the test files for components under <code>src/components</code>.</p>
<p>Alright, the first component we would be writing test is <code>Accordion.tsx</code>. Create a file under <code>src/components/__tests__</code> and name it <code>Accordion.test.tsx</code>.</p>
<p>Then let's add in the structure of the test:</p>
<pre><code>describe('&#x3C;Accordion />', () => {});
</code></pre>
<p><code>describe</code> creates a block that groups together several related tests. So ideally the description should be describing what we are testing, for this case I used the component name. Feel free to rename it according to your preference. <code>describe</code> is one of Jest's global functions, so with the setup of Create React App, we don't need to specifically import these global functions in our code, we can just directly use them.</p>
<p>Next we can add a test case inside the <code>describe</code> block:</p>
<pre><code>describe('&#x3C;Accordion />', () => {
  it('should render items', () => {});
});
</code></pre>
<p>Another global function by Jest, <code>it</code> (or <code>test</code>) method runs a test. This is where we can have different test cases. Let's write our first test case:</p>
<pre><code>import { render, screen } from '@testing-library/react';
import faker from 'faker';
import Accordion from '../Accordion';

describe('&#x3C;Accordion />', () => {
  it('should render items', () => {
    const items = [];

    for (let i = 0; i &#x3C; 3; i++) {
      items.push({
        title: faker.lorem.sentence(),
        content: faker.lorem.sentences(),
      });
    }

    render(&#x3C;Accordion items={items} />);

    items.forEach(({ title, content }) => {
      const titleEl = screen.queryByText(title);
      const contentEl = screen.queryByText(content);

      expect(titleEl).toBeInTheDocument();
      expect(contentEl).toBeInTheDocument();
    });
  });
});
</code></pre>
<p>That's a lot of new code! Don't worry, let me go through it one by one and explain it to you. So first, we created an <code>items</code> array which would contain an object of <code>AccordionData</code>. We are using <code>faker</code> library to help us generate random title and content. You can checkout their API <a href="https://github.com/marak/faker.js#api" target="_blank" rel="noopener noreferrer nofollow">here</a> to know all the other data it can randomly generate. We've added three items which should be enough but you can increase or decrease it if you want, but do note that it should have at least two items in order to test our accordion logic. We then pass this array as a props to our <code>Accordion</code> component. Using one of the Testing Library's methods, <code>render</code>, helps to render our component in a test environment, do note this environment is not a browser, so there are some limitations and mockings we would have to do which you'll see later on. To learn more about the <code>render</code> method, you can go <a href="https://testing-library.com/docs/react-testing-library/api/#render" target="_blank" rel="noopener noreferrer nofollow">here</a>. After that, we can do our checks to validate that our items are rendered. To do that, we looped through the items and did a query by text using another method of Testing Library which is <code>screen.queryByText</code>. To know all the possible queries you can do with screen, you can go <a href="https://testing-library.com/docs/queries/about" target="_blank" rel="noopener noreferrer nofollow">here</a>. Then finally using one of Jest's global functions, we can call <code>expect</code> method and pass the elements returned by the query, and run what we call a matcher method <code>toBeInTheDocument()</code>. This is one of many custom matcher methods provided by the library called <a href="https://github.com/testing-library/jest-dom#custom-matchers" target="_blank" rel="noopener noreferrer nofollow">jest-dom</a> which are specific to the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model/Introduction" target="_blank" rel="noopener noreferrer nofollow">DOM</a>. While you can check this <a href="https://jestjs.io/docs/expect" target="_blank" rel="noopener noreferrer nofollow">documentation</a> for the more generic matcher methods.</p>
<p>Alright, I hoped that explained it.</p>
<p>Now let's check if our component passed the test by running the command below in your terminal:</p>
<pre><code>yarn test --coverage
</code></pre>
<p>The parameter <code>--coverage</code> helps to display the coverage of the tests in which you'll see in your terminal:</p>
<p><img src="/images/posts/how-to-create-your-own-accordion-in-react-and-typescript-with-tests/accordion-test-coverage-incomplete-1.png" alt="Screenshot of incomplete Accordion test coverage"></p>
<p>Our first test case passed! We also managed to cover 66.67% of lines of <code>Accordion.tsx</code>. With the <code>--coverage</code> parameter, it gives us hints of which lines are uncovered as well, that is line 9 and 19. If we check those lines in our <code>Accordion.tsx</code> file, these are related to the logic of opening an accordion item. So let's create the second test case:</p>
<pre><code>import { fireEvent, render, screen } from '@testing-library/react';
...
  it('should open one at a time', () => {
    const items = [];

    for (let i = 0; i &#x3C; 3; i++) {
      items.push({
        title: faker.lorem.sentence(),
        content: faker.lorem.sentences(),
      });
    }

    render(&#x3C;Accordion items={items} />);

    items.forEach(({ title }) => {
      const titleEl = screen.queryByText(title) as HTMLButtonElement;

      fireEvent.click(titleEl);

      const currentListEl = titleEl.closest('li');
      const activeListEls = document.querySelectorAll('li.active');
      const activeListEl = activeListEls[0];

      expect(activeListEls.length).toBe(1);
      expect(activeListEl).toEqual(currentListEl);
    });
  });
});
</code></pre>
<p>Here we did the same for generating random data for the props but inside the loop we're doing the checks differently. So first we query the element of the title and fired a click event on it using <code>fireEvent</code> which is imported from Testing Library. To fire other DOM events, you can check out the documentation <a href="https://testing-library.com/docs/dom-testing-library/api-events/" target="_blank" rel="noopener noreferrer nofollow">here</a>. Any query of element may result as <code>null</code> so we added a type assertion (<code>as HTMLButtonElement</code>) because <code>fireEvent</code> method doesn't accept <code>null</code> values, it is safe to use type assertion here because we are certain that the element is or should be in the DOM. Then we queried the list element with an <code>active</code> class and check whether it is the same element as the current item's list element, this verifies that our current item is opened. We also did an additional check to make sure that there's only one accordion that is opened at a time (or per loop) by checking that the length of all list item that has an <code>active</code> class should only be <code>1</code>.</p>
<p>Currently if you didn't stop the test script server, it will listen for file save changes and automatically run the tests again. This makes writing tests faster as we don't have to re-run the test script again on every change. Our test coverage should look like this now:</p>
<p><img src="/images/posts/how-to-create-your-own-accordion-in-react-and-typescript-with-tests/accordion-test-coverage-incomplete-2.png" alt="Screenshot of incomplete Accordion test coverage"></p>
<p>Awesome, our second test case passed as well! But the line 9 is still uncovered though. If we check that line in our file, it is the logic for closing an opened accordion if it the title is clicked again. So for the last test case, we can achieve the full coverage for <code>Accordion.tsx</code> by writing the code below:</p>
<pre><code>...
  it('should close if already opened', () => {
    const items = [];

    for (let i = 0; i &#x3C; 3; i++) {
      items.push({
        title: faker.lorem.sentence(),
        content: faker.lorem.sentences(),
      });
    }

    render(&#x3C;Accordion items={items} />);

    items.forEach(({ title }) => {
      const titleEl = screen.queryByText(title) as HTMLButtonElement;

      fireEvent.click(titleEl);
      fireEvent.click(titleEl);

      const currentListEl = titleEl.closest('li') as HTMLLIElement;

      expect(currentListEl).not.toHaveClass('active');
    });
  });
});
</code></pre>
<p>Here we fired two click events and check that the current item's list element does not contain an <code>active</code> class which is a determinator that the accordion is opened.</p>
<p>Now once we save the changes, our coverage should look like this:</p>
<p><img src="/images/posts/how-to-create-your-own-accordion-in-react-and-typescript-with-tests/accordion-test-coverage-complete.png" alt="Screenshot of complete Accordion test coverage"></p>
<p>Cool! If you look at <code>AccordionItem.tsx</code> it already has <code>100%</code> coverage as well. That's because it is also used in <code>Accordion.tsx</code> test cases. But it's always good to have each component or function to have its own test cases as well, because that will make our code more robust.</p>
<h2>Write tests for AccordionItem.tsx</h2>
<p>Create a file under <code>src/components/__tests__</code> and name it <code>AccordionItem.test.tsx</code>. If we want to see how much is covered in <code>AccordionItem.tsx</code> while we write tests for it and ignore <code>Accordion.test.tsx</code> test cases from running, we can do so by running the test script like this:</p>
<pre><code>yarn test --coverage src/components/__tests__/AccordionItem.test.tsx
</code></pre>
<p>This instructs Jest to only run the tests under <code>src/components/__tests__/AccordionItem.test.tsx</code>. For now it would fail because it must contain at least one test. So let's write the first test case:</p>
<pre><code>import { render, screen } from '@testing-library/react';
import faker from 'faker';
import AccordionItem from '../AccordionItem';

describe('&#x3C;AccordionItem />', () => {
  it('should render content', () => {
    const title = faker.lorem.sentence();
    const content = faker.lorem.sentences();

    render(
      &#x3C;AccordionItem
        data={{ title, content }}
        isOpen={faker.datatype.boolean()}
        btnOnClick={jest.fn()}
      />
    );

    const titleEl = screen.queryByText(title);
    const contentEl = screen.queryByText(title);

    expect(titleEl).toBeInTheDocument();
    expect(contentEl).toBeInTheDocument();
  });
});
</code></pre>
<p>These should look familiar to you as we did the same for our first test case in <code>Accordion.test.tsx</code> but here we didn't have to create an array of data and loop through the items to do the checks.</p>
<p>After saving the changes, the terminal should display this:</p>
<p><img src="/images/posts/how-to-create-your-own-accordion-in-react-and-typescript-with-tests/accordion-item-test-coverage-incomplete.png" alt="Screenshot of incomplete Accordion Item test coverage"></p>
<p>Here, the uncovered lines for <code>AccordionItem.tsx</code> is 19-21, but it could be line 23 on your side because we are passing a random <code>boolean</code> for <code>isOpen</code> props in our first test case. So let's create two new test cases, one for when <code>isOpen</code> is <code>false</code> and one for when <code>isOpen</code> is <code>true</code> and we can validate whether the accordion is open or not by checking if there is an <code>active</code> class in the list element or not. Write the following code below:</p>
<pre><code>...
  it('should not display content if isOpen is false', () => {
    const title = faker.lorem.sentence();
    const content = faker.lorem.sentences();

    render(
      &#x3C;AccordionItem
        data={{
          title,
          content,
        }}
        isOpen={false}
        btnOnClick={jest.fn()}
      />
    );

    const titleEl = screen.queryByText(title);
    const listEl = titleEl?.closest('li');

    expect(listEl).not.toHaveClass('active');
  });

  it('should display content if isOpen is true', () => {
    const title = faker.lorem.sentence();
    const content = faker.lorem.sentences();

    render(
      &#x3C;AccordionItem
        data={{
          title,
          content,
        }}
        isOpen={true}
        btnOnClick={jest.fn()}
      />
    );

    const titleEl = screen.queryByText(title);
    const listEl = titleEl?.closest('li');

    expect(listEl).toHaveClass('active');
  });
});
</code></pre>
<p>Once changes are saved, we would achieve <code>100%</code> test coverage for <code>AccordionItem.test.tsx</code>:</p>
<p><img src="/images/posts/how-to-create-your-own-accordion-in-react-and-typescript-with-tests/accordion-item-test-coverage-complete-1.png" alt="Screenshot of complete Accordion Item test coverage"></p>
<p>You maybe wondering, <code>active</code> class just adds the style to rotate the arrow icon but is not really responsible for displaying or hiding the content. That is actually based on the <code>height</code> of the container. Can we test that too? Yes, but we will need to update our existing code in <code>AccordionItem.tsx</code> because in a test environment, values like <code>scrollHeight</code> is always <code>0</code> because it does not update measurements like a browser, this is the limitation that I've mentioned earlier. If that's the case, our test case for checking that the height is more than <code>0</code> when <code>isOpen</code> is <code>true</code> would fail. So what should we do?</p>
<p>First, create a folder named <code>lib</code> under <code>src</code> folder. Then create a file under <code>src/lib</code> and name it <code>hooks.ts</code>. Add the following code inside the newly created file:</p>
<pre><code>import { RefObject } from 'react';

export function getRefValue&#x3C;C>(ref: RefObject&#x3C;C>) {
  return ref.current as C;
}
</code></pre>
<p>This is a utility for getting the value of a <code>RefObject</code>. I use this a lot in my projects and it is extremely helpful when writing tests to achieve <code>100%</code> coverage, especially those components that uses <code>RefObject</code> for elements. If you're new to TypeScript, you might be wonder what is this <code>C</code> around the code? It can be any letter by the way or word if you would like, and it is called <a href="https://www.typescriptlang.org/docs/handbook/2/generics.html" target="_blank" rel="noopener noreferrer nofollow">Generics</a>, it makes our utility function here accept the type defined when the <code>RefObject</code> is passed because it can have any type. Using Generics, our function here would be able to return the same type.</p>
<p>Then let's update our <code>AccordionItem.tsx</code>:</p>
<pre><code>...
import { getRefValue } from '../lib/hooks';
...
      const contentEl = getRefValue(contentRef);
</code></pre>
<p>Now back to our test file <code>src/components/__tests__/AccordionItem.test.tsx</code>, let's update our two test cases and add the additional checks:</p>
<pre><code>...
import * as hooks from '../../lib/hooks';
...
describe('&#x3C;AccordionItem />', () => {
  beforeEach(() => {
    jest.restoreAllMocks();
  });
  ...
  it('should not display content if isOpen is false', () => {
    const contentScrollHeight = faker.datatype.number({ min: 1 });

    jest.spyOn(hooks, 'getRefValue').mockReturnValue({
      scrollHeight: contentScrollHeight,
    });

    const title = faker.lorem.sentence();
    const content = faker.lorem.sentences();

    render(
      &#x3C;AccordionItem
        data={{
          title,
          content,
        }}
        isOpen={false}
        btnOnClick={jest.fn()}
      />
    );

    const titleEl = screen.queryByText(title);
    const listEl = titleEl?.closest('li');
    const contentEl = screen.queryByText(content);
    const contentContainerEl = contentEl?.parentElement;

    expect(listEl).not.toHaveClass('active');
    expect(contentContainerEl).toHaveStyle({ height: '0px' });
  });

  it('should display content if isOpen is true', () => {
    const contentScrollHeight = faker.datatype.number({ min: 1 });

    jest.spyOn(hooks, 'getRefValue').mockReturnValue({
      scrollHeight: contentScrollHeight,
    });

    const title = faker.lorem.sentence();
    const content = faker.lorem.sentences();

    render(
      &#x3C;AccordionItem
        data={{
          title,
          content,
        }}
        isOpen={true}
        btnOnClick={jest.fn()}
      />
    );

    const titleEl = screen.queryByText(title);
    const listEl = titleEl?.closest('li');
    const contentEl = screen.queryByText(content);
    const contentContainerEl = contentEl?.parentElement;

    expect(listEl).toHaveClass('active');
    expect(contentContainerEl).toHaveStyle({
      height: `${contentScrollHeight}px`,
    });
  });
});
</code></pre>
<p>Let's analyse the updated code. First, we imported our <code>hooks</code> file using <code>* as hooks</code> in order to get an object of methods from <code>src/lib/hooks.ts</code>. We then use one of Jest's methods called <code>jest.spyOn</code> which tracks the calls to <code>object[methodName]</code> that you passed to it. It returns a Jest mock function which we can mock to return a different value using <code>.mockReturnValue()</code>. To see all mock functions you could do, check them out <a href="https://jestjs.io/docs/mock-functions" target="_blank" rel="noopener noreferrer nofollow">here</a>. When we do mocks in our test cases, it does not get restored back to their original value in the next test case, this might cause potential issues with the next test cases so it's good to call <code>jest.restoreAllMocks()</code> to prevent that. Instead of calling this function in the beginning of every test cases, we can put the call inside one of Jest's methods <code>beforeEach</code>, it accepts a callback which will be called before each test cases, and put it inside the <code>describe</code> call back right at the beginning before any test cases.</p>
<p>So we mocked the scroll height of the content element with a random generated number (minimum should be <code>1</code> because <code>0</code> means the content is hidden) and did the checks based on our accordion item logic. If the accordion item is opened, the content element's container should have the same height as the scroll height of the content element. If it's closed, then the height should be <code>0px</code>.</p>
<p>Now if we check our test results, it should be like this:</p>
<p><img src="/images/posts/how-to-create-your-own-accordion-in-react-and-typescript-with-tests/accordion-item-test-coverage-complete-2.png" alt="Screenshot of complete Accordion Item test coverage"></p>
<p>Great! Even though it already has <code>100%</code> test coverage, let's not forget to test the <code>btnOnClick</code> props, same reason for having each component or function having their own tests, each props you introduce, if logical, should also have their own tests. Similar to what we did in <code>Accordion.test.tsx</code>, we can fire a click event to the title of the accordion item, but in this case our verification would be to check if the function passed in the props was called. To validate that, add the following code below:</p>
<pre><code>import { fireEvent, render, screen } from '@testing-library/react';
...
  it('should call btnOnClick on title click', () => {
    const btnOnClickMock = jest.fn();

    const title = faker.lorem.sentence();
    const content = faker.lorem.sentences();

    render(
      &#x3C;AccordionItem
        data={{
          title,
          content,
        }}
        isOpen={faker.datatype.boolean()}
        btnOnClick={btnOnClickMock}
      />
    );

    const titleEl = screen.queryByText(title) as HTMLButtonElement;

    fireEvent.click(titleEl);

    expect(btnOnClickMock).toBeCalledTimes(1);
  });
});
</code></pre>
<p>Like I've mentioned earlier, each component or function should have their own tests. So as a bonus, here's the test case for the hooks utility we created earlier, the code below should be added inside <code>src/lib/__tests__/hooks.test.ts</code>:</p>
<pre><code>import faker from 'faker';
import { getRefValue } from '../hooks';

describe('hooks utilities', () => {
  describe('getRefValue()', () => {
    it('should return the value', () => {
      const refValue = faker.lorem.sentence();
      const refObject = { current: refValue };
      const res = getRefValue(refObject);

      expect(res).toBe(refValue);
    });
  });
  a;
});
</code></pre>
<p>And then here's the code for testing our <code>App</code> component under <code>src/__tests__/App.test.tsx</code>:</p>
<pre><code>import { render } from '@testing-library/react';
import App from '../App';

describe('&#x3C;App />', () => {
  it('should render without errors', () => {
    const { container } = render(&#x3C;App />);

    expect(container).toBeInTheDocument();
  });
});
</code></pre>
<p>When you run the all the tests again via <code>yarn test --coverage</code>, it will look very satifying as the terminal would display all green and all 100% covered:</p>
<p><img src="/images/posts/how-to-create-your-own-accordion-in-react-and-typescript-with-tests/test-coverage-complete.png" alt="Screenshot of complete test coverage"></p>
<p>And there you have it! You've just built your own accordion in React and TypeScript with tests! I hope you've learned a lot from this post, especially those who are new to TypeScript and Jest.</p>
<p>In case you need the final code of the accordion as a reference, this is the <a href="https://github.com/dominicarrojado/react-typescript-accordion" target="_blank" rel="noopener noreferrer nofollow">link</a> to the GitHub repository.</p>
<p>Please don't forget to share this post and just a heads up, I'll be writing more of these "building your own components in React and TypeScript with tests" so if you're interested, you can come back to my blog to check it out once they're published.</p>
<p>Peace ~</p>
</article><div class="w-11/12 max-w-screen-3xl mx-auto lg:w-5/6"><p class="mt-16 text-gray-400">Found an issue with this post?<!-- --> <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/dominicarrojado/dominicarrojado.github.io/issues">Report it here</a>.</p><div class="mt-24 flex justify-between items-center"><a class="group relative pr-2" href="/posts/building-an-email-template-with-mjml-framework/"><div class=""><div class="font-normal transition-colors duration-300 group-hover:text-black dark:group-hover:text-white">Building an email template with MJML framework</div><small class="text-gray-400 transition-colors duration-300 group-hover:text-black dark:group-hover:text-white">Previous Post</small></div><svg viewBox="0 0 320 512" class="absolute top-0 bottom-0 m-auto flex-shrink-0 w-2 h-2 text-black opacity-30 dark:text-white transform transition-transform-opacity duration-300 group-hover:opacity-100 sm:w-2.5 sm:h-2.5 md:w-3 md:h-3 xl:w-3.5 xl:h-3.5 -left-5 sm:-left-7 xl:-left-8 group-hover:-translate-x-1.5"><path fill="currentColor" d="M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"></path></svg></a><div></div></div><div class="mt-16 text-center"><a class="group inline-flex items-center font-normal select-none dark:hover:text-white transition-colors duration-300 hover:text-black group-hover:text-black" href="/posts/">See All Blog<svg viewBox="0 0 320 512" class="inline-block w-2 h-2 ml-2 text-black opacity-30 dark:text-white transform transition duration-300 group-hover:translate-x-1.5 group-hover:opacity-100 sm:w-2.5 sm:h-2.5 sm:ml-2.5 md:w-3 md:h-3 md:ml-3 xl:w-3.5 xl:h-3.5"><path fill="currentColor" d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"></path></svg></a></div></div></section><footer class="py-20 px-6 bg-gray-100 dark:bg-gray-850 overflow-hidden lg:overflow-auto"><ul class="relative text-center overflow-hidden transition-height duration-1000 sm:text-lg xl:text-xl" style="height:0"><li class="absolute top-0 left-0 w-full transition-opacity duration-1000"><blockquote><!-- -->If there is no struggle, there is no progress.<!-- --></blockquote><p class="mt-1 sm:mt-2"> <!-- -->Frederick Douglass</p></li><li class="absolute top-0 left-0 w-full transition-opacity duration-1000 opacity-0 pointer-events-none"><blockquote><!-- -->It&#x27;s okay to figure out murder mysteries, but you shouldn&#x27;t need to figure out code. You should be able to read it.<!-- --></blockquote><p class="mt-1 sm:mt-2"> <!-- -->Steve McConnell</p></li><li class="absolute top-0 left-0 w-full transition-opacity duration-1000 opacity-0 pointer-events-none"><blockquote><!-- -->If you can&#x27;t explain it simply, you don&#x27;t understand it well enough.<!-- --></blockquote><p class="mt-1 sm:mt-2"> <!-- -->Albert Einstein</p></li><li class="absolute top-0 left-0 w-full transition-opacity duration-1000 opacity-0 pointer-events-none"><blockquote><!-- -->The secret of getting ahead is getting started.<!-- --></blockquote><p class="mt-1 sm:mt-2"> <!-- -->Mark Twain</p></li></ul><ul class="max-w-full mt-10 flex flex-wrap justify-center lg:fixed lg:bottom-3 lg:z-40 lg:right-7 lg:mt-0"><li class="flex lg:transform lg:transition lg:ease-in-out lg:duration-500 lg:opacity-0 lg:translate-y-full" style="transition-delay:2050ms"><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.paypal.com/paypalme/DominicArrojado" class="group relative inline-flex p-3 cursor-pointer sm:p-4" tabindex="3"><svg viewBox="0 0 512 512" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M256 416c114.9 0 208-93.1 208-208S370.9 0 256 0 48 93.1 48 208s93.1 208 208 208zM233.8 97.4V80.6c0-9.2 7.4-16.6 16.6-16.6h11.1c9.2 0 16.6 7.4 16.6 16.6v17c15.5.8 30.5 6.1 43 15.4 5.6 4.1 6.2 12.3 1.2 17.1L306 145.6c-3.8 3.7-9.5 3.8-14 1-5.4-3.4-11.4-5.1-17.8-5.1h-38.9c-9 0-16.3 8.2-16.3 18.3 0 8.2 5 15.5 12.1 17.6l62.3 18.7c25.7 7.7 43.7 32.4 43.7 60.1 0 34-26.4 61.5-59.1 62.4v16.8c0 9.2-7.4 16.6-16.6 16.6h-11.1c-9.2 0-16.6-7.4-16.6-16.6v-17c-15.5-.8-30.5-6.1-43-15.4-5.6-4.1-6.2-12.3-1.2-17.1l16.3-15.5c3.8-3.7 9.5-3.8 14-1 5.4 3.4 11.4 5.1 17.8 5.1h38.9c9 0 16.3-8.2 16.3-18.3 0-8.2-5-15.5-12.1-17.6l-62.3-18.7c-25.7-7.7-43.7-32.4-43.7-60.1.1-34 26.4-61.5 59.1-62.4zM480 352h-32.5c-19.6 26-44.6 47.7-73 64h63.8c5.3 0 9.6 3.6 9.6 8v16c0 4.4-4.3 8-9.6 8H73.6c-5.3 0-9.6-3.6-9.6-8v-16c0-4.4 4.3-8 9.6-8h63.8c-28.4-16.3-53.3-38-73-64H32c-17.7 0-32 14.3-32 32v96c0 17.7 14.3 32 32 32h448c17.7 0 32-14.3 32-32v-96c0-17.7-14.3-32-32-32z"></path></svg><div class="absolute inset-0 z-50 m-auto"><div class="absolute flex items-center pointer-events-none justify-center bottom-full"><div class="border border-white bg-gray-750 py-1.5 px-3 text-center text-white text-sm font-normal whitespace-nowrap dark:bg-gray-850 dark:border-gray-400 transform transition duration-300 lg:py-2 lg:px-4 lg:text-base opacity-0 bottom-full translate-y-2">Show your support and donate!</div></div></div></a></li><li class="flex lg:transform lg:transition lg:ease-in-out lg:duration-500 lg:opacity-0 lg:translate-y-full" style="transition-delay:2200ms"><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.youtube.com/channel/UCWwV__qrzg5BYCSwO91Xhxg" class="group relative inline-flex p-3 cursor-pointer sm:p-4" tabindex="4"><svg viewBox="0 0 576 512" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"></path></svg><div class="absolute inset-0 z-50 m-auto"><div class="absolute flex items-center pointer-events-none justify-center bottom-full"><div class="border border-white bg-gray-750 py-1.5 px-3 text-center text-white text-sm font-normal whitespace-nowrap dark:bg-gray-850 dark:border-gray-400 transform transition duration-300 lg:py-2 lg:px-4 lg:text-base opacity-0 bottom-full translate-y-2">Watch my tech videos!</div></div></div></a></li><li class="flex lg:transform lg:transition lg:ease-in-out lg:duration-500 lg:opacity-0 lg:translate-y-full" style="transition-delay:2350ms"><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.linkedin.com/in/dominic-arrojado-75ba03a9/" class="group relative inline-flex p-3 cursor-pointer sm:p-4" tabindex="5"><svg viewBox="0 0 448 512" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg><div class="absolute inset-0 z-50 m-auto"><div class="absolute flex items-center pointer-events-none justify-center bottom-full"><div class="border border-white bg-gray-750 py-1.5 px-3 text-center text-white text-sm font-normal whitespace-nowrap dark:bg-gray-850 dark:border-gray-400 transform transition duration-300 lg:py-2 lg:px-4 lg:text-base opacity-0 bottom-full translate-y-2">Let&#x27;s connect on LinkedIn!</div></div></div></a></li><li class="flex lg:transform lg:transition lg:ease-in-out lg:duration-500 lg:opacity-0 lg:translate-y-full" style="transition-delay:2500ms"><a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/dominicarrojado/" class="group relative inline-flex p-3 cursor-pointer sm:p-4" tabindex="6"><svg viewBox="0 0 496 512" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg><div class="absolute inset-0 z-50 m-auto"><div class="absolute flex items-center pointer-events-none justify-center bottom-full"><div class="border border-white bg-gray-750 py-1.5 px-3 text-center text-white text-sm font-normal whitespace-nowrap dark:bg-gray-850 dark:border-gray-400 transform transition duration-300 lg:py-2 lg:px-4 lg:text-base opacity-0 bottom-full translate-y-2">Follow me on GitHub!</div></div></div></a></li><li class="flex lg:transform lg:transition lg:ease-in-out lg:duration-500 lg:opacity-0 lg:translate-y-full" style="transition-delay:2650ms"><a target="_blank" rel="noopener noreferrer nofollow" href="mailto:dominicarrojado@gmail.com" class="group relative inline-flex p-3 cursor-pointer sm:p-4" tabindex="7"><svg viewBox="0 0 512 512" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"></path></svg><div class="absolute inset-0 z-50 m-auto"><div class="absolute flex items-center pointer-events-none justify-center bottom-full"><div class="border border-white bg-gray-750 py-1.5 px-3 text-center text-white text-sm font-normal whitespace-nowrap dark:bg-gray-850 dark:border-gray-400 transform transition duration-300 lg:py-2 lg:px-4 lg:text-base opacity-0 bottom-full translate-y-2">Email me!</div></div></div></a></li></ul><p class="mt-4 text-gray-400 text-sm text-center sm:text-base lg:mt-10 xl:text-lg"><span class="font-normal"><!-- -->2021<!-- --> Dominic Arrojado</span> <span class="block mt-1 sm:hidden"></span><span class="hidden sm:inline"></span> <a href="/privacy-policy/">Privacy Policy</a> <!-- --><!-- --> <a href="/disclaimer/">Disclaimer</a></p></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"how-to-create-your-own-accordion-in-react-and-typescript-with-tests","contentHtml":"\u003ch2\u003eIntroduction\u003c/h2\u003e\n\u003cp\u003eAccordions (or collapsible content) are useful for when you have large amount of content to display and allow users to toggle between showing and hiding the content. This can be seen a lot in different websites today. Learn how to build your own accordion in \u003ca href=\"https://reactjs.org/\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"\u003eReact\u003c/a\u003e and \u003ca href=\"https://www.typescriptlang.org/\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"\u003eTypeScript\u003c/a\u003e. I'll also cover how to write tests for it and achieve 100% coverage using \u003ca href=\"https://jestjs.io/\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"\u003eJest\u003c/a\u003e and \u003ca href=\"https://testing-library.com/\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"\u003eTesting Library\u003c/a\u003e, these two libraries are used together to test React components. If you're new to TypeScript and Jest/Testing Library, this is a good way to start learning it with simple components like this. Alright, here we go ~\u003c/p\u003e\n\u003ch2\u003ePrerequisites\u003c/h2\u003e\n\u003cp\u003eThis is the \u003ca href=\"/react-typescript-accordion/\"\u003elink\u003c/a\u003e to the accordion which we'll accomplish by the end of this post, you can open it in a new tab to see, play around with it or use it as your reference throughout this tutorial.\u003c/p\u003e\n\u003cp\u003eBy the way, upon writing this post, I assume that you have some web development background and basic knowledge regarding \u003ca href=\"https://www.npmjs.com/\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"\u003enpm\u003c/a\u003e, \u003ca href=\"https://classic.yarnpkg.com/lang/en/\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"\u003eyarn\u003c/a\u003e, \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/HTML\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"\u003eHTML\u003c/a\u003e, \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/CSS\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"\u003eCSS\u003c/a\u003e, \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"\u003eJavaScript\u003c/a\u003e and \u003ca href=\"https://reactjs.org/\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"\u003eReact\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eSome prerequisites below. Make sure to install them in your system if you haven't!\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://code.visualstudio.com/\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"\u003eVisual Studio Code\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://classic.yarnpkg.com/lang/en/\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"\u003eYarn\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eWe'll be using \u003ca href=\"https://code.visualstudio.com/\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"\u003eVisual Studio Code\u003c/a\u003e as our \u003ca href=\"https://en.wikipedia.org/wiki/Integrated_development_environment\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"\u003eIDE\u003c/a\u003e in this tutorial as we will utilize a few extensions from their \u003ca href=\"https://marketplace.visualstudio.com/vscode\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"\u003emarketplace\u003c/a\u003e. And we'll use \u003ca href=\"https://classic.yarnpkg.com/lang/en/\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"\u003eYarn\u003c/a\u003e as our package manager, it's just like \u003ca href=\"https://www.npmjs.com/\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"\u003enpm\u003c/a\u003e but \u003cem\u003efaster\u003c/em\u003e.\u003c/p\u003e\n\u003ch2\u003eInitialize your project\u003c/h2\u003e\n\u003cp\u003eFastest way to get started with React is using \u003ca href=\"https://create-react-app.dev/\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"\u003eCreate React App\u003c/a\u003e. It is an officially supported way to create single-page React applications. It offers a modern build setup with no configuration so you can focus on code, not build tools.\u003c/p\u003e\n\u003cp\u003eTo create our project with React and TypeScript, run this command in your terminal:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eyarn create react-app react-typescript-accordion --template typescript\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOpen the created project in your Visual Studio Code. Then open the terminal in Visual Studio Code. The keyboard shortcut would be \u003ccode\u003e Ctrl\u003c/code\u003e + \u003ccode\u003e`\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eThen, let's run our project to see if everything is working fine:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eyarn start\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis command will open your default browser and go to \u003ccode\u003ehttp://localhost:3000/\u003c/code\u003e. If it doesn't, you can do it yourself too. The page should show something like this:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/posts/how-to-create-your-own-accordion-in-react-and-typescript-with-tests/create-react-app-default-page.png\" alt=\"Screenshot of Create React App default page\"\u003e\u003c/p\u003e\n\u003cp\u003eThis setup comes with live-editing or hot reloading which means when we save file changes, it will automatically update the app and reload on the browser. That's great for local development!\u003c/p\u003e\n\u003ch2\u003eInstall Prettier Extension in Visual Studio Code\u003c/h2\u003e\n\u003cp\u003eBefore we start coding, let's install \u003ca href=\"https://prettier.io/\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"\u003ePrettier\u003c/a\u003e, it's a code formatter that saves us time and energy by formatting the code when we save file changes.\u003c/p\u003e\n\u003cp\u003eClick on the \"Extensions\" tab and look for \"Prettier\" and install it. You can also install it via this \u003ca href=\"https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"\u003elink\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/posts/how-to-create-your-own-accordion-in-react-and-typescript-with-tests/install-prettier-extension-in-visual-studio-code.png\" alt=\"Screenshot of how to install Prettier extension in Visual Studio Code\"\u003e\u003c/p\u003e\n\u003cp\u003eAfter Prettier is installed, we still need to enable the formatting feature by updating our settings in Visual Studio Code. Let's create a folder in the root directory and name it \u003ccode\u003e.vscode\u003c/code\u003e. Then, create a file inside it and name it \u003ccode\u003esettings.json\u003c/code\u003e. Then update the created file with the code below:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e{\n  \"editor.formatOnSave\": true,\n  \"editor.defaultFormatter\": \"esbenp.prettier-vscode\",\n  \"editor.tabSize\": 2\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eFeel free to modify \u003ccode\u003eeditor.tabSize\u003c/code\u003e as that can be changed according to your preference.\u003c/p\u003e\n\u003cp\u003eNext, create another file in the root directory and name it \u003ccode\u003e.prettierrc\u003c/code\u003e. Update the created file and add the code below:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e{\n  \"singleQuote\": true,\n  \"trailingComma\": \"es5\",\n  \"arrowParens\": \"always\",\n  \"tabWidth\": 2\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis will be the config for Prettier to follow when formatting the code. These configs can be updated according to your preference.\u003c/p\u003e\n\u003cp\u003eAlright, once the changes are done. That should make our Prettier work.\u003c/p\u003e\n\u003ch2\u003eClean up the project\u003c/h2\u003e\n\u003cp\u003eNow, let's clean up our project which was created by Create React App. We won't be needing some of them. Delete or clear the contents of the following below:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003esrc/App.css (clear contents)\u003c/li\u003e\n\u003cli\u003esrc/App.test.tsx (delete)\u003c/li\u003e\n\u003cli\u003esrc/logo.svg (delete)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThen let's update the code of \u003ccode\u003esrc/App.tsx\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eimport './App.css';\n\nfunction App() {\n  return \u0026#x3C;div className=\"container\"\u003e\u0026#x3C;/div\u003e;\n}\n\nexport default App;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWe will use the \u003ccode\u003eApp\u003c/code\u003e component as the container of our accordion. So just a small update on the \u003ccode\u003esrc/App.css\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e.container {\n  width: 600px;\n  max-width: 100%;\n  margin: 0 auto;\n  padding: 20px 15px;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd update the \u003ccode\u003esrc/index.css\u003c/code\u003e too:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e* {\n  box-sizing: border-box;\n}\n\nbody {\n  margin: 0;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto',\n    'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans',\n    'Helvetica Neue', sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eSample data + Accordion component\u003c/h2\u003e\n\u003cp\u003eNow, let's create a sample data that we can pass to our accordion component because we would want our accordion to be reusable, so it should accept data as props. We can initialize the data from a parent component so for our case, it would be \u003ccode\u003esrc/App.tsx\u003c/code\u003e. I have a sample data that we can use here, update the code of it:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eimport './App.css';\nimport Accordion from './components/Accordion';\n\nfunction App() {\n  const accordionItems = [\n    {\n      title: 'Accordion Item #1',\n      content: (\n        \u0026#x3C;div\u003e\n          \u0026#x3C;strong\u003eThis is the first item's accordion body.\u0026#x3C;/strong\u003e It is hidden\n          by default, but shown when title is clicked. It will also be hidden if\n          the title is clicked again or when another item is clicked. You can\n          pass HTML tags in the content such as \u0026#x3C;u\u003eunderline tag\u0026#x3C;/u\u003e,{' '}\n          \u0026#x3C;i\u003eitalic\u0026#x3C;/i\u003e, or even another list like this:\n          \u0026#x3C;ul\u003e\n            \u0026#x3C;li\u003eBread\u0026#x3C;/li\u003e\n            \u0026#x3C;li\u003eEggs\u0026#x3C;/li\u003e\n            \u0026#x3C;li\u003eMilk\u0026#x3C;/li\u003e\n          \u0026#x3C;/ul\u003e\n        \u0026#x3C;/div\u003e\n      ),\n    },\n    {\n      title: 'Accordion Item #2',\n      content: (\n        \u0026#x3C;div\u003e\n          \u0026#x3C;strong\u003eThis is the second item's accordion body.\u0026#x3C;/strong\u003e It is\n          hidden by default, but shown when title is clicked. It will also be\n          hidden if the title is clicked again or when another item is clicked.\n          You can pass HTML tags in the content such as \u0026#x3C;u\u003eunderline tag\u0026#x3C;/u\u003e,{' '}\n          \u0026#x3C;i\u003eitalic\u0026#x3C;/i\u003e, or even another list like this:\n          \u0026#x3C;ul\u003e\n            \u0026#x3C;li\u003eBread\u0026#x3C;/li\u003e\n            \u0026#x3C;li\u003eEggs\u0026#x3C;/li\u003e\n            \u0026#x3C;li\u003eMilk\u0026#x3C;/li\u003e\n          \u0026#x3C;/ul\u003e\n        \u0026#x3C;/div\u003e\n      ),\n    },\n    {\n      title: 'Accordion Item #3',\n      content: (\n        \u0026#x3C;div\u003e\n          \u0026#x3C;strong\u003eThis is the third item's accordion body.\u0026#x3C;/strong\u003e It is hidden\n          by default, but shown when title is clicked. It will also be hidden if\n          the title is clicked again or when another item is clicked. You can\n          pass HTML tags in the content such as \u0026#x3C;u\u003eunderline tag\u0026#x3C;/u\u003e,{' '}\n          \u0026#x3C;i\u003eitalic\u0026#x3C;/i\u003e, or even another list like this:\n          \u0026#x3C;ul\u003e\n            \u0026#x3C;li\u003eBread\u0026#x3C;/li\u003e\n            \u0026#x3C;li\u003eEggs\u0026#x3C;/li\u003e\n            \u0026#x3C;li\u003eMilk\u0026#x3C;/li\u003e\n          \u0026#x3C;/ul\u003e\n        \u0026#x3C;/div\u003e\n      ),\n    },\n  ];\n\n  return (\n    \u0026#x3C;div className=\"container\"\u003e\n      \u0026#x3C;Accordion items={accordionItems} /\u003e\n    \u0026#x3C;/div\u003e\n  );\n}\n\nexport default App;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIf you save the changes we would get errors in the meantime as we would still need to create the \u003ccode\u003eAccordion\u003c/code\u003e component. So create a folder under \u003ccode\u003esrc\u003c/code\u003e and name it \u003ccode\u003ecomponents\u003c/code\u003e. We can put our reusable components in this folder. After that, create a file named \u003ccode\u003eAccordion.tsx\u003c/code\u003e inside the \u003ccode\u003ecomponents\u003c/code\u003e folder.\u003c/p\u003e\n\u003cp\u003eThen, let's add the code for \u003ccode\u003esrc/components/Accordion.tsx\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eimport { AccordionData } from '../types';\n\nfunction Accordion({ items }: { items: Array\u0026#x3C;AccordionData\u003e }) {\n  return \u0026#x3C;ul className=\"accordion\"\u003e\u0026#x3C;/ul\u003e;\n}\n\nexport default Accordion;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIf you're new to TypeScript, the object besides the props will look foreign to you. It would be explained better once we do the remaining change. For now, create a new file \u003ccode\u003etypes.ts\u003c/code\u003e inside the \u003ccode\u003esrc\u003c/code\u003e folder and add the following code to it:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eimport { ReactNode } from 'react';\n\nexport type AccordionData = {\n  title: string;\n  content: ReactNode;\n};\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow comes the explanation part for those of you who are new to TypeScript, feel free to skip this if you are already familiar with it. So we are defining the type for the \u003ccode\u003eitems\u003c/code\u003e props that our \u003ccode\u003eAccordion\u003c/code\u003e component will accept. So we declared a \u003ccode\u003etype AccordionData\u003c/code\u003e which is an \u003ccode\u003eobject\u003c/code\u003e that contains \u003ccode\u003etitle\u003c/code\u003e that should only be a \u003ccode\u003estring\u003c/code\u003e, one of the \u003ca href=\"https://www.typescriptlang.org/docs/handbook/2/everyday-types.html\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"\u003eprimitive types\u003c/a\u003e in TypeScript, and \u003ccode\u003econtent\u003c/code\u003e that should only be a \u003ccode\u003eReactNode\u003c/code\u003e, a type defined by \u003ccode\u003eReact\u003c/code\u003e library, same thing we did when we defined our type \u003ccode\u003eAccordionData\u003c/code\u003e. We can hover to a non-primitive type and it will show a tooltip with more information about the type like this:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/posts/how-to-create-your-own-accordion-in-react-and-typescript-with-tests/hovering-type-in-visual-studio-code.png\" alt=\"Screenshot of hovering a type in Visual Studio Code\"\u003e\u003c/p\u003e\n\u003cp\u003eYou can also \u003ccode\u003eCmd\u003c/code\u003e + \u003ccode\u003eclick\u003c/code\u003e (\u003ccode\u003eCtrl\u003c/code\u003e + \u003ccode\u003eclick\u003c/code\u003e on Windows) to view the type with even more information.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/posts/how-to-create-your-own-accordion-in-react-and-typescript-with-tests/checking-type-in-visual-studio-code.png\" alt=\"Screenshot of checking a type in Visual Studio Code\"\u003e\u003c/p\u003e\n\u003cp\u003eSo we created \u003ccode\u003esrc/types.ts\u003c/code\u003e so that it can be exported and imported across different components which you will see in a bit. Since \u003ccode\u003eAccordion\u003c/code\u003e component accepts an array of \u003ccode\u003eAccordionData\u003c/code\u003e, we wrapped it in type \u003ccode\u003eArray\u003c/code\u003e like this - \u003ccode\u003eArray\u0026#x3C;AccordionData\u003e\u003c/code\u003e. You can also wrap it like this - \u003ccode\u003eAccordionData[]\u003c/code\u003e, I just prefer the former as it I can read it as \"array of accordion data\".\u003c/p\u003e\n\u003cp\u003eNow if we didn't pass the expected data or type for \u003ccode\u003eitems\u003c/code\u003e props to our accordion component, our IDE would display an inline error and hovering it would show something like this:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/posts/how-to-create-your-own-accordion-in-react-and-typescript-with-tests/inline-error-by-typescript-in-visual-studio-code.png\" alt=\"Screenshot of inline error by TypeScript in Visual Studio Code\"\u003e\u003c/p\u003e\n\u003cp\u003eThis is why TypeScript is really helpful for catching errors early while you're still writing the code.\u003c/p\u003e\n\u003ch2\u003eAccordion Item component\u003c/h2\u003e\n\u003cp\u003eAlright, let's create a new component under \u003ccode\u003ecomponents\u003c/code\u003e and name it \u003ccode\u003eAccordionItem.tsx\u003c/code\u003e. This will be the component used by each item in our accordion. Add the following code below to display both the title and content of each item:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eimport { AccordionData } from '../types';\n\nfunction AccordionItem({ data }: { data: AccordionData }) {\n  return (\n    \u0026#x3C;li className=\"accordion-item\"\u003e\n      \u0026#x3C;h2 className=\"accordion-item-title\"\u003e\n        \u0026#x3C;button className=\"accordion-item-btn\"\u003e{data.title}\u0026#x3C;/button\u003e\n      \u0026#x3C;/h2\u003e\n      \u0026#x3C;div className=\"accordion-item-container\"\u003e\n        \u0026#x3C;div className=\"accordion-item-content\"\u003e{data.content}\u0026#x3C;/div\u003e\n      \u0026#x3C;/div\u003e\n    \u0026#x3C;/li\u003e\n  );\n}\n\nexport default AccordionItem;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAs you can see here, we've also added a type for \u003ccode\u003edata\u003c/code\u003e which should only be \u003ccode\u003eAccordionData\u003c/code\u003e, this is where we reused the type we declared and exported earlier in \u003ccode\u003esrc/types.ts\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eNow let's go back to \u003ccode\u003esrc/components/Accordion.tsx\u003c/code\u003e and update the code to loop through the items and pass the data to the imported \u003ccode\u003eAccordionItem\u003c/code\u003e component:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e...\nimport AccordionItem from './AccordionItem';\n...\n    \u0026#x3C;ul className=\"accordion\"\u003e\n      {items.map((item, idx) =\u003e (\n        \u0026#x3C;AccordionItem key={idx} data={item} /\u003e\n      ))}\n    \u0026#x3C;/ul\u003e\n...\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOnce you save the changes, our web app should be working fine now without any errors and display something like this:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/posts/how-to-create-your-own-accordion-in-react-and-typescript-with-tests/accordion-partial-unstyled.png\" alt=\"Screenshot of accordion partially built in React and TypeScript\"\u003e\u003c/p\u003e\n\u003ch2\u003eAccordion styles\u003c/h2\u003e\n\u003cp\u003eYes, it doesn't look like an accordion yet. So let's create the styles and import them to their respective components. Create \u003ccode\u003eAccordion.css\u003c/code\u003e under \u003ccode\u003ecomponents\u003c/code\u003e folder and add the following code below:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e.accordion {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThen import it in \u003ccode\u003eAccordion.tsx\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eimport { AccordionData } from '../types';\nimport AccordionItem from './AccordionItem';\nimport './Accordion.css';\n\nfunction Accordion({ items }: { items: Array\u0026#x3C;AccordionData\u003e }) {\n...\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNext, create \u003ccode\u003eAccordionItem.css\u003c/code\u003e under \u003ccode\u003ecomponents\u003c/code\u003e folder and add the following code below:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e.accordion-item {\n  border: 1px solid #cccccc;\n}\n\n.accordion-item:not(:first-of-type) {\n  border-top: 0;\n}\n\n.accordion-item-title {\n  width: 100%;\n  background-color: #ffffff;\n  margin: 0;\n}\n\n.accordion-item-btn {\n  display: flex;\n  align-items: center;\n  width: 100%;\n  background-color: #ffffff;\n  border: 0;\n  padding: 15px 20px;\n  font-size: 18px;\n  font-weight: 400;\n  text-align: left;\n  cursor: pointer;\n}\n\n.accordion-item-btn::after {\n  flex-shrink: 0;\n  width: 18px;\n  height: 18px;\n  margin-left: auto;\n  content: '';\n  background-image: url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23212529'%3e%3cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e\");\n  background-repeat: no-repeat;\n  background-size: 18px;\n  transition: transform 0.2s ease-in-out;\n}\n\n.accordion-item.active .accordion-item-btn::after {\n  transform: rotate(-180deg);\n}\n\n.accordion-item-container {\n  transition: height 0.2s ease-in-out;\n  overflow: hidden;\n}\n\n.accordion-item-content {\n  border-top: 1px solid #cccccc;\n  padding: 15px 20px;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd import it in \u003ccode\u003eAccordionItem.tsx\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eimport { AccordionData } from '../types';\nimport './AccordionItem.css';\n\nfunction AccordionItem({ data }: { data: AccordionData }) {\n...\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOnce you saved the changes, our component should look like this now:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/posts/how-to-create-your-own-accordion-in-react-and-typescript-with-tests/accordion-partial-styled.png\" alt=\"Screenshot of accordion partially built in React and TypeScript\"\u003e\u003c/p\u003e\n\u003ch2\u003eAccordion Item props\u003c/h2\u003e\n\u003cp\u003eThat's looking like an accordion now. We just need to make it collapsible. Let's start with the logic for \u003ccode\u003eAccordionItem.tsx\u003c/code\u003e. It should accept a prop \u003ccode\u003eisOpen\u003c/code\u003e to determine whether to display the content or not. We can simply use a conditional statement like this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eimport { AccordionData } from '../types';\nimport './AccordionItem.css';\n\nfunction AccordionItem({\n  data,\n  isOpen,\n}: {\n  data: AccordionData;\n  isOpen: boolean;\n}) {\n  return (\n    \u0026#x3C;li className=\"accordion-item\"\u003e\n      \u0026#x3C;h2 className=\"accordion-item-title\"\u003e\n        \u0026#x3C;button className=\"accordion-item-btn\"\u003e{data.title}\u0026#x3C;/button\u003e\n      \u0026#x3C;/h2\u003e\n      \u0026#x3C;div className=\"accordion-item-container\"\u003e\n        {isOpen \u0026#x26;\u0026#x26; \u0026#x3C;div className=\"accordion-item-content\"\u003e{data.content}\u0026#x3C;/div\u003e}\n      \u0026#x3C;/div\u003e\n    \u0026#x3C;/li\u003e\n  );\n}\n\nexport default AccordionItem;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd we would be done with this component but because we want it to have a transition, then we need to be more creative here. What can we use then? Yes, you've guessed it! We can control the height of the content's container. If \u003ccode\u003eisOpen\u003c/code\u003e is \u003ccode\u003efalse\u003c/code\u003e, then we set the height of the container to \u003ccode\u003e0\u003c/code\u003e, and if it's \u003ccode\u003etrue\u003c/code\u003e, then we set the height using the content's height. Since \u003ccode\u003eisOpen\u003c/code\u003e can change at any point of time, we can use one of the React hooks, \u003ccode\u003euseEffect\u003c/code\u003e, to help us with this accordion logic. Let's update the code of \u003ccode\u003eAccordionItem.tsx\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eimport { useEffect, useRef, useState } from 'react';\nimport { AccordionData } from '../types';\nimport './AccordionItem.css';\n\nfunction AccordionItem({\n  data,\n  isOpen,\n  btnOnClick,\n}: {\n  data: AccordionData;\n  isOpen: boolean;\n  btnOnClick: () =\u003e void;\n}) {\n  const contentRef = useRef\u0026#x3C;HTMLDivElement\u003e(null);\n  const [height, setHeight] = useState(0);\n\n  useEffect(() =\u003e {\n    if (isOpen) {\n      const contentEl = contentRef.current as HTMLDivElement;\n\n      setHeight(contentEl.scrollHeight);\n    } else {\n      setHeight(0);\n    }\n  }, [isOpen]);\n\n  return (\n    \u0026#x3C;li className={`accordion-item ${isOpen ? 'active' : ''}`}\u003e\n      \u0026#x3C;h2 className=\"accordion-item-title\"\u003e\n        \u0026#x3C;button className=\"accordion-item-btn\" onClick={btnOnClick}\u003e\n          {data.title}\n        \u0026#x3C;/button\u003e\n      \u0026#x3C;/h2\u003e\n      \u0026#x3C;div className=\"accordion-item-container\" style={{ height }}\u003e\n        \u0026#x3C;div ref={contentRef} className=\"accordion-item-content\"\u003e\n          {data.content}\n        \u0026#x3C;/div\u003e\n      \u0026#x3C;/div\u003e\n    \u0026#x3C;/li\u003e\n  );\n}\n\nexport default AccordionItem;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd if you're new to TypeScript, you'll notice I used \u003ccode\u003eas HTMLDivElement\u003c/code\u003e here. This is called a \u003ca href=\"https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#type-assertions\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"\u003etype assertion\u003c/a\u003e. If we remove the type assertion, the type of \u003ccode\u003econtentEl.current\u003c/code\u003e would be \u003ccode\u003eHTMLDivElement | null\u003c/code\u003e, but we know in this case it will always have a value of \u003ccode\u003eHTMLDivElement\u003c/code\u003e when \u003ccode\u003euseEffect\u003c/code\u003e is executed. That's why type assertions are done when have information about the type of a value that TypeScript can't know about.\u003c/p\u003e\n\u003cp\u003eWhen \u003ccode\u003eisOpen\u003c/code\u003e is true, we should also add an \u003ccode\u003eactive\u003c/code\u003e class so that the icon would rotate, it's a common transition effect whenever you toggle an accordion.\u003c/p\u003e\n\u003cp\u003eI've also added a new prop \u003ccode\u003ebtnOnClick\u003c/code\u003e which accepts a callback when the button is clicked. We'll use this later to control when to display or hide our content from the parent component.\u003c/p\u003e\n\u003ch2\u003eAccordion logic (open one at a time)\u003c/h2\u003e\n\u003cp\u003eMoving on to the \u003ccode\u003eAccordion.tsx\u003c/code\u003e, this is where we'll be adding the logic for each accordion items. When an accordion button is clicked, then we should show the contents. We could store a state of which item is displayed, it should be something unique to that item, since our items doesn't have an identifier (or ID) in their data, we could use the \u003ccode\u003eindex\u003c/code\u003e of each items. I could think of two ways an accordion behaves, the one that we'll do in this post (which is my favorite by the way!) is opening an accordion one at a time, meaning when there's an accordion that's currently opened, when I click another one, it will close or hide the previous one and display the content of what I last clicked upon. To do that logic, update the \u003ccode\u003eAccordion\u003c/code\u003e component with the following code below:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eimport { useState } from 'react';\nimport { AccordionData } from '../types';\nimport AccordionItem from './AccordionItem';\nimport './Accordion.css';\n\nfunction Accordion({ items }: { items: Array\u0026#x3C;AccordionData\u003e }) {\n  const [currentIdx, setCurrentIdx] = useState(-1);\n  const btnOnClick = (idx: number) =\u003e {\n    setCurrentIdx(idx);\n  };\n\n  return (\n    \u0026#x3C;ul className=\"accordion\"\u003e\n      {items.map((item, idx) =\u003e (\n        \u0026#x3C;AccordionItem\n          key={idx}\n          data={item}\n          isOpen={idx === currentIdx}\n          btnOnClick={() =\u003e btnOnClick(idx)}\n        /\u003e\n      ))}\n    \u0026#x3C;/ul\u003e\n  );\n}\n\nexport default Accordion;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe initial state value of \u003ccode\u003ecurrentIdx\u003c/code\u003e (current index) would be \u003ccode\u003e-1\u003c/code\u003e, which means no accordion would be open at the start. When an accordion button is clicked, we would set the \u003ccode\u003ecurrentIdx\u003c/code\u003e to that accordion's index. This makes the \u003ccode\u003eisOpen\u003c/code\u003e become true since \u003ccode\u003eidx\u003c/code\u003e and \u003ccode\u003ecurrentIdx\u003c/code\u003e values are equal.\u003c/p\u003e\n\u003cp\u003eOnce you save the changes, you now have yourself an accordion!\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/posts/how-to-create-your-own-accordion-in-react-and-typescript-with-tests/accordion-open-one-at-a-time.png\" alt=\"Screenshot of accordion with one opened in React and TypeScript\"\u003e\u003c/p\u003e\n\u003cp\u003eBut wait there's one last thing you need to do. If we click on the same accordion again, it still remains open, ideally it should close. So let's do a small update to the code:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e...\n  const btnOnClick = (idx: number) =\u003e {\n    setCurrentIdx((currentValue) =\u003e (currentValue !== idx ? idx : -1));\n  };\n...\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd there you go, you've just built your own accordion in React and TypeScript!\u003c/p\u003e\n\u003ch2\u003eWrite tests for Accordion.tsx\u003c/h2\u003e\n\u003cp\u003eAlright, time to write tests for the components we've built. Tests are really great as it helps us cover all the logics in our code and whenever we update the codebase, they help us determine whether we broke anything before it the changes get pushed to our repository.\u003c/p\u003e\n\u003cp\u003eBefore we start, let's install a library called \u003ccode\u003efaker\u003c/code\u003e which gives us random data. Why do we want random data? It makes our tests more reliable as opposed to hardcoding the data we use in testing. Run the command below on your terminal to install it along with its type:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eyarn add -D faker @types/faker\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSo if your project uses TypeScript, when installing libraries like this, you would have to install their types as well, if not TypeScript would complain that it couldn't find the library's type declarations.\u003c/p\u003e\n\u003cp\u003eThat's all we need to install because Create React App already set up and installed the necessary libraries for our testing environment such as Jest and Testing Library.\u003c/p\u003e\n\u003cp\u003eFor test files, I like to separate them in a folder so that it's less cluttered when viewing main files. Now, create a new folder named \u003ccode\u003e__tests__\u003c/code\u003e under the \u003ccode\u003esrc/components\u003c/code\u003e. This is where we will put the test files for components under \u003ccode\u003esrc/components\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eAlright, the first component we would be writing test is \u003ccode\u003eAccordion.tsx\u003c/code\u003e. Create a file under \u003ccode\u003esrc/components/__tests__\u003c/code\u003e and name it \u003ccode\u003eAccordion.test.tsx\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eThen let's add in the structure of the test:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003edescribe('\u0026#x3C;Accordion /\u003e', () =\u003e {});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003edescribe\u003c/code\u003e creates a block that groups together several related tests. So ideally the description should be describing what we are testing, for this case I used the component name. Feel free to rename it according to your preference. \u003ccode\u003edescribe\u003c/code\u003e is one of Jest's global functions, so with the setup of Create React App, we don't need to specifically import these global functions in our code, we can just directly use them.\u003c/p\u003e\n\u003cp\u003eNext we can add a test case inside the \u003ccode\u003edescribe\u003c/code\u003e block:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003edescribe('\u0026#x3C;Accordion /\u003e', () =\u003e {\n  it('should render items', () =\u003e {});\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnother global function by Jest, \u003ccode\u003eit\u003c/code\u003e (or \u003ccode\u003etest\u003c/code\u003e) method runs a test. This is where we can have different test cases. Let's write our first test case:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eimport { render, screen } from '@testing-library/react';\nimport faker from 'faker';\nimport Accordion from '../Accordion';\n\ndescribe('\u0026#x3C;Accordion /\u003e', () =\u003e {\n  it('should render items', () =\u003e {\n    const items = [];\n\n    for (let i = 0; i \u0026#x3C; 3; i++) {\n      items.push({\n        title: faker.lorem.sentence(),\n        content: faker.lorem.sentences(),\n      });\n    }\n\n    render(\u0026#x3C;Accordion items={items} /\u003e);\n\n    items.forEach(({ title, content }) =\u003e {\n      const titleEl = screen.queryByText(title);\n      const contentEl = screen.queryByText(content);\n\n      expect(titleEl).toBeInTheDocument();\n      expect(contentEl).toBeInTheDocument();\n    });\n  });\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThat's a lot of new code! Don't worry, let me go through it one by one and explain it to you. So first, we created an \u003ccode\u003eitems\u003c/code\u003e array which would contain an object of \u003ccode\u003eAccordionData\u003c/code\u003e. We are using \u003ccode\u003efaker\u003c/code\u003e library to help us generate random title and content. You can checkout their API \u003ca href=\"https://github.com/marak/faker.js#api\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"\u003ehere\u003c/a\u003e to know all the other data it can randomly generate. We've added three items which should be enough but you can increase or decrease it if you want, but do note that it should have at least two items in order to test our accordion logic. We then pass this array as a props to our \u003ccode\u003eAccordion\u003c/code\u003e component. Using one of the Testing Library's methods, \u003ccode\u003erender\u003c/code\u003e, helps to render our component in a test environment, do note this environment is not a browser, so there are some limitations and mockings we would have to do which you'll see later on. To learn more about the \u003ccode\u003erender\u003c/code\u003e method, you can go \u003ca href=\"https://testing-library.com/docs/react-testing-library/api/#render\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"\u003ehere\u003c/a\u003e. After that, we can do our checks to validate that our items are rendered. To do that, we looped through the items and did a query by text using another method of Testing Library which is \u003ccode\u003escreen.queryByText\u003c/code\u003e. To know all the possible queries you can do with screen, you can go \u003ca href=\"https://testing-library.com/docs/queries/about\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"\u003ehere\u003c/a\u003e. Then finally using one of Jest's global functions, we can call \u003ccode\u003eexpect\u003c/code\u003e method and pass the elements returned by the query, and run what we call a matcher method \u003ccode\u003etoBeInTheDocument()\u003c/code\u003e. This is one of many custom matcher methods provided by the library called \u003ca href=\"https://github.com/testing-library/jest-dom#custom-matchers\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"\u003ejest-dom\u003c/a\u003e which are specific to the \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model/Introduction\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"\u003eDOM\u003c/a\u003e. While you can check this \u003ca href=\"https://jestjs.io/docs/expect\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"\u003edocumentation\u003c/a\u003e for the more generic matcher methods.\u003c/p\u003e\n\u003cp\u003eAlright, I hoped that explained it.\u003c/p\u003e\n\u003cp\u003eNow let's check if our component passed the test by running the command below in your terminal:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eyarn test --coverage\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe parameter \u003ccode\u003e--coverage\u003c/code\u003e helps to display the coverage of the tests in which you'll see in your terminal:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/posts/how-to-create-your-own-accordion-in-react-and-typescript-with-tests/accordion-test-coverage-incomplete-1.png\" alt=\"Screenshot of incomplete Accordion test coverage\"\u003e\u003c/p\u003e\n\u003cp\u003eOur first test case passed! We also managed to cover 66.67% of lines of \u003ccode\u003eAccordion.tsx\u003c/code\u003e. With the \u003ccode\u003e--coverage\u003c/code\u003e parameter, it gives us hints of which lines are uncovered as well, that is line 9 and 19. If we check those lines in our \u003ccode\u003eAccordion.tsx\u003c/code\u003e file, these are related to the logic of opening an accordion item. So let's create the second test case:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eimport { fireEvent, render, screen } from '@testing-library/react';\n...\n  it('should open one at a time', () =\u003e {\n    const items = [];\n\n    for (let i = 0; i \u0026#x3C; 3; i++) {\n      items.push({\n        title: faker.lorem.sentence(),\n        content: faker.lorem.sentences(),\n      });\n    }\n\n    render(\u0026#x3C;Accordion items={items} /\u003e);\n\n    items.forEach(({ title }) =\u003e {\n      const titleEl = screen.queryByText(title) as HTMLButtonElement;\n\n      fireEvent.click(titleEl);\n\n      const currentListEl = titleEl.closest('li');\n      const activeListEls = document.querySelectorAll('li.active');\n      const activeListEl = activeListEls[0];\n\n      expect(activeListEls.length).toBe(1);\n      expect(activeListEl).toEqual(currentListEl);\n    });\n  });\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eHere we did the same for generating random data for the props but inside the loop we're doing the checks differently. So first we query the element of the title and fired a click event on it using \u003ccode\u003efireEvent\u003c/code\u003e which is imported from Testing Library. To fire other DOM events, you can check out the documentation \u003ca href=\"https://testing-library.com/docs/dom-testing-library/api-events/\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"\u003ehere\u003c/a\u003e. Any query of element may result as \u003ccode\u003enull\u003c/code\u003e so we added a type assertion (\u003ccode\u003eas HTMLButtonElement\u003c/code\u003e) because \u003ccode\u003efireEvent\u003c/code\u003e method doesn't accept \u003ccode\u003enull\u003c/code\u003e values, it is safe to use type assertion here because we are certain that the element is or should be in the DOM. Then we queried the list element with an \u003ccode\u003eactive\u003c/code\u003e class and check whether it is the same element as the current item's list element, this verifies that our current item is opened. We also did an additional check to make sure that there's only one accordion that is opened at a time (or per loop) by checking that the length of all list item that has an \u003ccode\u003eactive\u003c/code\u003e class should only be \u003ccode\u003e1\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eCurrently if you didn't stop the test script server, it will listen for file save changes and automatically run the tests again. This makes writing tests faster as we don't have to re-run the test script again on every change. Our test coverage should look like this now:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/posts/how-to-create-your-own-accordion-in-react-and-typescript-with-tests/accordion-test-coverage-incomplete-2.png\" alt=\"Screenshot of incomplete Accordion test coverage\"\u003e\u003c/p\u003e\n\u003cp\u003eAwesome, our second test case passed as well! But the line 9 is still uncovered though. If we check that line in our file, it is the logic for closing an opened accordion if it the title is clicked again. So for the last test case, we can achieve the full coverage for \u003ccode\u003eAccordion.tsx\u003c/code\u003e by writing the code below:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e...\n  it('should close if already opened', () =\u003e {\n    const items = [];\n\n    for (let i = 0; i \u0026#x3C; 3; i++) {\n      items.push({\n        title: faker.lorem.sentence(),\n        content: faker.lorem.sentences(),\n      });\n    }\n\n    render(\u0026#x3C;Accordion items={items} /\u003e);\n\n    items.forEach(({ title }) =\u003e {\n      const titleEl = screen.queryByText(title) as HTMLButtonElement;\n\n      fireEvent.click(titleEl);\n      fireEvent.click(titleEl);\n\n      const currentListEl = titleEl.closest('li') as HTMLLIElement;\n\n      expect(currentListEl).not.toHaveClass('active');\n    });\n  });\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eHere we fired two click events and check that the current item's list element does not contain an \u003ccode\u003eactive\u003c/code\u003e class which is a determinator that the accordion is opened.\u003c/p\u003e\n\u003cp\u003eNow once we save the changes, our coverage should look like this:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/posts/how-to-create-your-own-accordion-in-react-and-typescript-with-tests/accordion-test-coverage-complete.png\" alt=\"Screenshot of complete Accordion test coverage\"\u003e\u003c/p\u003e\n\u003cp\u003eCool! If you look at \u003ccode\u003eAccordionItem.tsx\u003c/code\u003e it already has \u003ccode\u003e100%\u003c/code\u003e coverage as well. That's because it is also used in \u003ccode\u003eAccordion.tsx\u003c/code\u003e test cases. But it's always good to have each component or function to have its own test cases as well, because that will make our code more robust.\u003c/p\u003e\n\u003ch2\u003eWrite tests for AccordionItem.tsx\u003c/h2\u003e\n\u003cp\u003eCreate a file under \u003ccode\u003esrc/components/__tests__\u003c/code\u003e and name it \u003ccode\u003eAccordionItem.test.tsx\u003c/code\u003e. If we want to see how much is covered in \u003ccode\u003eAccordionItem.tsx\u003c/code\u003e while we write tests for it and ignore \u003ccode\u003eAccordion.test.tsx\u003c/code\u003e test cases from running, we can do so by running the test script like this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eyarn test --coverage src/components/__tests__/AccordionItem.test.tsx\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis instructs Jest to only run the tests under \u003ccode\u003esrc/components/__tests__/AccordionItem.test.tsx\u003c/code\u003e. For now it would fail because it must contain at least one test. So let's write the first test case:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eimport { render, screen } from '@testing-library/react';\nimport faker from 'faker';\nimport AccordionItem from '../AccordionItem';\n\ndescribe('\u0026#x3C;AccordionItem /\u003e', () =\u003e {\n  it('should render content', () =\u003e {\n    const title = faker.lorem.sentence();\n    const content = faker.lorem.sentences();\n\n    render(\n      \u0026#x3C;AccordionItem\n        data={{ title, content }}\n        isOpen={faker.datatype.boolean()}\n        btnOnClick={jest.fn()}\n      /\u003e\n    );\n\n    const titleEl = screen.queryByText(title);\n    const contentEl = screen.queryByText(title);\n\n    expect(titleEl).toBeInTheDocument();\n    expect(contentEl).toBeInTheDocument();\n  });\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThese should look familiar to you as we did the same for our first test case in \u003ccode\u003eAccordion.test.tsx\u003c/code\u003e but here we didn't have to create an array of data and loop through the items to do the checks.\u003c/p\u003e\n\u003cp\u003eAfter saving the changes, the terminal should display this:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/posts/how-to-create-your-own-accordion-in-react-and-typescript-with-tests/accordion-item-test-coverage-incomplete.png\" alt=\"Screenshot of incomplete Accordion Item test coverage\"\u003e\u003c/p\u003e\n\u003cp\u003eHere, the uncovered lines for \u003ccode\u003eAccordionItem.tsx\u003c/code\u003e is 19-21, but it could be line 23 on your side because we are passing a random \u003ccode\u003eboolean\u003c/code\u003e for \u003ccode\u003eisOpen\u003c/code\u003e props in our first test case. So let's create two new test cases, one for when \u003ccode\u003eisOpen\u003c/code\u003e is \u003ccode\u003efalse\u003c/code\u003e and one for when \u003ccode\u003eisOpen\u003c/code\u003e is \u003ccode\u003etrue\u003c/code\u003e and we can validate whether the accordion is open or not by checking if there is an \u003ccode\u003eactive\u003c/code\u003e class in the list element or not. Write the following code below:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e...\n  it('should not display content if isOpen is false', () =\u003e {\n    const title = faker.lorem.sentence();\n    const content = faker.lorem.sentences();\n\n    render(\n      \u0026#x3C;AccordionItem\n        data={{\n          title,\n          content,\n        }}\n        isOpen={false}\n        btnOnClick={jest.fn()}\n      /\u003e\n    );\n\n    const titleEl = screen.queryByText(title);\n    const listEl = titleEl?.closest('li');\n\n    expect(listEl).not.toHaveClass('active');\n  });\n\n  it('should display content if isOpen is true', () =\u003e {\n    const title = faker.lorem.sentence();\n    const content = faker.lorem.sentences();\n\n    render(\n      \u0026#x3C;AccordionItem\n        data={{\n          title,\n          content,\n        }}\n        isOpen={true}\n        btnOnClick={jest.fn()}\n      /\u003e\n    );\n\n    const titleEl = screen.queryByText(title);\n    const listEl = titleEl?.closest('li');\n\n    expect(listEl).toHaveClass('active');\n  });\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOnce changes are saved, we would achieve \u003ccode\u003e100%\u003c/code\u003e test coverage for \u003ccode\u003eAccordionItem.test.tsx\u003c/code\u003e:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/posts/how-to-create-your-own-accordion-in-react-and-typescript-with-tests/accordion-item-test-coverage-complete-1.png\" alt=\"Screenshot of complete Accordion Item test coverage\"\u003e\u003c/p\u003e\n\u003cp\u003eYou maybe wondering, \u003ccode\u003eactive\u003c/code\u003e class just adds the style to rotate the arrow icon but is not really responsible for displaying or hiding the content. That is actually based on the \u003ccode\u003eheight\u003c/code\u003e of the container. Can we test that too? Yes, but we will need to update our existing code in \u003ccode\u003eAccordionItem.tsx\u003c/code\u003e because in a test environment, values like \u003ccode\u003escrollHeight\u003c/code\u003e is always \u003ccode\u003e0\u003c/code\u003e because it does not update measurements like a browser, this is the limitation that I've mentioned earlier. If that's the case, our test case for checking that the height is more than \u003ccode\u003e0\u003c/code\u003e when \u003ccode\u003eisOpen\u003c/code\u003e is \u003ccode\u003etrue\u003c/code\u003e would fail. So what should we do?\u003c/p\u003e\n\u003cp\u003eFirst, create a folder named \u003ccode\u003elib\u003c/code\u003e under \u003ccode\u003esrc\u003c/code\u003e folder. Then create a file under \u003ccode\u003esrc/lib\u003c/code\u003e and name it \u003ccode\u003ehooks.ts\u003c/code\u003e. Add the following code inside the newly created file:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eimport { RefObject } from 'react';\n\nexport function getRefValue\u0026#x3C;C\u003e(ref: RefObject\u0026#x3C;C\u003e) {\n  return ref.current as C;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis is a utility for getting the value of a \u003ccode\u003eRefObject\u003c/code\u003e. I use this a lot in my projects and it is extremely helpful when writing tests to achieve \u003ccode\u003e100%\u003c/code\u003e coverage, especially those components that uses \u003ccode\u003eRefObject\u003c/code\u003e for elements. If you're new to TypeScript, you might be wonder what is this \u003ccode\u003eC\u003c/code\u003e around the code? It can be any letter by the way or word if you would like, and it is called \u003ca href=\"https://www.typescriptlang.org/docs/handbook/2/generics.html\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"\u003eGenerics\u003c/a\u003e, it makes our utility function here accept the type defined when the \u003ccode\u003eRefObject\u003c/code\u003e is passed because it can have any type. Using Generics, our function here would be able to return the same type.\u003c/p\u003e\n\u003cp\u003eThen let's update our \u003ccode\u003eAccordionItem.tsx\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e...\nimport { getRefValue } from '../lib/hooks';\n...\n      const contentEl = getRefValue(contentRef);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow back to our test file \u003ccode\u003esrc/components/__tests__/AccordionItem.test.tsx\u003c/code\u003e, let's update our two test cases and add the additional checks:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e...\nimport * as hooks from '../../lib/hooks';\n...\ndescribe('\u0026#x3C;AccordionItem /\u003e', () =\u003e {\n  beforeEach(() =\u003e {\n    jest.restoreAllMocks();\n  });\n  ...\n  it('should not display content if isOpen is false', () =\u003e {\n    const contentScrollHeight = faker.datatype.number({ min: 1 });\n\n    jest.spyOn(hooks, 'getRefValue').mockReturnValue({\n      scrollHeight: contentScrollHeight,\n    });\n\n    const title = faker.lorem.sentence();\n    const content = faker.lorem.sentences();\n\n    render(\n      \u0026#x3C;AccordionItem\n        data={{\n          title,\n          content,\n        }}\n        isOpen={false}\n        btnOnClick={jest.fn()}\n      /\u003e\n    );\n\n    const titleEl = screen.queryByText(title);\n    const listEl = titleEl?.closest('li');\n    const contentEl = screen.queryByText(content);\n    const contentContainerEl = contentEl?.parentElement;\n\n    expect(listEl).not.toHaveClass('active');\n    expect(contentContainerEl).toHaveStyle({ height: '0px' });\n  });\n\n  it('should display content if isOpen is true', () =\u003e {\n    const contentScrollHeight = faker.datatype.number({ min: 1 });\n\n    jest.spyOn(hooks, 'getRefValue').mockReturnValue({\n      scrollHeight: contentScrollHeight,\n    });\n\n    const title = faker.lorem.sentence();\n    const content = faker.lorem.sentences();\n\n    render(\n      \u0026#x3C;AccordionItem\n        data={{\n          title,\n          content,\n        }}\n        isOpen={true}\n        btnOnClick={jest.fn()}\n      /\u003e\n    );\n\n    const titleEl = screen.queryByText(title);\n    const listEl = titleEl?.closest('li');\n    const contentEl = screen.queryByText(content);\n    const contentContainerEl = contentEl?.parentElement;\n\n    expect(listEl).toHaveClass('active');\n    expect(contentContainerEl).toHaveStyle({\n      height: `${contentScrollHeight}px`,\n    });\n  });\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eLet's analyse the updated code. First, we imported our \u003ccode\u003ehooks\u003c/code\u003e file using \u003ccode\u003e* as hooks\u003c/code\u003e in order to get an object of methods from \u003ccode\u003esrc/lib/hooks.ts\u003c/code\u003e. We then use one of Jest's methods called \u003ccode\u003ejest.spyOn\u003c/code\u003e which tracks the calls to \u003ccode\u003eobject[methodName]\u003c/code\u003e that you passed to it. It returns a Jest mock function which we can mock to return a different value using \u003ccode\u003e.mockReturnValue()\u003c/code\u003e. To see all mock functions you could do, check them out \u003ca href=\"https://jestjs.io/docs/mock-functions\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"\u003ehere\u003c/a\u003e. When we do mocks in our test cases, it does not get restored back to their original value in the next test case, this might cause potential issues with the next test cases so it's good to call \u003ccode\u003ejest.restoreAllMocks()\u003c/code\u003e to prevent that. Instead of calling this function in the beginning of every test cases, we can put the call inside one of Jest's methods \u003ccode\u003ebeforeEach\u003c/code\u003e, it accepts a callback which will be called before each test cases, and put it inside the \u003ccode\u003edescribe\u003c/code\u003e call back right at the beginning before any test cases.\u003c/p\u003e\n\u003cp\u003eSo we mocked the scroll height of the content element with a random generated number (minimum should be \u003ccode\u003e1\u003c/code\u003e because \u003ccode\u003e0\u003c/code\u003e means the content is hidden) and did the checks based on our accordion item logic. If the accordion item is opened, the content element's container should have the same height as the scroll height of the content element. If it's closed, then the height should be \u003ccode\u003e0px\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eNow if we check our test results, it should be like this:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/posts/how-to-create-your-own-accordion-in-react-and-typescript-with-tests/accordion-item-test-coverage-complete-2.png\" alt=\"Screenshot of complete Accordion Item test coverage\"\u003e\u003c/p\u003e\n\u003cp\u003eGreat! Even though it already has \u003ccode\u003e100%\u003c/code\u003e test coverage, let's not forget to test the \u003ccode\u003ebtnOnClick\u003c/code\u003e props, same reason for having each component or function having their own tests, each props you introduce, if logical, should also have their own tests. Similar to what we did in \u003ccode\u003eAccordion.test.tsx\u003c/code\u003e, we can fire a click event to the title of the accordion item, but in this case our verification would be to check if the function passed in the props was called. To validate that, add the following code below:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eimport { fireEvent, render, screen } from '@testing-library/react';\n...\n  it('should call btnOnClick on title click', () =\u003e {\n    const btnOnClickMock = jest.fn();\n\n    const title = faker.lorem.sentence();\n    const content = faker.lorem.sentences();\n\n    render(\n      \u0026#x3C;AccordionItem\n        data={{\n          title,\n          content,\n        }}\n        isOpen={faker.datatype.boolean()}\n        btnOnClick={btnOnClickMock}\n      /\u003e\n    );\n\n    const titleEl = screen.queryByText(title) as HTMLButtonElement;\n\n    fireEvent.click(titleEl);\n\n    expect(btnOnClickMock).toBeCalledTimes(1);\n  });\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eLike I've mentioned earlier, each component or function should have their own tests. So as a bonus, here's the test case for the hooks utility we created earlier, the code below should be added inside \u003ccode\u003esrc/lib/__tests__/hooks.test.ts\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eimport faker from 'faker';\nimport { getRefValue } from '../hooks';\n\ndescribe('hooks utilities', () =\u003e {\n  describe('getRefValue()', () =\u003e {\n    it('should return the value', () =\u003e {\n      const refValue = faker.lorem.sentence();\n      const refObject = { current: refValue };\n      const res = getRefValue(refObject);\n\n      expect(res).toBe(refValue);\n    });\n  });\n  a;\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd then here's the code for testing our \u003ccode\u003eApp\u003c/code\u003e component under \u003ccode\u003esrc/__tests__/App.test.tsx\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eimport { render } from '@testing-library/react';\nimport App from '../App';\n\ndescribe('\u0026#x3C;App /\u003e', () =\u003e {\n  it('should render without errors', () =\u003e {\n    const { container } = render(\u0026#x3C;App /\u003e);\n\n    expect(container).toBeInTheDocument();\n  });\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWhen you run the all the tests again via \u003ccode\u003eyarn test --coverage\u003c/code\u003e, it will look very satifying as the terminal would display all green and all 100% covered:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/posts/how-to-create-your-own-accordion-in-react-and-typescript-with-tests/test-coverage-complete.png\" alt=\"Screenshot of complete test coverage\"\u003e\u003c/p\u003e\n\u003cp\u003eAnd there you have it! You've just built your own accordion in React and TypeScript with tests! I hope you've learned a lot from this post, especially those who are new to TypeScript and Jest.\u003c/p\u003e\n\u003cp\u003eIn case you need the final code of the accordion as a reference, this is the \u003ca href=\"https://github.com/dominicarrojado/react-typescript-accordion\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"\u003elink\u003c/a\u003e to the GitHub repository.\u003c/p\u003e\n\u003cp\u003ePlease don't forget to share this post and just a heads up, I'll be writing more of these \"building your own components in React and TypeScript with tests\" so if you're interested, you can come back to my blog to check it out once they're published.\u003c/p\u003e\n\u003cp\u003ePeace ~\u003c/p\u003e\n","previousPost":{"id":"building-an-email-template-with-mjml-framework","title":"Building an email template with MJML framework","date":"2021-09-16","excerpt":"Learn how to build a responsive email template in a less painful way","category":"technology","videoUrl":"https://youtu.be/9uQtftjQwmI"},"nextPost":null,"title":"How to create your own accordion in React and TypeScript with tests","date":"2021-09-23","excerpt":"Learn how to build a collapsible content in a reactive and reusable way","category":"technology","videoUrl":""}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"how-to-create-your-own-accordion-in-react-and-typescript-with-tests"},"buildId":"Xu1Pf0Urb28SWhVPbxolC","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>