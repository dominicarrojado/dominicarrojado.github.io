<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#2c2c34"/><link rel="icon" href="https://dominicarrojado.com/favicon.ico"/><link rel="manifest" href="https://dominicarrojado.com/manifest.json"/><meta name="twitter:card" content="summary_large_image"/><meta property="og:image" content="https://dominicarrojado.com/images/pages/guides-tips-and-tricks-to-web-development.png"/><meta property="og:image:alt" content="Dominic Arrojado | Guides, Tips and Tricks to Web Development"/><meta property="og:image:type" content="image/png"/><meta property="og:image:width" content="2400"/><meta property="og:image:height" content="1254"/><meta property="og:site_name" content="Dominic Arrojado"/><link rel="preload" href="/fonts/Roboto-Light.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Light.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-LightItalic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-LightItalic.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Regular.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Italic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Italic.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Medium.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Medium.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-MediumItalic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-MediumItalic.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Bold.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Bold.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-BoldItalic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-BoldItalic.woff" as="font" type="font/woff" crossorigin="anonymous"/><title>Different ways to use the useRef hook in React | Dominic Arrojado</title><meta name="robots" content="index,follow"/><meta name="description" content="Learn about the various use cases of React&#x27;s useRef hook"/><meta property="og:title" content="Different ways to use the useRef hook in React | Dominic Arrojado"/><meta property="og:description" content="Learn about the various use cases of React&#x27;s useRef hook"/><meta property="og:url" content="https://dominicarrojado.com/posts/different-ways-to-use-the-useref-hook-in-react/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2023-04-07T14:00:00Z"/><meta property="article:modified_time" content="2023-04-07T14:00:00Z"/><meta property="article:author" content="https://dominicarrojado.com/about/"/><link rel="canonical" href="https://dominicarrojado.com/posts/different-ways-to-use-the-useref-hook-in-react/"/><meta name="next-head-count" content="39"/><link rel="preload" href="/_next/static/css/525c6e4687be5c6e.css" as="style"/><link rel="stylesheet" href="/_next/static/css/525c6e4687be5c6e.css" data-n-g=""/><link rel="preload" href="/_next/static/css/82d01f71dc75279c.css" as="style"/><link rel="stylesheet" href="/_next/static/css/82d01f71dc75279c.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-7610d966cf14a12e.js" defer=""></script><script src="/_next/static/chunks/framework-73b8966a3c579ab0.js" defer=""></script><script src="/_next/static/chunks/main-f0c986bda8fad686.js" defer=""></script><script src="/_next/static/chunks/pages/_app-eaed220f7d8ab6fd.js" defer=""></script><script src="/_next/static/chunks/374-b35b83a20fdd9d5b.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-3eaaed6cc51dd36d.js" defer=""></script><script src="/_next/static/b9IqsjLgy52FxSeGl4emG/_buildManifest.js" defer=""></script><script src="/_next/static/b9IqsjLgy52FxSeGl4emG/_ssgManifest.js" defer=""></script></head><body><div id="__next"><noscript>
            <iframe
              src="https://www.googletagmanager.com/ns.html?id=GTM-TSMLTPT"
              height="0"
              width="0"
              style="display: none; visibility: hidden"
            ></iframe>
          </noscript><div tabindex="-1" class="h-full outline-none"><header class="fixed flex items-center top-0 w-full z-40"><a href="#main" tabindex="0" class="absolute -top-96 -left-96 w-px h-px text-center text-white overflow-hidden -z-50 focus:top-4 focus:inset-x-0 focus:m-auto focus:w-44 focus:h-auto focus:z-50 focus:sm:w-52 focus:xl:w-56">Skip to main content</a><a class="absolute top-3.5 left-3.5 flex shadow-3xl border border-white bg-gray-750 bg-opacity-90 p-1.5 z-50 transform transition ease-in-out duration-500 hover:shadow-md hover:bg-opacity-100 motion-reduce:transition-none sm:top-4 sm:left-4 md:top-5 md:left-5 md:border-2 lg:top-8 lg:left-8 opacity-0 -translate-y-full" aria-label="Dominic Arrojado logo" href="/"><svg viewBox="0 0 25750 29700" role="img" class="w-7 h-7 text-white transition-colors duration-300 sm:w-8 sm:h-8 md:w-10 md:h-10 xl:w-11 xl:h-11"><path fill="currentColor" d="M4850 19266H1025V2039l4600-129c2511 0 4500 735 5970 2206 1470 1470 2206 3423 2206 5854 0 6199-2985 9296-8951 9296zM4086 4719v11751c494 48 1025 72 1599 72 1543 0 2752-558 3624-1679s1310-2688 1310-4705c0-3684-1712-5524-5135-5524-329 0-795 28-1398 85zm17656 21711l-1437-3969h-6721l974-2655h4730l-2242-6854 1518-4167 7010 17645zM17826 435h3307L10351 29313H7044l4243-11322c1982-1513 2973-4055 2973-7627 0-171-4-340-11-506l3577-9423z"></path></svg></a><div class="absolute top-3.5 right-3.5 flex items-end gap-3 ml-auto sm:top-4 sm:right-4 sm:gap-4 md:top-5 md:right-5 md:gap-5 lg:top-8 lg:right-8 lg:gap-6" style="padding-right:var(--scrollbar-width, 0)" data-testid="header-buttons"><button data-command="" data-disclosure="" aria-expanded="false" class="group flex items-center flex-col min-w-8 outline-none md:min-w-10 xl:min-w-11" aria-label="Toggle menu"><div class="w-6 h-0.5 bg-gray-400 rounded dark:bg-gray-300 transform transition group-hover:bg-gray-500 group-focus-visible:bg-gray-500 motion-reduce:transition-none dark:group-hover:bg-white dark:group-focus-visible:bg-white md:w-7 md:h-1 xl:w-8 duration-700 opacity-0 translate-x-1/2" style="transition-delay:0ms" data-testid="menu-stack"></div><div class="w-6 h-0.5 bg-gray-400 rounded dark:bg-gray-300 transform transition group-hover:bg-gray-500 group-focus-visible:bg-gray-500 motion-reduce:transition-none dark:group-hover:bg-white dark:group-focus-visible:bg-white md:w-7 md:h-1 xl:w-8 mt-1.5 duration-700 opacity-0 -translate-x-1/2" style="transition-delay:100ms" data-testid="menu-stack"></div><div class="w-6 h-0.5 bg-gray-400 rounded dark:bg-gray-300 transform transition group-hover:bg-gray-500 group-focus-visible:bg-gray-500 motion-reduce:transition-none dark:group-hover:bg-white dark:group-focus-visible:bg-white md:w-7 md:h-1 xl:w-8 mt-1.5 duration-700 opacity-0 translate-x-1/2" style="transition-delay:200ms" data-testid="menu-stack"></div><div class="mt-1.5 text-gray-400 text-3xs font-normal uppercase select-none dark:text-gray-300 transform transition-transform-opacity-color duration-700 group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-gray-100 md:mt-2 md:text-2xs xl:text-xs opacity-0 -translate-y-3">Menu</div></button></div></header><span id=":R366:" style="position:fixed"></span><div id="main"></div><section class="relative flex flex-col bg-gray-550 items-center justify-center px-6 text-center overflow-hidden dark:bg-gray-650 sm:px-20 lg:px-32 min-h-96 py-28"><div class="absolute top-0 left-0 w-full h-full bg-repeat bg-center invert-[.1] dark:invert-0 motion-safe:animate-slide transition-opacity duration-1250 motion-reduce:transition-none opacity-0" style="background-image:url(&#x27;/images/bg/pattern.png&#x27;)"></div><div class="overflow-hidden py-2" style="opacity:1"><h1 class="text-3xl font-bold text-white leading-tight transform transition duration-700 motion-reduce:transition-none sm:text-4xl md:text-5xl lg:text-6xl xl:text-7xl opacity-0 translate-y-full">Different ways to use the useRef hook in React</h1></div><div class="overflow-hidden" style="opacity:1"><p class="font-light text-white transform transition duration-700 motion-reduce:transition-none xl:text-2xl opacity-0 translate-y-full">Learn about the various use cases of React&#x27;s useRef hook</p></div></section><section class="pt-16 pb-20 px-6 sm:pt-20 sm:pb-24 sm:px-8 md:pt-24 md:pb-28 lg:px-10 xl:pt-28 xl:pb-32 transform transition-transform-opacity duration-700 motion-reduce:transition-none opacity-0" data-testid="section"><div class="w-11/12 max-w-screen-3xl -mt-8 mx-auto pb-8 sm:-mt-10 sm:pb-10 md:-mt-12 md:pb-12 lg:w-5/6"><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="4984498713" data-ad-format="auto" data-full-width-responsive="true" data-testid="ad-unit"></ins></div><div class="flex justify-between items-center w-11/12 max-w-screen-3xl mx-auto lg:w-5/6"><div class="mr-4 text-sm text-gray-400 sm:text-base xl:text-lg">Last Updated: <time dateTime="2023-04-07">April 7, 2023</time></div><div class="rounded py-0.5 px-1.5 bg-gray-200 text-2xs capitalize dark:bg-gray-600 md:py-1 md:px-2 md:text-xs xl:text-sm">technology</div></div><div class="w-11/12 max-w-screen-3xl mt-4 mx-auto lg:w-5/6"><a class="group inline-flex items-center font-normal select-none dark:hover:text-white transition-colors duration-300 hover:text-black group-hover:text-black motion-reduce:transition-none" target="_blank" rel="noopener noreferrer nofollow" href="https://youtu.be/RLwE5R5ZSuQ"><svg viewBox="0 0 576 512" role="img" class="w-6 h-6 mr-2 text-gray-400 transition-colors duration-300 group-hover:text-red motion-reduce:transition-none dark:group-hover:text-white sm:w-7 sm:h-7 sm:mr-3 xl:w-8 xl:h-8"><path fill="currentColor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"></path></svg> <!-- -->Watch it on YouTube<svg viewBox="0 0 320 512" role="img" class="inline-block w-2 h-2 ml-2 text-black opacity-30 dark:text-white transform transition duration-300 group-hover:translate-x-1.5 group-hover:opacity-100 motion-reduce:transition-none sm:w-2.5 sm:h-2.5 sm:ml-2.5 md:w-3 md:h-3 md:ml-3 xl:w-3.5 xl:h-3.5"><path fill="currentColor" d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"></path></svg></a></div><article class="w-11/12 max-w-screen-3xl mx-auto prose dark:prose-dark sm:prose-lg lg:w-5/6 xl:prose-xl mt-8 sm:mt-10 xl:mt-14" data-clarity-region="article" data-testid="content"><h2>Introduction</h2>
<p>One of my favorite features that <a target="_blank" rel="noopener noreferrer nofollow" href="https://react.dev/">React</a> introduced is <a target="_blank" rel="noopener noreferrer nofollow" href="https://react.dev/reference/react">React Hooks</a> - I mentioned this before in my <a href="/posts/how-to-integrate-with-a-rest-api-using-react-hooks-and-typescript-with-tests//">previous post</a>. React Hooks allow you to use state and other React features without writing a class, making it easier to build React components and features. One hook that I find particularly useful is <a target="_blank" rel="noopener noreferrer nofollow" href="https://react.dev/reference/react/useRef"><code>React.useRef</code></a>. Although it is often used to manipulate the <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model">DOM</a>, it has other use cases as well. In this article, we&#x27;ll explore different ways to use the useRef hook. Let&#x27;s get started!</p>
<h2>What is React.useRef?</h2>
<p><code>React.useRef</code> is one of the built-in hooks introduced in React. It lets you reference a value that&#x27;s not needed for rendering or it allows you persist values between renders. To put it simply, it&#x27;s a way to store a value that doesn&#x27;t cause a re-render when updated.</p>
<p>Now that you know what <code>useRef</code> is, let&#x27;s find out the different ways you can use it.</p>
<h2>Manipulating the DOM with a ref</h2>
<p>Manipulating the DOM with a ref is the most common way to use <code>useRef</code>. It allows you to access a child element imperatively.</p>
<p>Here&#x27;s an example of a component that will automatically focus on the input element on mount:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> { useRef, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">MyComponent</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> inputRef = useRef&lt;HTMLInputElement&gt;(<span class="hljs-literal">null</span>);

  useEffect(<span class="hljs-function">() =&gt;</span> {
    inputRef.current?.focus();
  }, []);

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{inputRef}</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;email&quot;</span> /&gt;</span></span>;
}
</code></pre>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<h2>Referencing a value with a ref and using it in a callback</h2>
<p>You can also store different kinds of data inside a ref. This is useful when you want to use a value that&#x27;s not needed for rendering, like storing an interval ID.</p>
<p>Here&#x27;s an example of a component that will increment a counter every second, and you can stop the interval with a click of a button:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> { useRef, useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">MyComponent</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> intervalIdRef = useRef(<span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> [counter, setCounter] = useState(<span class="hljs-number">0</span>);

  <span class="hljs-keyword">const</span> stopInterval = <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-built_in">window</span>.clearInterval(intervalIdRef.current);
  };

  useEffect(<span class="hljs-function">() =&gt;</span> {
    intervalIdRef.current = <span class="hljs-built_in">window</span>.setInterval(<span class="hljs-function">() =&gt;</span> {
      setCounter(<span class="hljs-function">(<span class="hljs-params">prevCounter</span>) =&gt;</span> prevCounter + <span class="hljs-number">1</span>);
    }, <span class="hljs-number">1000</span>);

    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      stopInterval();
    };
  }, []);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Counter: {counter}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{stopInterval}</span>&gt;</span>Stop interval<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h2>Referencing a value with a ref and using it in a useEffect</h2>
<p>You can also use a ref to store a value that you want to access in a <a target="_blank" rel="noopener noreferrer nofollow" href="https://react.dev/reference/react/useEffect"><code>React.useEffect</code></a> hook. This is useful if for example you have a window event listener that can only get the updated value from a ref.</p>
<p>Here&#x27;s an example of a component that will increment a counter every second and log the current value of the counter when the user clicks on the screen:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> { useRef, useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">MyComponent</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> [counter, setCounter] = useState(<span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> counterRef = useRef(<span class="hljs-number">0</span>);

  <span class="hljs-keyword">const</span> increaseCount = <span class="hljs-function">() =&gt;</span> {
    counterRef.current += <span class="hljs-number">1</span>;
    setCounter(counterRef.current);
  };

  useEffect(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> intervalId = <span class="hljs-built_in">window</span>.setInterval(increaseCount, <span class="hljs-number">1000</span>);

    <span class="hljs-keyword">const</span> handleMouseDown = <span class="hljs-function">() =&gt;</span>
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`The current counter is <span class="hljs-subst">${counterRef.current}</span>`</span>);

    <span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">&#x27;mousedown&#x27;</span>, handleMouseDown);

    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-built_in">window</span>.clearInterval(intervalId);
      <span class="hljs-built_in">window</span>.removeEventListener(<span class="hljs-string">&#x27;mousedown&#x27;</span>, handleMouseDown);
    };
  }, []);

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Counter: {counter}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>;
}
</code></pre>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>Here&#x27;s a custom hook that extends the functionality of <a target="_blank" rel="noopener noreferrer nofollow" href="https://react.dev/reference/react/useState"><code>React.useState</code></a> and provides a ref to the current state:</p>
<pre><code class="hljs language-tsx"><span class="hljs-comment">// lib/custom-hooks.ts</span>
<span class="hljs-keyword">import</span> { useState, useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">useStateRef</span>&lt;<span class="hljs-title">S</span>&gt;(<span class="hljs-params">defaultValue: S</span>) </span>{
  <span class="hljs-keyword">const</span> ref = useRef&lt;S&gt;(defaultValue);
  <span class="hljs-keyword">const</span> [state, _setState] = useState&lt;S&gt;(defaultValue);
  <span class="hljs-keyword">const</span> setState = <span class="hljs-function">(<span class="hljs-params">value: S</span>) =&gt;</span> {
    ref.current = value;
    _setState(value);
  };

  <span class="hljs-keyword">return</span> [state, setState, ref] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>;
}
</code></pre>
<p>If you&#x27;re new to <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.typescriptlang.org/">TypeScript</a>, you might be wondering what the <code>S</code> type is. It&#x27;s a <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.typescriptlang.org/docs/handbook/2/generics.html">generic type</a> that allows you to pass a type to the function. In this case, we&#x27;re passing the type of the state to the <code>useStateRef</code> function. This allows us to use the same function for different types of state. As for the <code>as const</code> part, it&#x27;s a <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#type-assertions">TypeScript assertion</a> that tells TypeScript that the array returned by the <code>useStateRef</code> function will always have the same types.</p>
<p>Using this hook can make it easier to use a ref in a <code>useEffect</code> hook. Here&#x27;s the updated version of the previous example using the <code>useStateRef</code> hook:</p>
<pre><code class="hljs language-tsx">...
<span class="hljs-keyword">import</span> {useStateRef} <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./lib/custom-hooks&#x27;</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">MyComponent</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> [counter, setCounter, counterRef] = useStateRef(<span class="hljs-number">0</span>);

  <span class="hljs-keyword">const</span> increaseCount = <span class="hljs-function">() =&gt;</span> {
    setCounter(counterRef.current + <span class="hljs-number">1</span>);
  };

  useEffect(<span class="hljs-function">() =&gt;</span> {
    ...
  }, []);

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Counter: {counter}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>;
}

</code></pre>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<h2>More complex examples</h2>
<p>While the examples we&#x27;ve seen so far are simple, <code>useRef</code> can also be used for more complex use cases. For instance, you might need to allow the user to drag a box around the screen. In this case, you can use <code>useRef</code> to store the initial position of the mouse when the user clicks on the box, and then use it to calculate the new position of the box as the user moves the mouse.</p>
<p>Here&#x27;s an example of a component that lets you drag a box around:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> React, { useRef, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">MyComponent</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> previousPositionRef = useRef({ <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> });
  <span class="hljs-keyword">const</span> initialPositionRef = useRef({ <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> });
  <span class="hljs-keyword">const</span> [position, setPosition] = useState({ <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> });

  <span class="hljs-keyword">const</span> handleMouseMove = <span class="hljs-function">(<span class="hljs-params">e: MouseEvent</span>) =&gt;</span> {
    setPosition({
      <span class="hljs-attr">x</span>:
        previousPositionRef.current.x +
        e.clientX -
        initialPositionRef.current.x,
      <span class="hljs-attr">y</span>:
        previousPositionRef.current.y +
        e.clientY -
        initialPositionRef.current.y,
    });
  };

  <span class="hljs-keyword">const</span> handleMouseUp = <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-built_in">window</span>.removeEventListener(<span class="hljs-string">&#x27;mouseup&#x27;</span>, handleMouseUp);
    <span class="hljs-built_in">window</span>.removeEventListener(<span class="hljs-string">&#x27;mousemove&#x27;</span>, handleMouseMove);
  };

  <span class="hljs-keyword">const</span> handleMouseDown = <span class="hljs-function">(<span class="hljs-params">e: React.MouseEvent&lt;HTMLDivElement&gt;</span>) =&gt;</span> {
    previousPositionRef.current = position;
    initialPositionRef.current = {
      <span class="hljs-attr">x</span>: e.clientX,
      <span class="hljs-attr">y</span>: e.clientY,
    };

    <span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">&#x27;mouseup&#x27;</span>, handleMouseUp);
    <span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">&#x27;mousemove&#x27;</span>, handleMouseMove);
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
        <span class="hljs-attr">position:</span> &#x27;<span class="hljs-attr">absolute</span>&#x27;,
        <span class="hljs-attr">top:</span> <span class="hljs-attr">position.y</span>,
        <span class="hljs-attr">left:</span> <span class="hljs-attr">position.x</span>,
        <span class="hljs-attr">width:</span> <span class="hljs-attr">100</span>,
        <span class="hljs-attr">height:</span> <span class="hljs-attr">100</span>,
        <span class="hljs-attr">backgroundColor:</span> &#x27;<span class="hljs-attr">red</span>&#x27;,
      }}
      <span class="hljs-attr">onMouseDown</span>=<span class="hljs-string">{handleMouseDown}</span>
      <span class="hljs-attr">onMouseUp</span>=<span class="hljs-string">{handleMouseUp}</span>
    /&gt;</span></span>
  );
}
</code></pre>
<div><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit"></ins></div>
<p>Another example or use case is when you have two states that you need to be included in a callback function but the useEffect hook only has one state as a dependency. You can use a ref to store the value of the other state and then use it in the callback function.</p>
<p>Here&#x27;s an example of a component that has two inputs and logs the values of both inputs when the first input changes:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> { useState, useEffect, useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">MyComponent</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> [firstData, setFirstData] = useState(<span class="hljs-string">&#x27;John&#x27;</span>);
  <span class="hljs-keyword">const</span> [secondData, _setSecondData] = useState(<span class="hljs-string">&#x27;Doe&#x27;</span>);
  <span class="hljs-keyword">const</span> secondDataRef = useRef(secondData);

  useEffect(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-built_in">console</span>.log({ firstData, <span class="hljs-attr">secondData</span>: secondDataRef.current });
    <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> do something with these two values</span>
  }, [firstData]);

  useEffect(<span class="hljs-function">() =&gt;</span> {
    secondDataRef.current = secondData;
  }, [secondData]);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{firstData}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> setFirstData(e.target.value)}
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{secondData}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> setSecondData(e.target.value)}
      /&gt;
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>Here you might notice that I&#x27;m updating the value of <code>secondDataRef</code> in a separate <code>useEffect</code> hook using <code>secondData</code> as the dependency. This is another way to ensure that the value of <code>secondDataRef</code> is always up-to-date instead of creating a separate setState function for <code>secondData</code>.</p>
<p>While you could technically just log <code>secondData</code> in the <code>useEffect</code> hook, doing so would give you a lint warning because <code>secondData</code> is not a dependency of the hook, and there may be times when its value is not updated. By using <code>useRef</code>, you can ensure that the value of <code>secondData</code> is always up-to-date before the <code>useEffect</code> hook runs.</p>
<p>Also while I&#x27;m just logging the values of the two inputs in the <code>useEffect</code> hook, you could do something more complex with them. For instance, you could make an <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Glossary/API">API</a> call using the values of the two inputs but only call the API when the first input changes.</p>
<h2>Conclusion</h2>
<p>That&#x27;s it for this article. We have covered the different ways you can use <code>useRef</code> in your React components. I hope this article was useful for you and that you learned something new.</p>
<p>Don&#x27;t forget to check out the official React documentation for more information about <code>useRef</code>.</p>
<p>Thanks for reading!</p>
<h2>References</h2>
<ul>
<li><a target="_blank" rel="noopener noreferrer nofollow" href="https://react.dev/reference/react/useRef">React.useRef documentation</a></li>
<li><a target="_blank" rel="noopener noreferrer nofollow" href="https://legacy.reactjs.org/docs/hooks-reference.html#useref">Legacy React.useRef documentation</a></li>
</ul></article><div class="w-11/12 max-w-screen-3xl mx-auto lg:w-5/6"><p class="mt-16 text-gray-400">Found an issue with this post?<!-- --> <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/dominicarrojado/dominicarrojado.github.io/issues">Report it here</a>.</p><div class="mt-24 flex justify-between items-center"><a class="group relative pr-2" href="/posts/embassy-of-japan-in-singapore-visa-appointment-notification-service-for-visa-tourism-applications/"><div class=""><div class="font-normal transition-colors duration-300 group-hover:text-black motion-reduce:transition-none dark:group-hover:text-white">Embassy of Japan in Singapore Visa Appointment Notification Service for Visa (Tourism) applications</div><small class="text-gray-400 transition-colors duration-300 group-hover:text-black motion-reduce:transition-none dark:group-hover:text-white">Previous Post</small></div><svg viewBox="0 0 320 512" role="img" class="absolute top-0 bottom-0 m-auto shrink-0 w-2 h-2 text-black opacity-30 dark:text-white transform transition-transform-opacity duration-300 group-hover:opacity-100 motion-reduce:transition-none sm:w-2.5 sm:h-2.5 md:w-3 md:h-3 xl:w-3.5 xl:h-3.5 -left-5 sm:-left-7 xl:-left-8 group-hover:-translate-x-1.5"><path fill="currentColor" d="M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"></path></svg></a><div></div></div><div class="mt-16 text-center"><a class="group inline-flex items-center font-normal select-none dark:hover:text-white transition-colors duration-300 hover:text-black group-hover:text-black motion-reduce:transition-none" href="/posts/">See Latest Posts<svg viewBox="0 0 320 512" role="img" class="inline-block w-2 h-2 ml-2 text-black opacity-30 dark:text-white transform transition duration-300 group-hover:translate-x-1.5 group-hover:opacity-100 motion-reduce:transition-none sm:w-2.5 sm:h-2.5 sm:ml-2.5 md:w-3 md:h-3 md:ml-3 xl:w-3.5 xl:h-3.5"><path fill="currentColor" d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"></path></svg></a></div></div><div class="w-11/12 max-w-screen-3xl -mb-8 mx-auto pt-8 sm:-mb-10 sm:pt-10 md:-mb-12 md:pt-12 lg:w-5/6"><ins class="adsbygoogle block max-w-[1200px] mx-auto adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="6892691691" data-ad-format="auto" data-full-width-responsive="true" data-testid="ad-unit"></ins></div></section><footer class="py-20 px-6 bg-gray-100 dark:bg-gray-850 overflow-hidden lg:overflow-auto" data-testid="footer"><ul class="relative text-center overflow-hidden motion-reduce:transition-none sm:text-lg xl:text-xl" style="height:0"><li class="absolute top-0 left-0 w-full transition-opacity duration-1000 motion-reduce:transition-none"><blockquote>“<!-- -->If there is no struggle, there is no progress.<!-- -->”</blockquote><p class="mt-1 sm:mt-2">— <!-- -->Frederick Douglass</p></li><li class="absolute top-0 left-0 w-full transition-opacity duration-1000 motion-reduce:transition-none opacity-0 pointer-events-none"><blockquote>“<!-- -->It&#x27;s okay to figure out murder mysteries, but you shouldn&#x27;t need to figure out code. You should be able to read it.<!-- -->”</blockquote><p class="mt-1 sm:mt-2">— <!-- -->Steve McConnell</p></li><li class="absolute top-0 left-0 w-full transition-opacity duration-1000 motion-reduce:transition-none opacity-0 pointer-events-none"><blockquote>“<!-- -->If you can&#x27;t explain it simply, you don&#x27;t understand it well enough.<!-- -->”</blockquote><p class="mt-1 sm:mt-2">— <!-- -->Albert Einstein</p></li><li class="absolute top-0 left-0 w-full transition-opacity duration-1000 motion-reduce:transition-none opacity-0 pointer-events-none"><blockquote>“<!-- -->The secret of getting ahead is getting started.<!-- -->”</blockquote><p class="mt-1 sm:mt-2">— <!-- -->Mark Twain</p></li></ul><ul class="max-w-full mt-10 flex flex-wrap justify-center"><li><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" href="/donate/" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Show your support and donate!"><svg viewBox="0 0 512 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M256 416c114.9 0 208-93.1 208-208S370.9 0 256 0 48 93.1 48 208s93.1 208 208 208zM233.8 97.4V80.6c0-9.2 7.4-16.6 16.6-16.6h11.1c9.2 0 16.6 7.4 16.6 16.6v17c15.5.8 30.5 6.1 43 15.4 5.6 4.1 6.2 12.3 1.2 17.1L306 145.6c-3.8 3.7-9.5 3.8-14 1-5.4-3.4-11.4-5.1-17.8-5.1h-38.9c-9 0-16.3 8.2-16.3 18.3 0 8.2 5 15.5 12.1 17.6l62.3 18.7c25.7 7.7 43.7 32.4 43.7 60.1 0 34-26.4 61.5-59.1 62.4v16.8c0 9.2-7.4 16.6-16.6 16.6h-11.1c-9.2 0-16.6-7.4-16.6-16.6v-17c-15.5-.8-30.5-6.1-43-15.4-5.6-4.1-6.2-12.3-1.2-17.1l16.3-15.5c3.8-3.7 9.5-3.8 14-1 5.4 3.4 11.4 5.1 17.8 5.1h38.9c9 0 16.3-8.2 16.3-18.3 0-8.2-5-15.5-12.1-17.6l-62.3-18.7c-25.7-7.7-43.7-32.4-43.7-60.1.1-34 26.4-61.5 59.1-62.4zM480 352h-32.5c-19.6 26-44.6 47.7-73 64h63.8c5.3 0 9.6 3.6 9.6 8v16c0 4.4-4.3 8-9.6 8H73.6c-5.3 0-9.6-3.6-9.6-8v-16c0-4.4 4.3-8 9.6-8h63.8c-28.4-16.3-53.3-38-73-64H32c-17.7 0-32 14.3-32 32v96c0 17.7 14.3 32 32 32h448c17.7 0 32-14.3 32-32v-96c0-17.7-14.3-32-32-32z"></path></svg><span id=":R26i6:" style="position:fixed"></span></a></li><li><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" href="https://www.youtube.com/channel/UCWwV__qrzg5BYCSwO91Xhxg/videos?view=0&amp;sort=dd" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Watch my tech videos!"><svg viewBox="0 0 576 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"></path></svg><span id=":R2ai6:" style="position:fixed"></span></a></li><li><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" href="https://www.linkedin.com/in/dominic-arrojado-75ba03a9/" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Let&#x27;s connect on LinkedIn!"><svg viewBox="0 0 448 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg><span id=":R2ei6:" style="position:fixed"></span></a></li><li><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" href="https://github.com/dominicarrojado/" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Follow me on GitHub!"><svg viewBox="0 0 496 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg><span id=":R2ii6:" style="position:fixed"></span></a></li><li><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" href="mailto:dominicarrojado@gmail.com" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Email me!"><svg viewBox="0 0 512 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"></path></svg><span id=":R2mi6:" style="position:fixed"></span></a></li></ul><p class="mt-4 text-gray-400 text-sm text-center sm:text-base lg:mt-10 xl:text-lg"><span class="font-normal">©<!-- -->2024<!-- --> <!-- -->Dominic Arrojado</span> <span class="block mt-1 sm:hidden"></span><span class="hidden sm:inline">·</span> <a href="/privacy-policy/">Privacy Policy</a> <!-- -->·<!-- --> <a href="/disclaimer/">Disclaimer</a></p></footer><footer class="fixed flex items-center justify-end bottom-0 w-full z-40"><div class="absolute bottom-3.5 right-3.5 flex items-end gap-3 ml-auto sm:bottom-4 sm:right-4 md:bottom-5 md:right-5 lg:bottom-8 lg:right-8" style="padding-right:var(--scrollbar-width, 0)"><button data-command="" data-disclosure="" aria-expanded="false" class="group text-gray-400 outline-none dark:text-gray-300 hover:text-gray-500 focus-visible:text-gray-500 dark:hover:text-white dark:focus-visible:text-white" aria-label="Subscribe"><div class="flex items-center flex-col"><div class="relative w-5 h-5 transform transition-transform-opacity-color motion-reduce:transition-none md:w-7 md:h-7 duration-700 opacity-0 -translate-y-2"><svg viewBox="0 0 448 512" role="img" class="absolute inset-0 m-auto"><path fill="currentColor" d="M224 0c-17.7 0-32 14.3-32 32V51.2C119 66 64 130.6 64 208v18.8c0 47-17.3 92.4-48.5 127.6l-7.4 8.3c-8.4 9.4-10.4 22.9-5.3 34.4S19.4 416 32 416H416c12.6 0 24-7.4 29.2-18.9s3.1-25-5.3-34.4l-7.4-8.3C401.3 319.2 384 273.9 384 226.8V208c0-77.4-55-142-128-156.8V32c0-17.7-14.3-32-32-32zm45.3 493.3c12-12 18.7-28.3 18.7-45.3H224 160c0 17 6.7 33.3 18.7 45.3s28.3 18.7 45.3 18.7s33.3-6.7 45.3-18.7z"></path></svg></div><div class="mt-2 text-3xs font-normal uppercase select-none transform transition-transform-opacity-color motion-reduce:transition-none md:text-2xs xl:text-xs duration-700 opacity-0 translate-y-3">Subscribe</div></div></button></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"different-ways-to-use-the-useref-hook-in-react","content":"\n## Introduction\n\nOne of my favorite features that [React](https://react.dev/) introduced is [React Hooks](https://react.dev/reference/react) - I mentioned this before in my [previous post](/posts/how-to-integrate-with-a-rest-api-using-react-hooks-and-typescript-with-tests/). React Hooks allow you to use state and other React features without writing a class, making it easier to build React components and features. One hook that I find particularly useful is [`React.useRef`](https://react.dev/reference/react/useRef). Although it is often used to manipulate the [DOM](https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model), it has other use cases as well. In this article, we'll explore different ways to use the useRef hook. Let's get started!\n\n## What is React.useRef?\n\n`React.useRef` is one of the built-in hooks introduced in React. It lets you reference a value that's not needed for rendering or it allows you persist values between renders. To put it simply, it's a way to store a value that doesn't cause a re-render when updated.\n\nNow that you know what `useRef` is, let's find out the different ways you can use it.\n\n## Manipulating the DOM with a ref\n\nManipulating the DOM with a ref is the most common way to use `useRef`. It allows you to access a child element imperatively.\n\nHere's an example of a component that will automatically focus on the input element on mount:\n\n```tsx\nimport { useRef, useEffect } from 'react';\n\nfunction MyComponent() {\n  const inputRef = useRef\u003cHTMLInputElement\u003e(null);\n\n  useEffect(() =\u003e {\n    inputRef.current?.focus();\n  }, []);\n\n  return \u003cinput ref={inputRef} type=\"email\" /\u003e;\n}\n```\n\n---\n\n## Referencing a value with a ref and using it in a callback\n\nYou can also store different kinds of data inside a ref. This is useful when you want to use a value that's not needed for rendering, like storing an interval ID.\n\nHere's an example of a component that will increment a counter every second, and you can stop the interval with a click of a button:\n\n```tsx\nimport { useRef, useState, useEffect } from 'react';\n\nfunction MyComponent() {\n  const intervalIdRef = useRef(0);\n  const [counter, setCounter] = useState(0);\n\n  const stopInterval = () =\u003e {\n    window.clearInterval(intervalIdRef.current);\n  };\n\n  useEffect(() =\u003e {\n    intervalIdRef.current = window.setInterval(() =\u003e {\n      setCounter((prevCounter) =\u003e prevCounter + 1);\n    }, 1000);\n\n    return () =\u003e {\n      stopInterval();\n    };\n  }, []);\n\n  return (\n    \u003cdiv\u003e\n      \u003cp\u003eCounter: {counter}\u003c/p\u003e\n      \u003cbutton onClick={stopInterval}\u003eStop interval\u003c/button\u003e\n    \u003c/div\u003e\n  );\n}\n```\n\n## Referencing a value with a ref and using it in a useEffect\n\nYou can also use a ref to store a value that you want to access in a [`React.useEffect`](https://react.dev/reference/react/useEffect) hook. This is useful if for example you have a window event listener that can only get the updated value from a ref.\n\nHere's an example of a component that will increment a counter every second and log the current value of the counter when the user clicks on the screen:\n\n```tsx\nimport { useRef, useState, useEffect } from 'react';\n\nfunction MyComponent() {\n  const [counter, setCounter] = useState(0);\n  const counterRef = useRef(0);\n\n  const increaseCount = () =\u003e {\n    counterRef.current += 1;\n    setCounter(counterRef.current);\n  };\n\n  useEffect(() =\u003e {\n    const intervalId = window.setInterval(increaseCount, 1000);\n\n    const handleMouseDown = () =\u003e\n      console.log(`The current counter is ${counterRef.current}`);\n\n    window.addEventListener('mousedown', handleMouseDown);\n\n    return () =\u003e {\n      window.clearInterval(intervalId);\n      window.removeEventListener('mousedown', handleMouseDown);\n    };\n  }, []);\n\n  return \u003cp\u003eCounter: {counter}\u003c/p\u003e;\n}\n```\n\n---\n\nHere's a custom hook that extends the functionality of [`React.useState`](https://react.dev/reference/react/useState) and provides a ref to the current state:\n\n```tsx\n// lib/custom-hooks.ts\nimport { useState, useRef } from 'react';\n\nexport function useStateRef\u003cS\u003e(defaultValue: S) {\n  const ref = useRef\u003cS\u003e(defaultValue);\n  const [state, _setState] = useState\u003cS\u003e(defaultValue);\n  const setState = (value: S) =\u003e {\n    ref.current = value;\n    _setState(value);\n  };\n\n  return [state, setState, ref] as const;\n}\n```\n\nIf you're new to [TypeScript](https://www.typescriptlang.org/), you might be wondering what the `S` type is. It's a [generic type](https://www.typescriptlang.org/docs/handbook/2/generics.html) that allows you to pass a type to the function. In this case, we're passing the type of the state to the `useStateRef` function. This allows us to use the same function for different types of state. As for the `as const` part, it's a [TypeScript assertion](https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#type-assertions) that tells TypeScript that the array returned by the `useStateRef` function will always have the same types.\n\nUsing this hook can make it easier to use a ref in a `useEffect` hook. Here's the updated version of the previous example using the `useStateRef` hook:\n\n```tsx\n...\nimport {useStateRef} from './lib/custom-hooks';\n\nfunction MyComponent() {\n  const [counter, setCounter, counterRef] = useStateRef(0);\n\n  const increaseCount = () =\u003e {\n    setCounter(counterRef.current + 1);\n  };\n\n  useEffect(() =\u003e {\n    ...\n  }, []);\n\n  return \u003cp\u003eCounter: {counter}\u003c/p\u003e;\n}\n\n```\n\n---\n\n## More complex examples\n\nWhile the examples we've seen so far are simple, `useRef` can also be used for more complex use cases. For instance, you might need to allow the user to drag a box around the screen. In this case, you can use `useRef` to store the initial position of the mouse when the user clicks on the box, and then use it to calculate the new position of the box as the user moves the mouse.\n\nHere's an example of a component that lets you drag a box around:\n\n```tsx\nimport React, { useRef, useState } from 'react';\n\nfunction MyComponent() {\n  const previousPositionRef = useRef({ x: 0, y: 0 });\n  const initialPositionRef = useRef({ x: 0, y: 0 });\n  const [position, setPosition] = useState({ x: 0, y: 0 });\n\n  const handleMouseMove = (e: MouseEvent) =\u003e {\n    setPosition({\n      x:\n        previousPositionRef.current.x +\n        e.clientX -\n        initialPositionRef.current.x,\n      y:\n        previousPositionRef.current.y +\n        e.clientY -\n        initialPositionRef.current.y,\n    });\n  };\n\n  const handleMouseUp = () =\u003e {\n    window.removeEventListener('mouseup', handleMouseUp);\n    window.removeEventListener('mousemove', handleMouseMove);\n  };\n\n  const handleMouseDown = (e: React.MouseEvent\u003cHTMLDivElement\u003e) =\u003e {\n    previousPositionRef.current = position;\n    initialPositionRef.current = {\n      x: e.clientX,\n      y: e.clientY,\n    };\n\n    window.addEventListener('mouseup', handleMouseUp);\n    window.addEventListener('mousemove', handleMouseMove);\n  };\n\n  return (\n    \u003cdiv\n      style={{\n        position: 'absolute',\n        top: position.y,\n        left: position.x,\n        width: 100,\n        height: 100,\n        backgroundColor: 'red',\n      }}\n      onMouseDown={handleMouseDown}\n      onMouseUp={handleMouseUp}\n    /\u003e\n  );\n}\n```\n\n---\n\nAnother example or use case is when you have two states that you need to be included in a callback function but the useEffect hook only has one state as a dependency. You can use a ref to store the value of the other state and then use it in the callback function.\n\nHere's an example of a component that has two inputs and logs the values of both inputs when the first input changes:\n\n```tsx\nimport { useState, useEffect, useRef } from 'react';\n\nfunction MyComponent() {\n  const [firstData, setFirstData] = useState('John');\n  const [secondData, _setSecondData] = useState('Doe');\n  const secondDataRef = useRef(secondData);\n\n  useEffect(() =\u003e {\n    console.log({ firstData, secondData: secondDataRef.current });\n    // TODO: do something with these two values\n  }, [firstData]);\n\n  useEffect(() =\u003e {\n    secondDataRef.current = secondData;\n  }, [secondData]);\n\n  return (\n    \u003cdiv\u003e\n      \u003cinput\n        type=\"text\"\n        value={firstData}\n        onChange={(e) =\u003e setFirstData(e.target.value)}\n      /\u003e\n      \u003cinput\n        type=\"text\"\n        value={secondData}\n        onChange={(e) =\u003e setSecondData(e.target.value)}\n      /\u003e\n    \u003c/div\u003e\n  );\n}\n```\n\nHere you might notice that I'm updating the value of `secondDataRef` in a separate `useEffect` hook using `secondData` as the dependency. This is another way to ensure that the value of `secondDataRef` is always up-to-date instead of creating a separate setState function for `secondData`.\n\nWhile you could technically just log `secondData` in the `useEffect` hook, doing so would give you a lint warning because `secondData` is not a dependency of the hook, and there may be times when its value is not updated. By using `useRef`, you can ensure that the value of `secondData` is always up-to-date before the `useEffect` hook runs.\n\nAlso while I'm just logging the values of the two inputs in the `useEffect` hook, you could do something more complex with them. For instance, you could make an [API](https://developer.mozilla.org/en-US/docs/Glossary/API) call using the values of the two inputs but only call the API when the first input changes.\n\n## Conclusion\n\nThat's it for this article. We have covered the different ways you can use `useRef` in your React components. I hope this article was useful for you and that you learned something new.\n\nDon't forget to check out the official React documentation for more information about `useRef`.\n\nThanks for reading!\n\n## References\n\n- [React.useRef documentation](https://react.dev/reference/react/useRef)\n- [Legacy React.useRef documentation](https://legacy.reactjs.org/docs/hooks-reference.html#useref)\n","previousPost":{"id":"embassy-of-japan-in-singapore-visa-appointment-notification-service-for-visa-tourism-applications","title":"Embassy of Japan in Singapore Visa Appointment Notification Service for Visa (Tourism) applications","date":"2023-03-24","excerpt":"A web application that lets you subscribe to email notifications for new booking slots","category":"technology","videoUrl":""},"nextPost":null,"title":"Different ways to use the useRef hook in React","date":"2023-04-07","excerpt":"Learn about the various use cases of React's useRef hook","category":"technology","videoUrl":"https://youtu.be/RLwE5R5ZSuQ"}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"different-ways-to-use-the-useref-hook-in-react"},"buildId":"b9IqsjLgy52FxSeGl4emG","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>