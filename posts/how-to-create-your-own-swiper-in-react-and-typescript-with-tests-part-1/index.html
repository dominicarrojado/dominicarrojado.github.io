<!DOCTYPE html><html lang="en"><head><link rel="preload" href="/fonts/Roboto-Light.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Light.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-LightItalic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-LightItalic.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Regular.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Italic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Italic.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Medium.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Medium.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-MediumItalic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-MediumItalic.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Bold.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-Bold.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-BoldItalic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/Roboto-BoldItalic.woff" as="font" type="font/woff" crossorigin="anonymous"/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="theme-color" content="#000000"/><meta name="description" content="Learn how to build a modern mobile touch swiper in a reactive and reusable way"/><meta name="author" content="Dominic Arrojado"/><link rel="canonical" href="https://dominicarrojado.com/posts/how-to-create-your-own-swiper-in-react-and-typescript-with-tests-part-1/"/><link rel="icon" href="https://dominicarrojado.com/favicon.ico"/><link rel="manifest" href="https://dominicarrojado.com/manifest.json"/><meta property="og:locale" content="en_US"/><meta property="og:type" content="website"/><meta property="og:title" content="How to create your own swiper, carousel or slider in React and TypeScript with tests (Part 1) | Dominic Arrojado"/><meta property="og:description" content="Learn how to build a modern mobile touch swiper in a reactive and reusable way"/><meta property="og:url" content="https://dominicarrojado.com/posts/how-to-create-your-own-swiper-in-react-and-typescript-with-tests-part-1/"/><meta property="og:site_name" content="Dominic Arrojado"/><meta property="og:image" content="https://dominicarrojado.com/images/pages/guides-tips-and-tricks-to-web-development.png"/><meta property="og:image:secure_url" content="https://dominicarrojado.com/images/pages/guides-tips-and-tricks-to-web-development.png"/><meta property="og:image:width" content="2400"/><meta property="og:image:height" content="1254"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:description" content="Learn how to build a modern mobile touch swiper in a reactive and reusable way"/><meta name="twitter:title" content="How to create your own swiper, carousel or slider in React and TypeScript with tests (Part 1) | Dominic Arrojado"/><meta name="twitter:image" content="https://dominicarrojado.com/images/pages/guides-tips-and-tricks-to-web-development.png"/><title>How to create your own swiper, carousel or slider in React and TypeScript with tests (Part 1) | Dominic Arrojado</title><meta name="next-head-count" content="24"/><link rel="preload" href="/_next/static/css/b3b3954825c254d1.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b3b3954825c254d1.css" data-n-g=""/><link rel="preload" href="/_next/static/css/82d01f71dc75279c.css" as="style"/><link rel="stylesheet" href="/_next/static/css/82d01f71dc75279c.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-415884ad8bb57eb6.js" defer=""></script><script src="/_next/static/chunks/framework-433e73989db4e225.js" defer=""></script><script src="/_next/static/chunks/main-c51b0b3c89045435.js" defer=""></script><script src="/_next/static/chunks/pages/_app-5da5409688e8d3dc.js" defer=""></script><script src="/_next/static/chunks/216-1077b041778ead2e.js" defer=""></script><script src="/_next/static/chunks/466-2aafae0e90314603.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-f079fd98ffc73dab.js" defer=""></script><script src="/_next/static/WUIasYkuXjHUrNxmXuaI-/_buildManifest.js" defer=""></script><script src="/_next/static/WUIasYkuXjHUrNxmXuaI-/_ssgManifest.js" defer=""></script><script src="/_next/static/WUIasYkuXjHUrNxmXuaI-/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><noscript>
            <iframe
              src="https://www.googletagmanager.com/ns.html?id=GTM-TSMLTPT"
              height="0"
              width="0"
              style="display: none; visibility: hidden"
            ></iframe>
          </noscript><div tabindex="-1" class="h-full outline-none"><header><a href="#main" tabindex="0" class="absolute -top-96 -left-96 w-px h-px text-center text-white overflow-hidden -z-50 focus:top-4 focus:inset-x-0 focus:m-auto focus:w-44 focus:h-auto focus:z-50 focus:sm:w-52 focus:xl:w-56">Skip to main content</a><a class="group fixed top-3.5 left-3.5 z-50 flex shadow-3xl border border-white bg-gray-750 bg-opacity-90 p-1.5 transform transition ease-in-out duration-500 hover:shadow-md hover:bg-opacity-100 motion-reduce:transition-none sm:top-4 sm:left-4 md:top-6 md:left-8 md:border-2 xl:left-9 xl:p-2 delay-700 opacity-0 -translate-y-full" aria-label="Dominic Arrojado logo" href="/"><svg viewBox="0 0 25750 29700" role="img" class="w-7 h-7 text-white transition-colors duration-300 sm:w-8 sm:h-8 md:w-10 md:h-10 xl:w-11 xl:h-11"><path fill="currentColor" d="M4850 19266H1025V2039l4600-129c2511 0 4500 735 5970 2206 1470 1470 2206 3423 2206 5854 0 6199-2985 9296-8951 9296zM4086 4719v11751c494 48 1025 72 1599 72 1543 0 2752-558 3624-1679s1310-2688 1310-4705c0-3684-1712-5524-5135-5524-329 0-795 28-1398 85zm17656 21711l-1437-3969h-6721l974-2655h4730l-2242-6854 1518-4167 7010 17645zM17826 435h3307L10351 29313H7044l4243-11322c1982-1513 2973-4055 2973-7627 0-171-4-340-11-506l3577-9423z"></path></svg></a><div class="fixed flex items-end top-3 right-1 z-50 sm:right-2 md:top-6 md:right-4 xl:top-7" data-testid="header-buttons"><button type="button" aria-expanded="false" aria-controls="dialog-menu" aria-haspopup="dialog" class="group flex items-center flex-col min-w-12 pt-3 pb-2 px-2 outline-none md:min-w-15.5 md:px-3 xl:min-w-18.5"><div class="w-6 h-0.5 bg-gray-400 rounded dark:bg-gray-300 transform transition group-hover:bg-gray-500 group-focus-visible:bg-gray-500 motion-reduce:transition-none dark:group-hover:bg-white dark:group-focus-visible:bg-white md:w-7 md:h-1 xl:w-8 duration-1000 opacity-0 translate-x-1/2" style="transition-delay:500ms" data-testid="menu-stack"></div><div class="w-6 h-0.5 bg-gray-400 rounded dark:bg-gray-300 transform transition group-hover:bg-gray-500 group-focus-visible:bg-gray-500 motion-reduce:transition-none dark:group-hover:bg-white dark:group-focus-visible:bg-white md:w-7 md:h-1 xl:w-8 mt-1.5 duration-1000 opacity-0 -translate-x-1/2" style="transition-delay:650ms" data-testid="menu-stack"></div><div class="w-6 h-0.5 bg-gray-400 rounded dark:bg-gray-300 transform transition group-hover:bg-gray-500 group-focus-visible:bg-gray-500 motion-reduce:transition-none dark:group-hover:bg-white dark:group-focus-visible:bg-white md:w-7 md:h-1 xl:w-8 mt-1.5 duration-1000 opacity-0 translate-x-1/2" style="transition-delay:800ms" data-testid="menu-stack"></div><div class="mt-1.5 text-gray-400 text-3xs font-normal uppercase select-none dark:text-gray-300 transform transition-transform-opacity-color group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-gray-100 md:mt-2 md:text-2xs xl:text-xs duration-700 delay-1000 opacity-0 -translate-y-3">Menu</div></button></div><div class="hidden lg:block lg:fixed lg:bottom-3 lg:right-7 lg:z-40" data-testid="header-social"><ul class="max-w-full mt-10 flex flex-wrap justify-center lg:mt-0"><li class="flex lg:transform lg:transition lg:ease-in-out lg:duration-500 motion-reduce:lg:transition-none lg:opacity-0 lg:translate-y-full" style="transition-delay:2050ms"><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" aria-describedby="tooltip-donate" href="https://www.paypal.com/paypalme/DominicArrojado" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Buy me a protein shake!"><svg viewBox="0 0 512 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M256 416c114.9 0 208-93.1 208-208S370.9 0 256 0 48 93.1 48 208s93.1 208 208 208zM233.8 97.4V80.6c0-9.2 7.4-16.6 16.6-16.6h11.1c9.2 0 16.6 7.4 16.6 16.6v17c15.5.8 30.5 6.1 43 15.4 5.6 4.1 6.2 12.3 1.2 17.1L306 145.6c-3.8 3.7-9.5 3.8-14 1-5.4-3.4-11.4-5.1-17.8-5.1h-38.9c-9 0-16.3 8.2-16.3 18.3 0 8.2 5 15.5 12.1 17.6l62.3 18.7c25.7 7.7 43.7 32.4 43.7 60.1 0 34-26.4 61.5-59.1 62.4v16.8c0 9.2-7.4 16.6-16.6 16.6h-11.1c-9.2 0-16.6-7.4-16.6-16.6v-17c-15.5-.8-30.5-6.1-43-15.4-5.6-4.1-6.2-12.3-1.2-17.1l16.3-15.5c3.8-3.7 9.5-3.8 14-1 5.4 3.4 11.4 5.1 17.8 5.1h38.9c9 0 16.3-8.2 16.3-18.3 0-8.2-5-15.5-12.1-17.6l-62.3-18.7c-25.7-7.7-43.7-32.4-43.7-60.1.1-34 26.4-61.5 59.1-62.4zM480 352h-32.5c-19.6 26-44.6 47.7-73 64h63.8c5.3 0 9.6 3.6 9.6 8v16c0 4.4-4.3 8-9.6 8H73.6c-5.3 0-9.6-3.6-9.6-8v-16c0-4.4 4.3-8 9.6-8h63.8c-28.4-16.3-53.3-38-73-64H32c-17.7 0-32 14.3-32 32v96c0 17.7 14.3 32 32 32h448c17.7 0 32-14.3 32-32v-96c0-17.7-14.3-32-32-32z"></path></svg></a></li><li class="flex lg:transform lg:transition lg:ease-in-out lg:duration-500 motion-reduce:lg:transition-none lg:opacity-0 lg:translate-y-full" style="transition-delay:2200ms"><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" aria-describedby="tooltip-youtube" href="https://www.youtube.com/channel/UCWwV__qrzg5BYCSwO91Xhxg" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Watch my tech videos!"><svg viewBox="0 0 576 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"></path></svg></a></li><li class="flex lg:transform lg:transition lg:ease-in-out lg:duration-500 motion-reduce:lg:transition-none lg:opacity-0 lg:translate-y-full" style="transition-delay:2350ms"><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" aria-describedby="tooltip-linkedin" href="https://www.linkedin.com/in/dominic-arrojado-75ba03a9/" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Let&#x27;s connect on LinkedIn!"><svg viewBox="0 0 448 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a></li><li class="flex lg:transform lg:transition lg:ease-in-out lg:duration-500 motion-reduce:lg:transition-none lg:opacity-0 lg:translate-y-full" style="transition-delay:2500ms"><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" aria-describedby="tooltip-github" href="https://github.com/dominicarrojado/" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Follow me on GitHub!"><svg viewBox="0 0 496 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></li><li class="flex lg:transform lg:transition lg:ease-in-out lg:duration-500 motion-reduce:lg:transition-none lg:opacity-0 lg:translate-y-full" style="transition-delay:2650ms"><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" aria-describedby="tooltip-email" href="mailto:dominicarrojado@gmail.com" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Email me!"><svg viewBox="0 0 512 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"></path></svg></a></li></ul></div></header><div id="main"></div><section class="relative flex flex-col justify-center bg-gray-550 py-28 px-6 text-center overflow-hidden dark:bg-gray-750 transform transition-transform ease-in-out duration-500 motion-reduce:transition-none sm:px-20 lg:px-32 min-h-96 -translate-y-full" data-testid="container"><div class="absolute top-0 left-0 w-full h-full bg-repeat bg-center invert-[.1] dark:invert-0 motion-safe:animate-slide transition-opacity duration-1250 delay-500 motion-reduce:transition-none opacity-0" style="background-image:url(&#x27;/images/bg/pattern.png&#x27;)" data-testid="background"></div><div class="overflow-hidden py-2" style="opacity:1"><h1 class="text-3xl font-bold text-white leading-tight transform transition duration-1000 delay-500 motion-reduce:transition-none sm:text-4xl md:text-5xl lg:text-6xl xl:text-7xl opacity-0 translate-y-full">How to create your own swiper, carousel or slider in React and TypeScript with tests (Part 1)</h1></div><div class="overflow-hidden" style="opacity:1"><p class="font-light text-white transform transition duration-1000 delay-1000 motion-reduce:transition-none xl:text-2xl opacity-0 translate-y-full">Learn how to build a modern mobile touch swiper in a reactive and reusable way</p></div></section><section class="pt-16 pb-20 px-6 sm:pt-20 sm:pb-24 sm:px-8 md:pt-24 md:pb-28 lg:px-10 xl:pt-28 xl:pb-32 transform transition-transform-opacity duration-1000 motion-reduce:transition-none delay-1500 opacity-0 translate-y-10" data-testid="section"><div class="w-11/12 max-w-screen-3xl -mt-8 mx-auto pb-8 sm:-mt-10 sm:pb-10 md:-mt-12 md:pb-12 lg:w-5/6"><ins class="adsbygoogle adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="4984498713" data-ad-format="auto" data-full-width-responsive="true" data-testid="ad-unit" style="display:block"></ins></div><div class="flex justify-between items-center w-11/12 max-w-screen-3xl mx-auto lg:w-5/6"><div class="mr-4 text-sm text-gray-400 sm:text-base xl:text-lg">Last Updated: <time dateTime="2022-02-11">February 11, 2022</time></div><div class="rounded py-0.5 px-1.5 bg-gray-200 text-2xs capitalize dark:bg-gray-600 md:py-1 md:px-2 md:text-xs xl:text-sm">technology</div></div><div class="w-11/12 max-w-screen-3xl mt-4 mx-auto lg:w-5/6"><a class="group inline-flex items-center font-normal select-none dark:hover:text-white transition-colors duration-300 hover:text-black group-hover:text-black motion-reduce:transition-none" target="_blank" rel="noopener noreferrer nofollow" href="https://youtu.be/V0dfhBc2lj8"><svg viewBox="0 0 576 512" role="img" class="w-6 h-6 mr-2 text-gray-400 transition-colors duration-300 group-hover:text-red motion-reduce:transition-none dark:group-hover:text-white sm:w-7 sm:h-7 sm:mr-3 xl:w-8 xl:h-8"><path fill="currentColor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"></path></svg> <!-- -->Watch it on YouTube<svg viewBox="0 0 320 512" role="img" class="inline-block w-2 h-2 ml-2 text-black opacity-30 dark:text-white transform transition duration-300 group-hover:translate-x-1.5 group-hover:opacity-100 motion-reduce:transition-none sm:w-2.5 sm:h-2.5 sm:ml-2.5 md:w-3 md:h-3 md:ml-3 xl:w-3.5 xl:h-3.5"><path fill="currentColor" d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"></path></svg></a></div><article class="w-11/12 max-w-screen-3xl mx-auto prose dark:prose-dark sm:prose-lg lg:w-5/6 xl:prose-xl mt-8 sm:mt-10 xl:mt-14" data-clarity-region="article" data-testid="content"><h2>Introduction</h2>
<p>Swiper, carousel, slider. I bet you&#x27;ve heard one of these before. They can be easily seen in modern websites today. That&#x27;s because they provide an interactive section for users to swipe or drag through the slide of images or content. In my early days of web development, I&#x27;ve used a third-party library to implement it in my web projects. But now I&#x27;ve learned how to build one myself and I would like to share this knowledge on how to build your own swiper in <a target="_blank" rel="noopener noreferrer nofollow" href="https://reactjs.org/">React</a> and <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.typescriptlang.org/">TypeScript</a>, as well as write tests for it using <a target="_blank" rel="noopener noreferrer nofollow" href="https://jestjs.io/">Jest</a> and <a target="_blank" rel="noopener noreferrer nofollow" href="https://testing-library.com/">Testing Library</a>.</p>
<p>There&#x27;s nothing wrong with using a third-party library since it saves us a lot of time but it&#x27;s also not good to be too dependent on it. Sometimes there are extra features you don&#x27;t need, it will add unnecessary size to your assets bundle. Sometimes customization options are not enough to achieve the expected design of the component. What if there&#x27;s no third-party library that can implement the component you need? Do you just wait until someone else builds it for you? Learning how to build your own will not only help you avoid these issues but also give you the knowledge and confidence you may require in the future to extend your swiper component or even build other components.</p>
<p>So if you&#x27;re interested to learn how to build your own swiper, swipe down (no pun intended)!</p>
<h2>Prerequisites</h2>
<p>This is the <a target="_blank" href="/react-typescript-swiper/">link to the swiper</a> which we&#x27;ll accomplish by the end of this post, you can see and play around with it or use it as your reference throughout this tutorial.</p>
<p>Upon writing this post, I assume that you have some web development background and basic knowledge regarding <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.npmjs.com/">npm</a>, <a target="_blank" rel="noopener noreferrer nofollow" href="https://classic.yarnpkg.com/lang/en/">yarn</a>, <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/HTML">HTML</a>, <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/CSS">CSS</a>, <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript">JavaScript</a> and <a target="_blank" rel="noopener noreferrer nofollow" href="https://reactjs.org/">React</a>.</p>
<p>Make sure to install <a target="_blank" rel="noopener noreferrer nofollow" href="https://classic.yarnpkg.com/lang/en/">Yarn</a> in your system if you haven&#x27;t. We use <a target="_blank" rel="noopener noreferrer nofollow" href="https://classic.yarnpkg.com/lang/en/">Yarn</a> as our package manager, it&#x27;s just like <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.npmjs.com/">npm</a> but <em>faster</em>.</p>
<p>I&#x27;ve written a <a href="/posts/local-development-setup-for-react-and-typescript-projects/">separate post</a> about the <a target="_blank" rel="noopener noreferrer nofollow" href="https://en.wikipedia.org/wiki/Integrated_development_environment">IDE</a> and extensions I use to help me save time and energy when writing my code in React. I highly suggest for you to check it out if you haven&#x27;t!</p>
<h2>Initialize your project</h2>
<p>Fastest way to start a new project with React is using <a target="_blank" rel="noopener noreferrer nofollow" href="https://create-react-app.dev/">Create React App</a>. It is an officially supported way to create single-page React applications. It offers a modern build setup with no configuration so you can focus on code, not build tools.</p>
<p>To create our project with React and TypeScript, run this command in your terminal:</p>
<pre><code class="hljs language-bash">yarn create react-app react-typescript-swiper --template typescript
</code></pre>
<p>Once project is initiated, install the additional libraries which we&#x27;ll be using later on:</p>
<pre><code class="hljs language-bash"><span class="hljs-built_in">cd</span> react-typescript-swiper
yarn add @testing-library/react-hooks faker@5.5.3 @types/faker@5.5.9
</code></pre>
<p>To run our project, execute the command below:</p>
<pre><code class="hljs language-bash">yarn start
</code></pre>
<p>This command will open your default browser and go to <code>http://localhost:3000/</code>. If it doesn&#x27;t, you can do it yourself too.</p>
<p>This setup comes with live-editing or hot reloading which means when we save file changes, it will automatically update the app and reload on the browser. That&#x27;s great for local development!</p>
<div><ins class="adsbygoogle adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit" style="display:block"></ins></div>
<h2>Clean up the project</h2>
<p>We&#x27;re ready to code! Let&#x27;s clean up our project which was created by Create React App. We won&#x27;t be needing some of them. Delete or clear the contents of the following below:</p>
<ul>
<li>src/App.css (clear contents)</li>
<li>src/App.test.tsx (delete)</li>
<li>src/logo.svg (delete)</li>
</ul>
<p>Then let&#x27;s update the code of <code>src/App.tsx</code>:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./App.css&#x27;</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">App</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> App;
</code></pre>
<p>We will use the <code>App</code> component as the container of our swiper. Then, add the following code to <code>src/App.css</code>:</p>
<pre><code class="hljs language-css"><span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">800px</span>;
  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span> <span class="hljs-number">15px</span>;
}
</code></pre>
<p>And update the <code>src/index.css</code> too:</p>
<pre><code class="hljs language-css">* {
  <span class="hljs-attribute">box-sizing</span>: border-box;
}

<span class="hljs-selector-tag">body</span> {
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">font-family</span>: -apple-system, BlinkMacSystemFont, <span class="hljs-string">&#x27;Segoe UI&#x27;</span>, <span class="hljs-string">&#x27;Roboto&#x27;</span>,
    <span class="hljs-string">&#x27;Oxygen&#x27;</span>, <span class="hljs-string">&#x27;Ubuntu&#x27;</span>, <span class="hljs-string">&#x27;Cantarell&#x27;</span>, <span class="hljs-string">&#x27;Fira Sans&#x27;</span>, <span class="hljs-string">&#x27;Droid Sans&#x27;</span>,
    <span class="hljs-string">&#x27;Helvetica Neue&#x27;</span>, sans-serif;
  -webkit-<span class="hljs-attribute">font-smoothing</span>: antialiased;
  -moz-osx-<span class="hljs-attribute">font-smoothing</span>: grayscale;
}
</code></pre>
<p>That&#x27;s about it. This will be the container of our Swiper component.</p>
<h2>Swiper component</h2>
<p>Normally, I like to put all my components in a folder called <code>components</code>. Go ahead and create that folder under the <code>src</code> folder. Once you&#x27;ve done that, create <code>src/components/Swiper.tsx</code> and add the following code below:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;

<span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./Swiper.css&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Swiper</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;swiper-container&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;swiper-list&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<div><ins class="adsbygoogle adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit" style="display:block"></ins></div>
<h2>Swiper styles</h2>
<p>Let&#x27;s add some style for our Swiper component by creating <code>src/components/Swiper.css</code> and add the following code below:</p>
<pre><code class="hljs language-css"><span class="hljs-selector-class">.swiper-container</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">overflow</span>: auto;
}

<span class="hljs-selector-class">.swiper-list</span> {
  <span class="hljs-attribute">min-width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">flex-direction</span>: row;
  <span class="hljs-attribute">list-style</span>: none;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
}
</code></pre>
<p>When you save these changes, you won&#x27;t be seeing anything in our web application but a blank page. Don&#x27;t worry, you&#x27;ll get to see something very soon! For now, we&#x27;ll just code it all first. Let&#x27;s continue.</p>
<h2>SwiperItem component</h2>
<p>Since our Swiper component is like a gallery of images we need a separate component for each image and we can name it <code>SwiperItem</code> component. Create a file <code>src/components/SwiperItem.tsx</code> and add the following code below:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;

<span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./SwiperItem.css&#x27;</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">SwiperItem</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;swiper-item&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;swiper-img&quot;</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> SwiperItem;
</code></pre>
<p>And let&#x27;s add the styles for it in <code>src/components/SwiperItem.css</code>:</p>
<pre><code class="hljs language-css"><span class="hljs-selector-class">.swiper-item</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">flex-shrink</span>: <span class="hljs-number">0</span>;
}

<span class="hljs-selector-class">.swiper-img</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">height</span>: auto;
  user-select: none;
}
</code></pre>
<p>Alright, currently our <code>SwiperItem</code> component is not reusable to display different images, how do you make a component reusable? Through <a target="_blank" rel="noopener noreferrer nofollow" href="https://reactjs.org/docs/components-and-props.html">component props</a>! For this tutorial, we just need the source URL of the image and an alternative text for each item. Both values are required and should be <code>string</code>. For those new to TypeScript, this will be your first encounter of the syntax, I&#x27;ll be explaning it in a bit. Let&#x27;s update <code>src/components/SwiperItem.tsx</code> first with the codes below:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;

<span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./SwiperItem.css&#x27;</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">SwiperItem</span>(<span class="hljs-params">{
  imageSrc,
  imageAlt,
}: {
  imageSrc: <span class="hljs-built_in">string</span>;
  imageAlt: <span class="hljs-built_in">string</span>;
}</span>) </span>{
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;swiper-item&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">{imageSrc}</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">{imageAlt}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;swiper-img&quot;</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> SwiperItem;
</code></pre>
<p>Ok, if you&#x27;re new to TypeScript, this is how we can create a type for our props (or any object). If we try to use our <code>SwiperItem</code> component without passing any props, TypeScript would throw an error. Because we defined the type of the fields in our props to be <em>required</em>. Same thing would happen if you try to pass another type which is <em>not</em> a <code>string</code>. Let&#x27;s say you pass a type of a <code>number</code>, that would also throw an error. You can already see how helpful TypeScript is in catching potential issues early on.</p>
<p>You might ask, how do we define an <em>optional</em> field? You can do that by adding a question mark before the <code>:</code> like this:</p>
<pre><code class="hljs language-ts">{
  imageSrc?: <span class="hljs-built_in">string</span>;
  imageAlt?: <span class="hljs-built_in">string</span>;
}
</code></pre>
<p>Alright, we&#x27;re not done yet. I already forsee that we would be reusing the same type in our <code>Swiper</code> component. So what I normally like to do is place reusable types in a single file. Let&#x27;s go ahead and do that.</p>
<div><ins class="adsbygoogle adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit" style="display:block"></ins></div>
<h2>Create the type</h2>
<p>Create <code>src/types.ts</code>. This will be the place we could put shared types across components to reduce code duplication, although for this guide, we are only going to add one type, that would be the <code>SwiperItemType</code>. So update the file with the following code:</p>
<pre><code class="hljs language-ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> SwiperItemType = {
  <span class="hljs-attr">imageSrc</span>: <span class="hljs-built_in">string</span>;
  imageAlt: <span class="hljs-built_in">string</span>;
};
</code></pre>
<p>This is how we can declare a type (or <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#type-aliases">type aliases</a>) and make it reusable by exporting it.</p>
<p>Now go back to <code>SwiperItem</code> component and update the code to use the type alias we just created:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;
<span class="hljs-keyword">import</span> { SwiperItemType } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../types&#x27;</span>;

<span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./SwiperItem.css&#x27;</span>;

<span class="hljs-comment">// exported so we can use later in tests</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> Props = SwiperItemType;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">SwiperItem</span>(<span class="hljs-params">{ imageSrc, imageAlt }: Props</span>) </span>{
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;swiper-item&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">{imageSrc}</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">{imageAlt}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;swiper-img&quot;</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> SwiperItem;
</code></pre>
<h2>Swiper + SwiperItem component</h2>
<p>We can now use <code>SwiperItem</code> component in our <code>Swiper</code> component. Since our <code>Swiper</code> component would be the main component that will be reused across our React application. It needs to accept a prop that is an array of swiper items. Remember we already created the type for that, we just need to wrap it in an <code>Array</code> to tell TypeScript that the field accepts an array of <code>SwiperItemType</code>. You can see the code below on how to do that, simply update our <code>Swiper</code> component with this:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;
<span class="hljs-keyword">import</span> { SwiperItemType } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../types&#x27;</span>;
<span class="hljs-keyword">import</span> SwiperItem <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./SwiperItem&#x27;</span>;

<span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./Swiper.css&#x27;</span>;

<span class="hljs-comment">// exported so we can use later in tests</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> Props = {
  <span class="hljs-attr">items</span>: <span class="hljs-built_in">Array</span>&lt;SwiperItemType&gt;;
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Swiper</span>(<span class="hljs-params">{ items }: Props</span>) </span>{
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;swiper-container&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;swiper-list&quot;</span>&gt;</span>
        {items.map((item, idx) =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">SwiperItem</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{idx}</span> {<span class="hljs-attr">...item</span>} /&gt;</span>
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> Swiper;
</code></pre>
<div><ins class="adsbygoogle adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit" style="display:block"></ins></div>
<h2>Sample data</h2>
<p>We&#x27;re almost there to seeing something in our browser. We would need some sample data. I found <a target="_blank" rel="noopener noreferrer nofollow" href="https://mdn.github.io/learning-area/javascript/building-blocks/gallery/">some images</a> we could use from <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/">MDN Web Docs</a>. I don&#x27;t own these images and I hope they don&#x27;t mind if we use them for this tutorial, all credits goes to them. Please open the images below in another tab and download them:</p>
<ul>
<li><a target="_blank" href="/react-typescript-swiper/pic1.jpeg">pic1.jpeg</a></li>
<li><a target="_blank" href="/react-typescript-swiper/pic2.jpeg">pic2.jpeg</a></li>
<li><a target="_blank" href="/react-typescript-swiper/pic3.jpeg">pic3.jpeg</a></li>
<li><a target="_blank" href="/react-typescript-swiper/pic4.jpeg">pic4.jpeg</a></li>
<li><a target="_blank" href="/react-typescript-swiper/pic5.jpeg">pic5.jpeg</a></li>
</ul>
<p>After you&#x27;ve downloaded them all, put them in the <code>public</code> folder of your React project.</p>
<p>Then let&#x27;s update our <code>App</code> component with the code below:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./App.css&#x27;</span>;
<span class="hljs-keyword">import</span> Swiper <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/Swiper&#x27;</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">App</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> items = [
    {
      <span class="hljs-attr">imageSrc</span>: <span class="hljs-string">&#x27;/pic1.jpeg&#x27;</span>,
      <span class="hljs-attr">imageAlt</span>: <span class="hljs-string">&quot;A person&#x27;s eye&quot;</span>,
    },
    {
      <span class="hljs-attr">imageSrc</span>: <span class="hljs-string">&#x27;/pic2.jpeg&#x27;</span>,
      <span class="hljs-attr">imageAlt</span>: <span class="hljs-string">&#x27;A rock formation&#x27;</span>,
    },
    {
      <span class="hljs-attr">imageSrc</span>: <span class="hljs-string">&#x27;/pic3.jpeg&#x27;</span>,
      <span class="hljs-attr">imageAlt</span>: <span class="hljs-string">&#x27;Some flowers&#x27;</span>,
    },
    {
      <span class="hljs-attr">imageSrc</span>: <span class="hljs-string">&#x27;/pic4.jpeg&#x27;</span>,
      <span class="hljs-attr">imageAlt</span>: <span class="hljs-string">&#x27;An egyptian wall painting&#x27;</span>,
    },
    {
      <span class="hljs-attr">imageSrc</span>: <span class="hljs-string">&#x27;/pic5.jpeg&#x27;</span>,
      <span class="hljs-attr">imageAlt</span>: <span class="hljs-string">&#x27;A butterfly on a leaf&#x27;</span>,
    },
  ];

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Swiper</span> <span class="hljs-attr">items</span>=<span class="hljs-string">{items}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> App;
</code></pre>
<p>Once you save the changes, you should see something like this:</p>
<div class="lazyload-wrapper "><div class="lazyload-placeholder"></div></div>
<p>I know, there&#x27;s a creepy eye looking at us! But in the bright side, that&#x27;s when we know everything is working fine as expected. You could also see that there&#x27;s a scroll bar below the image, you can scroll to see the other images. For the next steps, this scroll bar should be hidden and we should be able to swipe through our gallery of images by doing a drag action in desktop or swipe in mobile. So let&#x27;s continue!</p>
<div><ins class="adsbygoogle adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit" style="display:block"></ins></div>
<h2>Touch/Drag logic</h2>
<p>Before we proceed to coding, I want to explain what we want to accomplish so you get a better grasp of what is being coded and why is the logic like this. To better explain it, let&#x27;s do it in a step-by-step way:</p>
<table><thead><tr><th>#</th><th>User actions</th><th>Swiper logic</th></tr></thead><tbody><tr><td>1</td><td>User sees the Swiper</td><td>First image is displayed</td></tr><tr><td>2</td><td>User clicks/touches the swiper</td><td>Position of click/touch is recorded as starting position</td></tr><tr><td>3</td><td>User holds and drags/swipes from right to left</td><td>Difference between starting position and current position calculated to move image along with the user action</td></tr><tr><td>4</td><td>User lets go of drag/swipe</td><td>New image is displayed depending on nearest position</td></tr></tbody></table>
<p>Alright, I hope with this you get an understanding what code we need to add in our <code>Swiper</code> component.</p>
<p>To start, let&#x27;s make a minor update of the style of our <code>Swiper</code> component to hide the scroll bar. We won&#x27;t be needing it. Go to <code>src/components/Swiper.css</code> and update with the following code:</p>
<pre><code class="hljs language-css"><span class="hljs-selector-class">.swiper-container</span> {
  ...
  <span class="hljs-attribute">overflow</span>: hidden;
  touch-action: pan-y; <span class="hljs-comment">/* prevent browser&#x27;s default behaviour on swiping horizontally */</span>
}
</code></pre>
<p>In web browsers, there&#x27;s this behaviour that you can drag a link or an image to open it in a new tab, this will affect our touch/drag logic, so in order to prevent that, let&#x27;s also make a minor code update in our <code>src/components/SwiperItem.tsx</code>:</p>
<pre><code class="hljs language-tsx">...

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">SwiperItem</span>(<span class="hljs-params">{ imageSrc, imageAlt }: SwiperItemType</span>) </span>{
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;swiper-item&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">img</span>
        <span class="hljs-attr">...</span>
        <span class="hljs-attr">draggable</span>=<span class="hljs-string">{false}</span>
      /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>
  );
}

...
</code></pre>
<p>Next, let&#x27;s create <code>src/lib/hooks.ts</code> and create a couple of hooks utility functions:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> { useRef, useState, RefObject } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;

<span class="hljs-comment">// to get the value of a ref from `useRef`</span>
<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getRefValue</span>&lt;<span class="hljs-title">C</span>&gt;(<span class="hljs-params">ref: RefObject&lt;C&gt;</span>) </span>{
  <span class="hljs-keyword">return</span> ref.current <span class="hljs-keyword">as</span> C;
}

<span class="hljs-comment">// extension of `useState` to be able to access the state as a ref</span>
<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">useStateRef</span>&lt;<span class="hljs-title">S</span>&gt;(<span class="hljs-params">
  defaultValue: S
</span>): [<span class="hljs-title">S</span>, (<span class="hljs-params">value: S</span>) =&gt; <span class="hljs-title">void</span>, <span class="hljs-title">RefObject</span>&lt;<span class="hljs-title">S</span>&gt;] </span>{
  <span class="hljs-keyword">const</span> ref = useRef&lt;S&gt;(defaultValue);
  <span class="hljs-keyword">const</span> [state, _setState] = useState&lt;S&gt;(defaultValue);
  <span class="hljs-keyword">const</span> setState = <span class="hljs-function">(<span class="hljs-params">value: S</span>) =&gt;</span> {
    _setState(value);
    ref.current = value;
  };

  <span class="hljs-keyword">return</span> [state, setState, ref];
}
</code></pre>
<p>I use these utility functions a lot in my projects and it is extremely helpful when writing tests to achieve <code>100%</code> coverage, especially those components that uses <code>RefObject</code> for elements. If you&#x27;re new to TypeScript, you might be wonder what is this <code>C</code> or <code>S</code> around the code? It can be any letter by the way or word if you would like, and it is called <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.typescriptlang.org/docs/handbook/2/generics.html">Generics</a>, it makes our utility function here accept the type defined when the <code>RefObject</code> or the state is passed because it can have any type. Using Generics, our function here would be able to return the same type.</p>
<pre><code class="hljs language-tsx"><span class="hljs-comment">// let&#x27;s say we set the initial value with a type of `number` in `useRef`</span>
<span class="hljs-keyword">const</span> numberRef = useRef(<span class="hljs-number">0</span>);

<span class="hljs-comment">// when we use `getRefValue` to get the value of the ref</span>
<span class="hljs-comment">// TypeScript would then assume this would return a type of `number`</span>
getRefValue(numberRef);
</code></pre>
<div><ins class="adsbygoogle adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit" style="display:block"></ins></div>
<p>Finally, go to <code>src/components/Swiper.tsx</code> and let&#x27;s try to think how do we move the images the way we do when there was a scroll bar. If you guessed it right, we can use a transform function in CSS to move the parent element of the images. We can use <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/translateX()"><code>translateX</code></a> or <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/translate3d()"><code>translate3d</code></a>. Let&#x27;s use <code>translate3d</code> instead because I&#x27;ve seen popular swiper libraries often use it for better performance. We need to store the value required for <code>translate3d</code> as a state. Let&#x27;s call this value as <code>offsetX</code>. Let&#x27;s use <code>useStateRef</code> for that instead of <code>useState</code> because we need to access the state value as a <code>ref</code> in one of our event listeners later on.</p>
<pre><code class="hljs language-tsx">...
<span class="hljs-keyword">import</span> { useStateRef } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../lib/hooks&#x27;</span>;

...

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Swiper</span>(<span class="hljs-params">{ items }: Props</span>) </span>{
  <span class="hljs-keyword">const</span> [offsetX, setOffsetX, offsetXRef] = useStateRef(<span class="hljs-number">0</span>);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;swiper-container&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>
        <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;swiper-list&quot;</span>
        <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">transform:</span> `<span class="hljs-attr">translate3d</span>(${<span class="hljs-attr">offsetX</span>}<span class="hljs-attr">px</span>, <span class="hljs-attr">0</span>, <span class="hljs-attr">0</span>)` }}
      &gt;</span>
        {items.map((item, idx) =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">SwiperItem</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{idx}</span> {<span class="hljs-attr">...item</span>} /&gt;</span>
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

...
</code></pre>
<p><code>0</code> would be the default value for our <code>offsetX</code> state and that will display the first image. Try replacing <code>0</code> with a negative value (e.g. <code>-800</code>), if you&#x27;re in a desktop viewport, it should display the second image. This is how we&#x27;re going to move the images in a reactive way.</p>
<p>Normally, I develop features or logic in a <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/Progressive_web_apps/Responsive/Mobile_first">mobile-first approach</a> but I thought it would be easier to code and explain to you if we cover the mouse events first. Let&#x27;s create the first mouse event, <code>onMouseDown</code> which is triggered when you click on the element that is listening to that event. Let&#x27;s update <code>src/components/Swiper.tsx</code> with the code below:</p>
<pre><code class="hljs language-tsx">...

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Swiper</span>(<span class="hljs-params">{ items }: Props</span>) </span>{
  ...

  <span class="hljs-keyword">const</span> onMouseDown = <span class="hljs-function">(<span class="hljs-params">e: React.MouseEvent&lt;HTMLDivElement&gt;</span>) =&gt;</span> {};

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;swiper-container&quot;</span> <span class="hljs-attr">onMouseDown</span>=<span class="hljs-string">{onMouseDown}</span>&gt;</span>
      ...
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

...
</code></pre>
<p>If you&#x27;re new to TypeScript, you would need to define the type of <code>e</code> (or event data). Since we attached the <code>onMouseDown</code> listener in a reactive way, it receives a custom event data from React. So instead of simply using <code>MouseEvent</code> as the type of <code>e</code>, we need to use <code>React.MouseEvent</code> which accepts an argument of what type of <code>Element</code> do we expect, in this case we expect it to be an <code>HTMLDivElement</code>.</p>
<p>Alright, inside the listener, what we can do is save the current offset <code>x</code>. We already have <code>offsetX</code>, so why we need a separate storage for the current offset <code>x</code>? That&#x27;s because we&#x27;re using <code>offsetX</code> to move the images, if it&#x27;s going to be changed on every mouse move event, we will lose track what was the original offset <code>x</code> value on mouse down. We need the original offset <code>x</code> so we could deduct it with the difference of starting <code>x</code> position and moving <code>x</code> position, in order to create the effect where the images follow our mouse cursor. Let&#x27;s call this current offset <code>x</code> as <code>currentOffsetX</code> and we can store it in <a target="_blank" rel="noopener noreferrer nofollow" href="https://reactjs.org/docs/hooks-reference.html#useref"><code>useRef</code></a> so it could be access by other event listeners later on. To write this in code, it would be like this:</p>
<pre><code class="hljs language-tsx">...
<span class="hljs-keyword">import</span> { getRefValue, useStateRef } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../lib/hooks&#x27;</span>;

...

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Swiper</span>(<span class="hljs-params">{ items }: Props</span>) </span>{
  <span class="hljs-keyword">const</span> currentOffsetXRef = useRef(<span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> [offsetX, setOffsetX, offsetXRef] = useStateRef(<span class="hljs-number">0</span>);

  <span class="hljs-keyword">const</span> onMouseDown = <span class="hljs-function">(<span class="hljs-params">e: React.MouseEvent&lt;HTMLDivElement&gt;</span>) =&gt;</span> {
    currentOffsetXRef.current = getRefValue(offsetXRef);
  };

  ...
}

...
</code></pre>
<div><ins class="adsbygoogle adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit" style="display:block"></ins></div>
<p>In our <code>onMouseDown</code> function, we can also save the starting <code>x</code> position returned from the event data. Let&#x27;s name it <code>startX</code> and we could use this value later to calculate the offset required for the images to follow our mouse cursor. Update <code>src/components/Swiper.tsx</code> with the following code below:</p>
<pre><code class="hljs language-tsx">...

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Swiper</span>(<span class="hljs-params">{ items }: Props</span>) </span>{
  <span class="hljs-keyword">const</span> currentOffsetXRef = useRef(<span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> startXRef = useRef(<span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> [offsetX, setOffsetX, offsetXRef] = useStateRef(<span class="hljs-number">0</span>);

  <span class="hljs-keyword">const</span> onMouseDown = <span class="hljs-function">(<span class="hljs-params">e: React.MouseEvent&lt;HTMLDivElement&gt;</span>) =&gt;</span> {
    currentOffsetXRef.current = getRefValue(offsetXRef);
    startXRef.current = e.clientX;
  };

  ...
}

...
</code></pre>
<p>We can now create the two other mouse event listeners, namely <code>onMouseMove</code> and <code>onMouseUp</code>. The sequence of a dragging using your mouse is like this:</p>
<p>START -&gt; <code>onMouseDown</code> -&gt; <code>onMouseMove</code> -&gt; <code>onMouseUp</code> -&gt; END</p>
<p>So we only need to listen to these two events when user triggers <code>onMouseDown</code>. We can start listening to these two other events inside <code>onMouseDown</code>. Update <code>src/components/Swiper.tsx</code> with the following code below:</p>
<pre><code class="hljs language-tsx">...

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Swiper</span>(<span class="hljs-params">{ items }: Props</span>) </span>{
  ...

  <span class="hljs-keyword">const</span> onMouseMove = <span class="hljs-function">(<span class="hljs-params">e: MouseEvent</span>) =&gt;</span> {};
  <span class="hljs-keyword">const</span> onMouseUp = <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-built_in">window</span>.removeEventListener(<span class="hljs-string">&#x27;mouseup&#x27;</span>, onMouseUp);
    <span class="hljs-built_in">window</span>.removeEventListener(<span class="hljs-string">&#x27;mousemove&#x27;</span>, onMouseMove);
  };
  <span class="hljs-keyword">const</span> onMouseDown = <span class="hljs-function">(<span class="hljs-params">e: React.MouseEvent&lt;HTMLDivElement&gt;</span>) =&gt;</span> {
    ...

    <span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">&#x27;mousemove&#x27;</span>, onMouseMove);
    <span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">&#x27;mouseup&#x27;</span>, onMouseUp);
  };

  ...
}

...
</code></pre>
<p>We attached these two events in the <code>window</code> so that even if the mouse cursor goes out of the list element, it will still continue to fire both the mouse move and mouse up event. You would also notice the type of <code>e</code> from <code>onMouseMove</code> is using just the <code>MouseEvent</code> which is not from React, you don&#x27;t have to import it from anywhere, it can used as is. We also didn&#x27;t have to define <code>e</code> from <code>onMouseUp</code> because we just need it to remove the event listeners once it is triggered and don&#x27;t need anything from the event data.</p>
<p>Now, let&#x27;s then add the code inside <code>onMouseMove</code>, here it is:</p>
<pre><code class="hljs language-tsx">...

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Swiper</span>(<span class="hljs-params">{ items }: Props</span>) </span>{
  ...

  <span class="hljs-keyword">const</span> onMouseMove = <span class="hljs-function">(<span class="hljs-params">e: MouseEvent</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> currentX = e.clientX;
    <span class="hljs-keyword">const</span> diff = getRefValue(startXRef) - currentX;
    <span class="hljs-keyword">const</span> newOffsetX = getRefValue(currentOffsetXRef) - diff;

    setOffsetX(newOffsetX);
  };

  ...
}

...
</code></pre>
<p>Here, we took the <code>x</code> position from the event data and named it <code>currentX</code>. We then calculated the difference between the <code>startX</code> and the <code>currentX</code>, this difference is then subtracted from <code>currentOffsetX</code>. The final difference will then be the new value for <code>offsetX</code>.</p>
<p>Once all of the changes are done, you should be able to drag using your mouse to move the container of images horizontally. Isn&#x27;t that great? I think yes!</p>
<div><ins class="adsbygoogle adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit" style="display:block"></ins></div>
<p>To apply the same logic for mobile. Create a file <code>src/lib/dom.ts</code> and add the following code:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getTouchEventData</span>(<span class="hljs-params">
  e:
    | TouchEvent
    | MouseEvent
    | React.TouchEvent&lt;HTMLElement&gt;
    | React.MouseEvent&lt;HTMLElement&gt;
</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;changedTouches&#x27;</span> <span class="hljs-keyword">in</span> e ? e.changedTouches[<span class="hljs-number">0</span>] : e;
}
</code></pre>
<p>I created this helper function because in touch events, it doesn&#x27;t return the <code>clientX</code> in the event data, it is stored in the <code>changedTouches</code> array. So if <code>changedTouches</code> exists in the event data, then we should get the <code>clientX</code> value from the first element of it. If you&#x27;re new to TypeScript, we could use pipe <code>|</code> to do like an <code>OR</code> condition, so what we did here is basically defined the type of the argument <code>e</code> such that it can be a <code>TouchEvent</code> or a <code>MouseEvent</code> which are for events we attach using <code>.addEventListener()</code>. It could also be a <code>React.TouchEvent&lt;HTMLElement&gt;</code> or a <code>React.MouseEvent&lt;HTMlElement&gt;</code> which are event listeners we attach in an element as an attribute (e.g. <code>onTouchStart</code>, <code>onMouseDown</code>, etc.).</p>
<p>Alright, let&#x27;s do some renaming in <code>src/components/Swiper.tsx</code> for a mobile-first approach and make use of this new helper function:</p>
<pre><code class="hljs language-tsx">...
<span class="hljs-keyword">import</span> { getTouchEventData } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../lib/dom&#x27;</span>;

...

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Swiper</span>(<span class="hljs-params">{ items }: Props</span>) </span>{
  ...

  <span class="hljs-keyword">const</span> onTouchMove = <span class="hljs-function">(<span class="hljs-params">e: TouchEvent | MouseEvent</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> currentX = getTouchEventData(e).clientX;

    ...
  };
  <span class="hljs-keyword">const</span> onTouchEnd = <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-built_in">window</span>.removeEventListener(<span class="hljs-string">&#x27;touchend&#x27;</span>, onTouchEnd);
    <span class="hljs-built_in">window</span>.removeEventListener(<span class="hljs-string">&#x27;touchmove&#x27;</span>, onTouchMove);
    <span class="hljs-built_in">window</span>.removeEventListener(<span class="hljs-string">&#x27;mouseup&#x27;</span>, onTouchEnd);
    <span class="hljs-built_in">window</span>.removeEventListener(<span class="hljs-string">&#x27;mousemove&#x27;</span>, onTouchMove);
  };
  <span class="hljs-keyword">const</span> onTouchStart = <span class="hljs-function">(<span class="hljs-params">
    e: React.TouchEvent&lt;HTMLDivElement&gt; | React.MouseEvent&lt;HTMLDivElement&gt;
  </span>) =&gt;</span> {
    ...
    <span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">&#x27;touchmove&#x27;</span>, onTouchMove);
    <span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">&#x27;touchend&#x27;</span>, onTouchEnd);
    <span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">&#x27;mousemove&#x27;</span>, onTouchMove);
    <span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">&#x27;mouseup&#x27;</span>, onTouchEnd);
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;swiper-container&quot;</span>
      <span class="hljs-attr">onTouchStart</span>=<span class="hljs-string">{onTouchStart}</span>
      <span class="hljs-attr">onMouseDown</span>=<span class="hljs-string">{onTouchStart}</span>
    &gt;</span>
      ...
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

...
</code></pre>
<p>If you try dragging using your mouse, it should still work like before. If your browser supports <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.chrome.com/docs/devtools/device-mode/">device toolbar</a>, you can verify that using touch would work also work. This is how it looks like when using the device toolbar in <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.google.com/intl/en_sg/chrome/">Google Chrome</a>:</p>
<div class="lazyload-wrapper "><div class="lazyload-placeholder"></div></div>
<p>Okay, we&#x27;re not done yet though. You might have already noticed it while testing. When you swipe or drag too far away from the first image or last image, you&#x27;ll see nothing. For user experience, that&#x27;s not really great. We should prevent that.</p>
<div><ins class="adsbygoogle adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit" style="display:block"></ins></div>
<h2>Prevent swiping on both ends</h2>
<p>To fix the problem, we need to understand the problem. We already know that we use <code>offsetX</code> to move the container of the image, and that it shouldn&#x27;t move beyond the images. So we need to know the value of the far most left <code>offsetX</code> value and the far most right <code>offsetX</code> value. The far most left is easy, we start with 0 for <code>offsetX</code> to display the first image, there&#x27;s no image before the first image, so that is already the first end. So what is the far most right <code>offsetX</code> value? That would be the width of the container. Let&#x27;s name far most left <code>offsetX</code> value to be <code>maxOffsetX</code> while the far most right <code>offsetX</code> value to be <code>minOffsetX</code>.</p>
<p>To get into coding, let&#x27;s declare the <code>useRef</code> for the container element in <code>/src/components/Swiper.tsx</code> so we could get its <code>offsetWidth</code>:</p>
<pre><code class="hljs language-tsx">...

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Swiper</span>(<span class="hljs-params">{ items }: Props</span>) </span>{
  <span class="hljs-keyword">const</span> containerRef = useRef&lt;HTMLUListElement&gt;(<span class="hljs-literal">null</span>);

  ...

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;swiper-container&quot;</span>
      <span class="hljs-attr">...</span>
    &gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>
        <span class="hljs-attr">ref</span>=<span class="hljs-string">{containerRef}</span>
        <span class="hljs-attr">...</span>
      &gt;</span>
        ...
      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

...
</code></pre>
<p>If you&#x27;re new to TypeScript, this is <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/typescript-cheatsheets/react#option-1-dom-element-ref">how</a> we declare a ref for an element, we provide the element type and use <code>null</code> as initial value. TypeScript expects you to give this ref to an element&#x27;s ref prop or attribute.</p>
<p>Next, let&#x27;s calculate the the <code>minOffsetX</code> on mouse down event so we don&#x27;t have to keep calculating it during mouse move because that would be inefficient. Let&#x27;s update our <code>src/components/Swiper.tsx</code>:</p>
<pre><code class="hljs language-tsx">...

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Swiper</span>(<span class="hljs-params">{ items }: Props</span>) </span>{
  ...
  <span class="hljs-keyword">const</span> minOffsetXRef = useRef(<span class="hljs-number">0</span>);

  ...

  <span class="hljs-keyword">const</span> onTouchStart = <span class="hljs-function">(<span class="hljs-params">
    e: React.TouchEvent&lt;HTMLDivElement&gt; | React.MouseEvent&lt;HTMLDivElement&gt;
  </span>) =&gt;</span> {
    ...

    <span class="hljs-keyword">const</span> containerEl = getRefValue(containerRef);

    minOffsetXRef.current = containerEl.offsetWidth - containerEl.scrollWidth;

    ...
  };

  ...
}

...
</code></pre>
<p>Just in case you&#x27;re wondering how we came up with this calculation. We needed to get the entire width of all the images together and that value would be the container&#x27;s <code>scrollWidth</code>. Since we start from <code>0</code> to display the first image, to display the image it would not be negative value of <code>scrollWidth</code>, we need to deduct the display size of the container on to it. And in case you forget, we need a negative value to move the images from right to the left.</p>
<p>Alright, now that we know <code>maxOffsetX</code> is <code>0</code> and we already computed <code>minOffsetX</code> on mouse down. Let&#x27;s add some <code>if</code> conditions to prevent swiping from both ends. Simple update <code>src/components/Swiper.tsx</code> with the following code:</p>
<pre><code class="hljs language-tsx">...

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Swiper</span>(<span class="hljs-params">{ items }: Props</span>) </span>{
  ...

  <span class="hljs-keyword">const</span> onTouchMove = <span class="hljs-function">(<span class="hljs-params">e: TouchEvent | MouseEvent</span>) =&gt;</span> {
    ...
    <span class="hljs-keyword">let</span> newOffsetX = getRefValue(currentOffsetXRef) - diff;

    <span class="hljs-keyword">const</span> maxOffsetX = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">const</span> minOffsetX = getRefValue(minOffsetXRef);

    <span class="hljs-keyword">if</span> (newOffsetX &gt; maxOffsetX) {
      newOffsetX = maxOffsetX;
    }

    <span class="hljs-keyword">if</span> (newOffsetX &lt; minOffsetX) {
      newOffsetX = minOffsetX;
    }

    setOffsetX(newOffsetX);
  };

  ...
}

...
</code></pre>
<p>After saving the changes, you can go back and try swiping through your swiper and you wouldn&#x27;t be able to swipe if you are at either both ends. Cool!</p>
<p>Next thing we need to solve is the difficulty in swiping through the images, our Swiper component should be able to let us swipe easily to the next image and place the next image in display properly because we want our users to do less swiping and also let them view each images in full, not in split view.</p>
<div><ins class="adsbygoogle adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit" style="display:block"></ins></div>
<h2>Auto swipe to nearest image</h2>
<p>To swipe images exactly in their position, we need to understand each <code>offsetX</code> value to display the images. Let&#x27;s say in a large screen resolution, our container width would be <code>800px</code>. We know that <code>offsetX</code> starts with <code>0px</code> which displays the first image. To display the second image, you would need the <code>offsetX</code> to be <code>800px</code> which is the same as the container width. To display the third image, you would need the <code>offsetX</code> to be <code>1600px</code> which is twice the container width. And we just keep multiplying the container width until we reach the last image. With this, we can basically say that it&#x27;s always the multiples of the container width because our images takes up <code>100%</code> of the container which what we have defined in the CSS style.</p>
<p>So the logic we need to do is basically when user stops dragging/swiping (<code>onMouseUp</code> event listener), our logic should swipe it to the nearest image. How do we get the nearest image? We can round off the last <code>offsetX</code> position to the nearest multiples of the container width. We can use <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/round"><code>Math.round</code></a> and the formula for rounding to the nearest multiple of a number (in this case the <code>containerWidth</code>) is like this:</p>
<pre><code class="hljs language-js"><span class="hljs-built_in">Math</span>.round(offsetX / containerWidth) * containerWidth;

<span class="hljs-comment">// for example, we want to round off to the nearest multiples of `5`</span>
<span class="hljs-comment">// result would be 0, 5, 10, 15, and so on ...</span>
<span class="hljs-built_in">Math</span>.round(<span class="hljs-number">1</span> / <span class="hljs-number">5</span>) * <span class="hljs-number">5</span>; <span class="hljs-comment">// 0</span>
<span class="hljs-built_in">Math</span>.round(<span class="hljs-number">2</span> / <span class="hljs-number">5</span>) * <span class="hljs-number">5</span>; <span class="hljs-comment">// 0</span>
<span class="hljs-built_in">Math</span>.round(<span class="hljs-number">4</span> / <span class="hljs-number">5</span>) * <span class="hljs-number">5</span>; <span class="hljs-comment">// 5</span>
<span class="hljs-built_in">Math</span>.round(<span class="hljs-number">5</span> / <span class="hljs-number">5</span>) * <span class="hljs-number">5</span>; <span class="hljs-comment">// 5</span>
<span class="hljs-built_in">Math</span>.round(<span class="hljs-number">8</span> / <span class="hljs-number">5</span>) * <span class="hljs-number">5</span>; <span class="hljs-comment">// 10</span>
</code></pre>
<p>Let&#x27;s use this formula and update the code for <code>src/container/Swiper.tsx</code>:</p>
<pre><code class="hljs language-tsx">
...

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Swiper</span>(<span class="hljs-params">{ items }: Props</span>) </span>{
  ...

  <span class="hljs-keyword">const</span> onTouchEnd = <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> containerWidth = getRefValue(containerWidthRef);
    <span class="hljs-keyword">let</span> newOffsetX = getRefValue(offsetXRef);
    newOffsetX = <span class="hljs-built_in">Math</span>.round(newOffsetX / containerWidth) * containerWidth;

    setOffsetX(newOffsetX);

    ...
  };

  ...
}

...
</code></pre>
<p>Now try dragging/swiping through the images and let go, it should show the nearest image within the container properly, what I meant by properly here is that the position is just nice to display you the image in full.</p>
<p>It&#x27;s a little bit abrupt right now. So let&#x27;s try adding some <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/CSS/transition">CSS transitions</a> so this logic will look more sleek. Go to <code>src/container/Swiper.css</code> and update the code with this:</p>
<pre><code class="hljs language-css"><span class="hljs-comment">/* ... */</span>

<span class="hljs-selector-class">.swiper-list</span> {
  ...
  <span class="hljs-attribute">transition</span>: transform <span class="hljs-number">0.3s</span> ease-out;
}

<span class="hljs-selector-class">.swiper-list</span><span class="hljs-selector-class">.is-swiping</span> {
  <span class="hljs-attribute">transition</span>: none;
}
</code></pre>
<p>Alright, and let&#x27;s update <code>src/container/Swiper.tsx</code> to make use of this transition style:</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> React, { useState, useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;

...

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Swiper</span>(<span class="hljs-params">{ items }: Props</span>) </span>{
  ...

  <span class="hljs-keyword">const</span> [isSwiping, setIsSwiping] = useState(<span class="hljs-literal">false</span>);

  ...

  <span class="hljs-keyword">const</span> onTouchEnd = <span class="hljs-function">() =&gt;</span> {
    ...

    setIsSwiping(<span class="hljs-literal">false</span>);
    setOffsetX(newOffsetX);

    ...
  };
  <span class="hljs-keyword">const</span> onTouchStart = <span class="hljs-function">(<span class="hljs-params">
    e: React.TouchEvent&lt;HTMLDivElement&gt; | React.MouseEvent&lt;HTMLDivElement&gt;
  </span>) =&gt;</span> {
    setIsSwiping(<span class="hljs-literal">true</span>);

    ...
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;swiper-container&quot;</span>
      <span class="hljs-attr">...</span>
    &gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>
        <span class="hljs-attr">ref</span>=<span class="hljs-string">{containerRef}</span>
        <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">swiper-list</span> ${<span class="hljs-attr">isSwiping</span> ? &#x27;<span class="hljs-attr">is-swiping</span>&#x27; <span class="hljs-attr">:</span> &#x27;&#x27;}`}
        <span class="hljs-attr">...</span>
      &gt;</span>
        ...
      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

...
</code></pre>
<p>Go try it out! Awesome! It should work as expected.</p>
<p>We use <code>Math.round</code> which rounds to the nearest image, this can be quite difficult to drag more than half of the current image width just to move to the next image. What if our users just do a lazy swipe or drag, it will not move to the next image at all. That can be quite frustrating for them.</p>
<p>So how can we improve that? First, let&#x27;s define a minimum difference needed to move to the next or previous image. We&#x27;ll name this <code>MIN_SWIPE_REQUIRED</code> and set the value as <code>40</code>, I think that&#x27;s enough but feel free to configure this later. On mouse up event, we can check if the difference of between <code>currentOffsetX</code> and <code>offsetX</code> is more than <code>MIN_SWIPE_REQUIRED</code> then we move the images.</p>
<p>If in case you may ask how do we know whether to move to the left or to the right? It would be the <code>sign</code> of the difference. If the difference is <em>positive</em>, we move the images to the right. If the difference is <em>negative</em>, we move the images to the left. We can reuse the same calculation and simply replace <code>Math.round</code> to either <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/floor"><code>Math.floor</code></a> and <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/ceil"><code>Math.ceil</code></a> to get the <code>offsetX</code> required for the next or previous image.</p>
<p>To write all of these in code, let&#x27;s update <code>src/components/Swiper.tsx</code>:</p>
<pre><code class="hljs language-tsx">...

<span class="hljs-keyword">const</span> MIN_SWIPE_REQUIRED = <span class="hljs-number">40</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Swiper</span>(<span class="hljs-params">{ items }: Props</span>) </span>{
  ...

  <span class="hljs-keyword">const</span> onTouchEnd = <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> currentOffsetX = getRefValue(currentOffsetXRef);
    <span class="hljs-keyword">const</span> containerWidth = getRefValue(containerWidthRef);
    <span class="hljs-keyword">let</span> newOffsetX = getRefValue(offsetXRef);

    <span class="hljs-keyword">const</span> diff = currentOffsetX - newOffsetX;

    <span class="hljs-comment">// we need to check difference in absolute/positive value (if diff is more than 40px)</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Math</span>.abs(diff) &gt; MIN_SWIPE_REQUIRED) {
      <span class="hljs-keyword">if</span> (diff &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-comment">// swipe to the right if diff is positive</span>
        newOffsetX = <span class="hljs-built_in">Math</span>.floor(newOffsetX / containerWidth) * containerWidth;
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// swipe to the left if diff is negative</span>
        newOffsetX = <span class="hljs-built_in">Math</span>.ceil(newOffsetX / containerWidth) * containerWidth;
      }
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// remain in the current image</span>
      newOffsetX = <span class="hljs-built_in">Math</span>.round(newOffsetX / containerWidth) * containerWidth;
    }

    setIsSwiping(<span class="hljs-literal">false</span>);
    setOffsetX(newOffsetX);

    ...
  };

...
</code></pre>
<p>I hope that wasn&#x27;t too difficult to understand. Once you save all the changes, try doing a lazy swipe or drag (at least 40 pixel difference!) and see that how our swiper will swipe it to the next or previous image.</p>
<div><ins class="adsbygoogle adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit" style="display:block"></ins></div>
<h2>Swiper indicators</h2>
<p>Okay, before we wrap this up. There&#x27;s one more feature I want to add to our swiper. We can have an indicator to let our users know how many images are in the swiper for them to see and what position the image they&#x27;re currently looking at. This can also give users an option to click on the indicators to move around the images.</p>
<p>The number of indicators we need is simple just how many images we have. We can simply loop the images again to display the indicators. Once we loop them through using <a target="_blank" rel="noopener noreferrer nofollow" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map"><code>Array.map()</code></a> which is how you loop an array to be displayed in React, we can get their <code>index</code>. We can create a state that stores the current index (<code>currentIdx</code>) that determines which image is currently displayed.</p>
<p>For setting the new <code>currentIdx</code> after user does a swipe or drag (on mouse up), we can simply divide the <code>offsetX</code> with the <code>containerWidth</code>, do note that <code>offsetX</code> becomes a negative value when moving to the left so we need to use <code>Math.abs</code>. For moving the images when we click on an indicator, we can multiply the <code>index</code> and the <code>containerWidth</code> and make it negative (to move images to the left).</p>
<p>Let&#x27;s update <code>src/components/Swiper.tsx</code> with the following code below to add in the indicators:</p>
<pre><code class="hljs language-tsx">...

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Swiper</span>(<span class="hljs-params">{ items }: Props</span>) </span>{
  ...
  <span class="hljs-keyword">const</span> [currentIdx, setCurrentIdx] = useState(<span class="hljs-number">0</span>);

  ...

  <span class="hljs-keyword">const</span> onTouchEnd = <span class="hljs-function">() =&gt;</span> {
    ...
    setOffsetX(newOffsetX);
    setCurrentIdx(<span class="hljs-built_in">Math</span>.abs(newOffsetX / containerWidth));

    ...
  };

  ...

  <span class="hljs-keyword">const</span> indicatorOnClick = <span class="hljs-function">(<span class="hljs-params">idx: <span class="hljs-built_in">number</span></span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> containerEl = getRefValue(containerRef);
    <span class="hljs-keyword">const</span> containerWidth = containerEl.offsetWidth;

    setCurrentIdx(idx);
    setOffsetX(-(containerWidth * idx));
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;swiper-container&quot;</span>
      <span class="hljs-attr">...</span>
    &gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>
        <span class="hljs-attr">ref</span>=<span class="hljs-string">{containerRef}</span>
        <span class="hljs-attr">...</span>
      &gt;</span>
        ...
      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;swiper-indicator&quot;</span>&gt;</span>
        {items.map((_item, idx) =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">li</span>
            <span class="hljs-attr">key</span>=<span class="hljs-string">{idx}</span>
            <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">swiper-indicator-item</span> ${
              <span class="hljs-attr">currentIdx</span> === <span class="hljs-string">idx</span> ? &#x27;<span class="hljs-attr">active</span>&#x27; <span class="hljs-attr">:</span> &#x27;&#x27;
            }`}
            <span class="hljs-attr">data-testid</span>=<span class="hljs-string">&quot;incidator&quot;</span> // <span class="hljs-attr">we</span>&#x27;<span class="hljs-attr">ll</span> <span class="hljs-attr">use</span> <span class="hljs-attr">this</span> <span class="hljs-attr">later</span> <span class="hljs-attr">on</span> <span class="hljs-attr">our</span> <span class="hljs-attr">test</span>
            <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> indicatorOnClick(idx)}
          /&gt;
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

...
</code></pre>
<p>Then update <code>src/components/Swiper.css</code> to add the styles for our indicators:</p>
<pre><code class="hljs language-css"><span class="hljs-comment">/* ... */</span>

<span class="hljs-selector-class">.swiper-indicator</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">justify-content</span>: center;
  <span class="hljs-attribute">list-style</span>: none;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">15px</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
}

<span class="hljs-selector-class">.swiper-indicator-item</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">12px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">12px</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> <span class="hljs-number">4px</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#cccccc</span>;
  <span class="hljs-attribute">cursor</span>: pointer;
}

<span class="hljs-selector-class">.swiper-indicator-item</span><span class="hljs-selector-class">.active</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#777777</span>;
}
</code></pre>
<div><ins class="adsbygoogle adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="3748487753" data-ad-format="fluid" data-ad-layout="in-article" data-full-width-responsive="true" data-testid="ad-unit" style="display:block"></ins></div>
<p>Once you save the changes, should be able to see the swiper with the indicator:</p>
<div class="lazyload-wrapper "><div class="lazyload-placeholder"></div></div>
<p>Awesome. Give yourself a pat in the back because you&#x27;ve just built your own swiper!</p>
<p>Time to write some tests!</p>
<p>Proceed to the <a href="/posts/how-to-create-your-own-swiper-in-react-and-typescript-with-tests-part-2/">next part</a>.</p></article><div class="w-11/12 max-w-screen-3xl mx-auto lg:w-5/6"><p class="mt-16 text-gray-400">Found an issue with this post?<!-- --> <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/dominicarrojado/dominicarrojado.github.io/issues">Report it here</a>.</p><div class="mt-24 flex justify-between items-center"><a class="group relative pr-2" href="/posts/how-to-integrate-with-a-rest-api-using-react-hooks-and-typescript-with-tests/"><div class=""><div class="font-normal transition-colors duration-300 group-hover:text-black motion-reduce:transition-none dark:group-hover:text-white">How to integrate with a REST API using React Hooks and TypeScript with tests</div><small class="text-gray-400 transition-colors duration-300 group-hover:text-black motion-reduce:transition-none dark:group-hover:text-white">Previous Post</small></div><svg viewBox="0 0 320 512" role="img" class="absolute top-0 bottom-0 m-auto shrink-0 w-2 h-2 text-black opacity-30 dark:text-white transform transition-transform-opacity duration-300 group-hover:opacity-100 motion-reduce:transition-none sm:w-2.5 sm:h-2.5 md:w-3 md:h-3 xl:w-3.5 xl:h-3.5 -left-5 sm:-left-7 xl:-left-8 group-hover:-translate-x-1.5"><path fill="currentColor" d="M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"></path></svg></a><div></div><a class="group relative pl-2" href="/posts/how-to-create-your-own-swiper-in-react-and-typescript-with-tests-part-2/"><div class="text-right"><div class="font-normal transition-colors duration-300 group-hover:text-black motion-reduce:transition-none dark:group-hover:text-white">How to create your own swiper, carousel or slider in React and TypeScript with tests (Part 2)</div><small class="text-gray-400 transition-colors duration-300 group-hover:text-black motion-reduce:transition-none dark:group-hover:text-white">Next Post</small></div><svg viewBox="0 0 320 512" role="img" class="absolute top-0 bottom-0 m-auto shrink-0 w-2 h-2 text-black opacity-30 dark:text-white transform transition-transform-opacity duration-300 group-hover:opacity-100 motion-reduce:transition-none sm:w-2.5 sm:h-2.5 md:w-3 md:h-3 xl:w-3.5 xl:h-3.5 -right-5 sm:-right-7 xl:-right-8 group-hover:translate-x-1.5"><path fill="currentColor" d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"></path></svg></a></div><div class="mt-16 text-center"><a class="group inline-flex items-center font-normal select-none dark:hover:text-white transition-colors duration-300 hover:text-black group-hover:text-black motion-reduce:transition-none" href="/posts/">See Latest Posts<svg viewBox="0 0 320 512" role="img" class="inline-block w-2 h-2 ml-2 text-black opacity-30 dark:text-white transform transition duration-300 group-hover:translate-x-1.5 group-hover:opacity-100 motion-reduce:transition-none sm:w-2.5 sm:h-2.5 sm:ml-2.5 md:w-3 md:h-3 md:ml-3 xl:w-3.5 xl:h-3.5"><path fill="currentColor" d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"></path></svg></a></div></div><div class="w-11/12 max-w-screen-3xl -mb-8 mx-auto pt-8 sm:-mb-10 sm:pt-10 md:-mb-12 md:pt-12 lg:w-5/6"><ins class="adsbygoogle adUnit_adunit__Qsm4B" data-ad-client="ca-pub-3632473845121107" data-ad-slot="6892691691" data-ad-format="auto" data-full-width-responsive="true" data-testid="ad-unit" style="display:block"></ins></div></section><footer class="py-20 px-6 bg-gray-100 dark:bg-gray-850 overflow-hidden lg:overflow-auto transition-opacity duration-1000 delay-1750 motion-reduce:transition-none opacity-0" data-testid="footer"><ul class="relative text-center overflow-hidden transition-height duration-1000 motion-reduce:transition-none sm:text-lg xl:text-xl" style="height:0"><li class="absolute top-0 left-0 w-full transition-opacity duration-1000 motion-reduce:transition-none"><blockquote>“<!-- -->If there is no struggle, there is no progress.<!-- -->”</blockquote><p class="mt-1 sm:mt-2">— <!-- -->Frederick Douglass</p></li><li class="absolute top-0 left-0 w-full transition-opacity duration-1000 motion-reduce:transition-none opacity-0 pointer-events-none"><blockquote>“<!-- -->It&#x27;s okay to figure out murder mysteries, but you shouldn&#x27;t need to figure out code. You should be able to read it.<!-- -->”</blockquote><p class="mt-1 sm:mt-2">— <!-- -->Steve McConnell</p></li><li class="absolute top-0 left-0 w-full transition-opacity duration-1000 motion-reduce:transition-none opacity-0 pointer-events-none"><blockquote>“<!-- -->If you can&#x27;t explain it simply, you don&#x27;t understand it well enough.<!-- -->”</blockquote><p class="mt-1 sm:mt-2">— <!-- -->Albert Einstein</p></li><li class="absolute top-0 left-0 w-full transition-opacity duration-1000 motion-reduce:transition-none opacity-0 pointer-events-none"><blockquote>“<!-- -->The secret of getting ahead is getting started.<!-- -->”</blockquote><p class="mt-1 sm:mt-2">— <!-- -->Mark Twain</p></li></ul><ul class="max-w-full mt-10 flex flex-wrap justify-center lg:hidden"><li class="flex lg:transform lg:transition lg:ease-in-out lg:duration-500 motion-reduce:lg:transition-none lg:opacity-0 lg:translate-y-full" style="transition-delay:2050ms"><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" aria-describedby="tooltip-donate" href="https://www.paypal.com/paypalme/DominicArrojado" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Buy me a protein shake!"><svg viewBox="0 0 512 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M256 416c114.9 0 208-93.1 208-208S370.9 0 256 0 48 93.1 48 208s93.1 208 208 208zM233.8 97.4V80.6c0-9.2 7.4-16.6 16.6-16.6h11.1c9.2 0 16.6 7.4 16.6 16.6v17c15.5.8 30.5 6.1 43 15.4 5.6 4.1 6.2 12.3 1.2 17.1L306 145.6c-3.8 3.7-9.5 3.8-14 1-5.4-3.4-11.4-5.1-17.8-5.1h-38.9c-9 0-16.3 8.2-16.3 18.3 0 8.2 5 15.5 12.1 17.6l62.3 18.7c25.7 7.7 43.7 32.4 43.7 60.1 0 34-26.4 61.5-59.1 62.4v16.8c0 9.2-7.4 16.6-16.6 16.6h-11.1c-9.2 0-16.6-7.4-16.6-16.6v-17c-15.5-.8-30.5-6.1-43-15.4-5.6-4.1-6.2-12.3-1.2-17.1l16.3-15.5c3.8-3.7 9.5-3.8 14-1 5.4 3.4 11.4 5.1 17.8 5.1h38.9c9 0 16.3-8.2 16.3-18.3 0-8.2-5-15.5-12.1-17.6l-62.3-18.7c-25.7-7.7-43.7-32.4-43.7-60.1.1-34 26.4-61.5 59.1-62.4zM480 352h-32.5c-19.6 26-44.6 47.7-73 64h63.8c5.3 0 9.6 3.6 9.6 8v16c0 4.4-4.3 8-9.6 8H73.6c-5.3 0-9.6-3.6-9.6-8v-16c0-4.4 4.3-8 9.6-8h63.8c-28.4-16.3-53.3-38-73-64H32c-17.7 0-32 14.3-32 32v96c0 17.7 14.3 32 32 32h448c17.7 0 32-14.3 32-32v-96c0-17.7-14.3-32-32-32z"></path></svg></a></li><li class="flex lg:transform lg:transition lg:ease-in-out lg:duration-500 motion-reduce:lg:transition-none lg:opacity-0 lg:translate-y-full" style="transition-delay:2200ms"><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" aria-describedby="tooltip-youtube" href="https://www.youtube.com/channel/UCWwV__qrzg5BYCSwO91Xhxg" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Watch my tech videos!"><svg viewBox="0 0 576 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"></path></svg></a></li><li class="flex lg:transform lg:transition lg:ease-in-out lg:duration-500 motion-reduce:lg:transition-none lg:opacity-0 lg:translate-y-full" style="transition-delay:2350ms"><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" aria-describedby="tooltip-linkedin" href="https://www.linkedin.com/in/dominic-arrojado-75ba03a9/" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Let&#x27;s connect on LinkedIn!"><svg viewBox="0 0 448 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a></li><li class="flex lg:transform lg:transition lg:ease-in-out lg:duration-500 motion-reduce:lg:transition-none lg:opacity-0 lg:translate-y-full" style="transition-delay:2500ms"><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" aria-describedby="tooltip-github" href="https://github.com/dominicarrojado/" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Follow me on GitHub!"><svg viewBox="0 0 496 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></li><li class="flex lg:transform lg:transition lg:ease-in-out lg:duration-500 motion-reduce:lg:transition-none lg:opacity-0 lg:translate-y-full" style="transition-delay:2650ms"><a target="_blank" rel="noopener noreferrer nofollow" tabindex="0" aria-describedby="tooltip-email" href="mailto:dominicarrojado@gmail.com" class="group inline-flex p-3 cursor-pointer sm:p-4" aria-label="Email me!"><svg viewBox="0 0 512 512" role="img" class="w-7 h-7 text-gray-400 dark:text-gray-300 transition-colors group-hover:text-gray-500 motion-reduce:transition-none dark:group-hover:text-white sm:w-8 sm:h-8 xl:w-9 xl:h-9"><path fill="currentColor" d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"></path></svg></a></li></ul><p class="mt-4 text-gray-400 text-sm text-center sm:text-base lg:mt-10 xl:text-lg"><span class="font-normal">©<!-- -->2022<!-- --> Dominic Arrojado</span> <span class="block mt-1 sm:hidden"></span><span class="hidden sm:inline">·</span> <a href="/privacy-policy/">Privacy Policy</a> <!-- -->·<!-- --> <a href="/disclaimer/">Disclaimer</a></p></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"how-to-create-your-own-swiper-in-react-and-typescript-with-tests-part-1","content":"\n## Introduction\n\nSwiper, carousel, slider. I bet you've heard one of these before. They can be easily seen in modern websites today. That's because they provide an interactive section for users to swipe or drag through the slide of images or content. In my early days of web development, I've used a third-party library to implement it in my web projects. But now I've learned how to build one myself and I would like to share this knowledge on how to build your own swiper in [React](https://reactjs.org/) and [TypeScript](https://www.typescriptlang.org/), as well as write tests for it using [Jest](https://jestjs.io/) and [Testing Library](https://testing-library.com/).\n\nThere's nothing wrong with using a third-party library since it saves us a lot of time but it's also not good to be too dependent on it. Sometimes there are extra features you don't need, it will add unnecessary size to your assets bundle. Sometimes customization options are not enough to achieve the expected design of the component. What if there's no third-party library that can implement the component you need? Do you just wait until someone else builds it for you? Learning how to build your own will not only help you avoid these issues but also give you the knowledge and confidence you may require in the future to extend your swiper component or even build other components.\n\nSo if you're interested to learn how to build your own swiper, swipe down (no pun intended)!\n\n## Prerequisites\n\nThis is the [link to the swiper](/react-typescript-swiper/) which we'll accomplish by the end of this post, you can see and play around with it or use it as your reference throughout this tutorial.\n\nUpon writing this post, I assume that you have some web development background and basic knowledge regarding [npm](https://www.npmjs.com/), [yarn](https://classic.yarnpkg.com/lang/en/), [HTML](https://developer.mozilla.org/en-US/docs/Web/HTML), [CSS](https://developer.mozilla.org/en-US/docs/Web/CSS), [JavaScript](https://developer.mozilla.org/en-US/docs/Web/JavaScript) and [React](https://reactjs.org/).\n\nMake sure to install [Yarn](https://classic.yarnpkg.com/lang/en/) in your system if you haven't. We use [Yarn](https://classic.yarnpkg.com/lang/en/) as our package manager, it's just like [npm](https://www.npmjs.com/) but _faster_.\n\nI've written a [separate post](/posts/local-development-setup-for-react-and-typescript-projects/) about the [IDE](https://en.wikipedia.org/wiki/Integrated_development_environment) and extensions I use to help me save time and energy when writing my code in React. I highly suggest for you to check it out if you haven't!\n\n## Initialize your project\n\nFastest way to start a new project with React is using [Create React App](https://create-react-app.dev/). It is an officially supported way to create single-page React applications. It offers a modern build setup with no configuration so you can focus on code, not build tools.\n\nTo create our project with React and TypeScript, run this command in your terminal:\n\n```bash\nyarn create react-app react-typescript-swiper --template typescript\n```\n\nOnce project is initiated, install the additional libraries which we'll be using later on:\n\n```bash\ncd react-typescript-swiper\nyarn add @testing-library/react-hooks faker@5.5.3 @types/faker@5.5.9\n```\n\nTo run our project, execute the command below:\n\n```bash\nyarn start\n```\n\nThis command will open your default browser and go to `http://localhost:3000/`. If it doesn't, you can do it yourself too.\n\nThis setup comes with live-editing or hot reloading which means when we save file changes, it will automatically update the app and reload on the browser. That's great for local development!\n\n---\n\n## Clean up the project\n\nWe're ready to code! Let's clean up our project which was created by Create React App. We won't be needing some of them. Delete or clear the contents of the following below:\n\n- src/App.css (clear contents)\n- src/App.test.tsx (delete)\n- src/logo.svg (delete)\n\nThen let's update the code of `src/App.tsx`:\n\n```tsx\nimport './App.css';\n\nfunction App() {\n  return \u003cdiv className=\"container\"\u003e\u003c/div\u003e;\n}\n\nexport default App;\n```\n\nWe will use the `App` component as the container of our swiper. Then, add the following code to `src/App.css`:\n\n```css\n.container {\n  width: 800px;\n  max-width: 100%;\n  margin: 0 auto;\n  padding: 20px 15px;\n}\n```\n\nAnd update the `src/index.css` too:\n\n```css\n* {\n  box-sizing: border-box;\n}\n\nbody {\n  margin: 0;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto',\n    'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans',\n    'Helvetica Neue', sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n```\n\nThat's about it. This will be the container of our Swiper component.\n\n## Swiper component\n\nNormally, I like to put all my components in a folder called `components`. Go ahead and create that folder under the `src` folder. Once you've done that, create `src/components/Swiper.tsx` and add the following code below:\n\n```tsx\nimport React from 'react';\n\nimport './Swiper.css';\n\nexport default function Swiper() {\n  return (\n    \u003cdiv className=\"swiper-container\"\u003e\n      \u003cul className=\"swiper-list\"\u003e\u003c/ul\u003e\n    \u003c/div\u003e\n  );\n}\n```\n\n---\n\n## Swiper styles\n\nLet's add some style for our Swiper component by creating `src/components/Swiper.css` and add the following code below:\n\n```css\n.swiper-container {\n  width: 100%;\n  max-width: 100%;\n  overflow: auto;\n}\n\n.swiper-list {\n  min-width: 100%;\n  display: flex;\n  flex-direction: row;\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n```\n\nWhen you save these changes, you won't be seeing anything in our web application but a blank page. Don't worry, you'll get to see something very soon! For now, we'll just code it all first. Let's continue.\n\n## SwiperItem component\n\nSince our Swiper component is like a gallery of images we need a separate component for each image and we can name it `SwiperItem` component. Create a file `src/components/SwiperItem.tsx` and add the following code below:\n\n```tsx\nimport React from 'react';\n\nimport './SwiperItem.css';\n\nfunction SwiperItem() {\n  return (\n    \u003cli className=\"swiper-item\"\u003e\n      \u003cimg src=\"\" alt=\"\" className=\"swiper-img\" /\u003e\n    \u003c/li\u003e\n  );\n}\n\nexport default SwiperItem;\n```\n\nAnd let's add the styles for it in `src/components/SwiperItem.css`:\n\n```css\n.swiper-item {\n  width: 100%;\n  flex-shrink: 0;\n}\n\n.swiper-img {\n  width: 100%;\n  height: auto;\n  user-select: none;\n}\n```\n\nAlright, currently our `SwiperItem` component is not reusable to display different images, how do you make a component reusable? Through [component props](https://reactjs.org/docs/components-and-props.html)! For this tutorial, we just need the source URL of the image and an alternative text for each item. Both values are required and should be `string`. For those new to TypeScript, this will be your first encounter of the syntax, I'll be explaning it in a bit. Let's update `src/components/SwiperItem.tsx` first with the codes below:\n\n```tsx\nimport React from 'react';\n\nimport './SwiperItem.css';\n\nfunction SwiperItem({\n  imageSrc,\n  imageAlt,\n}: {\n  imageSrc: string;\n  imageAlt: string;\n}) {\n  return (\n    \u003cli className=\"swiper-item\"\u003e\n      \u003cimg src={imageSrc} alt={imageAlt} className=\"swiper-img\" /\u003e\n    \u003c/li\u003e\n  );\n}\n\nexport default SwiperItem;\n```\n\nOk, if you're new to TypeScript, this is how we can create a type for our props (or any object). If we try to use our `SwiperItem` component without passing any props, TypeScript would throw an error. Because we defined the type of the fields in our props to be _required_. Same thing would happen if you try to pass another type which is _not_ a `string`. Let's say you pass a type of a `number`, that would also throw an error. You can already see how helpful TypeScript is in catching potential issues early on.\n\nYou might ask, how do we define an _optional_ field? You can do that by adding a question mark before the `:` like this:\n\n```ts\n{\n  imageSrc?: string;\n  imageAlt?: string;\n}\n```\n\nAlright, we're not done yet. I already forsee that we would be reusing the same type in our `Swiper` component. So what I normally like to do is place reusable types in a single file. Let's go ahead and do that.\n\n---\n\n## Create the type\n\nCreate `src/types.ts`. This will be the place we could put shared types across components to reduce code duplication, although for this guide, we are only going to add one type, that would be the `SwiperItemType`. So update the file with the following code:\n\n```ts\nexport type SwiperItemType = {\n  imageSrc: string;\n  imageAlt: string;\n};\n```\n\nThis is how we can declare a type (or [type aliases](https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#type-aliases)) and make it reusable by exporting it.\n\nNow go back to `SwiperItem` component and update the code to use the type alias we just created:\n\n```tsx\nimport React from 'react';\nimport { SwiperItemType } from '../types';\n\nimport './SwiperItem.css';\n\n// exported so we can use later in tests\nexport type Props = SwiperItemType;\n\nfunction SwiperItem({ imageSrc, imageAlt }: Props) {\n  return (\n    \u003cli className=\"swiper-item\"\u003e\n      \u003cimg src={imageSrc} alt={imageAlt} className=\"swiper-img\" /\u003e\n    \u003c/li\u003e\n  );\n}\n\nexport default SwiperItem;\n```\n\n## Swiper + SwiperItem component\n\nWe can now use `SwiperItem` component in our `Swiper` component. Since our `Swiper` component would be the main component that will be reused across our React application. It needs to accept a prop that is an array of swiper items. Remember we already created the type for that, we just need to wrap it in an `Array` to tell TypeScript that the field accepts an array of `SwiperItemType`. You can see the code below on how to do that, simply update our `Swiper` component with this:\n\n```tsx\nimport React from 'react';\nimport { SwiperItemType } from '../types';\nimport SwiperItem from './SwiperItem';\n\nimport './Swiper.css';\n\n// exported so we can use later in tests\nexport type Props = {\n  items: Array\u003cSwiperItemType\u003e;\n};\n\nfunction Swiper({ items }: Props) {\n  return (\n    \u003cdiv className=\"swiper-container\"\u003e\n      \u003cul className=\"swiper-list\"\u003e\n        {items.map((item, idx) =\u003e (\n          \u003cSwiperItem key={idx} {...item} /\u003e\n        ))}\n      \u003c/ul\u003e\n    \u003c/div\u003e\n  );\n}\n\nexport default Swiper;\n```\n\n---\n\n## Sample data\n\nWe're almost there to seeing something in our browser. We would need some sample data. I found [some images](https://mdn.github.io/learning-area/javascript/building-blocks/gallery/) we could use from [MDN Web Docs](https://developer.mozilla.org/en-US/). I don't own these images and I hope they don't mind if we use them for this tutorial, all credits goes to them. Please open the images below in another tab and download them:\n\n- [pic1.jpeg](/react-typescript-swiper/pic1.jpeg)\n- [pic2.jpeg](/react-typescript-swiper/pic2.jpeg)\n- [pic3.jpeg](/react-typescript-swiper/pic3.jpeg)\n- [pic4.jpeg](/react-typescript-swiper/pic4.jpeg)\n- [pic5.jpeg](/react-typescript-swiper/pic5.jpeg)\n\nAfter you've downloaded them all, put them in the `public` folder of your React project.\n\nThen let's update our `App` component with the code below:\n\n```tsx\nimport './App.css';\nimport Swiper from './components/Swiper';\n\nfunction App() {\n  const items = [\n    {\n      imageSrc: '/pic1.jpeg',\n      imageAlt: \"A person's eye\",\n    },\n    {\n      imageSrc: '/pic2.jpeg',\n      imageAlt: 'A rock formation',\n    },\n    {\n      imageSrc: '/pic3.jpeg',\n      imageAlt: 'Some flowers',\n    },\n    {\n      imageSrc: '/pic4.jpeg',\n      imageAlt: 'An egyptian wall painting',\n    },\n    {\n      imageSrc: '/pic5.jpeg',\n      imageAlt: 'A butterfly on a leaf',\n    },\n  ];\n\n  return (\n    \u003cdiv className=\"container\"\u003e\n      \u003cSwiper items={items} /\u003e\n    \u003c/div\u003e\n  );\n}\n\nexport default App;\n```\n\nOnce you save the changes, you should see something like this:\n\n![Screenshot of React Swiper 1](/images/posts/how-to-create-your-own-swiper-in-react-and-typescript-with-tests/swiper-1.png)\n\nI know, there's a creepy eye looking at us! But in the bright side, that's when we know everything is working fine as expected. You could also see that there's a scroll bar below the image, you can scroll to see the other images. For the next steps, this scroll bar should be hidden and we should be able to swipe through our gallery of images by doing a drag action in desktop or swipe in mobile. So let's continue!\n\n---\n\n## Touch/Drag logic\n\nBefore we proceed to coding, I want to explain what we want to accomplish so you get a better grasp of what is being coded and why is the logic like this. To better explain it, let's do it in a step-by-step way:\n\n| #   | User actions                                   | Swiper logic                                                                                                  |\n| --- | ---------------------------------------------- | ------------------------------------------------------------------------------------------------------------- |\n| 1   | User sees the Swiper                           | First image is displayed                                                                                      |\n| 2   | User clicks/touches the swiper                 | Position of click/touch is recorded as starting position                                                      |\n| 3   | User holds and drags/swipes from right to left | Difference between starting position and current position calculated to move image along with the user action |\n| 4   | User lets go of drag/swipe                     | New image is displayed depending on nearest position                                                          |\n\nAlright, I hope with this you get an understanding what code we need to add in our `Swiper` component.\n\nTo start, let's make a minor update of the style of our `Swiper` component to hide the scroll bar. We won't be needing it. Go to `src/components/Swiper.css` and update with the following code:\n\n```css\n.swiper-container {\n  ...\n  overflow: hidden;\n  touch-action: pan-y; /* prevent browser's default behaviour on swiping horizontally */\n}\n```\n\nIn web browsers, there's this behaviour that you can drag a link or an image to open it in a new tab, this will affect our touch/drag logic, so in order to prevent that, let's also make a minor code update in our `src/components/SwiperItem.tsx`:\n\n```tsx\n...\n\nfunction SwiperItem({ imageSrc, imageAlt }: SwiperItemType) {\n  return (\n    \u003cli className=\"swiper-item\"\u003e\n      \u003cimg\n        ...\n        draggable={false}\n      /\u003e\n    \u003c/li\u003e\n  );\n}\n\n...\n```\n\nNext, let's create `src/lib/hooks.ts` and create a couple of hooks utility functions:\n\n```tsx\nimport { useRef, useState, RefObject } from 'react';\n\n// to get the value of a ref from `useRef`\nexport function getRefValue\u003cC\u003e(ref: RefObject\u003cC\u003e) {\n  return ref.current as C;\n}\n\n// extension of `useState` to be able to access the state as a ref\nexport function useStateRef\u003cS\u003e(\n  defaultValue: S\n): [S, (value: S) =\u003e void, RefObject\u003cS\u003e] {\n  const ref = useRef\u003cS\u003e(defaultValue);\n  const [state, _setState] = useState\u003cS\u003e(defaultValue);\n  const setState = (value: S) =\u003e {\n    _setState(value);\n    ref.current = value;\n  };\n\n  return [state, setState, ref];\n}\n```\n\nI use these utility functions a lot in my projects and it is extremely helpful when writing tests to achieve `100%` coverage, especially those components that uses `RefObject` for elements. If you're new to TypeScript, you might be wonder what is this `C` or `S` around the code? It can be any letter by the way or word if you would like, and it is called [Generics](https://www.typescriptlang.org/docs/handbook/2/generics.html), it makes our utility function here accept the type defined when the `RefObject` or the state is passed because it can have any type. Using Generics, our function here would be able to return the same type.\n\n```tsx\n// let's say we set the initial value with a type of `number` in `useRef`\nconst numberRef = useRef(0);\n\n// when we use `getRefValue` to get the value of the ref\n// TypeScript would then assume this would return a type of `number`\ngetRefValue(numberRef);\n```\n\n---\n\nFinally, go to `src/components/Swiper.tsx` and let's try to think how do we move the images the way we do when there was a scroll bar. If you guessed it right, we can use a transform function in CSS to move the parent element of the images. We can use [`translateX`](\u003chttps://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/translateX()\u003e) or [`translate3d`](\u003chttps://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/translate3d()\u003e). Let's use `translate3d` instead because I've seen popular swiper libraries often use it for better performance. We need to store the value required for `translate3d` as a state. Let's call this value as `offsetX`. Let's use `useStateRef` for that instead of `useState` because we need to access the state value as a `ref` in one of our event listeners later on.\n\n```tsx\n...\nimport { useStateRef } from '../lib/hooks';\n\n...\n\nfunction Swiper({ items }: Props) {\n  const [offsetX, setOffsetX, offsetXRef] = useStateRef(0);\n\n  return (\n    \u003cdiv className=\"swiper-container\"\u003e\n      \u003cul\n        className=\"swiper-list\"\n        style={{ transform: `translate3d(${offsetX}px, 0, 0)` }}\n      \u003e\n        {items.map((item, idx) =\u003e (\n          \u003cSwiperItem key={idx} {...item} /\u003e\n        ))}\n      \u003c/ul\u003e\n    \u003c/div\u003e\n  );\n}\n\n...\n```\n\n`0` would be the default value for our `offsetX` state and that will display the first image. Try replacing `0` with a negative value (e.g. `-800`), if you're in a desktop viewport, it should display the second image. This is how we're going to move the images in a reactive way.\n\nNormally, I develop features or logic in a [mobile-first approach](https://developer.mozilla.org/en-US/docs/Web/Progressive_web_apps/Responsive/Mobile_first) but I thought it would be easier to code and explain to you if we cover the mouse events first. Let's create the first mouse event, `onMouseDown` which is triggered when you click on the element that is listening to that event. Let's update `src/components/Swiper.tsx` with the code below:\n\n```tsx\n...\n\nfunction Swiper({ items }: Props) {\n  ...\n\n  const onMouseDown = (e: React.MouseEvent\u003cHTMLDivElement\u003e) =\u003e {};\n\n  return (\n    \u003cdiv className=\"swiper-container\" onMouseDown={onMouseDown}\u003e\n      ...\n    \u003c/div\u003e\n  );\n}\n\n...\n```\n\nIf you're new to TypeScript, you would need to define the type of `e` (or event data). Since we attached the `onMouseDown` listener in a reactive way, it receives a custom event data from React. So instead of simply using `MouseEvent` as the type of `e`, we need to use `React.MouseEvent` which accepts an argument of what type of `Element` do we expect, in this case we expect it to be an `HTMLDivElement`.\n\nAlright, inside the listener, what we can do is save the current offset `x`. We already have `offsetX`, so why we need a separate storage for the current offset `x`? That's because we're using `offsetX` to move the images, if it's going to be changed on every mouse move event, we will lose track what was the original offset `x` value on mouse down. We need the original offset `x` so we could deduct it with the difference of starting `x` position and moving `x` position, in order to create the effect where the images follow our mouse cursor. Let's call this current offset `x` as `currentOffsetX` and we can store it in [`useRef`](https://reactjs.org/docs/hooks-reference.html#useref) so it could be access by other event listeners later on. To write this in code, it would be like this:\n\n```tsx\n...\nimport { getRefValue, useStateRef } from '../lib/hooks';\n\n...\n\nfunction Swiper({ items }: Props) {\n  const currentOffsetXRef = useRef(0);\n  const [offsetX, setOffsetX, offsetXRef] = useStateRef(0);\n\n  const onMouseDown = (e: React.MouseEvent\u003cHTMLDivElement\u003e) =\u003e {\n    currentOffsetXRef.current = getRefValue(offsetXRef);\n  };\n\n  ...\n}\n\n...\n```\n\n---\n\nIn our `onMouseDown` function, we can also save the starting `x` position returned from the event data. Let's name it `startX` and we could use this value later to calculate the offset required for the images to follow our mouse cursor. Update `src/components/Swiper.tsx` with the following code below:\n\n```tsx\n...\n\nfunction Swiper({ items }: Props) {\n  const currentOffsetXRef = useRef(0);\n  const startXRef = useRef(0);\n  const [offsetX, setOffsetX, offsetXRef] = useStateRef(0);\n\n  const onMouseDown = (e: React.MouseEvent\u003cHTMLDivElement\u003e) =\u003e {\n    currentOffsetXRef.current = getRefValue(offsetXRef);\n    startXRef.current = e.clientX;\n  };\n\n  ...\n}\n\n...\n```\n\nWe can now create the two other mouse event listeners, namely `onMouseMove` and `onMouseUp`. The sequence of a dragging using your mouse is like this:\n\nSTART -\u003e `onMouseDown` -\u003e `onMouseMove` -\u003e `onMouseUp` -\u003e END\n\nSo we only need to listen to these two events when user triggers `onMouseDown`. We can start listening to these two other events inside `onMouseDown`. Update `src/components/Swiper.tsx` with the following code below:\n\n```tsx\n...\n\nfunction Swiper({ items }: Props) {\n  ...\n\n  const onMouseMove = (e: MouseEvent) =\u003e {};\n  const onMouseUp = () =\u003e {\n    window.removeEventListener('mouseup', onMouseUp);\n    window.removeEventListener('mousemove', onMouseMove);\n  };\n  const onMouseDown = (e: React.MouseEvent\u003cHTMLDivElement\u003e) =\u003e {\n    ...\n\n    window.addEventListener('mousemove', onMouseMove);\n    window.addEventListener('mouseup', onMouseUp);\n  };\n\n  ...\n}\n\n...\n```\n\nWe attached these two events in the `window` so that even if the mouse cursor goes out of the list element, it will still continue to fire both the mouse move and mouse up event. You would also notice the type of `e` from `onMouseMove` is using just the `MouseEvent` which is not from React, you don't have to import it from anywhere, it can used as is. We also didn't have to define `e` from `onMouseUp` because we just need it to remove the event listeners once it is triggered and don't need anything from the event data.\n\nNow, let's then add the code inside `onMouseMove`, here it is:\n\n```tsx\n...\n\nfunction Swiper({ items }: Props) {\n  ...\n\n  const onMouseMove = (e: MouseEvent) =\u003e {\n    const currentX = e.clientX;\n    const diff = getRefValue(startXRef) - currentX;\n    const newOffsetX = getRefValue(currentOffsetXRef) - diff;\n\n    setOffsetX(newOffsetX);\n  };\n\n  ...\n}\n\n...\n```\n\nHere, we took the `x` position from the event data and named it `currentX`. We then calculated the difference between the `startX` and the `currentX`, this difference is then subtracted from `currentOffsetX`. The final difference will then be the new value for `offsetX`.\n\nOnce all of the changes are done, you should be able to drag using your mouse to move the container of images horizontally. Isn't that great? I think yes!\n\n---\n\nTo apply the same logic for mobile. Create a file `src/lib/dom.ts` and add the following code:\n\n```tsx\nimport React from 'react';\n\nexport function getTouchEventData(\n  e:\n    | TouchEvent\n    | MouseEvent\n    | React.TouchEvent\u003cHTMLElement\u003e\n    | React.MouseEvent\u003cHTMLElement\u003e\n) {\n  return 'changedTouches' in e ? e.changedTouches[0] : e;\n}\n```\n\nI created this helper function because in touch events, it doesn't return the `clientX` in the event data, it is stored in the `changedTouches` array. So if `changedTouches` exists in the event data, then we should get the `clientX` value from the first element of it. If you're new to TypeScript, we could use pipe `|` to do like an `OR` condition, so what we did here is basically defined the type of the argument `e` such that it can be a `TouchEvent` or a `MouseEvent` which are for events we attach using `.addEventListener()`. It could also be a `React.TouchEvent\u003cHTMLElement\u003e` or a `React.MouseEvent\u003cHTMlElement\u003e` which are event listeners we attach in an element as an attribute (e.g. `onTouchStart`, `onMouseDown`, etc.).\n\nAlright, let's do some renaming in `src/components/Swiper.tsx` for a mobile-first approach and make use of this new helper function:\n\n```tsx\n...\nimport { getTouchEventData } from '../lib/dom';\n\n...\n\nfunction Swiper({ items }: Props) {\n  ...\n\n  const onTouchMove = (e: TouchEvent | MouseEvent) =\u003e {\n    const currentX = getTouchEventData(e).clientX;\n\n    ...\n  };\n  const onTouchEnd = () =\u003e {\n    window.removeEventListener('touchend', onTouchEnd);\n    window.removeEventListener('touchmove', onTouchMove);\n    window.removeEventListener('mouseup', onTouchEnd);\n    window.removeEventListener('mousemove', onTouchMove);\n  };\n  const onTouchStart = (\n    e: React.TouchEvent\u003cHTMLDivElement\u003e | React.MouseEvent\u003cHTMLDivElement\u003e\n  ) =\u003e {\n    ...\n    window.addEventListener('touchmove', onTouchMove);\n    window.addEventListener('touchend', onTouchEnd);\n    window.addEventListener('mousemove', onTouchMove);\n    window.addEventListener('mouseup', onTouchEnd);\n  };\n\n  return (\n    \u003cdiv\n      className=\"swiper-container\"\n      onTouchStart={onTouchStart}\n      onMouseDown={onTouchStart}\n    \u003e\n      ...\n    \u003c/div\u003e\n  );\n}\n\n...\n```\n\nIf you try dragging using your mouse, it should still work like before. If your browser supports [device toolbar](https://developer.chrome.com/docs/devtools/device-mode/), you can verify that using touch would work also work. This is how it looks like when using the device toolbar in [Google Chrome](https://www.google.com/intl/en_sg/chrome/):\n\n![Screenshot of React Swiper in device toolbar](/images/posts/how-to-create-your-own-swiper-in-react-and-typescript-with-tests/swiper-mobile.png)\n\nOkay, we're not done yet though. You might have already noticed it while testing. When you swipe or drag too far away from the first image or last image, you'll see nothing. For user experience, that's not really great. We should prevent that.\n\n---\n\n## Prevent swiping on both ends\n\nTo fix the problem, we need to understand the problem. We already know that we use `offsetX` to move the container of the image, and that it shouldn't move beyond the images. So we need to know the value of the far most left `offsetX` value and the far most right `offsetX` value. The far most left is easy, we start with 0 for `offsetX` to display the first image, there's no image before the first image, so that is already the first end. So what is the far most right `offsetX` value? That would be the width of the container. Let's name far most left `offsetX` value to be `maxOffsetX` while the far most right `offsetX` value to be `minOffsetX`.\n\nTo get into coding, let's declare the `useRef` for the container element in `/src/components/Swiper.tsx` so we could get its `offsetWidth`:\n\n```tsx\n...\n\nfunction Swiper({ items }: Props) {\n  const containerRef = useRef\u003cHTMLUListElement\u003e(null);\n\n  ...\n\n  return (\n    \u003cdiv\n      className=\"swiper-container\"\n      ...\n    \u003e\n      \u003cul\n        ref={containerRef}\n        ...\n      \u003e\n        ...\n      \u003c/ul\u003e\n    \u003c/div\u003e\n  );\n}\n\n...\n```\n\nIf you're new to TypeScript, this is [how](https://github.com/typescript-cheatsheets/react#option-1-dom-element-ref) we declare a ref for an element, we provide the element type and use `null` as initial value. TypeScript expects you to give this ref to an element's ref prop or attribute.\n\nNext, let's calculate the the `minOffsetX` on mouse down event so we don't have to keep calculating it during mouse move because that would be inefficient. Let's update our `src/components/Swiper.tsx`:\n\n```tsx\n...\n\nfunction Swiper({ items }: Props) {\n  ...\n  const minOffsetXRef = useRef(0);\n\n  ...\n\n  const onTouchStart = (\n    e: React.TouchEvent\u003cHTMLDivElement\u003e | React.MouseEvent\u003cHTMLDivElement\u003e\n  ) =\u003e {\n    ...\n\n    const containerEl = getRefValue(containerRef);\n\n    minOffsetXRef.current = containerEl.offsetWidth - containerEl.scrollWidth;\n\n    ...\n  };\n\n  ...\n}\n\n...\n```\n\nJust in case you're wondering how we came up with this calculation. We needed to get the entire width of all the images together and that value would be the container's `scrollWidth`. Since we start from `0` to display the first image, to display the image it would not be negative value of `scrollWidth`, we need to deduct the display size of the container on to it. And in case you forget, we need a negative value to move the images from right to the left.\n\nAlright, now that we know `maxOffsetX` is `0` and we already computed `minOffsetX` on mouse down. Let's add some `if` conditions to prevent swiping from both ends. Simple update `src/components/Swiper.tsx` with the following code:\n\n```tsx\n...\n\nfunction Swiper({ items }: Props) {\n  ...\n\n  const onTouchMove = (e: TouchEvent | MouseEvent) =\u003e {\n    ...\n    let newOffsetX = getRefValue(currentOffsetXRef) - diff;\n\n    const maxOffsetX = 0;\n    const minOffsetX = getRefValue(minOffsetXRef);\n\n    if (newOffsetX \u003e maxOffsetX) {\n      newOffsetX = maxOffsetX;\n    }\n\n    if (newOffsetX \u003c minOffsetX) {\n      newOffsetX = minOffsetX;\n    }\n\n    setOffsetX(newOffsetX);\n  };\n\n  ...\n}\n\n...\n```\n\nAfter saving the changes, you can go back and try swiping through your swiper and you wouldn't be able to swipe if you are at either both ends. Cool!\n\nNext thing we need to solve is the difficulty in swiping through the images, our Swiper component should be able to let us swipe easily to the next image and place the next image in display properly because we want our users to do less swiping and also let them view each images in full, not in split view.\n\n---\n\n## Auto swipe to nearest image\n\nTo swipe images exactly in their position, we need to understand each `offsetX` value to display the images. Let's say in a large screen resolution, our container width would be `800px`. We know that `offsetX` starts with `0px` which displays the first image. To display the second image, you would need the `offsetX` to be `800px` which is the same as the container width. To display the third image, you would need the `offsetX` to be `1600px` which is twice the container width. And we just keep multiplying the container width until we reach the last image. With this, we can basically say that it's always the multiples of the container width because our images takes up `100%` of the container which what we have defined in the CSS style.\n\nSo the logic we need to do is basically when user stops dragging/swiping (`onMouseUp` event listener), our logic should swipe it to the nearest image. How do we get the nearest image? We can round off the last `offsetX` position to the nearest multiples of the container width. We can use [`Math.round`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/round) and the formula for rounding to the nearest multiple of a number (in this case the `containerWidth`) is like this:\n\n```js\nMath.round(offsetX / containerWidth) * containerWidth;\n\n// for example, we want to round off to the nearest multiples of `5`\n// result would be 0, 5, 10, 15, and so on ...\nMath.round(1 / 5) * 5; // 0\nMath.round(2 / 5) * 5; // 0\nMath.round(4 / 5) * 5; // 5\nMath.round(5 / 5) * 5; // 5\nMath.round(8 / 5) * 5; // 10\n```\n\nLet's use this formula and update the code for `src/container/Swiper.tsx`:\n\n```tsx\n\n...\n\nfunction Swiper({ items }: Props) {\n  ...\n\n  const onTouchEnd = () =\u003e {\n    const containerWidth = getRefValue(containerWidthRef);\n    let newOffsetX = getRefValue(offsetXRef);\n    newOffsetX = Math.round(newOffsetX / containerWidth) * containerWidth;\n\n    setOffsetX(newOffsetX);\n\n    ...\n  };\n\n  ...\n}\n\n...\n```\n\nNow try dragging/swiping through the images and let go, it should show the nearest image within the container properly, what I meant by properly here is that the position is just nice to display you the image in full.\n\nIt's a little bit abrupt right now. So let's try adding some [CSS transitions](https://developer.mozilla.org/en-US/docs/Web/CSS/transition) so this logic will look more sleek. Go to `src/container/Swiper.css` and update the code with this:\n\n```css\n/* ... */\n\n.swiper-list {\n  ...\n  transition: transform 0.3s ease-out;\n}\n\n.swiper-list.is-swiping {\n  transition: none;\n}\n```\n\nAlright, and let's update `src/container/Swiper.tsx` to make use of this transition style:\n\n```tsx\nimport React, { useState, useRef } from 'react';\n\n...\n\nfunction Swiper({ items }: Props) {\n  ...\n\n  const [isSwiping, setIsSwiping] = useState(false);\n\n  ...\n\n  const onTouchEnd = () =\u003e {\n    ...\n\n    setIsSwiping(false);\n    setOffsetX(newOffsetX);\n\n    ...\n  };\n  const onTouchStart = (\n    e: React.TouchEvent\u003cHTMLDivElement\u003e | React.MouseEvent\u003cHTMLDivElement\u003e\n  ) =\u003e {\n    setIsSwiping(true);\n\n    ...\n  };\n\n  return (\n    \u003cdiv\n      className=\"swiper-container\"\n      ...\n    \u003e\n      \u003cul\n        ref={containerRef}\n        className={`swiper-list ${isSwiping ? 'is-swiping' : ''}`}\n        ...\n      \u003e\n        ...\n      \u003c/ul\u003e\n    \u003c/div\u003e\n  );\n}\n\n...\n```\n\nGo try it out! Awesome! It should work as expected.\n\nWe use `Math.round` which rounds to the nearest image, this can be quite difficult to drag more than half of the current image width just to move to the next image. What if our users just do a lazy swipe or drag, it will not move to the next image at all. That can be quite frustrating for them.\n\nSo how can we improve that? First, let's define a minimum difference needed to move to the next or previous image. We'll name this `MIN_SWIPE_REQUIRED` and set the value as `40`, I think that's enough but feel free to configure this later. On mouse up event, we can check if the difference of between `currentOffsetX` and `offsetX` is more than `MIN_SWIPE_REQUIRED` then we move the images.\n\nIf in case you may ask how do we know whether to move to the left or to the right? It would be the `sign` of the difference. If the difference is _positive_, we move the images to the right. If the difference is _negative_, we move the images to the left. We can reuse the same calculation and simply replace `Math.round` to either [`Math.floor`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/floor) and [`Math.ceil`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/ceil) to get the `offsetX` required for the next or previous image.\n\nTo write all of these in code, let's update `src/components/Swiper.tsx`:\n\n```tsx\n...\n\nconst MIN_SWIPE_REQUIRED = 40;\n\nfunction Swiper({ items }: Props) {\n  ...\n\n  const onTouchEnd = () =\u003e {\n    const currentOffsetX = getRefValue(currentOffsetXRef);\n    const containerWidth = getRefValue(containerWidthRef);\n    let newOffsetX = getRefValue(offsetXRef);\n\n    const diff = currentOffsetX - newOffsetX;\n\n    // we need to check difference in absolute/positive value (if diff is more than 40px)\n    if (Math.abs(diff) \u003e MIN_SWIPE_REQUIRED) {\n      if (diff \u003e 0) {\n        // swipe to the right if diff is positive\n        newOffsetX = Math.floor(newOffsetX / containerWidth) * containerWidth;\n      } else {\n        // swipe to the left if diff is negative\n        newOffsetX = Math.ceil(newOffsetX / containerWidth) * containerWidth;\n      }\n    } else {\n      // remain in the current image\n      newOffsetX = Math.round(newOffsetX / containerWidth) * containerWidth;\n    }\n\n    setIsSwiping(false);\n    setOffsetX(newOffsetX);\n\n    ...\n  };\n\n...\n```\n\nI hope that wasn't too difficult to understand. Once you save all the changes, try doing a lazy swipe or drag (at least 40 pixel difference!) and see that how our swiper will swipe it to the next or previous image.\n\n---\n\n## Swiper indicators\n\nOkay, before we wrap this up. There's one more feature I want to add to our swiper. We can have an indicator to let our users know how many images are in the swiper for them to see and what position the image they're currently looking at. This can also give users an option to click on the indicators to move around the images.\n\nThe number of indicators we need is simple just how many images we have. We can simply loop the images again to display the indicators. Once we loop them through using [`Array.map()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map) which is how you loop an array to be displayed in React, we can get their `index`. We can create a state that stores the current index (`currentIdx`) that determines which image is currently displayed.\n\nFor setting the new `currentIdx` after user does a swipe or drag (on mouse up), we can simply divide the `offsetX` with the `containerWidth`, do note that `offsetX` becomes a negative value when moving to the left so we need to use `Math.abs`. For moving the images when we click on an indicator, we can multiply the `index` and the `containerWidth` and make it negative (to move images to the left).\n\nLet's update `src/components/Swiper.tsx` with the following code below to add in the indicators:\n\n```tsx\n...\n\nfunction Swiper({ items }: Props) {\n  ...\n  const [currentIdx, setCurrentIdx] = useState(0);\n\n  ...\n\n  const onTouchEnd = () =\u003e {\n    ...\n    setOffsetX(newOffsetX);\n    setCurrentIdx(Math.abs(newOffsetX / containerWidth));\n\n    ...\n  };\n\n  ...\n\n  const indicatorOnClick = (idx: number) =\u003e {\n    const containerEl = getRefValue(containerRef);\n    const containerWidth = containerEl.offsetWidth;\n\n    setCurrentIdx(idx);\n    setOffsetX(-(containerWidth * idx));\n  };\n\n  return (\n    \u003cdiv\n      className=\"swiper-container\"\n      ...\n    \u003e\n      \u003cul\n        ref={containerRef}\n        ...\n      \u003e\n        ...\n      \u003c/ul\u003e\n      \u003cul className=\"swiper-indicator\"\u003e\n        {items.map((_item, idx) =\u003e (\n          \u003cli\n            key={idx}\n            className={`swiper-indicator-item ${\n              currentIdx === idx ? 'active' : ''\n            }`}\n            data-testid=\"incidator\" // we'll use this later on our test\n            onClick={() =\u003e indicatorOnClick(idx)}\n          /\u003e\n        ))}\n      \u003c/ul\u003e\n    \u003c/div\u003e\n  );\n}\n\n...\n```\n\nThen update `src/components/Swiper.css` to add the styles for our indicators:\n\n```css\n/* ... */\n\n.swiper-indicator {\n  display: flex;\n  justify-content: center;\n  list-style: none;\n  margin: 15px 0 0 0;\n  padding: 0;\n}\n\n.swiper-indicator-item {\n  width: 12px;\n  height: 12px;\n  margin: 0 4px;\n  border-radius: 50%;\n  background-color: #cccccc;\n  cursor: pointer;\n}\n\n.swiper-indicator-item.active {\n  background-color: #777777;\n}\n```\n\n---\n\nOnce you save the changes, should be able to see the swiper with the indicator:\n\n![Screenshot of React Swiper 2](/images/posts/how-to-create-your-own-swiper-in-react-and-typescript-with-tests/swiper-2.png)\n\nAwesome. Give yourself a pat in the back because you've just built your own swiper!\n\nTime to write some tests!\n\nProceed to the [next part](/posts/how-to-create-your-own-swiper-in-react-and-typescript-with-tests-part-2).\n","previousPost":{"id":"how-to-integrate-with-a-rest-api-using-react-hooks-and-typescript-with-tests","title":"How to integrate with a REST API using React Hooks and TypeScript with tests","date":"2021-12-04","excerpt":"Learn how to integrate with a REST API in a reactive and reusable way","category":"technology","videoUrl":"https://youtu.be/LkumZ2Z7bbs"},"nextPost":{"id":"how-to-create-your-own-swiper-in-react-and-typescript-with-tests-part-2","title":"How to create your own swiper, carousel or slider in React and TypeScript with tests (Part 2)","date":"2022-02-11","excerpt":"Learn how to build a modern mobile touch swiper in a reactive and reusable way","category":"technology","videoUrl":"https://youtu.be/V0dfhBc2lj8"},"title":"How to create your own swiper, carousel or slider in React and TypeScript with tests (Part 1)","date":"2022-02-11","excerpt":"Learn how to build a modern mobile touch swiper in a reactive and reusable way","category":"technology","videoUrl":"https://youtu.be/V0dfhBc2lj8"}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"how-to-create-your-own-swiper-in-react-and-typescript-with-tests-part-1"},"buildId":"WUIasYkuXjHUrNxmXuaI-","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>